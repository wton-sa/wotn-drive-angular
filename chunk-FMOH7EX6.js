import{a as kr,b as Zt,c as yi,d as Pe,e as zr,f as Ci,g as Nr,h as Lr,i as Ur}from"./chunk-USCGIZLD.js";import{a as Or}from"./chunk-WW3I3R4A.js";import{$a as F,$b as pr,$c as jt,Ab as We,Ac as vr,Ad as ln,B as tr,Bb as en,Bc as ho,Bd as bi,Ca as N,Cb as u,Cc as _r,D as St,Da as Rt,Db as g,Dc as br,Dd as Ar,E as gi,Ea as rr,Eb as Q,Ec as yr,Ed as cn,Fa as ar,Fb as Xe,Fc as go,Fd as dn,Ga as sr,Gb as se,Gc as Cr,Ha as T,Hc as xr,Ib as tn,Ic as Sr,Ja as Ft,Jc as wr,K as vi,Ka as v,Kc as vo,La as ut,Lc as Ir,Ma as V,Mc as Fr,Na as lr,Nc as Pr,O as ir,Oa as Vi,Oc as Tr,P as ge,Pa as K,Pc as jr,Q as Bt,Qc as Er,Rc as Mr,S as Vt,Sc as rn,Ta as s,Tb as lt,Ua as l,Ub as J,Va as C,Vb as X,Vc as _i,W as Yi,Wa as Oe,Wb as uo,Wc as Tt,X as b,Xa as De,Xb as fo,Y as y,Ya as st,Yb as dr,Yc as he,Z as wt,Za as k,Zb as nn,Zc as ri,_ as Bi,_b as Ri,_c as ai,a as ve,ab as _,ac as on,b as $e,ba as nr,bb as ni,bc as xe,cb as At,cc as Ht,d as Xi,da as W,db as L,dc as oi,dd as oe,eb as Pt,fb as zt,g as po,gb as ie,gd as de,h as yt,ha as fe,hb as Z,hd as re,ib as G,ic as Ai,id as Dr,jc as Qt,jd as Br,kc as $t,kd as an,l as Ct,lb as A,ld as Vr,mb as p,md as Le,n as rt,nb as S,nd as si,oa as or,ob as D,p as mt,pa as H,pb as ne,pd as Ue,qa as It,qb as cr,qc as zi,qd as Ie,ra as Zi,rb as Nt,rc as ft,rd as Wt,sa as c,sb as Lt,sc as mr,sd as Ye,ta as mo,tb as Ut,tc as Ne,td as ue,u as at,ua as Gi,uc as we,ud as qt,vc as ur,vd as Fe,wa as me,wc as Ni,wd as Xt,xa as j,xb as Ji,xc as fr,xd as Yt,y as xt,ya as Ki,yb as z,yc as hr,yd as Rr,z as ki,zb as ce,zc as gr,zd as sn}from"./chunk-4TEO6QN3.js";var ht=class o{showSubject=new yt(!1);sourceSubject=new yt("");show$=this.showSubject.asObservable();source$=this.sourceSubject.asObservable();setShow(t){this.showSubject.next(t)}setSource(t){this.sourceSubject.next(t)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=ge({token:o,factory:o.\u0275fac,providedIn:"root"})};var mn=class o{id;name;email;phoneNumber;imageUrl;dateJoin;isMale;isActive;roleId;static \u0275fac=function(e){return new(e||o)};static \u0275prov=ge({token:o,factory:o.\u0275fac,providedIn:"root"})};var Qr=()=>["/"],Ja=o=>({template1:o}),es=()=>["/auth/change-password"],ts=o=>["/",o];function is(o,t){if(o&1&&(s(0,"div",91),C(1,"img",92),l()),o&2){let e=_().data;c(),L("src",e==null?null:e.image,H)}}function ns(o,t){if(o&1&&(T(0,is,2,1,"div",91),p(1)),o&2){let e=t.data;K(e!=null&&e.image?0:-1),c(),D(" ",e==null?null:e.name," ")}}function os(o,t){if(o&1&&(Oe(0),s(1,"span"),p(2),l(),De()),o&2){let e=_();c(2),S(e.title)}}function rs(o,t){if(o&1&&(s(0,"a",93),p(1),l()),o&2){let e=_(2);v("routerLink",ce(2,ts,e.breadcrumb)),c(),S(e.breadcrumb)}}function as(o,t){o&1&&C(0,"img",94)}function ss(o,t){if(o&1&&(Oe(0),s(1,"a",93),p(2),u(3,"translate"),l(),C(4,"img",94),T(5,rs,2,4,"a",95)(6,as,1,0,"img",96),s(7,"span"),p(8),l(),De()),o&2){let e=_();c(),v("routerLink",z(7,Qr)),c(),S(g(3,5,"Sidebar.home")),c(3),v("ngIf",e.breadcrumb),c(),v("ngIf",e.breadcrumb),c(2),S(e.title)}}function ls(o,t){if(o&1){let e=k();Oe(0),s(1,"button",97),F("click",function(){b(e);let n=_();return y(n.goBack())}),C(2,"i",98),p(3),u(4,"translate"),l(),De()}o&2&&(c(3),D(" ",g(4,1,"Header.Back")," "))}var un=class o{constructor(t,e,i,n,r,a,d,m){this.authService=t;this.router=e;this.login=i;this.toaster=n;this.translate=r;this.el=a;this.activatedRoute=d;this.translationService=m;this.router.events.pipe(at(f=>f instanceof zi)).subscribe(()=>{let f=this.activatedRoute.firstChild;f&&(this.title=f.snapshot.data.title,this.breadcrumb=f.snapshot.data.breadcrumb)})}title="";breadcrumb="";currentUser=new mn;data=[{options:[{value:"Omar Ezz",label:"Omar Ezz",data:{name:"Omar Ezz",email:"Omar_Ezz@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"1"},{value:"Emad hamdi",label:"Emad Hamdi",data:{name:"Emad hamdi",email:"emad_hamdi@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"2"},{value:"Ehab Zakaria",label:"Ehab Zakaria",data:{name:"Ehab Zakaria",email:"ehab_zakaria@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"3"},{value:"mohamed Ezz",label:"mohamed Ezz",data:{name:"mohamed Ezz",email:"mohamed@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"4"},{value:"Ali hamdi",label:"Ali Hamdi",data:{name:"Ali hamdi",email:"Ali@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"5"},{value:"hassan Zakaria",label:"hassan Zakaria",data:{name:"hassan Zakaria",email:"hassan@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"6"}]}];update(t){console.log(t)}ngOnInit(){this.currentUser.id=Number(localStorage.getItem("userId")),this.currentUser.name=localStorage.getItem("userName"),this.currentUser.email=localStorage.getItem("email"),this.currentUser.phoneNumber=localStorage.getItem("phoneNumber"),this.currentUser.imageUrl=localStorage.getItem("imageUrl"),this.currentUser.roleId=Number(localStorage.getItem("roleId")),this.currentUser.isActive=localStorage.getItem("isActive")==="true",this.currentUser.isMale=localStorage.getItem("isMale")==="true",this.currentUser.dateJoin=new Date(localStorage.getItem("dateJoin")||"")}logout(){this.authService.logout().subscribe(t=>{console.log("logout_data",t);let e=localStorage.getItem("language");localStorage.clear(),e&&localStorage.setItem("language",e),localStorage.setItem("TimeSeveral","yes"),localStorage.setItem("isLoggedIn","false"),this.authService.isLoggedIn=!1,this.toaster.success("",this.translate.instant("Logout")),this.router.navigate(["/auth/login"])},t=>{this.toaster.error("",this.translate.instant("LogOut.logoutFailure"))})}ngAfterViewInit(){}goBack(){this.router.navigateByUrl(this.router.url,{skipLocationChange:!0}).then(()=>{window.history.back()})}toggle(){let t=document.getElementById("main-wrapper"),e=this.el.nativeElement.querySelector(".hamburger");t?.classList.toggle("menu-toggle"),e?.classList.toggle("is-active")}filterData(){let t=document.getElementById("filterData"),e=this.el.nativeElement.querySelector(".filter");t?.classList.toggle("active"),e?.classList.toggle("is-active")}search(t){this.router.navigate(["/search"],{queryParams:{keyword:t}})}changeLanguage(t){this.translationService.setLanguage(t),document.documentElement.setAttribute("lang",t),t==="ar"?(document.documentElement.setAttribute("dir","rtl"),document.body.setAttribute("direction","rtl")):(document.documentElement.setAttribute("dir","ltr"),document.body.setAttribute("direction","ltr")),location.reload()}static \u0275fac=function(e){return new(e||o)(j(rn),j(Ne),j(Or),j(oe),j(de),j(fe),j(ft),j(kr))};static \u0275cmp=N({type:o,selectors:[["app-header"]],standalone:!1,decls:236,vars:103,consts:[["searchInput",""],["template1",""],[1,"nav-header"],[1,"brand-logo",3,"routerLink"],["src","assets/images/logo.svg","alt","",1,"logo-abbr"],[1,"nav-control"],[1,"hamburger",3,"click"],[1,"line"],[1,"header","home"],[1,"header-content"],[1,"navbar","navbar-expand"],[1,"collapse","navbar-collapse","justify-content-between"],[1,"header-left"],[1,"filter",3,"click"],["src","assets/icons/search.svg","alt",""],["id","searchInput","type","search",1,"form-control","search",3,"keydown.enter","placeholder"],["id","filterData",1,"filterData"],[1,"head-title"],["src","assets/icons/close.svg","alt","",3,"click"],[1,"filter-body"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],["for",""],["type","text",1,"form-control",3,"placeholder"],["name","","id","",1,"form-control"],["value",""],[1,"col-lg-12"],["displaySearchStatus","default","multiple","","showSelectAll","",3,"update","data","placeholder","templates"],[1,"col-lg-4"],["type","date",1,"form-control","date",3,"placeholder"],[1,"tags"],[1,"custom-check"],["type","checkbox","name","tag","id","tag1","checked",""],["for","tag1",1,"tag"],["type","checkbox","name","tag","id","tag2"],["for","tag2",1,"tag"],["type","checkbox","name","tag","id","tag3"],["for","tag3",1,"tag"],["type","checkbox","name","tag","id","tag4"],["for","tag4",1,"tag"],[1,"d-flex","justify-content-end"],["href","",1,"btn","btn-solid","me-3"],["href","",1,"btn","btn-primary"],[1,"navbar-nav","header-right"],[1,"nav-item","dropdown","notification_dropdown"],["href","#","role","button","data-bs-toggle","dropdown",1,"nav-link","bell","ai-icon"],["id","icon-lange","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-flag"],["d","M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"],["x1","4","y1","22","x2","4","y2","15"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","ai-icon",3,"click"],["src","assets/icons/flag-sa.svg",1,"lang","me-2"],[1,"ml-2"],["src","assets/icons/flag-us.svg",1,"lang","me-2"],["id","icon-user","xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-bell"],["d","M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"],["d","M13.73 21a2 2 0 0 1-3.46 0"],[1,"pulse-css"],[1,"dropdown-menu","dropdown-menu-end","noti"],["id","DZ_W_Notification1",1,"widget-media","dz-scroll","p-3",2,"height","380px"],[1,"timeline"],[1,"timeline-panel"],[1,"media","me-2"],["alt","image","width","50","src","assets/images/avatar/1.jpg"],[1,"media-body"],[1,"mb-1"],[1,"d-block"],[1,"media","me-2","media-info"],[1,"media","me-2","media-success"],[1,"media","me-2","media-danger"],[1,"media","me-2","media-primary"],[1,"nav-item","dropdown","header-profile"],["href","#","role","button","data-bs-toggle","dropdown",1,"nav-link"],["width","20","alt","",3,"src"],[1,"header-info","pl-2"],[1,"dropdown-menu","dropdown-menu-right"],[1,"d-flex","align-items-center","px-4"],["width","20","alt","",1,"me-2",3,"src"],[1,"header-info"],[1,"mx-4","limit"],[1,"d-flex","align-items-center","justify-content-between"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",2,"width","25%"],[1,"dropdown-item","ai-icon",3,"routerLink"],[1,"ti","ti-angle-right"],[1,"pt-2","px-4"],[1,"btn","btn-primary","d-block",3,"click"],[1,"breadcrumb","d-flex","justify-content-between"],[1,"d-flex"],[4,"ngIf"],[1,"image","me-2"],["alt","",3,"src"],[3,"routerLink"],["src","assets/icons/breadcrumb.svg","alt","",1,"mx-2"],[3,"routerLink",4,"ngIf"],["src","assets/icons/breadcrumb.svg","class","mx-2","alt","",4,"ngIf"],[1,"btn","btn-primary","back",3,"click"],[1,"ti","ti-arrow-left","me-1"]],template:function(e,i){if(e&1){let n=k();s(0,"div",2)(1,"a",3),C(2,"img",4),l(),s(3,"div",5)(4,"div",6),F("click",function(){return b(n),y(i.toggle())}),C(5,"span",7)(6,"span",7)(7,"span",7),l()()(),s(8,"div",8)(9,"div",9)(10,"nav",10)(11,"div",11)(12,"div",12)(13,"form")(14,"a",13),F("click",function(){b(n);let a=A(17);return y(i.search(a.value))}),C(15,"img",14),l(),s(16,"input",15,0),u(18,"translate"),F("keydown.enter",function(){b(n);let a=A(17);return y(i.search(a.value))}),l()(),s(19,"div",16)(20,"div",17)(21,"h3"),p(22),u(23,"translate"),l(),s(24,"img",18),F("click",function(){return b(n),y(i.filterData())}),l()(),s(25,"div",19)(26,"div",20)(27,"div",21)(28,"div",22)(29,"label",23),p(30),u(31,"translate"),l(),C(32,"input",24),u(33,"translate"),l()(),s(34,"div",21)(35,"div",22)(36,"label",23),p(37),u(38,"translate"),l(),s(39,"select",25)(40,"option",26),p(41),u(42,"translate"),l(),s(43,"option",26),p(44),u(45,"translate"),l()()()(),s(46,"div",27)(47,"div",22)(48,"label",23),p(49),u(50,"translate"),l(),s(51,"select2",28),u(52,"translate"),F("update",function(a){return b(n),y(i.update(a))}),T(53,ns,2,2,"ng-template",null,1,se),l()()(),s(55,"div",29)(56,"div",22)(57,"label",23),p(58),u(59,"translate"),l(),s(60,"select",25)(61,"option",26),p(62),u(63,"translate"),l(),s(64,"option",26),p(65,"Ehab"),l()()()(),s(66,"div",29)(67,"div",22)(68,"label",23),p(69),u(70,"translate"),l(),s(71,"select",25)(72,"option",26),p(73),u(74,"translate"),l(),s(75,"option",26),p(76),u(77,"translate"),l()()()(),s(78,"div",29)(79,"div",22)(80,"label",23),p(81),u(82,"translate"),l(),C(83,"input",30),u(84,"translate"),l()()(),s(85,"div",22)(86,"label",23),p(87),u(88,"translate"),l(),s(89,"div",31)(90,"div",32),C(91,"input",33),s(92,"label",34),p(93),u(94,"translate"),l()(),s(95,"div",32),C(96,"input",35),s(97,"label",36),p(98),u(99,"translate"),l()(),s(100,"div",32),C(101,"input",37),s(102,"label",38),p(103),u(104,"translate"),l()(),s(105,"div",32),C(106,"input",39),s(107,"label",40),p(108),u(109,"translate"),l()()()(),s(110,"div",41)(111,"a",42),p(112),u(113,"translate"),l(),s(114,"a",43),p(115),u(116,"translate"),l()()()()(),s(117,"ul",44)(118,"li",45)(119,"a",46),wt(),s(120,"svg",47),C(121,"path",48)(122,"line",49),l()(),Bi(),s(123,"div",50)(124,"a",51),F("click",function(){return b(n),y(i.changeLanguage("ar"))}),C(125,"img",52),s(126,"span",53),p(127,"\u0639\u0631\u0628\u064A"),l()(),s(128,"a",51),F("click",function(){return b(n),y(i.changeLanguage("en"))}),C(129,"img",54),s(130,"span",53),p(131,"English"),l()()()(),s(132,"li",45)(133,"a",46),wt(),s(134,"svg",55),C(135,"path",56)(136,"path",57),l(),Bi(),C(137,"div",58),l(),s(138,"div",59)(139,"div",60)(140,"ul",61)(141,"li")(142,"div",62)(143,"div",63),C(144,"img",64),l(),s(145,"div",65)(146,"h6",66),p(147,"You have a new notification from WOTN"),l(),s(148,"small",67),p(149,"11/7/2024 - 02:26 PM"),l()()()(),s(150,"li")(151,"div",62)(152,"div",68),p(153," WOTN "),l(),s(154,"div",65)(155,"h6",66),p(156,"You have a new notification from WOTN"),l(),s(157,"small",67),p(158,"11/7/2024 - 02:26 PM"),l()()()(),s(159,"li")(160,"div",62),C(161,"div",69),s(162,"div",65)(163,"h6",66),p(164,"You have a new notification from WOTN"),l(),s(165,"small",67),p(166,"11/7/2024 - 02:26 PM"),l()()()(),s(167,"li")(168,"div",62)(169,"div",63),C(170,"img",64),l(),s(171,"div",65)(172,"h6",66),p(173,"You have a new notification from WOTN"),l(),s(174,"small",67),p(175,"11/7/2024 - 02:26 PM"),l()()()(),s(176,"li")(177,"div",62)(178,"div",70),p(179," WOTN "),l(),s(180,"div",65)(181,"h6",66),p(182,"You have a new notification from WOTN"),l(),s(183,"small",67),p(184,"11/7/2024 - 02:26 PM"),l()()()(),s(185,"li")(186,"div",62),C(187,"div",71),s(188,"div",65)(189,"h6",66),p(190,"You have a new notification from WOTN"),l(),s(191,"small",67),p(192,"11/7/2024 - 02:26 PM"),l()()()()()()()(),s(193,"li",72)(194,"a",73),C(195,"img",74),s(196,"div",75)(197,"span")(198,"strong"),p(199),l()()()(),s(200,"div",76)(201,"div",77),C(202,"img",78),s(203,"div",79)(204,"span")(205,"strong"),p(206),l()(),C(207,"br"),s(208,"span"),p(209),l()()(),s(210,"div",80)(211,"span",81),p(212),u(213,"translate"),s(214,"span"),p(215),u(216,"translate"),u(217,"translate"),u(218,"translate"),l()(),s(219,"div",82),C(220,"div",83),l()(),s(221,"a",84)(222,"span",81),p(223),u(224,"translate"),C(225,"i",85),l()(),s(226,"div",86)(227,"a",87),F("click",function(){return b(n),y(i.logout())}),p(228),u(229,"translate"),l()()()()()()()(),s(230,"div",88)(231,"div",89),T(232,os,3,1,"ng-container",90)(233,ss,9,8,"ng-container",90),l(),s(234,"div",89),T(235,ls,5,3,"ng-container",90),l()()()}if(e&2){let n=A(54);c(),v("routerLink",z(99,Qr)),c(15),L("placeholder",g(18,41,"Header.Search")),c(6),S(g(23,43,"Header.Search")),c(8),S(g(31,45,"Header.FolderName")),c(2),L("placeholder",g(33,47,"Header.WriteFolderNameHere")),c(5),S(g(38,49,"Header.ProjectType")),c(4),S(g(42,51,"Header.Any")),c(3),S(g(45,53,"Header.Event")),c(5),S(g(50,55,"Header.SharedTo")),c(2),L("placeholder",g(52,57,"Header.EnterNameOrEmail")),v("data",i.data)("templates",ce(100,Ja,n)),c(7),S(g(59,59,"Header.Owner")),c(4),S(g(63,61,"Header.Anyone")),c(7),S(g(70,63,"Header.Location")),c(4),S(g(74,65,"Header.Anywhere")),c(3),S(g(77,67,"Header.Egypt")),c(5),S(g(82,69,"Header.DateModified")),c(2),L("placeholder",g(84,71,"Header.EnterNameOrEmail")),c(4),S(g(88,73,"Header.Tags")),c(6),S(g(94,75,"Header.Website")),c(5),S(g(99,77,"Header.GovernmentAgencies")),c(5),S(g(104,79,"Header.Photo")),c(5),S(g(109,81,"Header.Videos")),c(4),S(g(113,83,"Header.Reset")),c(3),S(g(116,85,"Header.Search")),c(80),v("src",i.currentUser.imageUrl,H),c(4),S(i.currentUser.name),c(3),v("src",i.currentUser.imageUrl,H),c(4),S(i.currentUser.name),c(3),S(i.currentUser.email),c(3),S(g(213,87,"Header.Limit")),c(3),cr("",g(216,89,"Header.LimitGB")," ",g(217,91,"Common.of")," ",g(218,93,"Header.LimitGBMax"),""),c(6),v("routerLink",z(102,es)),c(2),D("",g(224,95,"Header.ChangePassword")," "),c(5),S(g(229,97,"Header.Logout")),c(4),v("ngIf",i.title=="Home"),c(),v("ngIf",i.title!="Home"),c(2),v("ngIf",i.title!="Home")}},dependencies:[X,we,Fe,sn,ln,Ie,Ye,Zt,re],styles:[".header-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], .header-left[_ngcontent-%COMP%]{position:relative}.header-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{position:absolute;top:50%;right:6px;transform:translateY(-50%);z-index:1;width:40px;line-height:40px;height:40px;text-align:center;border-radius:50%}a.filter[_ngcontent-%COMP%]{cursor:pointer;transition:all .6s ease-in-out;-ms-transition:all .6s ease-in-out;-o-transition:all .6s ease-in-out;-webkit-transition:all .6s ease-in-out;-moz-transition:all .6s ease-in-out}a.filter.is-active[_ngcontent-%COMP%], a.filter[_ngcontent-%COMP%]:hover{background:#eee}.filterData[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #EDEDED;background:#fff;box-shadow:0 0 22px #43434324;position:absolute;width:100%;top:70px;transform:translateY(-100%);left:0;z-index:9;height:0;opacity:0;overflow:hidden;transition:all .4s ease-in-out;-ms-transition:all .4s ease-in-out;-o-transition:all .4s ease-in-out;-webkit-transition:all .4s ease-in-out;-moz-transition:all .4s ease-in-out}.filterData.active[_ngcontent-%COMP%]{height:auto;opacity:1;transform:translateY(0)}.filterData[_ngcontent-%COMP%]   .head-title[_ngcontent-%COMP%]{padding:10px 32px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #D7D7D7}.head-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000;font-size:20px;font-style:normal;font-weight:500;line-height:150%;margin:0}.head-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;transition:all .6s ease-in-out;-ms-transition:all .6s ease-in-out;-o-transition:all .6s ease-in-out;-webkit-transition:all .6s ease-in-out;-moz-transition:all .6s ease-in-out}.head-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:rotate(180deg)}.filter-body[_ngcontent-%COMP%]{border-radius:20px;padding:25px 32px;position:relative;background:#fff;z-index:9}.tags[_ngcontent-%COMP%]{position:relative;display:flex;column-gap:5px}.tags[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.tag[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #D7D7D7;padding:10px 15px;color:#918c8c;font-size:13px;font-style:normal;font-weight:300;line-height:150%;cursor:pointer}.tags[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background:#3a5164;color:#fff}.tag[_ngcontent-%COMP%]:hover{color:#3a5164;background:#f8fafc}.select2-container--default[_ngcontent-%COMP%]   .select2-selection--multiple[_ngcontent-%COMP%]{border:none;background:transparent}"]})};var ds=()=>["/"],xi=()=>({exact:!0}),ps=()=>["recent-files"],ms=()=>["my-files"],us=()=>["projects"],fs=()=>["favorite"],hs=()=>["archive"],fn=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=N({type:o,selectors:[["app-sidebar"]],standalone:!1,decls:40,vars:42,consts:[[1,"deznav"],[1,"deznav-scroll"],["id","menu",1,"metismenu","pt-5"],["routerLinkActive","active",1,"ai-icon",3,"routerLink","routerLinkActiveOptions"],["src","./assets/icons/menu/home.svg","alt","",1,"me-2"],[1,"nav-text"],["src","./assets/icons/menu/recent.svg","alt","",1,"me-2"],[1,"divider"],["src","./assets/icons/menu/mine.svg","alt","",1,"me-2"],["src","./assets/icons/menu/folder.svg","alt","",1,"me-2"],["src","./assets/icons/menu/star.svg","alt","",1,"me-2"],["src","./assets/icons/menu/archive.svg","alt","",1,"me-2"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li")(4,"a",3),C(5,"img",4),s(6,"span",5),p(7),u(8,"translate"),l()()(),s(9,"li")(10,"a",3),C(11,"img",6),s(12,"span",5),p(13),u(14,"translate"),l()()(),C(15,"li",7),s(16,"li")(17,"a",3),C(18,"img",8),s(19,"span",5),p(20),u(21,"translate"),l()()(),s(22,"li")(23,"a",3),C(24,"img",9),s(25,"span",5),p(26),u(27,"translate"),l()()(),s(28,"li")(29,"a",3),C(30,"img",10),s(31,"span",5),p(32),u(33,"translate"),l()()(),s(34,"li")(35,"a",3),C(36,"img",11),s(37,"span",5),p(38),u(39,"translate"),l()()()()()()),e&2&&(c(4),v("routerLink",z(30,ds))("routerLinkActiveOptions",z(31,xi)),c(3),S(g(8,18,"Sidebar.home")),c(3),v("routerLink",z(32,ps))("routerLinkActiveOptions",z(33,xi)),c(3),S(g(14,20,"Sidebar.recent")),c(4),v("routerLink",z(34,ms))("routerLinkActiveOptions",z(35,xi)),c(3),S(g(21,22,"Sidebar.files")),c(3),v("routerLink",z(36,us))("routerLinkActiveOptions",z(37,xi)),c(3),S(g(27,24,"Sidebar.projects")),c(3),v("routerLink",z(38,fs))("routerLinkActiveOptions",z(39,xi)),c(3),S(g(33,26,"Sidebar.favorite")),c(3),v("routerLink",z(40,hs))("routerLinkActiveOptions",z(41,xi)),c(3),S(g(39,28,"Sidebar.archive")))},dependencies:[we,ur,re],encapsulation:2})};var hn=class o{show;source;static \u0275fac=function(e){return new(e||o)};static \u0275cmp=N({type:o,selectors:[["app-project-cover"]],inputs:{show:"show",source:"source"},standalone:!1,decls:2,vars:3,consts:[[1,"project-cover"],["alt","",2,"filter","blur(8px)","-webkit-filter","blur(8px)",3,"src"]],template:function(e,i){e&1&&(s(0,"div",0),C(1,"img",1),l()),e&2&&(V("hidden",!i.show),c(),L("src",i.source,H))},encapsulation:2})};var gn=class o{constructor(t,e,i,n){this.router=t;this.activatedRoute=e;this.projectCoverService=i;this.cdr=n;this.router.events.pipe(at(r=>r instanceof zi)).subscribe(()=>{let r=this.activatedRoute.firstChild;r&&(this.title=r.snapshot.data.title,this.breadcrumb=r.snapshot.data.breadcrumb)})}title="";breadcrumb="";show=!1;source="";ngOnInit(){this.projectCoverService.show$.subscribe(t=>{this.show=t}),this.projectCoverService.source$.subscribe(t=>{this.source=t}),this.cdr.detectChanges(),this.router.events.pipe(at(t=>t instanceof zi)).subscribe(()=>{setTimeout(()=>{this.projectCoverService.setShow(!1),this.projectCoverService.setSource("")})})}static \u0275fac=function(e){return new(e||o)(j(Ne),j(ft),j(ht),j(tn))};static \u0275cmp=N({type:o,selectors:[["app-pages"]],standalone:!1,decls:8,vars:2,consts:[["id","main-wrapper"],[1,"content-body"],[3,"show","source"],[1,"container-fluid"],[1,"main-body"]],template:function(e,i){e&1&&(s(0,"div",0),C(1,"app-header")(2,"app-sidebar"),s(3,"div",1),C(4,"app-project-cover",2),s(5,"div",3)(6,"div",4),C(7,"router-outlet"),l()()()()),e&2&&(c(4),v("show",i.show)("source",i.source))},dependencies:[un,fn,mr,hn],encapsulation:2})};var dt=(e=>(e[e.Event=0]="Event",e[e.Conference=1]="Conference",e))(dt||{});var ae=class o{constructor(t){this.http=t}isLoadingSubject=new yt(!1);setLoading(t){this.isLoadingSubject.next(t)}createProject(t){return this.http.post(fr,t)}createFile(t){return this.http.post(go,t,{reportProgress:!0,observe:"events",responseType:"json"})}patchProject(t,e){return this.http.patch(Tr+t.toString(),e)}createFile1(t){return this.http.post(go,t)}createFolder(t){return this.http.post(ho,t)}createMap(t){return this.http.post(ho,t,{reportProgress:!0,observe:"events",responseType:"json"})}updateFolder(t,e){return this.http.put(_r+t.toString(),e)}activateFolder(t){return this.http.post(br+t.toString(),{})}activateFile(t){return this.http.post(jr+t.toString(),{})}archiveFile(t){return this.http.post(Er+t.toString(),{})}shareFile(t){return this.http.post(Mr,t)}patchFolder(t,e){return this.http.patch(yr+t.toString(),e)}fetchProjects(t,e,i=null,n=null,r=null){this.setLoading(!0);let a=new Ai().set("isActive","").set("pageNumber",t.toString()).set("pageSize",e.toString());return i!=null&&(a=a.set("Type",i.toString())),n&&(a=a.set("sortOrder",n)),r!=null&&(a=a.set("keyword",r)),this.http.get(hr,{params:a,observe:"response"}).pipe(rt(d=>{let m=d.body;var f;d.headers.get("pagination")&&(f=JSON.parse(d.headers.get("pagination")??""));let h={currentPage:f?Number(f.currentPage):0,pageSize:f?Number(f.pageSize):0,numberOfPages:f?Number(f.numberOfPages):0,totalItems:f?Number(f.totalItems):0};return $e(ve({},h),{data:m})}),xt(d=>this.handleError("fetching projects",d)),St(()=>this.setLoading(!1)))}fetchProject(t){return this.setLoading(!0),this.http.get(gr+t?.toString(),{observe:"response"}).pipe(rt(e=>e.body),xt(e=>this.handleError("fetching project",e)),St(()=>this.setLoading(!1)))}fetchFolder(t){return this.setLoading(!0),this.http.get(vr+t?.toString(),{observe:"response"}).pipe(rt(e=>e.body),xt(e=>this.handleError("fetching folder",e)),St(()=>this.setLoading(!1)))}fetchProjectFolders(t){this.setLoading(!0);let e={params:t};return this.http.get(Cr,e)}fetchProjectFiles(t){this.setLoading(!0);let e={params:t};return this.http.get(xr,e)}fetchTags(t,e,i){this.setLoading(!0);let n=new Ai().set("isActive","").set("pageNumber",e.toString()).set("pageSize",i.toString());return t!=null&&(n=n.set("keyword",t)),this.http.get(vo,{params:n,observe:"response"}).pipe(rt(r=>r.body?.map(d=>d?.title)??[]),xt(r=>(this.handleError("fetching tags",r),Ct([]))),St(()=>this.setLoading(!1)))}showTags(){let t={};return this.http.get(vo,t)}handleError(t,e){return console.error(`Error ${t}:`,e),this.setLoading(!1),Ct(void 0)}setFavourite(t){let e={};return this.http.post(Sr+"/"+t,e)}setFavouriteFolder(t){let e={};return this.http.post(wr+"/"+t,e)}patchFile(t,e){return this.http.patch(Pr+"/"+t.toString(),e)}static \u0275fac=function(e){return new(e||o)(Vt($t))};static \u0275prov=ge({token:o,factory:o.\u0275fac,providedIn:"root"})};var Kt=class o{constructor(t){this.http=t}isLoadingSubject=new yt(!1);setLoading(t){this.isLoadingSubject.next(t)}fetchUsers(t,e,i,n=null){this.setLoading(!0);let r=new Ai().set("isActive","").set("pageNumber",e.toString()).set("pageSize",i.toString());return n&&(r=r.set("sortOrder",n)),t&&(r=r.set("keyword",t)),this.http.get(Ir,{params:r,observe:"response"}).pipe(rt(a=>{let d=a.body;var m;a.headers.get("pagination")&&(m=JSON.parse(a.headers.get("pagination")??""));let f={currentPage:m?Number(m.currentPage):0,pageSize:m?Number(m.pageSize):0,numberOfPages:m?Number(m.numberOfPages):0,totalItems:m?Number(m.totalItems):0};return $e(ve({},f),{data:d})}),xt(a=>this.handleError("fetching users",a)),St(()=>this.setLoading(!1)))}handleError(t,e){return console.error(`Error ${t}:`,e),this.setLoading(!1),Ct(void 0)}static \u0275fac=function(e){return new(e||o)(Vt($t))};static \u0275prov=ge({token:o,factory:o.\u0275fac,providedIn:"root"})};var _s=o=>({focused:o}),bs=o=>({selected:o});function ys(o,t){o&1&&(s(0,"div",47),p(1),u(2,"translate"),l()),o&2&&(c(),D(" ",g(2,1,"RequieredField")," "))}function Cs(o,t){o&1&&(s(0,"div",47),p(1),u(2,"translate"),l()),o&2&&(c(),D(" ",g(2,1,"RequieredField")," "))}function xs(o,t){o&1&&(s(0,"div",47),p(1),u(2,"translate"),l()),o&2&&(c(),D(" ",g(2,1,"Projects.EndDateMustBeGreater")," "))}function Ss(o,t){if(o&1){let e=k();s(0,"li",48)(1,"span",49),F("click",function(){let n=b(e).$implicit,r=_();return y(r.removeUser(n))}),p(2,"\xD7"),l(),s(3,"div",50)(4,"div",51)(5,"div",52),C(6,"img",53),l(),p(7),l(),s(8,"select",54),F("change",function(n){let r=b(e).$implicit,a=_();return y(a.onRoleChange(r,n.target.value))}),s(9,"option",55),p(10,"Viewer"),l(),s(11,"option",56),p(12,"Editor"),l(),s(13,"option",57),p(14,"Admin"),l()()()()}if(o&2){let e=t.$implicit;L("title",e.name),c(6),L("alt",e.name),v("src",e.imageUrl?e.imageUrl:e.isMale!=!1?"assets/images/profile/default-profile-img.png":"assets/images/profile/default-profile-female-img.jpg",H),c(),D("",e.name," ")}}function ws(o,t){if(o&1){let e=k();s(0,"li",62),F("click",function(){let n=b(e).$implicit,r=_(2);return y(r.selectUser(n))}),s(1,"div",50)(2,"div",51)(3,"div",52),C(4,"img",53),l(),p(5),l()()()}if(o&2){let e=t.$implicit;v("ngClass",ce(4,bs,e.isSelected)),c(4),L("alt",e==null?null:e.name),v("src",e.imageUrl?e.imageUrl:e.isMale!=!1?"assets/images/profile/default-profile-img.png":"assets/images/profile/default-profile-female-img.jpg",H),c(),D(" ",e==null?null:e.name," ")}}function Is(o,t){if(o&1&&(s(0,"div",58)(1,"div",59)(2,"ul",60),T(3,ws,6,6,"li",61),l()()()),o&2){let e=_();c(3),v("ngForOf",e.usersData)}}function Fs(o,t){o&1&&(s(0,"div",47),p(1),u(2,"translate"),l()),o&2&&(c(),D(" ",g(2,1,"RequieredField")," "))}function Ps(o,t){if(o&1&&(s(0,"div",11)(1,"label",63),p(2),u(3,"translate"),l(),s(4,"textarea",64),p(5,"Your message"),l(),T(6,Fs,3,3,"div",14),l()),o&2){let e,i=_();c(2),S(g(3,2,"Projects.Message")),c(4),v("ngIf",((e=i.projectForm.get("message"))==null?null:e.invalid)&&(i.isSubmittedItem||((e=i.projectForm.get("message"))==null?null:e.touched)||((e=i.projectForm.get("message"))==null?null:e.dirty)))}}function Ts(o,t){if(o&1&&(s(0,"div",65)(1,"h5"),p(2),u(3,"translate"),l(),s(4,"div",66),C(5,"img",53),u(6,"translate"),l()()),o&2){let e=_();c(2),D("",g(3,3,"Projects.ImagePreview"),":"),c(3),L("alt",g(6,5,"Projects.UploadedImage")),v("src",e.imagePreview,H)}}var Si=class o{constructor(t,e,i,n,r){this.activeModal=t;this.translate=e;this.toastr=i;this.projectService=n;this.userService=r}isSuccess=new W;projectForm;hasError=!1;isLoading=!1;isSubmittedItem=!1;selectedFile=null;ProjectTypes=dt;imagePreview=null;isFetchingUsers=!1;usersData=[];selectedUsers=[];subscriptions=[];ngOnInit(){this.initializeForm(),this.projectForm.get("searchQuery")?.valueChanges.subscribe(t=>{this.onSearch(t)})}onSearch(t){if(!this.isFetchingUsers)if(t){this.isFetchingUsers=!0;let e=this.userService.fetchUsers(t,1,1e4).subscribe(i=>{i&&(console.log("Users:",i),this.usersData=i.data.map(n=>this.mapUserToProjectUser(n))),this.isFetchingUsers=!1});this.subscriptions.push(e)}else this.usersData=[]}mapUserToProjectUser(t){return{id:t.id,name:t.name,email:t.email,phoneNumber:t.phoneNumber,imageUrl:t.imageUrl,isMale:t.isMale,isSelected:this.selectedUsers.some(e=>e.id===t.id),projectRole:1}}selectUser(t){this.selectedUsers.some(i=>i.id===t.id)||(t.isSelected=!0,this.selectedUsers.push(t))}removeUser(t){this.selectedUsers=this.selectedUsers.filter(e=>e.id!==t.id),t.isSelected=!1}onRoleChange(t,e){t.projectRole=e}initializeForm(){this.projectForm=new Wt({title:new ue("",si.required),type:new ue("",si.required),brief:new ue(""),location:new ue(null),imageFile:new ue(null),startDate:new ue(null),endDate:new ue(null),typeId:new ue(10),isActive:new ue(!0),searchQuery:new ue(""),notify:new ue(!1),message:new ue("")},{validators:this.dateGreaterThan("startDate","endDate")})}submitProject(){if(this.isSubmittedItem=!0,this.projectForm.invalid){this.projectForm.markAllAsTouched(),this.toastr.error(this.translate.instant("Projects.EnterValidData"));return}let t=new FormData;Object.keys(this.projectForm.controls).forEach(i=>{t.append(i,this.projectForm.get(i)?.value)}),this.selectedFile&&t.append("imageFile",this.selectedFile,this.selectedFile.name);for(let i of this.selectedUsers)i.projectRole==1&&t.append("UserViewIDs",i?.id.toString()),i.projectRole==2&&t.append("UserUpdateIDs",i?.id.toString()),i.projectRole==3&&t.append("UserApproveIDs",i?.id.toString());let e=this.projectService.createProject(t).subscribe(i=>{i?(this.toastr.success(this.translate.instant("Projects.ProjectAddedSuccessfully")),this.isSuccess.emit(!0),this.closeModal()):this.showError(this.translate.instant("Projects.ProjectCreationFaild"))},i=>{console.error("Error creating project:",i),this.showError(this.translate.instant("Projects.ProjectCreationFaild"))});this.subscriptions.push(e)}showError(t){this.toastr.error(t)}closeModal(){this.activeModal.close()}onDragOver(t){t.preventDefault()}onFileChange(t){let e=t.target.files[0];if(e){this.selectedFile=e;let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(e)}}onDrop(t){t.preventDefault();let e=t.dataTransfer?.files;if(e&&e.length){this.selectedFile=e[0];let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(this.selectedFile)}}dateGreaterThan(t,e){return i=>{let n=i.get(t)?.value,r=i.get(e)?.value;return n&&!r||!n&&r||n&&r&&new Date(r)<=new Date(n)?{dateInvalid:!0}:null}}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static \u0275fac=function(e){return new(e||o)(j(yi),j(de),j(oe),j(ae),j(Kt))};static \u0275cmp=N({type:o,selectors:[["app-project-create"]],outputs:{isSuccess:"isSuccess"},standalone:!1,decls:104,vars:73,consts:[["imageFile",""],[1,"modal-header"],[1,"d-flex","mod-head","justify-content-between"],["id","addProjectModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","ms-2",3,"click"],[3,"ngSubmit","formGroup"],["id","typeId","formControlName","typeId","type","hidden"],["id","isActive","formControlName","isActive","type","hidden"],[1,"modal-body"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],["for","title"],["id","title","type","text","formControlName","title",1,"form-control",3,"placeholder"],["class","formError",4,"ngIf"],["for","type"],["id","type","formControlName","type",1,"form-control"],["value","","disabled",""],[3,"value"],[1,"col-lg-12"],["for","brief"],["id","brief","formControlName","brief","rows","4",1,"form-control",3,"placeholder"],["for","startDate"],["id","startDate","type","date","formControlName","startDate",1,"form-control"],["for","endDate"],["id","endDate","type","date","formControlName","endDate",1,"form-control"],[1,"col-lg-9"],["for","peopleWithAccess"],[1,"select2","select2-container","select2-container--default","select2-container--open"],["role","combobox","id","select2-4-combo","tabindex","-1","aria-expanded","true",1,"selection","select2-focused"],[1,"select2-selection","select2-selection--multiple"],[1,"select2-selection__rendered",2,"padding","0.5rem!important"],["tabindex","0","class","select2-selection__choice",3,"title",4,"ngFor","ngForOf"],["type","text","id","searchQuery","formControlName","searchQuery","aria-describedby","searchHelp",1,"form-control",3,"placeholder","ngClass"],["class","select2-container select2-container--default select2-container-dropdown select2-container--open",4,"ngIf"],[1,"col-lg-3","align-self-center"],[1,"form-check","mt-3"],["type","checkbox","id","notify","formControlName","notify",1,"form-check-input"],["for","notify",1,"form-check-label"],["class","form-group",4,"ngIf"],["for","imageFile"],[1,"fileset",3,"click","dragover","drop"],["src","assets/images/Upload.svg",3,"alt"],["id","imageFile","accept","image/*","formControlName","imageFile","type","file",2,"display","none",3,"change"],["class","image-preview d-flex align-items-center mt-2",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"],[1,"formError"],["tabindex","0",1,"select2-selection__choice",3,"title"],[1,"select2-selection__choice__remove","ng-star-inserted",2,"color","var(--select2-selection-choice-close-color, #999)","font-weight","700",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center"],[1,"image","me-2"],[3,"src","alt"],["name","role1",1,"form-control",3,"change"],["value","1"],["value","2"],["value","3"],[1,"select2-container","select2-container--default","select2-container-dropdown","select2-container--open"],[1,"select2-dropdown","select2-dropdown--below"],["role","group",1,"select2-results__options","select2-results__options--nested",2,"height","auto","max-height","200px"],["role","option","class","select2-results__option","style","height: 40px; margin: 1px;",3,"ngClass","click",4,"ngFor","ngForOf"],["role","option",1,"select2-results__option",2,"height","40px","margin","1px",3,"click","ngClass"],["for","message"],["id","message","formControlName","message",1,"form-control"],[1,"image-preview","d-flex","align-items-center","mt-2"],[1,"proj-img-holder","ms-3"]],template:function(e,i){if(e&1){let n=k();s(0,"div",1)(1,"div",2)(2,"h5",3),p(3),u(4,"translate"),l(),s(5,"div")(6,"button",4),F("click",function(){return b(n),y(i.closeModal())}),l()()()(),s(7,"form",5),F("ngSubmit",function(){return b(n),y(i.submitProject())}),C(8,"input",6)(9,"input",7),s(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"label",12),p(15),u(16,"translate"),s(17,"em"),p(18,"*"),l()(),C(19,"input",13),u(20,"translate"),T(21,ys,3,3,"div",14),l()(),s(22,"div",10)(23,"div",11)(24,"label",15),p(25),u(26,"translate"),s(27,"em"),p(28,"*"),l()(),s(29,"select",16)(30,"option",17),p(31),u(32,"translate"),l(),s(33,"option",18),p(34),u(35,"translate"),l(),s(36,"option",18),p(37),u(38,"translate"),l()(),T(39,Cs,3,3,"div",14),l()(),s(40,"div",19)(41,"div",11)(42,"label",20),p(43),u(44,"translate"),l(),C(45,"textarea",21),u(46,"translate"),l()(),s(47,"div",10)(48,"div",11)(49,"label",22),p(50),u(51,"translate"),l(),C(52,"input",23),l()(),s(53,"div",10)(54,"div",11)(55,"label",24),p(56),u(57,"translate"),l(),C(58,"input",25),T(59,xs,3,3,"div",14),l()(),s(60,"div",26)(61,"div",11)(62,"label",27),p(63),u(64,"translate"),l(),s(65,"div",28)(66,"div",29)(67,"div",30)(68,"ul",31),T(69,Ss,15,4,"li",32),s(70,"li"),C(71,"input",33),u(72,"translate"),l()()()()(),T(73,Is,4,1,"div",34),l()(),s(74,"div",35)(75,"div",36),C(76,"input",37),s(77,"label",38),p(78),u(79,"translate"),l()()(),s(80,"div",19),T(81,Ps,7,4,"div",39),l(),s(82,"div",19)(83,"div",11)(84,"label",40),p(85),u(86,"translate"),l(),s(87,"div",41),F("click",function(){b(n);let a=A(97);return y(a.click())})("dragover",function(a){return b(n),y(i.onDragOver(a))})("drop",function(a){return b(n),y(i.onDrop(a))}),C(88,"img",42),u(89,"translate"),s(90,"h4"),p(91),u(92,"translate"),l(),s(93,"p"),p(94),u(95,"translate"),l(),s(96,"input",43,0),F("change",function(a){return b(n),y(i.onFileChange(a))}),l()()()(),s(98,"div",19),T(99,Ts,7,7,"div",44),l()(),s(100,"div",45)(101,"button",46),p(102),u(103,"translate"),l()()()()}if(e&2){let n,r,a,d,m;c(3),S(g(4,33,"Projects.CreateProject")),c(4),v("formGroup",i.projectForm),c(8),D("",g(16,35,"Projects.ProjectName")," "),c(4),Pt("placeholder","",g(20,37,"Projects.WriteProjectNameHere"),"..."),c(2),v("ngIf",((n=i.projectForm.get("title"))==null?null:n.invalid)&&(i.isSubmittedItem||((n=i.projectForm.get("title"))==null?null:n.touched)||((n=i.projectForm.get("title"))==null?null:n.dirty))),c(4),S(g(26,39,"Projects.ProjectType")),c(6),S(g(32,41,"Projects.SelectProjectType")),c(2),v("value",i.ProjectTypes.Event),c(),S(g(35,43,"Projects.Event")),c(2),v("value",i.ProjectTypes.Conference),c(),S(g(38,45,"Projects.Conference")),c(2),v("ngIf",((r=i.projectForm.get("type"))==null?null:r.invalid)&&(i.isSubmittedItem||((r=i.projectForm.get("type"))==null?null:r.touched)||((r=i.projectForm.get("type"))==null?null:r.dirty))),c(4),S(g(44,47,"Projects.Description")),c(2),Pt("placeholder","",g(46,49,"Projects.WriteDescriptionHere"),"..."),c(5),S(g(51,51,"Projects.StartDate")),c(6),S(g(57,53,"Projects.EndDate")),c(3),v("ngIf",(i.projectForm.errors==null?null:i.projectForm.errors.dateInvalid)&&(i.isSubmittedItem||((a=i.projectForm.get("startDate"))==null?null:a.touched)||((a=i.projectForm.get("endDate"))==null?null:a.touched))),c(4),S(g(64,55,"Projects.PeopleWithAccess")),c(6),v("ngForOf",i.selectedUsers),c(2),Pt("placeholder","",g(72,57,"Projects.EnterNameOrEmail"),"..."),v("ngClass",ce(71,_s,((d=i.projectForm.get("searchQuery"))==null?null:d.value.length)>0)),c(2),v("ngIf",i.usersData.length>0),c(5),D(" ",g(79,59,"Projects.Notify")," "),c(3),v("ngIf",((m=i.projectForm.get("notify"))==null?null:m.value)==!0),c(4),D(" ",g(86,61,"Projects.AddPropjectPhoto"),""),c(3),L("alt",g(89,63,"Upload")),c(3),S(g(92,65,"Projects.DropImageHereOrBrowse")),c(3),S(g(95,67,"Projects.PhotoInfo")),c(5),v("ngIf",i.imagePreview),c(3),D(" ",g(103,69,"Save")," ")}},dependencies:[lt,J,X,Fe,sn,ln,Le,an,Rr,Ue,Ie,Xt,Yt,re],styles:[".focused[_ngcontent-%COMP%]{background:#f9f9f9;border:1px solid #e0e1e2;color:#333;outline:0;box-shadow:0 0 15.5px #0000000d}.selected[_ngcontent-%COMP%]{background:var(--select2-option-selected-background, #ddd);color:var(--select2-option-selected-text-color, #000)}.select2-results__option[_ngcontent-%COMP%]:not(.selected):hover{background:var(--select2-option-hover-background, #f0f0f0);color:var(--select2-option-hover-text-color, #000);cursor:pointer}"]})};var B=(o,t=1e4)=>(o=parseFloat(o+"")||0,Math.round((o+Number.EPSILON)*t)/t),Vo=function(o){if(!(o&&o instanceof Element&&o.offsetParent))return!1;let t=o.scrollHeight>o.clientHeight,e=window.getComputedStyle(o).overflowY,i=e.indexOf("hidden")!==-1,n=e.indexOf("visible")!==-1;return t&&!i&&!n},jn=function(o,t=void 0){return!(!o||o===document.body||t&&o===t)&&(Vo(o)?o:jn(o.parentElement,t))},vt=function(o){var t=new DOMParser().parseFromString(o,"text/html").body;if(t.childElementCount>1){for(var e=document.createElement("div");t.firstChild;)e.appendChild(t.firstChild);return e}return t.firstChild},No=o=>`${o||""}`.split(" ").filter(t=>!!t),_t=(o,t,e)=>{o&&No(t).forEach(i=>{o.classList.toggle(i,e||!1)})},ei=class{constructor(t){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,this.id=self.Touch&&t instanceof Touch?t.identifier:-1,this.time=Date.now()}},wi={passive:!1},Ro=class{constructor(t,{start:e=()=>!0,move:i=()=>{},end:n=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=t,this.startCallback=e,this.moveCallback=i,this.endCallback=n;for(let r of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[r]=this[r].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,wi),this.element.addEventListener("touchstart",this.onTouchStart,wi),this.element.addEventListener("touchmove",this.onMove,wi),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(t){if(!t.buttons||t.button!==0)return;let e=new ei(t);this.currentPointers.some(i=>i.id===e.id)||this.triggerPointerStart(e,t)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(t){for(let e of Array.from(t.changedTouches||[]))this.triggerPointerStart(new ei(e),t);window.addEventListener("blur",this.onWindowBlur)}onMove(t){let e=this.currentPointers.slice(),i="changedTouches"in t?Array.from(t.changedTouches||[]).map(r=>new ei(r)):[new ei(t)],n=[];for(let r of i){let a=this.currentPointers.findIndex(d=>d.id===r.id);a<0||(n.push(r),this.currentPointers[a]=r)}n.length&&this.moveCallback(t,this.currentPointers.slice(),e)}onPointerEnd(t){t.buttons>0&&t.button!==0||(this.triggerPointerEnd(t,new ei(t)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(t){for(let e of Array.from(t.changedTouches||[]))this.triggerPointerEnd(t,new ei(e))}triggerPointerStart(t,e){return!!this.startCallback(e,t,this.currentPointers.slice())&&(this.currentPointers.push(t),this.startPointers.push(t),!0)}triggerPointerEnd(t,e){let i=this.currentPointers.findIndex(n=>n.id===e.id);i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(t,e,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){let t=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY}),t,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,wi),this.element.removeEventListener("touchstart",this.onTouchStart,wi),this.element.removeEventListener("touchmove",this.onMove,wi),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}};function $r(o,t){return t?Math.sqrt(Math.pow(t.clientX-o.clientX,2)+Math.pow(t.clientY-o.clientY,2)):0}function Wr(o,t){return t?{clientX:(o.clientX+t.clientX)/2,clientY:(o.clientY+t.clientY)/2}:o}var Ao=o=>typeof o=="object"&&o!==null&&o.constructor===Object&&Object.prototype.toString.call(o)==="[object Object]",Qe=(o,...t)=>{let e=t.length;for(let i=0;i<e;i++){let n=t[i]||{};Object.entries(n).forEach(([r,a])=>{let d=Array.isArray(a)?[]:{};o[r]||Object.assign(o,{[r]:d}),Ao(a)?Object.assign(o[r],Qe(d,a)):Array.isArray(a)?Object.assign(o,{[r]:[...a]}):Object.assign(o,{[r]:a})})}return o},yo=function(o,t){return o.split(".").reduce((e,i)=>typeof e=="object"?e[i]:void 0,t)},Ei=class{constructor(t={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t);for(let e of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))e.startsWith("on")&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}setOptions(t){this.options=t?Qe({},this.constructor.defaults,t):{};for(let[e,i]of Object.entries(this.option("on")||{}))this.on(e,i)}option(t,...e){let i=yo(t,this.options);return i&&typeof i=="function"&&(i=i.call(this,this,...e)),i}optionFor(t,e,i,...n){let r=yo(e,t);var a;typeof(a=r)!="string"||isNaN(a)||isNaN(parseFloat(a))||(r=parseFloat(r)),r==="true"&&(r=!0),r==="false"&&(r=!1),r&&typeof r=="function"&&(r=r.call(this,this,t,...n));let d=yo(e,this.options);return d&&typeof d=="function"?r=d.call(this,this,t,...n,r):r===void 0&&(r=d),r===void 0?i:r}cn(t){let e=this.options.classes;return e&&e[t]||""}localize(t,e=[]){t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,(i,n,r)=>{let a="";return r?a=this.option(`${n[0]+n.toLowerCase().substring(1)}.l10n.${r}`):n&&(a=this.option(`l10n.${n}`)),a||(a=i),a});for(let i=0;i<e.length;i++)t=t.split(e[i][0]).join(e[i][1]);return t=t.replace(/\{\{(.*?)\}\}/g,(i,n)=>n)}on(t,e){let i=[];typeof t=="string"?i=t.split(" "):Array.isArray(t)&&(i=t),this.events||(this.events=new Map),i.forEach(n=>{let r=this.events.get(n);r||(this.events.set(n,[]),r=[]),r.includes(e)||r.push(e),this.events.set(n,r)})}off(t,e){let i=[];typeof t=="string"?i=t.split(" "):Array.isArray(t)&&(i=t),i.forEach(n=>{let r=this.events.get(n);if(Array.isArray(r)){let a=r.indexOf(e);a>-1&&r.splice(a,1)}})}emit(t,...e){[...this.events.get(t)||[]].forEach(i=>i(this,...e)),t!=="*"&&this.emit("*",t,...e)}};Object.defineProperty(Ei,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(Ei,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});var $i=class extends Ei{constructor(t={}){super(t),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(t={}){let e=new Map;for(let[i,n]of Object.entries(t)){let r=this.option(i),a=this.plugins[i];a||r===!1?a&&r===!1&&(a.detach(),delete this.plugins[i]):e.set(i,new n(this,r||{}))}for(let[i,n]of e)this.plugins[i]=n,n.attach()}detachPlugins(t){t=t||Object.keys(this.plugins);for(let e of t){let i=this.plugins[e];i&&i.detach(),delete this.plugins[e]}return this.emit("detachPlugins"),this}},pe;(function(o){o[o.Init=0]="Init",o[o.Error=1]="Error",o[o.Ready=2]="Ready",o[o.Panning=3]="Panning",o[o.Mousemove=4]="Mousemove",o[o.Destroy=5]="Destroy"})(pe||(pe={}));var Et=["a","b","c","d","e","f"],ya={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},js={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:ya},qr='<circle cx="25" cy="25" r="20"></circle>',Lo='<div class="f-spinner"><svg viewBox="0 0 50 50">'+qr+qr+"</svg></div>",He=o=>o&&o!==null&&o instanceof Element&&"nodeType"in o,le=(o,t)=>{o&&No(t).forEach(e=>{o.classList.remove(e)})},U=(o,t)=>{o&&No(t).forEach(e=>{o.classList.add(e)})},vn={a:1,b:0,c:0,d:1,e:0,f:0},Es=1e5,_n=1e4,Ze="mousemove",Xr="drag",Yr="content",Ge="auto",Co=null,xo=null,ui=class o extends $i{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return xo===null&&(xo=window.matchMedia("(hover: none)").matches),xo}get isMobile(){return Co===null&&(Co=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),Co}get panMode(){return this.options.panMode!==Ze||this.isTouchDevice?Xr:Ze}get panOnlyZoomed(){let t=this.options.panOnlyZoomed;return t===Ge?this.isTouchDevice:t}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){let{a:t,b:e}=this.current;return Math.sqrt(t*t+e*e)||1}get targetScale(){let{a:t,b:e}=this.target;return Math.sqrt(t*t+e*e)||1}get minScale(){return this.option("minScale")||1}get fullScale(){let{contentRect:t}=this;return t.fullWidth/t.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){let{containerRect:t,contentRect:e}=this,i=Math.max(t.height/e.fitHeight,t.width/e.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){let t=this.content;return!!(t&&t instanceof HTMLImageElement)&&!t.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(let t of Et){let e=t=="e"||t==="f"?1e-4:1e-5;if(Math.abs(this.target[t]-this.current[t])>e)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(t,e={},i={}){var n;if(super(e),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:pe.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},vn)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},vn)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!t)throw new Error("Container Element Not Found");this.container=t,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},o.Plugins),i)),this.emit("attachPlugins"),this.emit("init");let r=this.content;if(r.addEventListener("load",this.onLoad),r.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){t.classList.add(this.cn("isLoading"));let a=vt(Lo);!t.contains(r)||r.parentElement instanceof HTMLPictureElement?this.spinner=t.appendChild(a):this.spinner=((n=r.parentElement)===null||n===void 0?void 0:n.insertBefore(a,r))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){let{container:t}=this,e=this.cn(Yr),i=this.option(Yr)||t.querySelector(`.${e}`);if(i||(i=t.querySelector("img,picture")||t.firstElementChild,i&&U(i,e)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){let{spinner:t,container:e,state:i}=this;t&&(t.remove(),this.spinner=null),this.option("spinner")&&e.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===pe.Init?this.enable():this.updateMetrics()}onError(){this.state!==pe.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=pe.Error,this.emit("error"))}getNextScale(t){let{fullScale:e,targetScale:i,coverScale:n,maxScale:r,minScale:a}=this,d=a;switch(t){case"toggleMax":d=i-a<.5*(r-a)?r:a;break;case"toggleCover":d=i-a<.5*(n-a)?n:a;break;case"toggleZoom":d=i-a<.5*(e-a)?e:a;break;case"iterateZoom":let m=[1,e,r].sort((h,x)=>h-x),f=m.findIndex(h=>h>i+1e-5);d=m[f]||1}return d}attachObserver(){var t;let e=()=>{let{container:i,containerRect:n}=this;return Math.abs(n.width-i.getBoundingClientRect().width)>.1||Math.abs(n.height-i.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(e()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{e()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(t=this.resizeObserver)===null||t===void 0||t.observe(this.container)}detachObserver(){var t;(t=this.resizeObserver)===null||t===void 0||t.disconnect()}attachEvents(){let{container:t}=this;t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new Ro(t,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(Ze,this.onMouseMove)}detachEvents(){var t;let{container:e}=this;e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("wheel",this.onWheel,{passive:!1}),(t=this.pointerTracker)===null||t===void 0||t.stop(),this.pointerTracker=null,document.removeEventListener(Ze,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();let t=this.friction,e=this.option("maxVelocity");for(let i of Et)t?(this.velocity[i]*=1-t,e&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],e),-1*e)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(let t of Et)t==="e"&&this.isBouncingX||t==="f"&&this.isBouncingY||(this.velocity[t]=(1/(1-this.friction)-1)*(this.target[t]-this.current[t]))}checkBounds(t=0,e=0){let{current:i}=this,n=i.e+t,r=i.f+e,a=this.getBounds(),{x:d,y:m}=a,f=d.min,h=d.max,x=m.min,I=m.max,w=0,P=0;return f!==1/0&&n<f?w=f-n:h!==1/0&&n>h&&(w=h-n),x!==1/0&&r<x?P=x-r:I!==1/0&&r>I&&(P=I-r),Math.abs(w)<1e-4&&(w=0),Math.abs(P)<1e-4&&(P=0),Object.assign(Object.assign({},a),{xDiff:w,yDiff:P,inBounds:!w&&!P})}clampTargetBounds(){let{target:t}=this,{x:e,y:i}=this.getBounds();e.min!==1/0&&(t.e=Math.max(t.e,e.min)),e.max!==1/0&&(t.e=Math.min(t.e,e.max)),i.min!==1/0&&(t.f=Math.max(t.f,i.min)),i.max!==1/0&&(t.f=Math.min(t.f,i.max))}calculateContentDim(t=this.current){let{content:e,contentRect:i}=this,{fitWidth:n,fitHeight:r,fullWidth:a,fullHeight:d}=i,m=a,f=d;if(this.option("zoom")||this.angle!==0){let h=!(e instanceof HTMLImageElement)&&(window.getComputedStyle(e).maxWidth==="none"||window.getComputedStyle(e).maxHeight==="none"),x=h?a:n,I=h?d:r,w=this.getMatrix(t),P=new DOMPoint(0,0).matrixTransform(w),M=new DOMPoint(0+x,0).matrixTransform(w),E=new DOMPoint(0+x,0+I).matrixTransform(w),O=new DOMPoint(0,0+I).matrixTransform(w),R=Math.abs(E.x-P.x),$=Math.abs(E.y-P.y),Y=Math.abs(O.x-M.x),it=Math.abs(O.y-M.y);m=Math.max(R,Y),f=Math.max($,it)}return{contentWidth:m,contentHeight:f}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===Ze||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);let{target:t}=this,{x:e,y:i,xDiff:n,yDiff:r}=this.checkBounds(),a=this.option("maxVelocity"),d=this.velocity.e,m=this.velocity.f;n!==0?(this.isBouncingX=!0,n*d<=0?d+=.14*n:(d=.14*n,e.min!==1/0&&(this.target.e=Math.max(t.e,e.min)),e.max!==1/0&&(this.target.e=Math.min(t.e,e.max))),a&&(d=Math.max(Math.min(d,a),-1*a))):this.isBouncingX=!1,r!==0?(this.isBouncingY=!0,r*m<=0?m+=.14*r:(m=.14*r,i.min!==1/0&&(this.target.f=Math.max(t.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(t.f,i.max))),a&&(m=Math.max(Math.min(m,a),-1*a))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=d),this.isBouncingY&&(this.velocity.f=m)}enable(){let{content:t}=this,e=new DOMMatrixReadOnly(window.getComputedStyle(t).transform);for(let i of Et)this.current[i]=this.target[i]=e[i];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=pe.Ready,this.emit("ready")}onClick(t){var e;t.type==="click"&&t.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((e=this.pointerTracker)===null||e===void 0||e.clear(),this.trackingPoints=[],this.startDecelAnim());let i=t.target;if(!i||t.defaultPrevented)return;if(i.hasAttribute("disabled"))return t.preventDefault(),void t.stopPropagation();if((()=>{let w=window.getSelection();return w&&w.type==="Range"})()&&!i.closest("button"))return;let n=i.closest("[data-panzoom-action]"),r=i.closest("[data-panzoom-change]"),a=n||r,d=a&&He(a)?a.dataset:null;if(d){let w=d.panzoomChange,P=d.panzoomAction;if((w||P)&&t.preventDefault(),w){let M={};try{M=JSON.parse(w)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(M)}if(P)return void(this[P]&&this[P]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return t.preventDefault(),void t.stopPropagation();if(i.closest("[data-fancybox]"))return;let m=this.content.getBoundingClientRect(),f=this.dragStart;if(f.time&&!this.canZoomOut()&&(Math.abs(m.x-f.x)>2||Math.abs(m.y-f.y)>2))return;this.dragStart.time=0;let h=w=>{this.option("zoom",t)&&w&&typeof w=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(w)&&typeof this[w]=="function"&&(t.preventDefault(),this[w]({event:t}))},x=this.option("click",t),I=this.option("dblClick",t);I?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",t),!t.defaultPrevented&&x&&h(x)):(this.emit("dblClick",t),t.defaultPrevented||h(I)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",t),!t.defaultPrevented&&x&&h(x))}addTrackingPoint(t){let e=this.trackingPoints.filter(i=>i.time>Date.now()-100);e.push(t),this.trackingPoints=e}onPointerDown(t,e,i){var n;if(this.option("touch",t)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];let r=this.content.getBoundingClientRect();if(this.dragStart={x:r.x,y:r.y,top:r.top,left:r.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===Ze&&this.targetScale>1)return t.preventDefault(),t.stopPropagation(),!1;let a=t.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(a.nodeName)||a.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(n=window.getSelection())===null||n===void 0||n.removeAllRanges()}if(t.type==="mousedown")["A","BUTTON"].includes(a.nodeName)||t.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(e),this.emit("touchStart",t)),!0}onPointerMove(t,e,i){if(this.option("touch",t)===!1||!this.isDragging||e.length<2&&this.panOnlyZoomed&&B(this.targetScale)<=B(this.minScale)||(this.emit("touchMove",t),t.defaultPrevented))return;this.addTrackingPoint(e[0]);let{content:n}=this,r=Wr(i[0],i[1]),a=Wr(e[0],e[1]),d=0,m=0;if(e.length>1){let $=n.getBoundingClientRect();d=r.clientX-$.left-.5*$.width,m=r.clientY-$.top-.5*$.height}let f=$r(i[0],i[1]),h=$r(e[0],e[1]),x=f?h/f:1,I=a.clientX-r.clientX,w=a.clientY-r.clientY;this.dragOffset.x+=I,this.dragOffset.y+=w,this.dragOffset.time=Date.now()-this.dragStart.time;let P=B(this.targetScale)===B(this.minScale)&&this.option("lockAxis");if(P&&!this.lockedAxis)if(P==="xy"||P==="y"||t.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void t.preventDefault();let $=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=$>45&&$<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,I=0,w=0}else this.lockedAxis=P;if(jn(t.target,this.content)&&(P="x",this.dragOffset.y=0),P&&P!=="xy"&&this.lockedAxis!==P&&B(this.targetScale)===B(this.minScale))return;t.cancelable&&t.preventDefault(),this.container.classList.add(this.cn("isDragging"));let M=this.checkBounds(I,w);this.option("rubberband")?(this.isInfinite!=="x"&&(M.xDiff>0&&I<0||M.xDiff<0&&I>0)&&(I*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*M.xDiff))),this.isInfinite!=="y"&&(M.yDiff>0&&w<0||M.yDiff<0&&w>0)&&(w*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*M.yDiff)))):(M.xDiff&&(I=0),M.yDiff&&(w=0));let E=this.targetScale,O=this.minScale,R=this.maxScale;E<.5*O&&(x=Math.max(x,O)),E>1.5*R&&(x=Math.min(x,R)),this.lockedAxis==="y"&&B(E)===B(O)&&(I=0),this.lockedAxis==="x"&&B(E)===B(O)&&(w=0),this.applyChange({originX:d,originY:m,panX:I,panY:w,scale:x,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(t,e,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(e),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),jn(t.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",t),this.isDragging=!1,this.lockedAxis=!1,this.state!==pe.Destroy&&(t.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var t;let e=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(let $ of Et)this.velocity[$]=0;this.target.e=this.current.e,this.target.f=this.current.f,le(this.container,"is-scaling"),le(this.container,"is-animating"),this.isTicking=!1;let{trackingPoints:i}=this,n=i[0],r=i[i.length-1],a=0,d=0,m=0;r&&n&&(a=r.clientX-n.clientX,d=r.clientY-n.clientY,m=r.time-n.time);let f=((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1;f!==1&&(a*=f,d*=f);let h=0,x=0,I=0,w=0,P=this.option("decelFriction"),M=this.targetScale;if(m>0){I=Math.abs(a)>3?a/(m/30):0,w=Math.abs(d)>3?d/(m/30):0;let $=this.option("maxVelocity");$&&(I=Math.max(Math.min(I,$),-1*$),w=Math.max(Math.min(w,$),-1*$))}I&&(h=I/(1/(1-P)-1)),w&&(x=w/(1/(1-P)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&B(M)===this.minScale)&&(h=I=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&B(M)===this.minScale)&&(x=w=0);let E=this.dragOffset.x,O=this.dragOffset.y,R=this.option("dragMinThreshold")||0;Math.abs(E)<R&&Math.abs(O)<R&&(h=x=0,I=w=0),(this.option("zoom")&&(M<this.minScale-1e-5||M>this.maxScale+1e-5)||e&&!h&&!x)&&(P=.35),this.applyChange({panX:h,panY:x,friction:P}),this.emit("decel",I,w,E,O)}onWheel(t){var e=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce(function(r,a){return Math.abs(a)>Math.abs(r)?a:r});let i=Math.max(-1,Math.min(1,e));if(this.emit("wheel",t,i),this.panMode===Ze||t.defaultPrevented)return;let n=this.option("wheel");n==="pan"?(t.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-t.deltaX,panY:2*-t.deltaY,bounce:!1})):n==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(t)}onMouseMove(t){this.panWithMouse(t)}onKeydown(t){t.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");let{current:t,target:e,content:i,contentRect:n}=this,r=Object.assign({},vn);for(let E of Et){let O=E=="e"||E==="f"?_n:Es;r[E]=B(t[E],O),Math.abs(e[E]-t[E])<(E=="e"||E==="f"?.51:.001)&&(t[E]=e[E])}let{a,b:d,c:m,d:f,e:h,f:x}=r,I=`matrix(${a}, ${d}, ${m}, ${f}, ${h}, ${x})`,w=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(w=w.parentElement||w),w.style.transform===I)return;w.style.transform=I;let{contentWidth:P,contentHeight:M}=this.calculateContentDim();n.width=P,n.height=M,this.emit("afterTransform")}updateMetrics(t=!1){var e;if(!this||this.state===pe.Destroy||this.isContentLoading)return;let i=Math.max(1,((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1),{container:n,content:r}=this,a=r instanceof HTMLImageElement,d=n.getBoundingClientRect(),m=getComputedStyle(this.container),f=d.width*i,h=d.height*i,x=parseFloat(m.paddingTop)+parseFloat(m.paddingBottom),I=f-(parseFloat(m.paddingLeft)+parseFloat(m.paddingRight)),w=h-x;this.containerRect={width:f,height:h,innerWidth:I,innerHeight:w};let P=parseFloat(r.dataset.width||"")||(ke=>{let kt=0;return kt=ke instanceof HTMLImageElement?ke.naturalWidth:ke instanceof SVGElement?ke.width.baseVal.value:Math.max(ke.offsetWidth,ke.scrollWidth),kt||0})(r),M=parseFloat(r.dataset.height||"")||(ke=>{let kt=0;return kt=ke instanceof HTMLImageElement?ke.naturalHeight:ke instanceof SVGElement?ke.height.baseVal.value:Math.max(ke.offsetHeight,ke.scrollHeight),kt||0})(r),E=this.option("width",P)||Ge,O=this.option("height",M)||Ge,R=E===Ge,$=O===Ge;typeof E!="number"&&(E=P),typeof O!="number"&&(O=M),R&&(E=P*(O/M)),$&&(O=M/(P/E));let Y=r.parentElement instanceof HTMLPictureElement?r.parentElement:r;this.option("transformParent")&&(Y=Y.parentElement||Y);let it=Y.getAttribute("style")||"";Y.style.setProperty("transform","none","important"),a&&(Y.style.width="",Y.style.height=""),Y.offsetHeight;let nt=r.getBoundingClientRect(),be=nt.width*i,ot=nt.height*i,Wa=be,qa=ot;be=Math.min(be,E),ot=Math.min(ot,O),a?{width:be,height:ot}=((ke,kt,Xa,Ya)=>{let Za=Xa/ke,Ga=Ya/kt,er=Math.min(Za,Ga);return{width:ke*=er,height:kt*=er}})(E,O,be,ot):(be=Math.min(be,E),ot=Math.min(ot,O));let Ko=.5*(qa-ot),Jo=.5*(Wa-be);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:nt.top-d.top+Ko,bottom:d.bottom-nt.bottom+Ko,left:nt.left-d.left+Jo,right:d.right-nt.right+Jo,fitWidth:be,fitHeight:ot,width:be,height:ot,fullWidth:E,fullHeight:O}),Y.style.cssText=it,a&&(Y.style.width=`${be}px`,Y.style.height=`${ot}px`),this.setTransform(),t!==!0&&this.emit("refresh"),this.ignoreBounds||(B(this.targetScale)<B(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===pe.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){let{contentWidth:t,contentHeight:e}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:n}=this,{fitWidth:r,fitHeight:a}=this.contentRect,d=0,m=0,f=0,h=0,x=this.option("infinite");if(x===!0||n&&x===n)d=-1/0,f=1/0,m=-1/0,h=1/0;else{let{containerRect:I,contentRect:w}=this,P=B(r*i,_n),M=B(a*i,_n),{innerWidth:E,innerHeight:O}=I;if(I.width===P&&(E=I.width),I.width===M&&(O=I.height),t>E){f=.5*(t-E),d=-1*f;let R=.5*(w.right-w.left);d+=R,f+=R}if(r>E&&t<E&&(d-=.5*(r-E),f-=.5*(r-E)),e>O){h=.5*(e-O),m=-1*h;let R=.5*(w.bottom-w.top);m+=R,h+=R}a>O&&e<O&&(d-=.5*(a-O),f-=.5*(a-O))}return{x:{min:d,max:f},y:{min:m,max:h}}}getBounds(){let t=this.option("bounds");return t!==Ge?t:this.calculateBounds()}updateControls(){let t=this,e=t.container,{panMode:i,contentRect:n,targetScale:r,minScale:a}=t,d=a,m=t.option("click")||!1;m&&(d=t.getNextScale(m));let f=t.canZoomIn(),h=t.canZoomOut(),x=i===Xr&&!!this.option("touch"),I=h&&x;if(x&&(B(r)<B(a)&&!this.panOnlyZoomed&&(I=!0),(B(n.width,1)>B(n.fitWidth,1)||B(n.height,1)>B(n.fitHeight,1))&&(I=!0)),B(n.width*r,1)<B(n.fitWidth,1)&&(I=!1),i===Ze&&(I=!1),_t(e,this.cn("isDraggable"),I),!this.option("zoom"))return;let w=f&&B(d)>B(r),P=!w&&!I&&h&&B(d)<B(r);_t(e,this.cn("canZoomIn"),w),_t(e,this.cn("canZoomOut"),P);for(let M of e.querySelectorAll("[data-panzoom-action]")){let E=!1,O=!1;switch(M.dataset.panzoomAction){case"zoomIn":f?E=!0:O=!0;break;case"zoomOut":h?E=!0:O=!0;break;case"toggleZoom":case"iterateZoom":f||h?E=!0:O=!0;let R=M.querySelector("g");R&&(R.style.display=f?"":"none")}E?(M.removeAttribute("disabled"),M.removeAttribute("tabindex")):O&&(M.setAttribute("disabled",""),M.setAttribute("tabindex","-1"))}}panTo({x:t=this.target.e,y:e=this.target.f,scale:i=this.targetScale,friction:n=this.option("friction"),angle:r=0,originX:a=0,originY:d=0,flipX:m=!1,flipY:f=!1,ignoreBounds:h=!1}){this.state!==pe.Destroy&&this.applyChange({panX:t-this.target.e,panY:e-this.target.f,scale:i/this.targetScale,angle:r,originX:a,originY:d,friction:n,flipX:m,flipY:f,ignoreBounds:h})}applyChange({panX:t=0,panY:e=0,scale:i=1,angle:n=0,originX:r=-this.current.e,originY:a=-this.current.f,friction:d=this.option("friction"),flipX:m=!1,flipY:f=!1,ignoreBounds:h=!1,bounce:x=this.option("bounce")}){let I=this.state;if(I===pe.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=d||0,this.ignoreBounds=h;let{current:w}=this,P=w.e,M=w.f,E=this.getMatrix(this.target),O=new DOMMatrix().translate(P,M).translate(r,a).translate(t,e);if(this.option("zoom")){if(!h){let R=this.targetScale,$=this.minScale,Y=this.maxScale;R*i<$&&(i=$/R),R*i>Y&&(i=Y/R)}O=O.scale(i)}O=O.translate(-r,-a).translate(-P,-M).multiply(E),n&&(O=O.rotate(n)),m&&(O=O.scale(-1,1)),f&&(O=O.scale(1,-1));for(let R of Et)R!=="e"&&R!=="f"&&(O[R]>this.minScale+1e-5||O[R]<this.minScale-1e-5)?this.target[R]=O[R]:this.target[R]=B(O[R],_n);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===Ze||x===!1)&&!h&&this.clampTargetBounds(),I===pe.Init?this.animate():this.isResting||(this.state=pe.Panning,this.requestTick())}stop(t=!1){if(this.state===pe.Init||this.state===pe.Destroy)return;let e=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(let i of Et)this.velocity[i]=0,t==="current"?this.current[i]=this.target[i]:t==="target"&&(this.target[i]=this.current[i]);this.setTransform(),le(this.container,"is-scaling"),le(this.container,"is-animating"),this.isTicking=!1,this.state=pe.Ready,e&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),U(this.container,"is-animating"),this.isScaling&&U(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(t,e=this.option("mouseMoveFriction")){if(this.pmme=t,this.panMode!==Ze||!t||B(this.targetScale)<=B(this.minScale))return;this.emit("mouseMove",t);let{container:i,containerRect:n,contentRect:r}=this,a=n.width,d=n.height,m=i.getBoundingClientRect(),f=(t.clientX||0)-m.left,h=(t.clientY||0)-m.top,{contentWidth:x,contentHeight:I}=this.calculateContentDim(this.target),w=this.option("mouseMoveFactor");w>1&&(x!==a&&(x*=w),I!==d&&(I*=w));let P=.5*(x-a)-f/a*100/100*(x-a);P+=.5*(r.right-r.left);let M=.5*(I-d)-h/d*100/100*(I-d);M+=.5*(r.bottom-r.top),this.applyChange({panX:P-this.target.e,panY:M-this.target.f,friction:e})}zoomWithWheel(t){if(this.state===pe.Destroy||this.state===pe.Init)return;let e=Date.now();if(e-this.pwt<45)return void t.preventDefault();this.pwt=e;var i=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce(function(f,h){return Math.abs(h)>Math.abs(f)?h:f});let n=Math.max(-1,Math.min(1,i)),{targetScale:r,maxScale:a,minScale:d}=this,m=r*(100+45*n)/100;B(m)<B(d)&&B(r)<=B(d)?(this.cwd+=Math.abs(n),m=d):B(m)>B(a)&&B(r)>=B(a)?(this.cwd+=Math.abs(n),m=a):(this.cwd=0,m=Math.max(Math.min(m,a),d)),this.cwd>this.option("wheelLimit")||(t.preventDefault(),B(m)!==B(r)&&this.zoomTo(m,{event:t}))}canZoomIn(){return this.option("zoom")&&(B(this.contentRect.width,1)<B(this.contentRect.fitWidth,1)||B(this.targetScale)<B(this.maxScale))}canZoomOut(){return this.option("zoom")&&B(this.targetScale)>B(this.minScale)}zoomIn(t=1.25,e){this.zoomTo(this.targetScale*t,e)}zoomOut(t=.8,e){this.zoomTo(this.targetScale*t,e)}zoomToFit(t){this.zoomTo("fit",t)}zoomToCover(t){this.zoomTo("cover",t)}zoomToFull(t){this.zoomTo("full",t)}zoomToMax(t){this.zoomTo("max",t)}toggleZoom(t){this.zoomTo(this.getNextScale("toggleZoom"),t)}toggleMax(t){this.zoomTo(this.getNextScale("toggleMax"),t)}toggleCover(t){this.zoomTo(this.getNextScale("toggleCover"),t)}iterateZoom(t){this.zoomTo("next",t)}zoomTo(t=1,{friction:e=Ge,originX:i=Ge,originY:n=Ge,event:r}={}){if(this.isContentLoading||this.state===pe.Destroy)return;let{targetScale:a,fullScale:d,maxScale:m,coverScale:f}=this;if(this.stop(),this.panMode===Ze&&(r=this.pmme||r),r||i===Ge||n===Ge){let x=this.content.getBoundingClientRect(),I=this.container.getBoundingClientRect(),w=r?r.clientX:I.left+.5*I.width,P=r?r.clientY:I.top+.5*I.height;i=w-x.left-.5*x.width,n=P-x.top-.5*x.height}let h=1;typeof t=="number"?h=t:t==="full"?h=d:t==="cover"?h=f:t==="max"?h=m:t==="fit"?h=1:t==="next"&&(h=this.getNextScale("iterateZoom")),h=h/a||1,e=e===Ge?h>1?.15:.25:e,this.applyChange({scale:h,originX:i,originY:n,friction:e}),r&&this.panMode===Ze&&this.panWithMouse(r,e)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");let{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.height-(e.top+.5*e.fitHeight)-i.f,scale:t.width/e.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");let{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.innerHeight-(e.top+.5*e.fitHeight)-i.f,scale:t.height/e.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){let{container:t}=this,e=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");t.classList.toggle(e);let n=t.classList.contains(e);n?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(n?"enterFS":"exitFS")}getMatrix(t=this.current){let{a:e,b:i,c:n,d:r,e:a,f:d}=t;return new DOMMatrix([e,i,n,r,a,d])}reset(t){if(this.state!==pe.Init&&this.state!==pe.Destroy){this.stop("current");for(let e of Et)this.target[e]=vn[e];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=t===void 0?this.option("friction"):t,this.state=pe.Panning,this.requestTick())}}destroy(){this.stop(),this.state=pe.Destroy,this.detachEvents(),this.detachObserver();let{container:t,content:e}=this,i=this.option("classes")||{};for(let n of Object.values(i))t.classList.remove(n+"");e&&(e.removeEventListener("load",this.onLoad),e.removeEventListener("error",this.onError)),this.detachPlugins()}};Object.defineProperty(ui,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:js}),Object.defineProperty(ui,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});var Zr=function(o,t){let e=!0;return(...i)=>{e&&(e=!1,o(...i),setTimeout(()=>{e=!0},t))}},Gr=(o,t)=>{let e=[];return o.childNodes.forEach(i=>{i.nodeType!==Node.ELEMENT_NODE||t&&!i.matches(t)||e.push(i)}),e},Ms={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}},Se;(function(o){o[o.Init=0]="Init",o[o.Ready=1]="Ready",o[o.Destroy=2]="Destroy"})(Se||(Se={}));var So=o=>{if(typeof o=="string"||o instanceof HTMLElement)o={html:o};else{let t=o.thumb;t!==void 0&&(typeof t=="string"&&(o.thumbSrc=t),t instanceof HTMLImageElement&&(o.thumbEl=t,o.thumbElSrc=t.src,o.thumbSrc=t.src),delete o.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},o)},Os=(o={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},o),qe=class extends Ei{constructor(t,e){super(e),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:t})}attach(){}detach(){}},Ds={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2},En=class extends qe{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let t=this.list;if(!t){t=document.createElement("ul"),U(t,this.cn("list")),t.setAttribute("role","tablist");let e=this.instance.container;e.appendChild(t),U(e,this.cn("hasDots")),this.list=t}return t}refresh(){var t;let e=this.instance.pages.length,i=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),r=this.option("dynamicFrom");if(e<i||e>n)return void this.cleanup();let a=typeof r=="number"&&e>5&&e>=r,d=!this.list||this.isDynamic!==a||this.list.children.length!==e;d&&this.cleanup();let m=this.build();if(_t(m,this.cn("isDynamic"),!!a),d)for(let x=0;x<e;x++)m.append(this.createItem(x));let f,h=0;for(let x of[...m.children]){let I=h===this.instance.page;I&&(f=x),_t(x,this.cn("isCurrent"),I),(t=x.children[0])===null||t===void 0||t.setAttribute("aria-selected",I?"true":"false");for(let w of["isBeforePrev","isPrev","isNext","isAfterNext"])le(x,this.cn(w));h++}if(f=f||m.firstChild,a&&f){let x=f.previousElementSibling,I=x&&x.previousElementSibling;U(x,this.cn("isPrev")),U(I,this.cn("isBeforePrev"));let w=f.nextElementSibling,P=w&&w.nextElementSibling;U(w,this.cn("isNext")),U(P,this.cn("isAfterNext"))}this.isDynamic=a}createItem(t=0){var e;let i=document.createElement("li");i.setAttribute("role","presentation");let n=vt(this.instance.localize(this.option("dotTpl"),[["%d",t+1]]).replace(/\%i/g,t+""));return i.appendChild(n),(e=i.children[0])===null||e===void 0||e.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,le(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(En,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ds});var bn="disabled",yn="next",Kr="prev",Mn=class extends qe{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){let t=this.instance,e=t.pages.length,i=t.page;if(e<2)return void this.cleanup();this.build();let n=this.prev,r=this.next;n&&r&&(n.removeAttribute(bn),r.removeAttribute(bn),t.isInfinite||(i<=0&&n.setAttribute(bn,""),i>=e-1&&r.setAttribute(bn,"")))}addBtn(t){var e;let i=this.instance,n=document.createElement("button");n.setAttribute("tabindex","0"),n.setAttribute("title",i.localize(`{{${t.toUpperCase()}}}`)),U(n,this.cn("button")+" "+this.cn(t===yn?"isNext":"isPrev"));let r=i.isRTL?t===yn?Kr:yn:t;var a;return n.innerHTML=i.localize(this.option(`${r}Tpl`)),n.dataset[`carousel${a=t,a?a.match("^[a-z]")?a.charAt(0).toUpperCase()+a.substring(1):a:""}`]="true",(e=this.container)===null||e===void 0||e.appendChild(n),n}build(){let t=this.instance.container,e=this.cn("container"),{container:i,prev:n,next:r}=this;i||(i=t.querySelector("."+e),this.isDom=!!i),i||(i=document.createElement("div"),U(i,e),t.appendChild(i)),this.container=i,r||(r=i.querySelector("[data-carousel-next]")),r||(r=this.addBtn(yn)),this.next=r,n||(n=i.querySelector("[data-carousel-prev]")),n||(n=this.addBtn(Kr)),this.prev=n}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(Mn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});var On=class extends qe{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(t){this.target=this.instance,this.nav=t,this.attachEvents()}addAsNavFor(t){this.nav=this.instance,this.target=t,this.attachEvents()}attachEvents(){let{nav:t,target:e}=this;t&&e&&(t.options.initialSlide=e.options.initialPage,t.state===Se.Ready?this.onNavReady(t):t.on("ready",this.onNavReady),e.state===Se.Ready?this.onTargetReady(e):e.on("ready",this.onTargetReady))}onNavReady(t){t.on("createSlide",this.onNavCreateSlide),t.on("Panzoom.click",this.onNavClick),t.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(t){t.on("change",this.onTargetChange),t.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(t,e,i){this.onNavTouch(t,t.panzoom,i)}onNavTouch(t,e,i){var n,r;if(Math.abs(e.dragOffset.x)>3||Math.abs(e.dragOffset.y)>3)return;let a=i.target,{nav:d,target:m}=this;if(!d||!m||!a)return;let f=a.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!f)return;let h=parseInt(f.dataset.index||"",10)||0,x=m.getPageForSlide(h),I=d.getPageForSlide(h);d.slideTo(I),m.slideTo(x,{friction:((r=(n=this.nav)===null||n===void 0?void 0:n.plugins)===null||r===void 0?void 0:r.Sync.option("friction"))||0}),this.markSelectedSlide(h)}onNavCreateSlide(t,e){e.index===this.selectedIndex&&this.markSelectedSlide(e.index)}onTargetChange(){var t,e;let{target:i,nav:n}=this;if(!i||!n||n.state!==Se.Ready||i.state!==Se.Ready)return;let r=(e=(t=i.pages[i.page])===null||t===void 0?void 0:t.slides[0])===null||e===void 0?void 0:e.index,a=n.getPageForSlide(r);this.markSelectedSlide(r),n.slideTo(a,n.prevPage===null&&i.prevPage===null?{friction:0}:void 0)}markSelectedSlide(t){let e=this.nav;e&&e.state===Se.Ready&&(this.selectedIndex=t,[...e.slides].map(i=>{i.el&&i.el.classList[i.index===t?"add":"remove"]("is-nav-selected")}))}attach(){let t=this,e=t.options.target,i=t.options.nav;e?t.addAsNavFor(e):i&&t.addAsTargetFor(i)}detach(){let t=this,e=t.nav,i=t.target;e&&(e.off("ready",t.onNavReady),e.off("createSlide",t.onNavCreateSlide),e.off("Panzoom.click",t.onNavClick),e.off("Panzoom.touchEnd",t.onNavTouch)),t.nav=null,i&&(i.off("ready",t.onTargetReady),i.off("refresh",t.onTargetChange),i.off("change",t.onTargetChange)),t.target=null}};Object.defineProperty(On,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});var ks={Navigation:Mn,Dots:En,Sync:On},Cn="animationend",Jr="isSelected",xn="slide",ji=class o extends $i{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===Se.Ready}get isInfinite(){let t=!1,{contentDim:e,viewportDim:i,pages:n,slides:r}=this,a=r[0];return n.length>=2&&a&&e+a.dim>=i&&(t=this.option("infinite")),t}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(t,e={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Se.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof t=="string"&&(t=document.querySelector(t)),!t||!He(t))throw new Error("No Element found");this.container=t,this.slideNext=Zr(this.slideNext.bind(this),150),this.slidePrev=Zr(this.slidePrev.bind(this),150),this.userOptions=e,this.userPlugins=i,queueMicrotask(()=>{this.processOptions()})}processOptions(){var t,e;let i=Qe({},o.defaults,this.userOptions),n="",r=i.breakpoints;if(r&&Ao(r))for(let[a,d]of Object.entries(r))window.matchMedia(a).matches&&Ao(d)&&(n+=a,Qe(i,d));n===this.bp&&this.state!==Se.Init||(this.bp=n,this.state===Se.Ready&&(i.initialSlide=((e=(t=this.pages[this.page])===null||t===void 0?void 0:t.slides[0])===null||e===void 0?void 0:e.index)||0),this.state!==Se.Init&&this.destroy(),super.setOptions(i),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=Se.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},o.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=Se.Ready,this.emit("ready")}initLayout(){let{container:t}=this,e=this.option("classes");U(t,this.cn("container")),_t(t,e.isLTR,!this.isRTL),_t(t,e.isRTL,this.isRTL),_t(t,e.isVertical,!this.isHorizontal),_t(t,e.isHorizontal,this.isHorizontal);let i=this.option("viewport")||t.querySelector(`.${e.viewport}`);i||(i=document.createElement("div"),U(i,e.viewport),i.append(...Gr(t,`.${e.slide}`)),t.prepend(i)),i.addEventListener("scroll",this.onScroll);let n=this.option("track")||t.querySelector(`.${e.track}`);n||(n=document.createElement("div"),U(n,e.track),n.append(...Array.from(i.childNodes))),n.setAttribute("aria-live","polite"),i.contains(n)||i.prepend(n),this.viewport=i,this.track=n,this.emit("initLayout")}initSlides(){let{track:t}=this;if(!t)return;let e=[...this.slides],i=[];[...Gr(t,`.${this.cn(xn)}`)].forEach(n=>{if(He(n)){let r=So({el:n,isDom:!0,index:this.slides.length});i.push(r)}});for(let n of[...this.option("slides",[])||[],...e])i.push(So(n));this.slides=i;for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;for(let n of i)this.emit("beforeInitSlide",n,n.index),this.emit("initSlide",n,n.index);this.emit("initSlides")}setInitialPage(){let t=this.option("initialSlide");this.page=typeof t=="number"?this.getPageForSlide(t):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){let{track:t,pages:e,isHorizontal:i}=this;if(!t||!e.length)return;let n=this.page;e[n]||(this.page=n=0);let r=(e[n].pos||0)*(this.isRTL&&i?1:-1),a=i?`${r}px`:"0",d=i?"0":`${r}px`;t.style.transform=`translate3d(${a}, ${d}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);let t=this.option("Panzoom")||{};this.panzoom=new ui(this.viewport,Qe({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:e=>!(this.pages.length<2&&!e.options.infinite),bounds:()=>this.getBounds(),maxVelocity:e=>Math.abs(e.target[this.axis]-e.current[this.axis])<2*this.viewportDim?100:0},t)),this.panzoom.on("*",(e,i,...n)=>{this.emit(`Panzoom.${i}`,e,...n)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){let t=this.container;t&&(t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let t=[],{contentDim:e,viewportDim:i}=this,n=this.option("slidesPerPage");n=(n==="auto"||e<=i)&&this.option("fill")!==!1?1/0:parseFloat(n+"");let r=0,a=0,d=0;for(let m of this.slides)(!t.length||a+m.dim-i>.05||d>=n)&&(t.push(Os()),r=t.length-1,a=0,d=0),t[r].slides.push(m),a+=m.dim+m.gap,d++;return t}processPages(){let t=this.pages,{contentDim:e,viewportDim:i,isInfinite:n}=this,r=this.option("center"),a=this.option("fill"),d=a&&r&&e>i&&!n;if(t.forEach((h,x)=>{var I;h.index=x,h.pos=((I=h.slides[0])===null||I===void 0?void 0:I.pos)||0,h.dim=0;for(let[w,P]of h.slides.entries())h.dim+=P.dim,w<h.slides.length-1&&(h.dim+=P.gap);d&&h.pos+.5*h.dim<.5*i?h.pos=0:d&&h.pos+.5*h.dim>=e-.5*i?h.pos=e-i:r&&(h.pos+=-.5*(i-h.dim))}),t.forEach(h=>{a&&!n&&e>i&&(h.pos=Math.max(h.pos,0),h.pos=Math.min(h.pos,e-i)),h.pos=B(h.pos,1e3),h.dim=B(h.dim,1e3),Math.abs(h.pos)<=.1&&(h.pos=0)}),n)return t;let m=[],f;return t.forEach(h=>{let x=Object.assign({},h);f&&x.pos===f.pos?(f.dim+=x.dim,f.slides=[...f.slides,...x.slides]):(x.index=m.length,f=x,m.push(x))}),m}getPageFromIndex(t=0){let e=this.pages.length,i;return t=parseInt((t||0).toString())||0,i=this.isInfinite?(t%e+e)%e:Math.max(Math.min(t,e-1),0),i}getSlideMetrics(t){var e,i;let n=this.isHorizontal?"width":"height",r=0,a=0,d=t.el,m=!(!d||d.parentNode);if(d?r=parseFloat(d.dataset[n]||"")||0:(d=document.createElement("div"),d.style.visibility="hidden",(this.track||document.body).prepend(d)),U(d,this.cn(xn)+" "+t.class+" "+t.customClass),r)d.style[n]=`${r}px`,d.style[n==="width"?"height":"width"]="";else{m&&(this.track||document.body).prepend(d),r=d.getBoundingClientRect()[n]*Math.max(1,((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1);let h=d[this.isHorizontal?"offsetWidth":"offsetHeight"];h-1>r&&(r=h)}let f=getComputedStyle(d);return f.boxSizing==="content-box"&&(this.isHorizontal?(r+=parseFloat(f.paddingLeft)||0,r+=parseFloat(f.paddingRight)||0):(r+=parseFloat(f.paddingTop)||0,r+=parseFloat(f.paddingBottom)||0)),a=parseFloat(f[this.isHorizontal?"marginRight":"marginBottom"])||0,m?(i=d.parentElement)===null||i===void 0||i.removeChild(d):t.el||d.remove(),{dim:B(r,1e3),gap:B(a,1e3)}}getBounds(){let{isInfinite:t,isRTL:e,isHorizontal:i,pages:n}=this,r={min:0,max:0};if(t)r={min:-1/0,max:1/0};else if(n.length){let a=n[0].pos,d=n[n.length-1].pos;r=e&&i?{min:a,max:d}:{min:-1*d,max:-1*a}}return{x:i?r:{min:0,max:0},y:i?{min:0,max:0}:r}}repositionSlides(){let t,{isHorizontal:e,isRTL:i,isInfinite:n,viewport:r,viewportDim:a,contentDim:d,page:m,pages:f,slides:h,panzoom:x}=this,I=0,w=0,P=0,M=0;x?M=-1*x.current[this.axis]:f[m]&&(M=f[m].pos||0),t=e?i?"right":"left":"top",i&&e&&(M*=-1);for(let $ of h){let Y=$.el;Y?(t==="top"?(Y.style.right="",Y.style.left=""):Y.style.top="",$.index!==I?Y.style[t]=w===0?"":`${B(w,1e3)}px`:Y.style[t]="",P+=$.dim+$.gap,I++):w+=$.dim+$.gap}if(n&&P&&r){let $=getComputedStyle(r),Y="padding",it=e?"Right":"Bottom",nt=parseFloat($[Y+(e?"Left":"Top")]);M-=nt,a+=nt,a+=parseFloat($[Y+it]);for(let be of h)be.el&&(B(be.pos)<B(a)&&B(be.pos+be.dim+be.gap)<B(M)&&B(M)>B(d-a)&&(be.el.style[t]=`${B(w+P,1e3)}px`),B(be.pos+be.gap)>=B(d-a)&&B(be.pos)>B(M+a)&&B(M)<B(a)&&(be.el.style[t]=`-${B(P,1e3)}px`))}let E,O,R=[...this.inTransition];if(R.length>1&&(E=f[R[0]],O=f[R[1]]),E&&O){let $=0;for(let Y of h)Y.el?this.inTransition.has(Y.index)&&E.slides.indexOf(Y)<0&&(Y.el.style[t]=`${B($+(E.pos-O.pos),1e3)}px`):$+=Y.dim+Y.gap}}createSlideEl(t){let{track:e,slides:i}=this;if(!e||!t||t.el&&t.el.parentNode)return;let n=t.el||document.createElement("div");U(n,this.cn(xn)),U(n,t.class),U(n,t.customClass);let r=t.html;r&&(r instanceof HTMLElement?n.appendChild(r):n.innerHTML=t.html+"");let a=[];i.forEach((h,x)=>{h.el&&a.push(x)});let d=t.index,m=null;a.length&&(m=i[a.reduce((h,x)=>Math.abs(x-d)<Math.abs(h-d)?x:h)]);let f=m&&m.el&&m.el.parentNode?m.index<t.index?m.el.nextSibling:m.el:null;e.insertBefore(n,e.contains(f)?f:null),t.el=n,this.emit("createSlide",t)}removeSlideEl(t,e=!1){let i=t?.el;if(!i||!i.parentNode)return;let n=this.cn(Jr);if(i.classList.contains(n)&&(le(i,n),this.emit("unselectSlide",t)),t.isDom&&!e)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",t);let r=new CustomEvent(Cn);i.dispatchEvent(r),t.el&&(t.el.remove(),t.el=null)}transitionTo(t=0,e=this.option("transition")){var i,n,r,a;if(!e)return!1;let d=this.page,{pages:m,panzoom:f}=this;t=parseInt((t||0).toString())||0;let h=this.getPageFromIndex(t);if(!f||!m[h]||m.length<2||Math.abs((((n=(i=m[d])===null||i===void 0?void 0:i.slides[0])===null||n===void 0?void 0:n.dim)||0)-this.viewportDim)>1)return!1;let x=t>d?1:-1;this.isInfinite&&(d===0&&t===m.length-1&&(x=-1),d===m.length-1&&t===0&&(x=1));let I=m[h].pos*(this.isRTL?1:-1);if(d===h&&Math.abs(I-f.target[this.axis])<1)return!1;this.clearTransitions();let w=f.isResting;U(this.container,this.cn("inTransition"));let P=((r=m[d])===null||r===void 0?void 0:r.slides[0])||null,M=((a=m[h])===null||a===void 0?void 0:a.slides[0])||null;this.inTransition.add(M.index),this.createSlideEl(M);let E=P.el,O=M.el;w||e===xn||(e="fadeFast",E=null);let R=this.isRTL?"next":"prev",$=this.isRTL?"prev":"next";return E&&(this.inTransition.add(P.index),P.transition=e,E.addEventListener(Cn,this.onAnimationEnd),E.classList.add(`f-${e}Out`,`to-${x>0?$:R}`)),O&&(M.transition=e,O.addEventListener(Cn,this.onAnimationEnd),O.classList.add(`f-${e}In`,`from-${x>0?R:$}`)),f.current[this.axis]=I,f.target[this.axis]=I,f.requestTick(),this.onChange(h),!0}manageSlideVisiblity(){let t=new Set,e=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(let n of this.slides)i.has(n)?t.add(n):e.add(n);for(let n of this.inTransition)t.add(this.slides[n]);for(let n of t)this.createSlideEl(n),this.lazyLoadSlide(n);for(let n of e)t.has(n)||this.removeSlideEl(n);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;let t="aria-hidden",e=this.cn(Jr);if(e)for(let i of this.slides){let n=i.el;n&&(n.dataset.index=`${i.index}`,n.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?n.removeAttribute(t):n.setAttribute(t,"true"):this.pages[this.page].slides.includes(i)?(n.classList.contains(e)||(U(n,e),this.emit("selectSlide",i)),n.removeAttribute(t)):(n.classList.contains(e)&&(le(n,e),this.emit("unselectSlide",i)),n.setAttribute(t,"true")))}}flipInfiniteTrack(){let{axis:t,isHorizontal:e,isInfinite:i,isRTL:n,viewportDim:r,contentDim:a}=this,d=this.panzoom;if(!d||!i)return;let m=d.current[t],f=d.target[t]-m,h=0,x=.5*r;n&&e?(m<-x&&(h=-1,m+=a),m>a-x&&(h=1,m-=a)):(m>x&&(h=1,m-=a),m<-a+x&&(h=-1,m+=a)),h&&(d.current[t]=m,d.target[t]=m+f)}lazyLoadImg(t,e){let i=this,n="f-fadeIn",r="is-preloading",a=!1,d=null,m=()=>{a||(a=!0,d&&(d.remove(),d=null),le(e,r),e.complete&&(U(e,n),setTimeout(()=>{le(e,n)},350)),this.option("adaptiveHeight")&&t.el&&this.pages[this.page].slides.indexOf(t)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",t))};U(e,r),e.src=e.dataset.lazySrcset||e.dataset.lazySrc||"",delete e.dataset.lazySrc,delete e.dataset.lazySrcset,e.addEventListener("error",()=>{m()}),e.addEventListener("load",()=>{m()}),setTimeout(()=>{let f=e.parentNode;f&&t.el&&(e.complete?m():a||(d=vt(Lo),f.insertBefore(d,e)))},300)}lazyLoadSlide(t){let e=t&&t.el;if(!e)return;let i=new Set,n=Array.from(e.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));e.dataset.lazySrc&&n.push(e),n.map(r=>{r instanceof HTMLImageElement?i.add(r):r instanceof HTMLElement&&r.dataset.lazySrc&&(r.style.backgroundImage=`url('${r.dataset.lazySrc}')`,delete r.dataset.lazySrc)});for(let r of i)this.lazyLoadImg(t,r)}onAnimationEnd(t){var e;let i=t.target,n=i?parseInt(i.dataset.index||"",10)||0:-1,r=this.slides[n],a=t.animationName;if(!i||!r||!a)return;let d=!!this.inTransition.has(n)&&r.transition;d&&a.substring(0,d.length+2)===`f-${d}`&&this.inTransition.delete(n),this.inTransition.size||this.clearTransitions(),n===this.page&&(!((e=this.panzoom)===null||e===void 0)&&e.isResting)&&this.emit("settle")}onDecel(t,e=0,i=0,n=0,r=0){if(this.option("dragFree"))return void this.setPageFromPosition();let{isRTL:a,isHorizontal:d,axis:m,pages:f}=this,h=f.length,x=Math.abs(Math.atan2(i,e)/(Math.PI/180)),I=0;if(I=x>45&&x<135?d?0:i:d?e:0,!h)return;let w=this.page,P=a&&d?1:-1,M=t.current[m]*P,{pageIndex:E}=this.getPageFromPosition(M);Math.abs(I)>5?(f[w].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(w=E),w=a&&d?I<0?w-1:w+1:I<0?w+1:w-1):w=n===0&&r===0?w:E,this.slideTo(w,{transition:!1,friction:t.option("decelFriction")})}onClick(t){let e=t.target,i=e&&He(e)?e.dataset:null,n,r;i&&(i.carouselPage!==void 0?(r="slideTo",n=i.carouselPage):i.carouselNext!==void 0?r="slideNext":i.carouselPrev!==void 0&&(r="slidePrev")),r?(t.preventDefault(),t.stopPropagation(),e&&!e.hasAttribute("disabled")&&this[r](n)):this.emit("click",t)}onSlideTo(t){let e=t.detail||0;this.slideTo(this.getPageForSlide(e),{friction:0})}onChange(t,e=0){let i=this.page;this.prevPage=i,this.page=t,this.option("adaptiveHeight")&&this.setViewportHeight(),t!==i&&(this.markSelectedSlides(),this.emit("change",t,i,e))}onRefresh(){let t=this.contentDim,e=this.viewportDim;this.updateMetrics(),this.contentDim===t&&this.viewportDim===e||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var t;(t=this.viewport)===null||t===void 0||t.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(t){this.lp!==t.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=t.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(t=null,e=null){this.destroy(),this.state=Se.Init,this.prevPage=null,this.userOptions=t||this.userOptions,this.userPlugins=e||this.userPlugins,this.processOptions()}slideTo(t=0,{friction:e=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===Se.Destroy)return;t=parseInt((t||0).toString())||0;let n=this.getPageFromIndex(t),{axis:r,isHorizontal:a,isRTL:d,pages:m,panzoom:f}=this,h=m.length,x=d&&a?1:-1;if(!f||!h)return;if(this.page!==n){let w=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",w,t),w.defaultPrevented)return}if(this.transitionTo(t,i))return;let I=m[n].pos;if(this.isInfinite){let w=this.contentDim,P=f.target[r]*x;h===2?I+=w*Math.floor(parseFloat(t+"")/2):I=[I,I-w,I+w].reduce(function(M,E){return Math.abs(E-P)<Math.abs(M-P)?E:M})}I*=x,Math.abs(f.target[r]-I)<1||(f.panTo({x:a?I:0,y:a?0:I,friction:e}),this.onChange(n))}slideToClosest(t){if(this.panzoom){let{pageIndex:e}=this.getPageFromPosition();this.slideTo(e,t)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),le(this.container,this.cn("inTransition"));let t=["to-prev","to-next","from-prev","from-next"];for(let e of this.slides){let i=e.el;if(i){i.removeEventListener(Cn,this.onAnimationEnd),i.classList.remove(...t);let n=e.transition;n&&i.classList.remove(`f-${n}Out`,`f-${n}In`)}}this.manageSlideVisiblity()}addSlide(t,e){var i,n,r,a;let d=this.panzoom,m=((i=this.pages[this.page])===null||i===void 0?void 0:i.pos)||0,f=((n=this.pages[this.page])===null||n===void 0?void 0:n.dim)||0,h=this.contentDim<this.viewportDim,x=Array.isArray(e)?e:[e],I=[];for(let w of x)I.push(So(w));this.slides.splice(t,0,...I);for(let w=0;w<this.slides.length;w++)this.slides[w].index=w;for(let w of I)this.emit("beforeInitSlide",w,w.index);if(this.page>=t&&(this.page+=I.length),this.updateMetrics(),d){let w=((r=this.pages[this.page])===null||r===void 0?void 0:r.pos)||0,P=((a=this.pages[this.page])===null||a===void 0?void 0:a.dim)||0,M=this.pages.length||1,E=this.isRTL?f-P:P-f,O=this.isRTL?m-w:w-m;h&&M===1?(t<=this.page&&(d.current[this.axis]-=E,d.target[this.axis]-=E),d.panTo({[this.isHorizontal?"x":"y"]:-1*w})):O&&t<=this.page&&(d.target[this.axis]-=O,d.current[this.axis]-=O,d.requestTick())}for(let w of I)this.emit("initSlide",w,w.index)}prependSlide(t){this.addSlide(0,t)}appendSlide(t){this.addSlide(this.slides.length,t)}removeSlide(t){let e=this.slides.length;t=(t%e+e)%e;let i=this.slides[t];if(i){this.removeSlideEl(i,!0),this.slides.splice(t,1);for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){let{panzoom:t,viewport:e,track:i,slides:n,isHorizontal:r,isInfinite:a}=this;if(!i)return;let d=r?"width":"height",m=r?"offsetWidth":"offsetHeight";if(e){let x=Math.max(e[m],B(e.getBoundingClientRect()[d],1e3)),I=getComputedStyle(e),w="padding",P=r?"Right":"Bottom";x-=parseFloat(I[w+(r?"Left":"Top")])+parseFloat(I[w+P]),this.viewportDim=x}let f,h=0;for(let[x,I]of n.entries()){let w=0,P=0;!I.el&&f?(w=f.dim,P=f.gap):({dim:w,gap:P}=this.getSlideMetrics(I),f=I),w=B(w,1e3),P=B(P,1e3),I.dim=w,I.gap=P,I.pos=h,h+=w,(a||x<n.length-1)&&(h+=P)}h=B(h,1e3),this.contentDim=h,t&&(t.contentRect[d]=h,t.contentRect[r?"fullWidth":"fullHeight"]=h),this.pages=this.createPages(),this.pages=this.processPages(),this.state===Se.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(t,e=!1,i=!1){t===void 0&&(t=this.page);let n=this,r=n.panzoom,a=n.contentDim,d=n.pages[t]||0;if(!d||!r)return t>this.page?-1:1;let m=-1*r.current.e,f=B((m-d.pos)/(1*d.dim),1e3),h=f,x=f;this.isInfinite&&i!==!0&&(h=B((m-d.pos+a)/(1*d.dim),1e3),x=B((m-d.pos-a)/(1*d.dim),1e3));let I=[f,h,x].reduce(function(w,P){return Math.abs(P)<Math.abs(w)?P:w});return e?I:I>1?1:I<-1?-1:I}setViewportHeight(){let{page:t,pages:e,viewport:i,isHorizontal:n}=this;if(!i||!e[t])return;let r=0;n&&this.track&&(this.track.style.height="auto",e[t].slides.forEach(a=>{a.el&&(r=Math.max(r,a.el.offsetHeight))})),i.style.height=r?`${r}px`:""}getPageForSlide(t){for(let e of this.pages)for(let i of e.slides)if(i.index===t)return e.index;return-1}getVisibleSlides(t=0){var e;let i=new Set,{panzoom:n,contentDim:r,viewportDim:a,pages:d,page:m}=this;if(a){r=r+((e=this.slides[this.slides.length-1])===null||e===void 0?void 0:e.gap)||0;let f=0;f=n&&n.state!==pe.Init&&n.state!==pe.Destroy?-1*n.current[this.axis]:d[m]&&d[m].pos||0,this.isInfinite&&(f-=Math.floor(f/r)*r),this.isRTL&&this.isHorizontal&&(f*=-1);let h=f-a*t,x=f+a*(t+1),I=this.isInfinite?[-1,0,1]:[0];for(let w of this.slides)for(let P of I){let M=w.pos+P*r,E=M+w.dim+w.gap;M<x&&E>h&&i.add(w)}}return i}getPageFromPosition(t){let{viewportDim:e,contentDim:i,slides:n,pages:r,panzoom:a}=this,d=r.length,m=n.length,f=n[0],h=n[m-1],x=this.option("center"),I=0,w=0,P=0,M=t===void 0?-1*(a?.target[this.axis]||0):t;x&&(M+=.5*e),this.isInfinite?(M<f.pos-.5*h.gap&&(M-=i,P=-1),M>h.pos+h.dim+.5*h.gap&&(M-=i,P=1)):M=Math.max(f.pos||0,Math.min(M,h.pos));let E=h,O=n.find(R=>{let $=R.pos-.5*E.gap,Y=R.pos+R.dim+.5*R.gap;return E=R,M>=$&&M<Y});return O||(O=h),w=this.getPageForSlide(O.index),I=w+P*d,{page:I,pageIndex:w}}setPageFromPosition(){let{pageIndex:t}=this.getPageFromPosition();this.onChange(t)}destroy(){if([Se.Destroy].includes(this.state))return;this.state=Se.Destroy;let{container:t,viewport:e,track:i,slides:n,panzoom:r}=this,a=this.option("classes");t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),r&&(r.destroy(),this.panzoom=null),n&&n.forEach(m=>{this.removeSlideEl(m)}),this.detachPlugins(),e&&(e.removeEventListener("scroll",this.onScroll),e.offsetParent&&i&&i.offsetParent&&e.replaceWith(...i.childNodes));for(let[m,f]of Object.entries(a))m!=="container"&&f&&t.classList.remove(f);this.track=null,this.viewport=null,this.page=0,this.slides=[];let d=this.events.get("ready");this.events=new Map,d&&this.events.set("ready",d)}};Object.defineProperty(ji,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:ui}),Object.defineProperty(ji,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ms}),Object.defineProperty(ji,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:ks});var Ca=function(o){if(!He(o))return 0;let t=window.scrollY,e=window.innerHeight,i=t+e,n=o.getBoundingClientRect(),r=n.y+t,a=n.height,d=r+a;if(t>d||i<r)return 0;if(t<r&&i>d||r<t&&d>i)return 100;let m=a;r<t&&(m-=t-r),d>i&&(m-=d-i);let f=m/e*100;return Math.round(f)},Qi=!(typeof window>"u"||!window.document||!window.document.createElement),wo,Io=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),ea=o=>{if(o&&Qi){wo===void 0&&document.createElement("div").focus({get preventScroll(){return wo=!0,!1}});try{if(wo)o.focus({preventScroll:!0});else{let t=window.scrollY||document.body.scrollTop,e=window.scrollX||document.body.scrollLeft;o.focus(),document.body.scrollTo({top:t,left:e,behavior:"auto"})}}catch{}}},xa=()=>{let o=document,t,e="",i="",n="";return o.fullscreenEnabled?(e="requestFullscreen",i="exitFullscreen",n="fullscreenElement"):o.webkitFullscreenEnabled&&(e="webkitRequestFullscreen",i="webkitExitFullscreen",n="webkitFullscreenElement"),e&&(t={request:function(r=o.documentElement){return e==="webkitRequestFullscreen"?r[e](Element.ALLOW_KEYBOARD_INPUT):r[e]()},exit:function(){return o[n]&&o[i]()},isFullscreen:function(){return o[n]}}),t},zo={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},ya),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},trapFocus:!0,wheel:"zoom"},Te,Ve;(function(o){o[o.Init=0]="Init",o[o.Ready=1]="Ready",o[o.Closing=2]="Closing",o[o.CustomClosing=3]="CustomClosing",o[o.Destroy=4]="Destroy"})(Te||(Te={})),function(o){o[o.Loading=0]="Loading",o[o.Opening=1]="Opening",o[o.Ready=2]="Ready",o[o.Closing=3]="Closing"}(Ve||(Ve={}));var ta="",Hi=!1,Sn=!1,pi=null,Sa=()=>{let o="",t="",e=ee.getInstance();if(e){let i=e.carousel,n=e.getSlide();if(i&&n){let r=n.slug||void 0,a=n.triggerEl||void 0;t=r||e.option("slug")||"",!t&&a&&a.dataset&&(t=a.dataset.fancybox||""),t&&t!=="true"&&(o="#"+t+(!r&&i.slides.length>1?"-"+(n.index+1):""))}}return{hash:o,slug:t,index:1}},Dn=()=>{let o=new URL(document.URL).hash,t=o.slice(1).split("-"),e=t[t.length-1],i=e&&/^\+?\d+$/.test(e)&&parseInt(t.pop()||"1",10)||1;return{hash:o,slug:t.join("-"),index:i}},wa=()=>{let{slug:o,index:t}=Dn();if(!o)return;let e=document.querySelector(`[data-slug="${o}"]`);if(e&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),ee.getInstance())return;let i=document.querySelectorAll(`[data-fancybox="${o}"]`);i.length&&(e=i[t-1],e&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},Ia=()=>{if(ee.defaults.Hash===!1)return;let o=ee.getInstance();if(o?.options.Hash===!1)return;let{slug:t,index:e}=Dn(),{slug:i}=Sa();o&&(t===i?o.jumpTo(e-1):(Hi=!0,o.close())),wa()},Fa=()=>{pi&&clearTimeout(pi),queueMicrotask(()=>{Ia()})},ia=()=>{window.addEventListener("hashchange",Fa,!1),setTimeout(()=>{Ia()},500)};Qi&&(/complete|interactive|loaded/.test(document.readyState)?ia():document.addEventListener("DOMContentLoaded",ia));var wn="is-zooming-in",kn=class extends qe{onCreateSlide(t,e,i){let n=this.instance.optionFor(i,"src")||"";i.el&&i.type==="image"&&typeof n=="string"&&this.setImage(i,n)}onRemoveSlide(t,e,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(t,e,i,n){le(this.instance.container,wn);for(let r of e.slides){let a=r.panzoom;a&&r.index!==i&&a.reset(.35)}}onClose(){var t;let e=this.instance,i=e.container,n=e.getSlide();if(!i||!i.parentElement||!n)return;let{el:r,contentEl:a,panzoom:d,thumbElSrc:m}=n;if(!r||!m||!a||!d||d.isContentLoading||d.state===pe.Init||d.state===pe.Destroy)return;d.updateMetrics();let f=this.getZoomInfo(n);if(!f)return;this.instance.state=Te.CustomClosing,i.classList.remove(wn),i.classList.add("is-zooming-out"),a.style.backgroundImage=`url('${m}')`;let h=i.getBoundingClientRect();(((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1)===1&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${h.width}px`,height:`${h.height}px`,overflow:"hidden"});let{x,y:I,scale:w,opacity:P}=f;if(P){let M=((E,O,R,$)=>{let Y=O-E,it=$-R;return nt=>R+((nt-E)/Y*it||0)})(d.scale,w,1,0);d.on("afterTransform",()=>{a.style.opacity=M(d.scale)+""})}d.on("endAnimation",()=>{e.destroy()}),d.target.a=w,d.target.b=0,d.target.c=0,d.target.d=w,d.panTo({x,y:I,scale:w,friction:P?.2:.33,ignoreBounds:!0}),d.isResting&&e.destroy()}setImage(t,e){let i=this.instance;t.src=e,this.process(t,e).then(n=>{let{contentEl:r,imageEl:a,thumbElSrc:d,el:m}=t;if(i.isClosing()||!r||!a)return;r.offsetHeight;let f=!!i.isOpeningSlide(t)&&this.getZoomInfo(t);if(this.option("protected")&&m){m.addEventListener("contextmenu",I=>{I.preventDefault()});let x=document.createElement("div");U(x,"fancybox-protected"),r.appendChild(x)}if(d&&f){let x=n.contentRect,I=Math.max(x.fullWidth,x.fullHeight),w=null;!f.opacity&&I>1200&&(w=document.createElement("img"),U(w,"fancybox-ghost"),w.src=d,r.appendChild(w));let P=()=>{w&&(U(w,"f-fadeFastOut"),setTimeout(()=>{w&&(w.remove(),w=null)},200))};(h=d,new Promise((M,E)=>{let O=new Image;O.onload=M,O.onerror=E,O.src=h})).then(()=>{i.hideLoading(t),t.state=Ve.Opening,this.instance.emit("reveal",t),this.zoomIn(t).then(()=>{P(),this.instance.done(t)},()=>{}),w&&setTimeout(()=>{P()},I>2500?800:200)},()=>{i.hideLoading(t),i.revealContent(t)})}else{let x=this.optionFor(t,"initialSize"),I=this.optionFor(t,"zoom"),w={event:i.prevMouseMoveEvent||i.options.event,friction:I?.12:0},P=i.optionFor(t,"showClass")||void 0,M=!0;i.isOpeningSlide(t)&&(x==="full"?n.zoomToFull(w):x==="cover"?n.zoomToCover(w):x==="max"?n.zoomToMax(w):M=!1,n.stop("current")),M&&P&&(P=n.isDragging?"f-fadeIn":""),i.hideLoading(t),i.revealContent(t,P)}var h},()=>{i.setError(t,"{{IMAGE_ERROR}}")})}process(t,e){return new Promise((i,n)=>{var r;let a=this.instance,d=t.el;a.clearContent(t),a.showLoading(t);let m=this.optionFor(t,"content");if(typeof m=="string"&&(m=vt(m)),!m||!He(m)){if(m=document.createElement("img"),m instanceof HTMLImageElement){let f="",h=t.caption;f=typeof h=="string"&&h?h.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${t.index+1} of ${((r=a.carousel)===null||r===void 0?void 0:r.pages.length)||1}`,m.src=e||"",m.alt=f,m.draggable=!1,t.srcset&&m.setAttribute("srcset",t.srcset),this.instance.isOpeningSlide(t)&&(m.fetchPriority="high")}t.sizes&&m.setAttribute("sizes",t.sizes)}U(m,"fancybox-image"),t.imageEl=m,a.setContent(t,m,!1),t.panzoom=new ui(d,Qe({transformParent:!0},this.option("Panzoom")||{},{content:m,width:(f,h)=>a.optionFor(t,"width","auto",h)||"auto",height:(f,h)=>a.optionFor(t,"height","auto",h)||"auto",wheel:()=>{let f=a.option("wheel");return(f==="zoom"||f=="pan")&&f},click:(f,h)=>{var x,I;if(a.isCompact||a.isClosing()||t.index!==((x=a.getSlide())===null||x===void 0?void 0:x.index))return!1;if(h){let P=h.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(P.nodeName))return!1}let w=!h||h.target&&((I=t.contentEl)===null||I===void 0?void 0:I.contains(h.target));return a.option(w?"contentClick":"backdropClick")||!1},dblClick:()=>a.isCompact?"toggleZoom":a.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:f=>{i(f)},error:()=>{n()},destroy:()=>{n()}}}))})}zoomIn(t){return new Promise((e,i)=>{let n=this.instance,r=n.container,{panzoom:a,contentEl:d,el:m}=t;a&&a.updateMetrics();let f=this.getZoomInfo(t);if(!(f&&m&&d&&a&&r))return void i();let{x:h,y:x,scale:I,opacity:w}=f,P=()=>{t.state!==Ve.Closing&&(w&&(d.style.opacity=Math.max(Math.min(1,1-(1-a.scale)/(1-I)),0)+""),a.scale>=1&&a.scale>a.targetScale-.1&&e(a))},M=R=>{(R.scale<.99||R.scale>1.01)&&!R.isDragging||(le(r,wn),d.style.opacity="",R.off("endAnimation",M),R.off("touchStart",M),R.off("afterTransform",P),e(R))};a.on("endAnimation",M),a.on("touchStart",M),a.on("afterTransform",P),a.on(["error","destroy"],()=>{i()}),a.panTo({x:h,y:x,scale:I,friction:0,ignoreBounds:!0}),a.stop("current");let E={event:a.panMode==="mousemove"?n.prevMouseMoveEvent||n.options.event:void 0},O=this.optionFor(t,"initialSize");U(r,wn),n.hideLoading(t),O==="full"?a.zoomToFull(E):O==="cover"?a.zoomToCover(E):O==="max"?a.zoomToMax(E):a.reset(.172)})}getZoomInfo(t){let{el:e,imageEl:i,thumbEl:n,panzoom:r}=t,a=this.instance,d=a.container;if(!e||!i||!n||!r||Ca(n)<3||!this.optionFor(t,"zoom")||!d||a.state===Te.Destroy||getComputedStyle(d).getPropertyValue("--f-images-zoom")==="0")return!1;let m=window.visualViewport||null;if((m?m.scale:1)!==1)return!1;let{top:f,left:h,width:x,height:I}=n.getBoundingClientRect(),{top:w,left:P,fitWidth:M,fitHeight:E}=r.contentRect;if(!(x&&I&&M&&E))return!1;let O=r.container.getBoundingClientRect();P+=O.left,w+=O.top;let R=-1*(P+.5*M-(h+.5*x)),$=-1*(w+.5*E-(f+.5*I)),Y=x/M,it=this.option("zoomOpacity")||!1;return it==="auto"&&(it=Math.abs(x/I-M/E)>.1),{x:R,y:$,scale:Y,opacity:it}}attach(){let t=this,e=t.instance;e.on("Carousel.change",t.onChange),e.on("Carousel.createSlide",t.onCreateSlide),e.on("Carousel.removeSlide",t.onRemoveSlide),e.on("close",t.onClose)}detach(){let t=this,e=t.instance;e.off("Carousel.change",t.onChange),e.off("Carousel.createSlide",t.onCreateSlide),e.off("Carousel.removeSlide",t.onRemoveSlide),e.off("close",t.onClose)}};Object.defineProperty(kn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;var Fo="html",na="image",Po="map",Mt="youtube",li="vimeo",Li="html5video",oa=(o,t={})=>{let e=new URL(o),i=new URLSearchParams(e.search),n=new URLSearchParams;for(let[d,m]of[...i,...Object.entries(t)]){let f=m+"";if(d==="t"){let h=f.match(/((\d*)m)?(\d*)s?/);h&&n.set("start",60*parseInt(h[2]||"0")+parseInt(h[3]||"0")+"")}else n.set(d,f)}let r=n+"",a=o.match(/#t=((.*)?\d+s)/);return a&&(r+=`#t=${a[1]}`),r},Bs={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},Vs=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"],Bn=class extends qe{onBeforeInitSlide(t,e,i){this.processType(i)}onCreateSlide(t,e,i){this.setContent(i)}onClearContent(t,e){e.xhr&&(e.xhr.abort(),e.xhr=null);let i=e.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",e.iframeEl=null);let n=e.contentEl,r=e.placeholderEl;if(e.type==="inline"&&n&&r)n.classList.remove("fancybox__content"),getComputedStyle(n).getPropertyValue("display")!=="none"&&(n.style.display="none"),setTimeout(()=>{r&&(n&&r.parentNode&&r.parentNode.insertBefore(n,r),r.remove())},0),e.contentEl=void 0,e.placeholderEl=void 0;else for(;e.el&&e.el.firstChild;)e.el.removeChild(e.el.firstChild)}onSelectSlide(t,e,i){i.state===Ve.Ready&&this.playVideo()}onUnselectSlide(t,e,i){var n,r;if(i.type===Li){try{(r=(n=i.el)===null||n===void 0?void 0:n.querySelector("video"))===null||r===void 0||r.pause()}catch{}return}let a;i.type===li?a={method:"pause",value:"true"}:i.type===Mt&&(a={event:"command",func:"pauseVideo"}),a&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(a),"*"),i.poller&&clearTimeout(i.poller)}onDone(t,e){t.isCurrentSlide(e)&&!t.isClosing()&&this.playVideo()}onRefresh(t,e){e.slides.forEach(i=>{i.el&&(this.resizeIframe(i),this.setAspectRatio(i))})}onMessage(t){try{let e=JSON.parse(t.data);if(t.origin==="https://player.vimeo.com"){if(e.event==="ready")for(let i of Array.from(document.getElementsByClassName("fancybox__iframe")))i instanceof HTMLIFrameElement&&i.contentWindow===t.source&&(i.dataset.ready="true")}else if(t.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&e.event==="onReady"){let i=document.getElementById(e.id);i&&(i.dataset.ready="true")}}catch{}}loadAjaxContent(t){let e=this.instance.optionFor(t,"src")||"";this.instance.showLoading(t);let i=this.instance,n=new XMLHttpRequest;i.showLoading(t),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i.state===Te.Ready&&(i.hideLoading(t),n.status===200?i.setContent(t,n.responseText):i.setError(t,n.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};let r=t.ajax||null;n.open(r?"POST":"GET",e+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(r),t.xhr=n}setInlineContent(t){let e=null;if(He(t.src))e=t.src;else if(typeof t.src=="string"){let i=t.src.split("#",2).pop();e=i?document.getElementById(i):null}if(e){if(t.type==="clone"||e.closest(".fancybox__slide")){e=e.cloneNode(!0);let i=e.dataset.animationName;i&&(e.classList.remove(i),delete e.dataset.animationName);let n=e.getAttribute("id");n=n?`${n}--clone`:`clone-${this.instance.id}-${t.index}`,e.setAttribute("id",n)}else if(e.parentNode){let i=document.createElement("div");i.classList.add("fancybox-placeholder"),e.parentNode.insertBefore(i,e),t.placeholderEl=i}this.instance.setContent(t,e)}else this.instance.setError(t,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(t){let{src:e,el:i}=t;if(!e||typeof e!="string"||!i)return;i.classList.add("is-loading");let n=this.instance,r=document.createElement("iframe");r.className="fancybox__iframe",r.setAttribute("id",`fancybox__iframe_${n.id}_${t.index}`);for(let[d,m]of Object.entries(this.optionFor(t,"iframeAttr")||{}))r.setAttribute(d,m);r.onerror=()=>{n.setError(t,"{{IFRAME_ERROR}}")},t.iframeEl=r;let a=this.optionFor(t,"preload");if(t.type!=="iframe"||a===!1)return r.setAttribute("src",t.src+""),n.setContent(t,r,!1),this.resizeIframe(t),void n.revealContent(t);n.showLoading(t),r.onload=()=>{if(!r.src.length)return;let d=r.dataset.ready!=="true";r.dataset.ready="true",this.resizeIframe(t),d?n.revealContent(t):n.hideLoading(t)},r.setAttribute("src",e),n.setContent(t,r,!1)}resizeIframe(t){let{type:e,iframeEl:i}=t;if(e===Mt||e===li)return;let n=i?.parentElement;if(!i||!n)return;let r=t.autoSize;r===void 0&&(r=this.optionFor(t,"autoSize"));let a=t.width||0,d=t.height||0;a&&d&&(r=!1);let m=n&&n.style;if(t.preload!==!1&&r!==!1&&m)try{let f=window.getComputedStyle(n),h=parseFloat(f.paddingLeft)+parseFloat(f.paddingRight),x=parseFloat(f.paddingTop)+parseFloat(f.paddingBottom),I=i.contentWindow;if(I){let w=I.document,P=w.getElementsByTagName(Fo)[0],M=w.body;m.width="",M.style.overflow="hidden",a=a||P.scrollWidth+h,m.width=`${a}px`,M.style.overflow="",m.flex="0 0 auto",m.height=`${M.scrollHeight}px`,d=P.scrollHeight+x}}catch{}if(a||d){let f={flex:"0 1 auto",width:"",height:""};a&&a!=="auto"&&(f.width=`${a}px`),d&&d!=="auto"&&(f.height=`${d}px`),Object.assign(m,f)}}playVideo(){let t=this.instance.getSlide();if(!t)return;let{el:e}=t;if(!e||!e.offsetParent||!this.optionFor(t,"videoAutoplay"))return;if(t.type===Li)try{let n=e.querySelector("video");if(n){let r=n.play();r!==void 0&&r.then(()=>{}).catch(a=>{n.muted=!0,n.play()})}}catch{}if(t.type!==Mt&&t.type!==li)return;let i=()=>{if(t.iframeEl&&t.iframeEl.contentWindow){let n;if(t.iframeEl.dataset.ready==="true")return n=t.type===Mt?{event:"command",func:"playVideo"}:{method:"play",value:"true"},n&&t.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"),void(t.poller=void 0);t.type===Mt&&(n={event:"listening",id:t.iframeEl.getAttribute("id")},t.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"))}t.poller=setTimeout(i,250)};i()}processType(t){if(t.html)return t.type=Fo,t.src=t.html,void(t.html="");let e=this.instance.optionFor(t,"src","");if(!e||typeof e!="string")return;let i=t.type,n=null;if(n=e.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){let r=this.optionFor(t,Mt),{nocookie:a}=r,d=function(x,I){var w={};for(var P in x)Object.prototype.hasOwnProperty.call(x,P)&&I.indexOf(P)<0&&(w[P]=x[P]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function"){var M=0;for(P=Object.getOwnPropertySymbols(x);M<P.length;M++)I.indexOf(P[M])<0&&Object.prototype.propertyIsEnumerable.call(x,P[M])&&(w[P[M]]=x[P[M]])}return w}(r,["nocookie"]),m=`www.youtube${a?"-nocookie":""}.com`,f=oa(e,d),h=encodeURIComponent(n[2]);t.videoId=h,t.src=`https://${m}/embed/${h}?${f}`,t.thumbSrc=t.thumbSrc||`https://i.ytimg.com/vi/${h}/mqdefault.jpg`,i=Mt}else if(n=e.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){let r=oa(e,this.optionFor(t,li)),a=encodeURIComponent(n[1]),d=n[4]||"";t.videoId=a,t.src=`https://player.vimeo.com/video/${a}?${d?`h=${d}${r?"&":""}`:""}${r}`,i=li}if(!i&&t.triggerEl){let r=t.triggerEl.dataset.type;Vs.includes(r)&&(i=r)}i||typeof e=="string"&&(e.charAt(0)==="#"?i="inline":(n=e.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=Li,t.videoFormat=t.videoFormat||"video/"+(n[1]==="ogv"?"ogg":n[1])):e.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=na:e.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(n=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(t.src=`https://maps.google.${n[1]}/?ll=${(n[2]?n[2]+"&z="+Math.floor(parseFloat(n[3]))+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&")}&output=${n[4]&&n[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=Po):(n=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(t.src=`https://maps.google.${n[1]}/maps?q=${n[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=Po),i=i||this.instance.option("defaultType"),t.type=i,i===na&&(t.thumbSrc=t.thumbSrc||t.src)}setContent(t){let e=this.instance.optionFor(t,"src")||"";if(t&&t.type&&e){switch(t.type){case Fo:this.instance.setContent(t,e);break;case Li:let i=this.option("videoTpl");i&&this.instance.setContent(t,i.replace(/\{\{src\}\}/gi,e+"").replace(/\{\{format\}\}/gi,this.optionFor(t,"videoFormat")||"").replace(/\{\{poster\}\}/gi,t.poster||t.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(t);break;case"ajax":this.loadAjaxContent(t);break;case"pdf":case Po:case Mt:case li:t.preload=!1;case"iframe":this.setIframeContent(t)}this.setAspectRatio(t)}}setAspectRatio(t){let e=t.contentEl;if(!(t.el&&e&&t.type&&[Mt,li,Li].includes(t.type)))return;let i,n=t.width||"auto",r=t.height||"auto";if(n==="auto"||r==="auto"){i=this.optionFor(t,"videoRatio");let f=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=f&&f.length>2?parseFloat(f[1])/parseFloat(f[2]):parseFloat(i+"")}else n&&r&&(i=n/r);if(!i)return;e.style.aspectRatio="",e.style.width="",e.style.height="",e.offsetHeight;let a=e.getBoundingClientRect(),d=a.width||1,m=a.height||1;e.style.aspectRatio=i+"",i<d/m?(r=r==="auto"?m:Math.min(m,r),e.style.width="auto",e.style.height=`${r}px`):(n=n==="auto"?d:Math.min(d,n),e.style.width=`${n}px`,e.style.height="auto")}attach(){let t=this,e=t.instance;e.on("Carousel.beforeInitSlide",t.onBeforeInitSlide),e.on("Carousel.createSlide",t.onCreateSlide),e.on("Carousel.selectSlide",t.onSelectSlide),e.on("Carousel.unselectSlide",t.onUnselectSlide),e.on("Carousel.Panzoom.refresh",t.onRefresh),e.on("done",t.onDone),e.on("clearContent",t.onClearContent),window.addEventListener("message",t.onMessage)}detach(){let t=this,e=t.instance;e.off("Carousel.beforeInitSlide",t.onBeforeInitSlide),e.off("Carousel.createSlide",t.onCreateSlide),e.off("Carousel.selectSlide",t.onSelectSlide),e.off("Carousel.unselectSlide",t.onUnselectSlide),e.off("Carousel.Panzoom.refresh",t.onRefresh),e.off("done",t.onDone),e.off("clearContent",t.onClearContent),window.removeEventListener("message",t.onMessage)}};Object.defineProperty(Bn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Bs});var In="play",Fn="pause",Ui="ready",Vn=class extends qe{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ui}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==Ui}onReady(t){this.option("autoStart")&&(t.isInfinite||t.page<t.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var t;this.inHover=!1,!((t=this.instance.panzoom)===null||t===void 0)&&t.isResting&&this.resume()}onTimerEnd(){let t=this.instance;this.state==="play"&&(t.isInfinite||t.page!==t.pages.length-1?t.slideNext():t.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var t;if(!this.option("showProgress"))return null;this.removeProgressBar();let e=this.instance,i=((t=e.pages[e.page])===null||t===void 0?void 0:t.slides)||[],n=this.option("progressParentEl");if(n||(n=(i.length===1?i[0].el:null)||e.viewport),!n)return null;let r=document.createElement("div");return U(r,"f-progress"),n.prepend(r),this.progressBar=r,r.offsetHeight,r}set(){let t=this,e=t.instance;if(e.pages.length<2||t.timer)return;let i=t.option("timeout");t.state=In,U(e.container,"has-autoplay");let n=t.createProgressBar();n&&(n.style.transitionDuration=`${i}ms`,n.style.transform="scaleX(1)"),t.timer=setTimeout(()=>{t.timer=null,t.inHover||t.onTimerEnd()},i),t.emit("set")}clear(){let t=this;t.timer&&(clearTimeout(t.timer),t.timer=null),t.removeProgressBar()}start(){let t=this;if(t.set(),t.state!==Ui){if(t.option("pauseOnHover")){let e=t.instance.container;e.addEventListener("mouseenter",t.onMouseEnter,!1),e.addEventListener("mouseleave",t.onMouseLeave,!1)}document.addEventListener("visibilitychange",t.onVisibilityChange,!1),t.emit("start")}}stop(){let t=this,e=t.state,i=t.instance.container;t.clear(),t.state=Ui,i.removeEventListener("mouseenter",t.onMouseEnter,!1),i.removeEventListener("mouseleave",t.onMouseLeave,!1),document.removeEventListener("visibilitychange",t.onVisibilityChange,!1),le(i,"has-autoplay"),e!==Ui&&t.emit("stop")}pause(){let t=this;t.state===In&&(t.state=Fn,t.clear(),t.emit(Fn))}resume(){let t=this,e=t.instance;if(e.isInfinite||e.page!==e.pages.length-1)if(t.state!==In){if(t.state===Fn&&!t.inHover){let i=new Event("resume",{bubbles:!0,cancelable:!0});t.emit("resume",i),i.defaultPrevented||t.set()}}else t.set();else t.stop()}toggle(){this.state===In||this.state===Fn?this.stop():this.start()}attach(){let t=this,e=t.instance;e.on("ready",t.onReady),e.on("Panzoom.startAnimation",t.onChange),e.on("Panzoom.endAnimation",t.onSettle),e.on("Panzoom.touchMove",t.onChange)}detach(){let t=this,e=t.instance;e.off("ready",t.onReady),e.off("Panzoom.startAnimation",t.onChange),e.off("Panzoom.endAnimation",t.onSettle),e.off("Panzoom.touchMove",t.onChange),t.stop()}};Object.defineProperty(Vn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});var Rn=class extends qe{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(t){let e=t.carousel;if(!e)return;let i=t.container;i&&(e.options.Autoplay=Qe({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{t.emit("startSlideshow")},set:n=>{var r;i.classList.add("has-slideshow"),((r=t.getSlide())===null||r===void 0?void 0:r.state)!==Ve.Ready&&n.pause()},stop:()=>{i.classList.remove("has-slideshow"),t.isCompact||t.endIdle(),t.emit("endSlideshow")},resume:(n,r)=>{var a,d,m;!r||!r.cancelable||((a=t.getSlide())===null||a===void 0?void 0:a.state)===Ve.Ready&&(!((m=(d=t.carousel)===null||d===void 0?void 0:d.panzoom)===null||m===void 0)&&m.isResting)||r.preventDefault()}}}),e.attachPlugins({Autoplay:Vn}),this.ref=e.plugins.Autoplay)}onReady(t){let e=t.carousel,i=this.ref;i&&e&&this.option("playOnStart")&&(e.isInfinite||e.page<e.pages.length-1)&&i.start()}onDone(t,e){let i=this.ref,n=t.carousel;if(!i||!n)return;let r=e.panzoom;r&&r.on("startAnimation",()=>{t.isCurrentSlide(e)&&i.stop()}),t.isCurrentSlide(e)&&i.resume()}onKeydown(t,e){var i;let n=this.ref;n&&e===this.option("key")&&((i=document.activeElement)===null||i===void 0?void 0:i.nodeName)!=="BUTTON"&&n.toggle()}attach(){let t=this,e=t.instance;e.on("Carousel.init",t.onPrepare),e.on("Carousel.ready",t.onReady),e.on("done",t.onDone),e.on("keydown",t.onKeydown)}detach(){let t=this,e=t.instance;e.off("Carousel.init",t.onPrepare),e.off("Carousel.ready",t.onReady),e.off("done",t.onDone),e.off("keydown",t.onKeydown)}};Object.defineProperty(Rn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:o=>{var t;return((t=o.instance.container)===null||t===void 0?void 0:t.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||o.instance.container},timeout:3e3}});var Pa={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"},Ot;(function(o){o[o.Init=0]="Init",o[o.Ready=1]="Ready",o[o.Hidden=2]="Hidden"})(Ot||(Ot={}));var ra="isResting",Pn="thumbWidth",Ii="thumbHeight",gt="thumbClipWidth",Ta=class extends qe{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ot.Init})}get isModern(){return this.type==="modern"}onInitSlide(o,t){let e=t.el?t.el.dataset:void 0;e&&(t.thumbSrc=e.thumbSrc||t.thumbSrc||"",t[gt]=parseFloat(e[gt]||"")||t[gt]||0,t[Ii]=parseFloat(e.thumbHeight||"")||t[Ii]||0),this.addSlide(t)}onInitSlides(){this.build()}onChange(){var o;if(!this.isModern)return;let t=this.container,e=this.instance,i=e.panzoom,n=this.carousel,r=n?n.panzoom:null,a=e.page;if(i&&n&&r){if(i.isDragging){le(t,this.cn(ra));let d=((o=n.pages[a])===null||o===void 0?void 0:o.pos)||0;d+=e.getProgress(a)*(this[gt]+this.thumbGap);let m=r.getBounds();-1*d>m.x.min&&-1*d<m.x.max&&r.panTo({x:-1*d,friction:.12})}else _t(t,this.cn(ra),i.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(let o of this.instance.slides||[])this.resizeModernSlide(o);this.shiftModern()}isDisabled(){let o=this.option("minCount")||0;if(o){let e=this.instance,i=0;for(let n of e.slides||[])n.thumbSrc&&i++;if(i<o)return!0}let t=this.option("type");return["modern","classic"].indexOf(t)<0}getThumb(o){let t=this.option("thumbTpl")||"";return{html:this.instance.localize(t,[["%i",o.index],["%d",o.index+1],["%s",o.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(o){let t=this.carousel;t&&t.addSlide(o.index,this.getThumb(o))}getSlides(){let o=[];for(let t of this.instance.slides||[])o.push(this.getThumb(t));return o}resizeModernSlide(o){this.isModern&&(o[Pn]=o[gt]&&o[Ii]?Math.round(this[Ii]*(o[gt]/o[Ii])):this[Pn])}updateProps(){let o=this.container;if(!o)return;let t=e=>parseFloat(getComputedStyle(o).getPropertyValue("--f-thumb-"+e))||0;this.thumbGap=t("gap"),this.thumbExtraGap=t("extra-gap"),this[Pn]=t("width")||40,this[gt]=t("clip-width")||40,this[Ii]=t("height")||40}build(){let o=this;if(o.state!==Ot.Init)return;if(o.isDisabled())return void o.emit("disabled");let t=o.instance,e=t.container,i=o.getSlides(),n=o.option("type");o.type=n;let r=o.option("parentEl"),a=o.cn("container"),d=o.cn("track"),m=r?.querySelector("."+a);m||(m=document.createElement("div"),U(m,a),r?r.appendChild(m):e.after(m)),U(m,`is-${n}`),U(e,o.cn("hasThumbs")),o.container=m,o.updateProps();let f=m.querySelector("."+d);f||(f=document.createElement("div"),U(f,o.cn("track")),m.appendChild(f)),o.track=f;let h=Qe({},{track:f,infinite:!1,center:!0,fill:n==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},o.option("Carousel")||{},{Sync:{target:t},slides:i}),x=new t.constructor(m,h);x.on("createSlide",(I,w)=>{o.setProps(w.index),o.emit("createSlide",w,w.el)}),x.on("ready",()=>{o.shiftModern(),o.emit("ready")}),x.on("refresh",()=>{o.shiftModern()}),x.on("Panzoom.click",(I,w,P)=>{o.onClick(P)}),o.carousel=x,o.state=Ot.Ready}onClick(o){o.preventDefault(),o.stopPropagation();let t=this.instance,{pages:e,page:i}=t,n=M=>{if(M){let E=M.closest("[data-carousel-index]");if(E)return[parseInt(E.dataset.carouselIndex||"",10)||0,E]}return[-1,void 0]},r=(M,E)=>{let O=document.elementFromPoint(M,E);return O?n(O):[-1,void 0]},[a,d]=n(o.target);if(a>-1)return;let m=this[gt],f=o.clientX,h=o.clientY,[x,I]=r(f-m,h),[w,P]=r(f+m,h);I&&P?(a=Math.abs(f-I.getBoundingClientRect().right)<Math.abs(f-P.getBoundingClientRect().left)?x:w,a===i&&(a=a===x?w:x)):I?a=x:P&&(a=w),a>-1&&e[a]&&t.slideTo(a)}getShift(o){var t;let e=this,{instance:i}=e,n=e.carousel;if(!i||!n)return 0;let r=e[Pn],a=e[gt],d=e.thumbGap,m=e.thumbExtraGap;if(!(!((t=n.slides[o])===null||t===void 0)&&t.el))return 0;let f=.5*(r-a),h=i.pages.length-1,x=i.getProgress(0),I=i.getProgress(h),w=i.getProgress(o,!1,!0),P=0,M=f+m+d,E=x<0&&x>-1,O=I>0&&I<1;return o===0?(P=M*Math.abs(x),O&&x===1&&(P-=M*Math.abs(I))):o===h?(P=M*Math.abs(I)*-1,E&&I===-1&&(P+=M*Math.abs(x))):E||O?(P=-1*M,P+=M*Math.abs(x),P+=M*(1-Math.abs(I))):P=M*w,P}setProps(o){var t;let e=this;if(!e.isModern)return;let{instance:i}=e,n=e.carousel;if(i&&n){let r=(t=n.slides[o])===null||t===void 0?void 0:t.el;if(r&&r.childNodes.length){let a=B(1-Math.abs(i.getProgress(o))),d=B(e.getShift(o));r.style.setProperty("--progress",a?a+"":""),r.style.setProperty("--shift",d+"")}}}shiftModern(){let o=this;if(!o.isModern)return;let{instance:t,track:e}=o,i=t.panzoom,n=o.carousel;if(!(t&&e&&i&&n)||i.state===pe.Init||i.state===pe.Destroy)return;for(let a of t.slides)o.setProps(a.index);let r=(o[gt]+o.thumbGap)*(n.slides.length||0);e.style.setProperty("--width",r+"")}cleanup(){let o=this;o.carousel&&o.carousel.destroy(),o.carousel=null,o.container&&o.container.remove(),o.container=null,o.track&&o.track.remove(),o.track=null,o.state=Ot.Init,le(o.instance.container,o.cn("hasThumbs"))}attach(){let o=this,t=o.instance;t.on("initSlide",o.onInitSlide),t.state===Se.Init?t.on("initSlides",o.onInitSlides):o.onInitSlides(),t.on(["change","Panzoom.afterTransform"],o.onChange),t.on("Panzoom.refresh",o.onRefresh)}detach(){let o=this,t=o.instance;t.off("initSlide",o.onInitSlide),t.off("initSlides",o.onInitSlides),t.off(["change","Panzoom.afterTransform"],o.onChange),t.off("Panzoom.refresh",o.onRefresh),o.cleanup()}};Object.defineProperty(Ta,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Pa});var Rs=Object.assign(Object.assign({},Pa),{key:"t",showOnStart:!0,parentEl:null}),aa="is-masked",sa="aria-hidden",An=class extends qe{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){let t=this.ref;return t&&!t.isDisabled()}get isHidden(){return this.hidden}onClick(t,e){e.stopPropagation()}onCreateSlide(t,e){var i,n,r;let a=((r=(n=(i=this.instance)===null||i===void 0?void 0:i.carousel)===null||n===void 0?void 0:n.slides[e.index])===null||r===void 0?void 0:r.type)||"",d=e.el;if(d&&a){let m=`for-${a}`;["video","youtube","vimeo","html5video"].includes(a)&&(m+=" for-video"),U(d,m)}}onInit(){var t;let e=this,i=e.instance,n=i.carousel;if(e.ref||!n)return;let r=e.option("parentEl")||i.footer||i.container;if(!r)return;let a=Qe({},e.options,{parentEl:r,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:d=>{let m=d.container;m&&this.hidden&&(e.refresh(),m.style.transition="none",e.hide(),m.offsetHeight,queueMicrotask(()=>{m.style.transition="",e.show()}))}}});a.Carousel=a.Carousel||{},a.Carousel.on=Qe(((t=e.options.Carousel)===null||t===void 0?void 0:t.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),n.options.Thumbs=a,n.attachPlugins({Thumbs:Ta}),e.ref=n.plugins.Thumbs,e.option("showOnStart")||(e.ref.state=Ot.Hidden,e.hidden=!0)}onResize(){var t;let e=(t=this.ref)===null||t===void 0?void 0:t.container;e&&(e.style.maxHeight="")}onKeydown(t,e){let i=this.option("key");i&&i===e&&this.toggle()}toggle(){let t=this.ref;if(t&&!t.isDisabled())return t.state===Ot.Hidden?(t.state=Ot.Init,void t.build()):void(this.hidden?this.show():this.hide())}show(){let t=this.ref;if(!t||t.isDisabled())return;let e=t.container;e&&(this.refresh(),e.offsetHeight,e.removeAttribute(sa),e.classList.remove(aa),this.hidden=!1)}hide(){let t=this.ref,e=t&&t.container;e&&(this.refresh(),e.offsetHeight,e.classList.add(aa),e.setAttribute(sa,"true")),this.hidden=!0}refresh(){let t=this.ref;if(!t||!t.state)return;let e=t.container,i=e?.firstChild||null;e&&i&&i.childNodes.length&&(e.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){let t=this,e=t.instance;e.state===Te.Init?e.on("Carousel.init",t.onInit):t.onInit(),e.on("resize",t.onResize),e.on("keydown",t.onKeydown)}detach(){var t;let e=this,i=e.instance;i.off("Carousel.init",e.onInit),i.off("resize",e.onResize),i.off("keydown",e.onKeydown),(t=i.carousel)===null||t===void 0||t.detachPlugins(["Thumbs"]),e.ref=null}};Object.defineProperty(An,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Rs});var To={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}},mi;(function(o){o[o.Init=0]="Init",o[o.Ready=1]="Ready",o[o.Disabled=2]="Disabled"})(mi||(mi={}));var As={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},zs={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},la="has-toolbar",jo="fancybox__toolbar",zn=class extends qe{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:mi.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(t){var e;if(!t.carousel)return;let i=this.option("display"),n=this.option("absolute"),r=this.option("enabled");if(r==="auto"){let f=this.instance.carousel,h=0;if(f)for(let x of f.slides)(x.panzoom||x.type==="image")&&h++;h||(r=!1)}r||(i=void 0);let a=0,d={left:[],middle:[],right:[]};if(i)for(let f of["left","middle","right"])for(let h of i[f]){let x=this.createEl(h);x&&((e=d[f])===null||e===void 0||e.push(x),a++)}let m=null;if(a&&(m=this.createContainer()),m){for(let[f,h]of Object.entries(d)){let x=document.createElement("div");U(x,jo+"__column is-"+f);for(let I of h)x.appendChild(I);n!=="auto"||f!=="middle"||h.length||(n=!0),m.appendChild(x)}n===!0&&U(m,"is-absolute"),this.state=mi.Ready,this.onRefresh()}else this.state=mi.Disabled}onClick(t){var e,i;let n=this.instance,r=n.getSlide(),a=r?.panzoom,d=t.target,m=d&&He(d)?d.dataset:null;if(!m)return;if(m.fancyboxToggleThumbs!==void 0)return t.preventDefault(),t.stopPropagation(),void((e=n.plugins.Thumbs)===null||e===void 0||e.toggle());if(m.fancyboxToggleFullscreen!==void 0)return t.preventDefault(),t.stopPropagation(),void this.instance.toggleFullscreen();if(m.fancyboxToggleSlideshow!==void 0){t.preventDefault(),t.stopPropagation();let x=(i=n.carousel)===null||i===void 0?void 0:i.plugins.Autoplay,I=x.isActive;return a&&a.panMode==="mousemove"&&!I&&a.reset(),void(I?x.stop():x.start())}let f=m.panzoomAction,h=m.panzoomChange;if((h||f)&&(t.preventDefault(),t.stopPropagation()),h){let x={};try{x=JSON.parse(h)}catch{}a&&a.applyChange(x)}else f&&a&&a[f]&&a[f]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;let t=this.container;if(!t)return;let e=this.instance.getSlide();if(!e||e.state!==Ve.Ready)return;let i=e&&!e.error&&e.panzoom;for(let a of t.querySelectorAll("[data-panzoom-action]"))i?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));let n=i&&i.canZoomIn(),r=i&&i.canZoomOut();for(let a of t.querySelectorAll('[data-panzoom-action="zoomIn"]'))n?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));for(let a of t.querySelectorAll('[data-panzoom-action="zoomOut"]'))r?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));for(let a of t.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){r||n?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));let d=a.querySelector("g");d&&(d.style.display=n?"":"none")}}onDone(t,e){var i;(i=e.panzoom)===null||i===void 0||i.on("afterTransform",()=>{this.instance.isCurrentSlide(e)&&this.onRefresh()}),this.instance.isCurrentSlide(e)&&this.onRefresh()}createContainer(){let t=this.instance.container;if(!t)return null;let e=this.option("parentEl")||t,i=e.querySelector("."+jo);return i||(i=document.createElement("div"),U(i,jo),e.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),t&&U(t,la),this.container=i,i}createEl(t){let e=this.instance,i=e.carousel;if(!i||t==="toggleFS"||t==="fullscreen"&&!xa())return null;let n=null,r=i.slides.length||0,a=0,d=0;for(let f of i.slides)(f.panzoom||f.type==="image")&&a++,(f.type==="image"||f.downloadSrc)&&d++;if(r<2&&["infobar","prev","next"].includes(t))return n;if(To[t]!==void 0&&!a||t==="download"&&!d)return null;if(t==="thumbs"){let f=e.plugins.Thumbs;if(!f||!f.isEnabled)return null}if(t==="slideshow"&&(!i.plugins.Autoplay||r<2))return null;if(To[t]!==void 0){let f=To[t];n=document.createElement("button"),n.setAttribute("title",this.instance.localize(`{{${t.toUpperCase()}}}`)),U(n,"f-button"),f.action&&(n.dataset.panzoomAction=f.action),f.change&&(n.dataset.panzoomChange=JSON.stringify(f.change)),n.appendChild(vt(this.instance.localize(f.icon)))}else{let f=(this.option("items")||[])[t];f&&(n=vt(this.instance.localize(f.tpl)),typeof f.click=="function"&&n.addEventListener("click",h=>{h.preventDefault(),h.stopPropagation(),typeof f.click=="function"&&f.click.call(this,this,h)}))}let m=n?.querySelector("svg");if(m)for(let[f,h]of Object.entries(zs))m.getAttribute(f)||m.setAttribute(f,String(h));return n}removeContainer(){let t=this.container;t&&t.remove(),this.container=null,this.state=mi.Disabled;let e=this.instance.container;e&&le(e,la)}attach(){let t=this,e=t.instance;e.on("Carousel.initSlides",t.onReady),e.on("done",t.onDone),e.on(["reveal","Carousel.change"],t.onChange),t.onReady(t.instance)}detach(){let t=this,e=t.instance;e.off("Carousel.initSlides",t.onReady),e.off("done",t.onDone),e.off(["reveal","Carousel.change"],t.onChange),t.removeContainer()}};Object.defineProperty(zn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:As});var Ns={Hash:class extends qe{onReady(){Hi=!1}onChange(o){pi&&clearTimeout(pi);let{hash:t}=Sa(),{hash:e}=Dn(),i=o.isOpeningSlide(o.getSlide());i&&(ta=e===t?"":e),t&&t!==e&&(pi=setTimeout(()=>{try{if(o.state===Te.Ready){let n="replaceState";i&&!Sn&&(n="pushState",Sn=!0),window.history[n]({},document.title,window.location.pathname+window.location.search+t)}}catch{}},300))}onClose(o){if(pi&&clearTimeout(pi),!Hi&&Sn)return Sn=!1,Hi=!1,void window.history.back();if(!Hi)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(ta||""))}catch{}}attach(){let o=this.instance;o.on("ready",this.onReady),o.on(["Carousel.ready","Carousel.change"],this.onChange),o.on("close",this.onClose)}detach(){let o=this.instance;o.off("ready",this.onReady),o.off(["Carousel.ready","Carousel.change"],this.onChange),o.off("close",this.onClose)}static parseURL(){return Dn()}static startFromUrl(){wa()}static destroy(){window.removeEventListener("hashchange",Fa,!1)}},Html:Bn,Images:kn,Slideshow:Rn,Thumbs:An,Toolbar:zn},ca="with-fancybox",Eo="hide-scrollbar",da="--fancybox-scrollbar-compensate",pa="--fancybox-body-margin",Mo="aria-hidden",Oo="is-using-tab",Do="is-animated",ma="is-compact",ua="is-loading",ko="is-opening",Tn="has-caption",Fi="disabled",ci="tabindex",fa="download",Bo="href",Pi="src",Jt=o=>typeof o=="string",ha=function(){var o=window.getSelection();return!!o&&o.type==="Range"},Ke,Je=null,di=null,ga=0,va=0,_a=0,ba=0,Ti=new Map,Ls=0,ee=class o extends $i{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(t=[],e={},i={}){super(e),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Te.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Ke||(Ke=xa()),this.id=e.id||++Ls,Ti.set(this.id,this),this.userSlides=t,this.userPlugins=i,queueMicrotask(()=>{this.init()})}init(){if(this.state===Te.Destroy)return;this.state=Te.Init,this.attachPlugins(Object.assign(Object.assign({},o.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!Qi)return;let e=document,i=e.body,n=e.documentElement;if(i.classList.contains(Eo))return;let r=window.innerWidth-n.getBoundingClientRect().width,a=parseFloat(window.getComputedStyle(i).marginRight);r<0&&(r=0),n.style.setProperty(da,`${r}px`),a&&i.style.setProperty(pa,`${a}px`),i.classList.add(Eo)})(),this.initLayout(),this.scale();let t=()=>{this.initCarousel(this.userSlides),this.state=Te.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(Mo,"false")},16)};this.option("Fullscreen.autoStart")&&Ke&&!Ke.isFullscreen()?Ke.request().then(()=>{this.startedFs=!0,t()}).catch(()=>t()):t()}initLayout(){var t,e;let i=this.option("parentEl")||document.body,n=vt(this.localize(this.option("tpl.main")||""));if(n){if(n.setAttribute("id",`fancybox-${this.id}`),n.setAttribute("aria-label",this.localize("{{MODAL}}")),n.classList.toggle(ma,this.isCompact),U(n,this.option("mainClass")||""),U(n,ko),this.container=n,this.footer=n.querySelector(".fancybox__footer"),i.appendChild(n),U(document.documentElement,ca),Je&&di||(Je=document.createElement("span"),U(Je,"fancybox-focus-guard"),Je.setAttribute(ci,"0"),Je.setAttribute(Mo,"true"),Je.setAttribute("aria-label","Focus guard"),di=Je.cloneNode(),(t=n.parentElement)===null||t===void 0||t.insertBefore(Je,n),(e=n.parentElement)===null||e===void 0||e.append(di)),n.addEventListener("mousedown",r=>{ga=r.pageX,va=r.pageY,le(n,Oo)}),this.option("closeExisting"))for(let r of Ti.values())r.id!==this.id&&r.close();else this.option("animated")&&(U(n,Do),setTimeout(()=>{this.isClosing()||le(n,Do)},350));this.emit("initLayout")}}initCarousel(t){let e=this.container;if(!e)return;let i=e.querySelector(".fancybox__carousel");if(!i)return;let n=this.carousel=new ji(i,Qe({},{slides:t,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));n.on("*",(r,a,...d)=>{this.emit(`Carousel.${a}`,r,...d)}),n.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(r,a,d)=>{this.clearContent(d),d.state=void 0}),n.on("Panzoom.touchStart",()=>{var r,a;this.isCompact||this.endIdle(),!((r=document.activeElement)===null||r===void 0)&&r.closest(".f-thumbs")&&((a=this.container)===null||a===void 0||a.focus())}),n.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(n.on("Panzoom.afterTransform",(r,a)=>{let d=this.getSlide();if(d&&Vo(d.el))return;let m=this.container;if(m){let f=Math.abs(a.current.f),h=f<1?"":Math.max(.5,Math.min(1,1-f/a.contentRect.fitHeight*1.5));m.style.setProperty("--fancybox-ts",h?"0s":""),m.style.setProperty("--fancybox-opacity",h+"")}}),n.on("Panzoom.touchEnd",(r,a,d)=>{var m;let f=this.getSlide();if(f&&Vo(f.el)||a.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((m=document.activeElement)===null||m===void 0?void 0:m.nodeName)!==-1)return;let h=Math.abs(a.dragOffset.y);a.lockedAxis==="y"&&(h>=200||h>=50&&a.dragOffset.time<300)&&(d&&d.cancelable&&d.preventDefault(),this.close(d,"f-throwOut"+(a.current.f<0?"Up":"Down")))})),n.on("change",r=>{var a;let d=(a=this.getSlide())===null||a===void 0?void 0:a.triggerEl;if(d){let m=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:r.page});d.dispatchEvent(m)}}),n.on(["refresh","change"],r=>{let a=this.container;if(!a)return;for(let f of a.querySelectorAll("[data-fancybox-current-index]"))f.innerHTML=r.page+1;for(let f of a.querySelectorAll("[data-fancybox-count]"))f.innerHTML=r.pages.length;if(!r.isInfinite){for(let f of a.querySelectorAll("[data-fancybox-next]"))r.page<r.pages.length-1?(f.removeAttribute(Fi),f.removeAttribute(ci)):(f.setAttribute(Fi,""),f.setAttribute(ci,"-1"));for(let f of a.querySelectorAll("[data-fancybox-prev]"))r.page>0?(f.removeAttribute(Fi),f.removeAttribute(ci)):(f.setAttribute(Fi,""),f.setAttribute(ci,"-1"))}let d=this.getSlide();if(!d)return;let m=d.downloadSrc||"";m||d.type!=="image"||d.error||!Jt(d[Pi])||(m=d[Pi]);for(let f of a.querySelectorAll("[data-fancybox-download]")){let h=d.downloadFilename;m?(f.removeAttribute(Fi),f.removeAttribute(ci),f.setAttribute(Bo,m),f.setAttribute(fa,h||m),f.setAttribute("target","_blank")):(f.setAttribute(Fi,""),f.setAttribute(ci,"-1"),f.removeAttribute(Bo),f.removeAttribute(fa))}}),this.emit("initCarousel")}attachEvents(){let t=this,e=t.container;if(!e)return;e.addEventListener("click",t.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",t.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",t.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",t.onVisibilityChange,!1),document.addEventListener("mousemove",t.onMousemove),t.option("trapFocus")&&document.addEventListener("focus",t.onFocus,!0),window.addEventListener("resize",t.onResize);let i=window.visualViewport;i&&(i.addEventListener("scroll",t.onResize),i.addEventListener("resize",t.onResize))}detachEvents(){let t=this,e=t.container;if(!e)return;document.removeEventListener("keydown",t.onKeydown,{passive:!1,capture:!0}),e.removeEventListener("wheel",t.onWheel,{passive:!1,capture:!1}),e.removeEventListener("click",t.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",t.onMousemove),window.removeEventListener("resize",t.onResize);let i=window.visualViewport;i&&(i.removeEventListener("resize",t.onResize),i.removeEventListener("scroll",t.onResize)),document.removeEventListener("visibilitychange",t.onVisibilityChange,!1),document.removeEventListener("focus",t.onFocus,!0)}scale(){let t=this.container;if(!t)return;let e=window.visualViewport,i=Math.max(1,e?.scale||1),n="",r="",a="";if(e&&i>1){let d=`${e.offsetLeft}px`,m=`${e.offsetTop}px`;n=e.width*i+"px",r=e.height*i+"px",a=`translate3d(${d}, ${m}, 0) scale(${1/i})`}t.style.transform=a,t.style.width=n,t.style.height=r}onClick(t){var e;let{container:i,isCompact:n}=this;if(!i||this.isClosing())return;!n&&this.option("idle")&&this.resetIdle();let r=t.composedPath()[0];if(r.closest(".fancybox-spinner")||r.closest("[data-fancybox-close]"))return t.preventDefault(),void this.close(t);if(r.closest("[data-fancybox-prev]"))return t.preventDefault(),void this.prev();if(r.closest("[data-fancybox-next]"))return t.preventDefault(),void this.next();if(t.type==="click"&&t.detail===0||Math.abs(t.pageX-ga)>30||Math.abs(t.pageY-va)>30)return;let a=document.activeElement;if(ha()&&a&&i.contains(a))return;if(n&&((e=this.getSlide())===null||e===void 0?void 0:e.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",t),t.defaultPrevented)return;let d=!1;if(r.closest(".fancybox__content")){if(a){if(a.closest("[contenteditable]"))return;r.matches(Io)||a.blur()}if(ha())return;d=this.option("contentClick")}else r.closest(".fancybox__carousel")&&!r.matches(Io)&&(d=this.option("backdropClick"));d==="close"?(t.preventDefault(),this.close(t)):d==="next"?(t.preventDefault(),this.next()):d==="prev"&&(t.preventDefault(),this.prev())}onWheel(t){let e=t.target,i=this.option("wheel",t);e.closest(".fancybox__thumbs")&&(i="slide");let n=i==="slide",r=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce(function(m,f){return Math.abs(f)>Math.abs(m)?f:m}),a=Math.max(-1,Math.min(1,r)),d=Date.now();this.pwt&&d-this.pwt<300?n&&t.preventDefault():(this.pwt=d,this.emit("wheel",t,a),t.defaultPrevented||(i==="close"?(t.preventDefault(),this.close(t)):i==="slide"&&(jn(e)||(t.preventDefault(),this[a>0?"prev":"next"]()))))}onScroll(){window.scrollTo(_a,ba)}onKeydown(t){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();let e=t.key,i=this.option("keyboard");if(!i)return;let n=t.composedPath()[0],r=document.activeElement&&document.activeElement.classList,a=r&&r.contains("f-button")||n.dataset.carouselPage||n.dataset.carouselIndex;if(e!=="Escape"&&!a&&He(n)&&(n.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName)!==-1)||(t.key==="Tab"?U(this.container,Oo):le(this.container,Oo),t.ctrlKey||t.altKey||t.shiftKey))return;this.emit("keydown",e,t);let d=i[e];d&&typeof this[d]=="function"&&(t.preventDefault(),this[d]())}onResize(){let t=this.container;if(!t)return;let e=this.isCompact;t.classList.toggle(ma,e),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(t){this.isTopmost()&&this.checkFocus(t)}onMousemove(t){this.prevMouseMoveEvent=t,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(t){let e=this.optionFor(t,"closeButton")||!1;if(e==="auto"){let n=this.plugins.Toolbar;if(n&&n.state===mi.Ready)return}if(!e||!t.contentEl||t.closeBtnEl)return;let i=this.option("tpl.closeButton");if(i){let n=vt(this.localize(i));t.closeBtnEl=t.contentEl.appendChild(n),t.el&&U(t.el,"has-close-btn")}}manageCaption(t=void 0){var e,i;let n="fancybox__caption",r=this.container;if(!r)return;le(r,Tn);let a=this.isCompact||this.option("commonCaption"),d=!a;if(this.caption&&this.stop(this.caption),d&&this.caption&&(this.caption.remove(),this.caption=null),a&&!this.caption)for(let x of((e=this.carousel)===null||e===void 0?void 0:e.slides)||[])x.captionEl&&(x.captionEl.remove(),x.captionEl=void 0,le(x.el,Tn),(i=x.el)===null||i===void 0||i.removeAttribute("aria-labelledby"));if(t||(t=this.getSlide()),!t||a&&!this.isCurrentSlide(t))return;let m=t.el,f=this.optionFor(t,"caption","");if(!f)return void(a&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let h=null;if(d){if(h=t.captionEl||null,m&&!h){let x=n+`_${this.id}_${t.index}`;h=document.createElement("div"),U(h,n),h.setAttribute("id",x),t.captionEl=m.appendChild(h),U(m,Tn),m.setAttribute("aria-labelledby",x)}}else h=this.caption,h||(h=r.querySelector("."+n)),!h&&(h=document.createElement("div"),h.dataset.fancyboxCaption="",U(h,n),(this.footer||r).prepend(h)),U(r,Tn),this.caption=h;h&&(h.innerHTML="",Jt(f)||typeof f=="number"?h.innerHTML=f+"":f instanceof HTMLElement&&h.appendChild(f))}checkFocus(t){this.focus(t)}focus(t){var e;if(this.ignoreFocusChange)return;let i=document.activeElement||null,n=t?.target||null,r=this.container,a=(e=this.carousel)===null||e===void 0?void 0:e.viewport;if(!r||!a||!t&&i&&r.contains(i))return;let d=this.getSlide(),m=d&&d.state===Ve.Ready?d.el:null;if(!m||m.contains(i)||r===i)return;t&&t.cancelable&&t.preventDefault(),this.ignoreFocusChange=!0;let f=Array.from(r.querySelectorAll(Io)),h=[],x=null;for(let w of f){let P=!w.offsetParent||!!w.closest('[aria-hidden="true"]'),M=m&&m.contains(w),E=!a.contains(w);if(w===r||(M||E)&&!P){h.push(w);let O=w.dataset.origTabindex;O!==void 0&&O&&(w.tabIndex=parseFloat(O)),w.removeAttribute("data-orig-tabindex"),!w.hasAttribute("autoFocus")&&x||(x=w)}else{let O=w.dataset.origTabindex===void 0?w.getAttribute("tabindex")||"":w.dataset.origTabindex;O&&(w.dataset.origTabindex=O),w.tabIndex=-1}}let I=null;t?(!n||h.indexOf(n)<0)&&(I=x||r,h.length&&(i===di?I=h[0]:this.lastFocus!==r&&i!==Je||(I=h[h.length-1]))):I=d&&d.type==="image"?r:x||r,I&&ea(I),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){let t=this.carousel;t&&t.pages.length>1&&t.slideNext()}prev(){let t=this.carousel;t&&t.pages.length>1&&t.slidePrev()}jumpTo(...t){this.carousel&&this.carousel.slideTo(...t)}isTopmost(){var t;return((t=o.getInstance())===null||t===void 0?void 0:t.id)==this.id}animate(t=null,e="",i){if(!t||!e)return void(i&&i());this.stop(t);let n=r=>{r.target===t&&t.dataset.animationName&&(t.removeEventListener("animationend",n),delete t.dataset.animationName,i&&i(),le(t,e))};t.dataset.animationName=e,t.addEventListener("animationend",n),U(t,e)}stop(t){t&&t.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:t}))}setContent(t,e="",i=!0){if(this.isClosing())return;let n=t.el;if(!n)return;let r=null;if(He(e)?r=e:(r=vt(e+""),He(r)||(r=document.createElement("div"),r.innerHTML=e+"")),["img","picture","iframe","video","audio"].includes(r.nodeName.toLowerCase())){let a=document.createElement("div");a.appendChild(r),r=a}He(r)&&t.filter&&!t.error&&(r=r.querySelector(t.filter)),r&&He(r)?(U(r,"fancybox__content"),t.id&&r.setAttribute("id",t.id),n.classList.add(`has-${t.error?"error":t.type||"unknown"}`),n.prepend(r),r.style.display==="none"&&(r.style.display=""),getComputedStyle(r).getPropertyValue("display")==="none"&&(r.style.display=t.display||this.option("defaultDisplay")||"flex"),t.contentEl=r,i&&this.revealContent(t),this.manageCloseBtn(t),this.manageCaption(t)):this.setError(t,"{{ELEMENT_NOT_FOUND}}")}revealContent(t,e){let i=t.el,n=t.contentEl;i&&n&&(this.emit("reveal",t),this.hideLoading(t),t.state=Ve.Opening,(e=this.isOpeningSlide(t)?e===void 0?this.optionFor(t,"showClass"):e:"f-fadeIn")?this.animate(n,e,()=>{this.done(t)}):this.done(t))}done(t){this.isClosing()||(t.state=Ve.Ready,this.emit("done",t),U(t.el,"is-done"),this.isCurrentSlide(t)&&this.option("autoFocus")&&queueMicrotask(()=>{var e;(e=t.panzoom)===null||e===void 0||e.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(t)&&(le(this.container,ko),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(t){let e=this.getSlide();return!(!t||!e)&&e.index===t.index}isOpeningSlide(t){var e,i;return((e=this.carousel)===null||e===void 0?void 0:e.prevPage)===null&&t&&t.index===((i=this.getSlide())===null||i===void 0?void 0:i.index)}showLoading(t){t.state=Ve.Loading;let e=t.el;e&&(U(e,ua),this.emit("loading",t),t.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!t.spinnerEl&&t.state===Ve.Loading){let i=vt(Lo);U(i,"fancybox-spinner"),t.spinnerEl=i,e.prepend(i),this.animate(i,"f-fadeIn")}},250))}hideLoading(t){let e=t.el;if(!e)return;let i=t.spinnerEl;this.isClosing()?i?.remove():(le(e,ua),i&&this.animate(i,"f-fadeOut",()=>{i.remove()}),t.state===Ve.Loading&&(this.emit("loaded",t),t.state=Ve.Ready))}setError(t,e){if(this.isClosing())return;let i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,t),i.defaultPrevented)return;t.error=e,this.hideLoading(t),this.clearContent(t);let n=document.createElement("div");n.classList.add("fancybox-error"),n.innerHTML=this.localize(e||"<p>{{ERROR}}</p>"),this.setContent(t,n)}clearContent(t){if(t.state===void 0)return;this.emit("clearContent",t),t.contentEl&&(t.contentEl.remove(),t.contentEl=void 0);let e=t.el;e&&(le(e,"has-error"),le(e,"has-unknown"),le(e,`has-${t.type||"unknown"}`)),t.closeBtnEl&&t.closeBtnEl.remove(),t.closeBtnEl=void 0,t.captionEl&&t.captionEl.remove(),t.captionEl=void 0,t.spinnerEl&&t.spinnerEl.remove(),t.spinnerEl=void 0}getSlide(){var t;let e=this.carousel;return((t=e?.pages[e?.page])===null||t===void 0?void 0:t.slides[0])||void 0}close(t,e){if(this.isClosing())return;let i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,t),i.defaultPrevented)return;t&&t.cancelable&&(t.preventDefault(),t.stopPropagation());let n=()=>{this.proceedClose(t,e)};this.startedFs&&Ke&&Ke.isFullscreen()?Promise.resolve(Ke.exit()).then(()=>n()):n()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(t=!1){let e=()=>{this.clearIdle(),this.idle=!0,U(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(t)e();else{let i=this.option("idle");i&&(this.idleTimer=setTimeout(e,i))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,le(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){Ke&&(Ke.isFullscreen()?Ke.exit():Ke.request().then(()=>{this.startedFs=!0}))}isClosing(){return[Te.Closing,Te.CustomClosing,Te.Destroy].includes(this.state)}proceedClose(t,e){var i,n;this.state=Te.Closing,this.clearIdle(),this.detachEvents();let r=this.container,a=this.carousel,d=this.getSlide(),m=d&&this.option("placeFocusBack")?d.triggerEl||this.option("triggerEl"):null;if(m&&(Ca(m)?ea(m):m.focus()),r&&(le(r,ko),U(r,"is-closing"),r.setAttribute(Mo,"true"),this.option("animated")&&U(r,Do),r.style.pointerEvents="none"),a){a.clearTransitions(),(i=a.panzoom)===null||i===void 0||i.destroy(),(n=a.plugins.Navigation)===null||n===void 0||n.detach();for(let f of a.slides){f.state=Ve.Closing,this.hideLoading(f);let h=f.contentEl;h&&this.stop(h);let x=f?.panzoom;x&&(x.stop(),x.detachEvents(),x.detachObserver()),this.isCurrentSlide(f)||a.emit("removeSlide",f)}}_a=window.scrollX,ba=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",t),this.state!==Te.CustomClosing?(e===void 0&&d&&(e=this.optionFor(d,"hideClass")),e&&d?(this.animate(d.contentEl,e,()=>{a&&a.emit("removeSlide",d)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var t;if(this.state===Te.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=Te.Destroy,(t=this.carousel)===null||t===void 0||t.destroy();let e=this.container;e&&e.remove(),Ti.delete(this.id);let i=o.getInstance();i?i.focus():(Je&&(Je.remove(),Je=null),di&&(di.remove(),di=null),le(document.documentElement,ca),(()=>{if(!Qi)return;let n=document,r=n.body;r.classList.remove(Eo),r.style.setProperty(pa,""),n.documentElement.style.setProperty(da,"")})(),this.emit("destroy"))}static bind(t,e,i){if(!Qi)return;let n,r="",a={};if(t===void 0?n=document.body:Jt(t)?(n=document.body,r=t,typeof e=="object"&&(a=e||{})):(n=t,Jt(e)&&(r=e),typeof i=="object"&&(a=i||{})),!n||!He(n))return;r=r||"[data-fancybox]";let d=o.openers.get(n)||new Map;d.set(r,a),o.openers.set(n,d),d.size===1&&n.addEventListener("click",o.fromEvent)}static unbind(t,e){let i,n="";if(Jt(t)?(i=document.body,n=t):(i=t,Jt(e)&&(n=e)),!i)return;let r=o.openers.get(i);r&&n&&r.delete(n),n&&r||(o.openers.delete(i),i.removeEventListener("click",o.fromEvent))}static destroy(){let t;for(;t=o.getInstance();)t.destroy();for(let e of o.openers.keys())e.removeEventListener("click",o.fromEvent);o.openers=new Map}static fromEvent(t){if(t.defaultPrevented||t.button&&t.button!==0||t.ctrlKey||t.metaKey||t.shiftKey)return;let e=t.composedPath()[0],i=e.closest("[data-fancybox-trigger]");if(i){let P=i.dataset.fancyboxTrigger||"",M=document.querySelectorAll(`[data-fancybox="${P}"]`),E=parseInt(i.dataset.fancyboxIndex||"",10)||0;e=M[E]||e}if(!(e&&e instanceof Element))return;let n,r,a,d;if([...o.openers].reverse().find(([P,M])=>!(!P.contains(e)||![...M].reverse().find(([E,O])=>{let R=e.closest(E);return!!R&&(n=P,r=E,a=R,d=O,!0)}))),!n||!r||!a)return;d=d||{},t.preventDefault(),e=a;let m=[],f=Qe({},zo,d);f.event=t,f.triggerEl=e,f.delegate=i;let h=f.groupAll,x=f.groupAttr,I=x&&e?e.getAttribute(`${x}`):"";if((!e||I||h)&&(m=[].slice.call(n.querySelectorAll(r))),e&&!h&&(m=I?m.filter(P=>P.getAttribute(`${x}`)===I):[e]),!m.length)return;let w=o.getInstance();return w&&w.options.triggerEl&&m.indexOf(w.options.triggerEl)>-1?void 0:(e&&(f.startIndex=m.indexOf(e)),o.fromNodes(m,f))}static fromSelector(t,e,i){let n=null,r="",a={};if(Jt(t)?(n=document.body,r=t,typeof e=="object"&&(a=e||{})):t instanceof HTMLElement&&Jt(e)&&(n=t,r=e,typeof i=="object"&&(a=i||{})),!n||!r)return!1;let d=o.openers.get(n);return!!d&&(a=Qe({},d.get(r)||{},a),!!a&&o.fromNodes(Array.from(n.querySelectorAll(r)),a))}static fromNodes(t,e){e=Qe({},zo,e||{});let i=[];for(let n of t){let r=n.dataset||{},a=r[Pi]||n.getAttribute(Bo)||n.getAttribute("currentSrc")||n.getAttribute(Pi)||void 0,d,m=e.delegate,f;m&&i.length===e.startIndex&&(d=m instanceof HTMLImageElement?m:m.querySelector("img:not([aria-hidden])")),d||(d=n instanceof HTMLImageElement?n:n.querySelector("img:not([aria-hidden])")),d&&(f=d.currentSrc||d[Pi]||void 0,!f&&d.dataset&&(f=d.dataset.lazySrc||d.dataset[Pi]||void 0));let h={src:a,triggerEl:n,thumbEl:d,thumbElSrc:f,thumbSrc:f};for(let x in r){let I=r[x]+"";I=I!=="false"&&(I==="true"||I),h[x]=I}i.push(h)}return new o(i,e)}static getInstance(t){return t?Ti.get(t):Array.from(Ti.values()).reverse().find(e=>!e.isClosing()&&e)||null}static getSlide(){var t;return((t=o.getInstance())===null||t===void 0?void 0:t.getSlide())||null}static show(t=[],e={}){return new o(t,e)}static next(){let t=o.getInstance();t&&t.next()}static prev(){let t=o.getInstance();t&&t.prev()}static close(t=!0,...e){if(t)for(let i of Ti.values())i.close(...e);else{let i=o.getInstance();i&&i.close(...e)}}};Object.defineProperty(ee,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(ee,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:zo}),Object.defineProperty(ee,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:Ns}),Object.defineProperty(ee,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});var et=class o{projectId=null;parentId=null;pageNumber=1;pageSize=1e3;sortOrder=null;FavUserId=null;type=null;showCurrentUserFav=!1;isActive=null;colorId=null;TagIDs=null;keyword="";static \u0275fac=function(e){return new(e||o)};static \u0275prov=ge({token:o,factory:o.\u0275fac,providedIn:"root"})},je=class{projectId=null;isArchived=null;folderId=null;pageNumber=1;pageSize=1e3;sortField=null;FavUserId=null;ShowCurrentUserFav=!1;isActive=null;keyword=""};var Ee=class o{constructor(t){this.http=t}upload(t){return this.http.post("https://httpbin.org/post",t,{reportProgress:!0,observe:"events"})}static \u0275fac=function(e){return new(e||o)(Vt($t))};static \u0275prov=ge({token:o,factory:o.\u0275fac,providedIn:"root"})};var fi=(m=>(m[m.Image=0]="Image",m[m.Video=1]="Video",m[m.Pdf=2]="Pdf",m[m.Word=3]="Word",m[m.Excel=4]="Excel",m[m.Powerpoint=5]="Powerpoint",m[m.FileText=6]="FileText",m[m.Zip=7]="Zip",m))(fi||{});var Ln=function(){return Ln=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ln.apply(this,arguments)},Us={scale:1,zoom:!0,actualSize:!0,showZoomInOutIcons:!1,actualSizeIcons:{zoomIn:"lg-zoom-in",zoomOut:"lg-zoom-out"},enableZoomAfter:300},Nn={afterAppendSlide:"lgAfterAppendSlide",init:"lgInit",hasVideo:"lgHasVideo",containerResize:"lgContainerResize",updateSlides:"lgUpdateSlides",afterAppendSubHtml:"lgAfterAppendSubHtml",beforeOpen:"lgBeforeOpen",afterOpen:"lgAfterOpen",slideItemLoad:"lgSlideItemLoad",beforeSlide:"lgBeforeSlide",afterSlide:"lgAfterSlide",posterClick:"lgPosterClick",dragStart:"lgDragStart",dragMove:"lgDragMove",dragEnd:"lgDragEnd",beforeNextSlide:"lgBeforeNextSlide",beforePrevSlide:"lgBeforePrevSlide",beforeClose:"lgBeforeClose",afterClose:"lgAfterClose"},Hs=function(){function o(t,e){return this.core=t,this.$LG=e,this.settings=Ln(Ln({},Us),this.core.settings),this.settings.zoom&&(this.init(),this.zoomableTimeout=!1,this.positionChanged=!1,this.pageX=this.core.outer.width()/2,this.pageY=this.core.outer.height()/2+this.$LG(window).scrollTop(),this.scale=1),this}return o.prototype.buildTemplates=function(){var t=this.settings.showZoomInOutIcons?'<button id="'+this.core.getIdName("lg-zoom-in")+'" type="button" aria-label="Zoom in" class="lg-zoom-in lg-icon"></button><button id="'+this.core.getIdName("lg-zoom-out")+'" type="button" aria-label="Zoom out" class="lg-zoom-out lg-icon"></button>':"";this.settings.actualSize&&(t+='<button id="'+this.core.getIdName("lg-actual-size")+'" type="button" aria-label="View actual size" class="'+this.settings.actualSizeIcons.zoomIn+' lg-icon"></button>'),this.core.outer.addClass("lg-use-transition-for-zoom"),this.core.$toolbar.first().append(t)},o.prototype.enableZoom=function(t){var e=this,i=this.settings.enableZoomAfter+t.detail.delay;this.$LG("body").first().hasClass("lg-from-hash")&&t.detail.delay?i=0:this.$LG("body").first().removeClass("lg-from-hash"),this.zoomableTimeout=setTimeout(function(){e.core.getSlideItem(t.detail.index).addClass("lg-zoomable")},i+30)},o.prototype.enableZoomOnSlideItemLoad=function(){this.core.LGel.on(Nn.slideItemLoad+".zoom",this.enableZoom.bind(this))},o.prototype.getModifier=function(t,e,i){var n=t;t=Math.abs(t);var r=this.getCurrentTransform(i);if(!r)return 1;var a=1;if(e==="X"){var d=Math.sign(parseFloat(r[0]));t===0||t===180?a=1:t===90&&(n===-90&&d===1||n===90&&d===-1?a=-1:a=1),a=a*d}else{var m=Math.sign(parseFloat(r[3]));if(t===0||t===180)a=1;else if(t===90){var f=parseFloat(r[1]),h=parseFloat(r[2]);a=Math.sign(f*h*n*m)}a=a*m}return a},o.prototype.getImageSize=function(t,e,i){var n={y:"offsetHeight",x:"offsetWidth"};return e===90&&(i==="x"?i="y":i="x"),t[n[i]]},o.prototype.getDragCords=function(t,e){return e===90?{x:t.pageY,y:t.pageX}:{x:t.pageX,y:t.pageY}},o.prototype.getSwipeCords=function(t,e){var i=t.targetTouches[0].pageX,n=t.targetTouches[0].pageY;return e===90?{x:n,y:i}:{x:i,y:n}},o.prototype.getDragAllowedAxises=function(t,e){var i=this.core.$lgContent.get(),n=parseFloat(t.attr("data-scale"))||1,r=t.get(),a=this.getImageSize(r,e,"y")*n>i.clientHeight,d=this.getImageSize(r,e,"x")*n>i.clientWidth;return e===90?{allowX:a,allowY:d}:{allowX:d,allowY:a}},o.prototype.getCurrentTransform=function(t){if(t){var e=window.getComputedStyle(t,null),i=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("-moz-transform")||e.getPropertyValue("-ms-transform")||e.getPropertyValue("-o-transform")||e.getPropertyValue("transform")||"none";if(i!=="none")return i.split("(")[1].split(")")[0].split(",")}},o.prototype.getCurrentRotation=function(t){if(!t)return 0;var e=this.getCurrentTransform(t);return e?Math.round(Math.atan2(parseFloat(e[1]),parseFloat(e[0]))*(180/Math.PI)):0},o.prototype.zoomImage=function(t){var e=this.core.getSlideItem(this.core.index).find(".lg-image").first(),i=e.get();if(i){var n=this.core.outer.get().getBoundingClientRect(),r=(n.width-i.offsetWidth)/2+n.left,a=(n.height-i.offsetHeight)/2+this.$LG(window).scrollTop()+n.top,d,m;t===1&&(this.positionChanged=!1),this.positionChanged&&(d=parseFloat(e.parent().attr("data-x"))/(parseFloat(e.attr("data-scale"))-1),m=parseFloat(e.parent().attr("data-y"))/(parseFloat(e.attr("data-scale"))-1),this.pageX=d+r,this.pageY=m+a,this.positionChanged=!1);var f=this.pageX-r,h=this.pageY-a,x=(t-1)*f,I=(t-1)*h;this.setZoomStyles({x,y:I,scale:t})}},o.prototype.setZoomStyles=function(t){var e=this.core.getSlideItem(this.core.index).find(".lg-image").first(),i=this.core.outer.find(".lg-current .lg-dummy-img").first(),n=e.parent();e.attr("data-scale",t.scale+"").css("transform","scale3d("+t.scale+", "+t.scale+", 1)"),i.css("transform","scale3d("+t.scale+", "+t.scale+", 1)");var r="translate3d(-"+t.x+"px, -"+t.y+"px, 0)";n.css("transform",r),n.attr("data-x",t.x).attr("data-y",t.y)},o.prototype.setActualSize=function(t,e){var i=this,n=this.core.galleryItems[this.core.index];if(!(!n.src||this.core.outer.hasClass("lg-first-slide-loading"))){var r=this.getCurrentImageActualSizeScale();this.core.outer.hasClass("lg-zoomed")?this.scale=1:this.scale=this.getScale(r),this.setPageCords(e),this.beginZoom(this.scale),this.zoomImage(this.scale),setTimeout(function(){i.core.outer.removeClass("lg-grabbing").addClass("lg-grab")},10)}},o.prototype.getNaturalWidth=function(t){var e=this.core.getSlideItem(t).find(".lg-image").first(),i=this.core.galleryItems[t].width;return i?parseFloat(i):e.get().naturalWidth},o.prototype.getActualSizeScale=function(t,e){var i,n;return t>e?(i=t/e,n=i||2):n=1,n},o.prototype.getCurrentImageActualSizeScale=function(){var t=this.core.getSlideItem(this.core.index).find(".lg-image").first(),e=t.get().offsetWidth,i=this.getNaturalWidth(this.core.index)||e;return this.getActualSizeScale(i,e)},o.prototype.getPageCords=function(t){var e={};if(t)e.x=t.pageX||t.targetTouches[0].pageX,e.y=t.pageY||t.targetTouches[0].pageY;else{var i=this.core.outer.get().getBoundingClientRect();e.x=i.width/2+i.left,e.y=i.height/2+this.$LG(window).scrollTop()+i.top}return e},o.prototype.setPageCords=function(t){var e=this.getPageCords(t);this.pageX=e.x,this.pageY=e.y},o.prototype.beginZoom=function(t){if(this.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),t>1){this.core.outer.addClass("lg-zoomed");var e=this.core.getElementById("lg-actual-size");e.removeClass(this.settings.actualSizeIcons.zoomIn).addClass(this.settings.actualSizeIcons.zoomOut)}else this.resetZoom();return t>1},o.prototype.getScale=function(t){var e=this.getCurrentImageActualSizeScale();return t<1?t=1:t>e&&(t=e),t},o.prototype.init=function(){var t=this;this.buildTemplates(),this.enableZoomOnSlideItemLoad();var e=null;this.core.outer.on("dblclick.lg",function(i){t.$LG(i.target).hasClass("lg-image")&&t.setActualSize(t.core.index,i)}),this.core.outer.on("touchstart.lg",function(i){var n=t.$LG(i.target);i.targetTouches.length===1&&n.hasClass("lg-image")&&(e?(clearTimeout(e),e=null,t.setActualSize(t.core.index,i)):e=setTimeout(function(){e=null},300),i.preventDefault())}),this.core.LGel.on(Nn.containerResize+".zoom",function(){t.core.lgOpened&&(t.setPageCords(),t.zoomImage(t.scale))}),this.core.getElementById("lg-zoom-out").on("click.lg",function(){t.core.outer.find(".lg-current .lg-image").get()&&(t.scale-=t.settings.scale,t.scale=t.getScale(t.scale),t.beginZoom(t.scale),t.zoomImage(t.scale))}),this.core.getElementById("lg-zoom-in").on("click.lg",function(){t.zoomIn()}),this.core.getElementById("lg-actual-size").on("click.lg",function(){t.setActualSize(t.core.index)}),this.core.LGel.on(Nn.beforeOpen+".zoom",function(){t.core.outer.find(".lg-item").removeClass("lg-zoomable")}),this.core.LGel.on(Nn.afterSlide+".zoom",function(i){var n=i.detail.prevIndex;t.scale=1,t.resetZoom(n)}),this.zoomDrag(),this.pinchZoom(),this.zoomSwipe()},o.prototype.zoomIn=function(t){var e=this.core.galleryItems[this.core.index];e.src&&(t?this.scale=t:this.scale+=this.settings.scale,this.scale=this.getScale(this.scale),this.beginZoom(this.scale),this.zoomImage(this.scale))},o.prototype.resetZoom=function(t){this.core.outer.removeClass("lg-zoomed lg-zoom-drag-transition");var e=this.core.getElementById("lg-actual-size"),i=this.core.getSlideItem(t!==void 0?t:this.core.index);e.removeClass(this.settings.actualSizeIcons.zoomOut).addClass(this.settings.actualSizeIcons.zoomIn),i.find(".lg-img-wrap").first().removeAttr("style data-x data-y"),i.find(".lg-image").first().removeAttr("style data-scale"),this.setPageCords()},o.prototype.getTouchDistance=function(t){return Math.sqrt((t.targetTouches[0].pageX-t.targetTouches[1].pageX)*(t.targetTouches[0].pageX-t.targetTouches[1].pageX)+(t.targetTouches[0].pageY-t.targetTouches[1].pageY)*(t.targetTouches[0].pageY-t.targetTouches[1].pageY))},o.prototype.pinchZoom=function(){var t=this,e=0,i=!1,n=1,r=this.core.getSlideItem(this.core.index);this.core.$inner.on("touchstart.lg",function(a){r=t.core.getSlideItem(t.core.index),a.preventDefault(),a.targetTouches.length===2&&(t.$LG(a.target).hasClass("lg-item")||r.get().contains(a.target))&&(n=t.scale||1,t.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),t.core.touchAction="pinch",e=t.getTouchDistance(a))}),this.core.$inner.on("touchmove.lg",function(a){if(a.preventDefault(),a.targetTouches.length===2&&t.core.touchAction==="pinch"&&(t.$LG(a.target).hasClass("lg-item")||r.get().contains(a.target))){var d=t.getTouchDistance(a),m=e-d;!i&&Math.abs(m)>5&&(i=!0),i&&(t.scale=Math.max(1,n+-m*.008),t.zoomImage(t.scale))}}),this.core.$inner.on("touchend.lg",function(a){t.core.touchAction==="pinch"&&(t.$LG(a.target).hasClass("lg-item")||r.get().contains(a.target))&&(i=!1,e=0,t.scale<=1?t.resetZoom():(t.scale=t.getScale(t.scale),t.zoomImage(t.scale),t.core.outer.addClass("lg-zoomed")),t.core.touchAction=void 0)})},o.prototype.touchendZoom=function(t,e,i,n,r,a){var d=this.core.getSlideItem(this.core.index).find(".lg-img-rotate").first().get(),m=e.x-t.x,f=e.y-t.y,h=Math.abs(m)/r+1,x=Math.abs(f)/r+1;h>2&&(h+=1),x>2&&(x+=1),m=m*h,f=f*x;var I=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),w=this.core.getSlideItem(this.core.index).find(".lg-object").first(),P=parseFloat(I.attr("data-x"))||0,M=parseFloat(I.attr("data-y"))||0,E={};E.x=-Math.abs(P)+m*this.getModifier(a,"X",d),E.y=-Math.abs(M)+f*this.getModifier(a,"Y",d);var O=this.getPossibleSwipeDragCords(w,a);if(Math.abs(m)>15||Math.abs(f)>15){if(n&&(E.y<=-O.maxY?E.y=-O.maxY:E.y>=-O.minY&&(E.y=-O.minY)),i&&(E.x<=-O.maxX?E.x=-O.maxX:E.x>=-O.minX&&(E.x=-O.minX)),n)I.attr("data-y",Math.abs(E.y));else{var R=parseFloat(I.attr("data-y"))||0;E.y=-Math.abs(R)}if(i)I.attr("data-x",Math.abs(E.x));else{var $=parseFloat(I.attr("data-x"))||0;E.x=-Math.abs($)}this.setZoomSwipeStyles(I,E),this.positionChanged=!0}},o.prototype.getZoomSwipeCords=function(t,e,i,n,r,a,d,m,f){var h={};if(n){if(h.y=-Math.abs(a)+(e.y-t.y)*this.getModifier(m,"Y",f),h.y<=-r.maxY){var x=-r.maxY-h.y;h.y=-r.maxY-x/6}else if(h.y>=-r.minY){var I=h.y- -r.minY;h.y=-r.minY+I/6}}else h.y=-Math.abs(a);if(i){if(h.x=-Math.abs(d)+(e.x-t.x)*this.getModifier(m,"X",f),h.x<=-r.maxX){var w=-r.maxX-h.x;h.x=-r.maxX-w/6}else if(h.x>=-r.minX){var P=h.x- -r.minX;h.x=-r.minX+P/6}}else h.x=-Math.abs(d);return h},o.prototype.getPossibleSwipeDragCords=function(t,e){var i=this.core.$lgContent,n=i.height(),r=i.width(),a=this.getImageSize(t.get(),e,"y"),d=this.getImageSize(t.get(),e,"x"),m=parseFloat(t.attr("data-scale"))||1,f=Math.abs(m),h=(n-a)/2,x=Math.abs(a*f-n+h),I=(r-d)/2,w=Math.abs(d*f-r+I);return e===90?{minY:I,maxY:w,minX:h,maxX:x}:{minY:h,maxY:x,minX:I,maxX:w}},o.prototype.setZoomSwipeStyles=function(t,e){t.css("transform","translate3d("+e.x+"px, "+e.y+"px, 0)")},o.prototype.zoomSwipe=function(){var t=this,e={},i={},n=!1,r=!1,a=!1,d=new Date,m=new Date,f=0,h=0,x,I,w=null,P=0,M=this.core.getSlideItem(this.core.index);this.core.$inner.on("touchstart.lg",function(E){E.preventDefault();var O=t.core.galleryItems[t.core.index];if(O.src&&(M=t.core.getSlideItem(t.core.index),(t.$LG(E.target).hasClass("lg-item")||M.get().contains(E.target))&&E.targetTouches.length===1&&t.core.outer.hasClass("lg-zoomed"))){d=new Date,t.core.touchAction="zoomSwipe";var R=t.core.getSlideItem(t.core.index).find(".lg-object").first();I=t.core.getSlideItem(t.core.index).find(".lg-img-wrap").first(),w=t.core.getSlideItem(t.core.index).find(".lg-img-rotate").first().get(),P=t.getCurrentRotation(w);var $=t.getDragAllowedAxises(R,Math.abs(P));a=$.allowY,r=$.allowX,(r||a)&&(e=t.getSwipeCords(E,Math.abs(P))),h=parseFloat(I.attr("data-y")),f=parseFloat(I.attr("data-x")),x=t.getPossibleSwipeDragCords(R,P),t.core.outer.addClass("lg-zoom-dragging lg-zoom-drag-transition")}}),this.core.$inner.on("touchmove.lg",function(E){if(E.preventDefault(),E.targetTouches.length===1&&t.core.touchAction==="zoomSwipe"&&(t.$LG(E.target).hasClass("lg-item")||M.get().contains(E.target))){t.core.touchAction="zoomSwipe",i=t.getSwipeCords(E,Math.abs(P));var O=t.getZoomSwipeCords(e,i,r,a,x,h,f,P,w);(Math.abs(i.x-e.x)>15||Math.abs(i.y-e.y)>15)&&(n=!0,t.setZoomSwipeStyles(I,O))}}),this.core.$inner.on("touchend.lg",function(E){if(t.core.touchAction==="zoomSwipe"&&(t.$LG(E.target).hasClass("lg-item")||M.get().contains(E.target))){if(t.core.touchAction=void 0,t.core.outer.removeClass("lg-zoom-dragging"),!n)return;n=!1,m=new Date;var O=m.valueOf()-d.valueOf();t.touchendZoom(e,i,r,a,O,P)}})},o.prototype.zoomDrag=function(){var t=this,e={},i={},n=!1,r=!1,a=null,d=0,m=!1,f=!1,h,x,I,w,P,M;this.core.outer.on("mousedown.lg.zoom",function(E){var O=t.core.galleryItems[t.core.index];if(O.src){var R=t.core.getSlideItem(t.core.index);if(t.$LG(E.target).hasClass("lg-item")||R.get().contains(E.target)){h=new Date;var $=t.core.getSlideItem(t.core.index).find(".lg-object").first();M=t.core.getSlideItem(t.core.index).find(".lg-img-wrap").first(),a=t.core.getSlideItem(t.core.index).find(".lg-img-rotate").get(),d=t.getCurrentRotation(a);var Y=t.getDragAllowedAxises($,Math.abs(d));f=Y.allowY,m=Y.allowX,t.core.outer.hasClass("lg-zoomed")&&t.$LG(E.target).hasClass("lg-object")&&(m||f)&&(E.preventDefault(),e=t.getDragCords(E,Math.abs(d)),I=t.getPossibleSwipeDragCords($,d),n=!0,w=parseFloat(M.attr("data-y")),P=parseFloat(M.attr("data-x")),t.core.outer.get().scrollLeft+=1,t.core.outer.get().scrollLeft-=1,t.core.outer.removeClass("lg-grab").addClass("lg-grabbing lg-zoom-drag-transition lg-zoom-dragging"))}}}),this.$LG(window).on("mousemove.lg.zoom.global"+this.core.lgId,function(E){if(n){r=!0,i=t.getDragCords(E,Math.abs(d));var O=t.getZoomSwipeCords(e,i,m,f,I,w,P,d,a);t.setZoomSwipeStyles(M,O)}}),this.$LG(window).on("mouseup.lg.zoom.global"+this.core.lgId,function(E){if(n){if(x=new Date,n=!1,t.core.outer.removeClass("lg-zoom-dragging"),r&&(e.x!==i.x||e.y!==i.y)){i=t.getDragCords(E,Math.abs(d));var O=x.valueOf()-h.valueOf();t.touchendZoom(e,i,m,f,O,d)}r=!1}t.core.outer.removeClass("lg-grabbing").addClass("lg-grab")})},o.prototype.closeGallery=function(){this.resetZoom()},o.prototype.destroy=function(){this.$LG(window).off(".lg.zoom.global"+this.core.lgId),this.core.LGel.off(".lg.zoom"),this.core.LGel.off(".zoom"),clearTimeout(this.zoomableTimeout),this.zoomableTimeout=!1},o}(),ja=Hs;var Un=class o{fileId;emails;message;static \u0275fac=function(e){return new(e||o)};static \u0275prov=ge({token:o,factory:o.\u0275fac,providedIn:"root"})};var Mi=class o{closeAllMenusSource=new po;closeAllMenus$=this.closeAllMenusSource.asObservable();closeAllMenus(){this.closeAllMenusSource.next()}closeAllSource=new po;closeAll$=this.closeAllSource.asObservable();closeAll(){this.closeAllSource.next()}static \u0275fac=function(e){return new(e||o)};static \u0275prov=ge({token:o,factory:o.\u0275fac,providedIn:"root"})};var Qs=o=>({$implicit:o,level:0}),$s=(o,t)=>({$implicit:o,level:t});function Ws(o,t){o&1&&st(0)}function qs(o,t){if(o&1&&(Oe(0),T(1,Ws,1,0,"ng-container",7),De()),o&2){let e=t.$implicit;_();let i=A(7);c(),v("ngTemplateOutlet",i)("ngTemplateOutletContext",ce(2,Qs,e))}}function Xs(o,t){if(o&1&&(s(0,"div")(1,"strong"),p(2,"Selected Item:"),l(),s(3,"div"),p(4),l()()),o&2){let e=_();c(4),S(e.selectedNode.label)}}function Ys(o,t){o&1&&(s(0,"span",16),p(1,"-"),l())}function Zs(o,t){o&1&&(s(0,"span",16),p(1,"+"),l())}function Gs(o,t){o&1&&(s(0,"span",16),C(1,"i",17),l())}function Ks(o,t){if(o&1){let e=k();s(0,"button",13),F("click",function(n){b(e);let r=_().$implicit;return _().loadChildren(r),y(n.stopPropagation())}),T(1,Ys,2,0,"span",14)(2,Zs,2,0,"span",15)(3,Gs,2,0,"span",15),l()}if(o&2){let e=_().$implicit;c(),v("ngIf",e.expanded),c(),v("ngIf",!e.expanded),c(),v("ngIf",e.loading)}}function Js(o,t){o&1&&st(0)}function el(o,t){if(o&1&&(Oe(0),T(1,Js,1,0,"ng-container",7),De()),o&2){let e=t.$implicit,i=_(2).level;_();let n=A(7);c(),v("ngTemplateOutlet",n)("ngTemplateOutletContext",We(2,$s,e,i+1))}}function tl(o,t){if(o&1&&(s(0,"div"),T(1,el,2,5,"ng-container",5),l()),o&2){let e=_().$implicit;c(),v("ngForOf",e.children)}}function il(o,t){if(o&1){let e=k();s(0,"div",8),C(1,"div",9)(2,"i",10),s(3,"span",11),F("click",function(){let n=b(e).$implicit,r=_();return y(r.toggleSelection(n))}),s(4,"strong"),p(5),l()(),T(6,Ks,4,3,"button",12)(7,tl,2,1,"div",6),l()}if(o&2){let e=t.$implicit,i=_();c(),ut("height",e.hasChildren?"100%":"0"),c(),lr(e.icon),c(2),V("selected-item",e.projectId==(i.selectedNode==null?null:i.selectedNode.projectId)&&e.folderId==(i.selectedNode==null?null:i.selectedNode.folderId)),c(),S(e.label),c(),v("ngIf",e.hasChildren),c(),v("ngIf",e.hasChildren&&e.expanded)}}var Hn=class o{constructor(t,e,i,n,r){this.el=t;this.modalService=e;this.projectService=i;this.toaster=n;this.translate=r}projects=[];select=new W;subscriptions=[];treeData=[];selectedNode=null;ngOnInit(){this.treeData=this.projects.map(t=>({projectId:t.projectId??0,folderId:null,label:t.title,icon:"fas fa-box",hasChildren:!0,children:[],loading:!1,expanded:!1}))}toggleSelection(t){this.selectedNode=t,this.select.emit({projectId:t?.projectId??null,folderId:t?.folderId??null})}loadChildren(t){if(t.loading||!t.hasChildren)return;if(t.loading=!0,t.children&&t.children.length>0){t.loading=!1,t.expanded=!t.expanded;return}let e=this.projectService.fetchProjectFolders({projectId:t.projectId,parentId:t.folderId}).subscribe(i=>{i&&(t.children=i.map(n=>({projectId:n.projectId??0,folderId:n.folderId,label:n.title,icon:"fas fa-folder",hasChildren:(n.childsNum??0)>0,children:[],loading:!1,expanded:!1}))),t.loading=!1,t.expanded=!0});this.subscriptions.push(e)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static \u0275fac=function(e){return new(e||o)(j(fe),j(Pe),j(ae),j(oe),j(de))};static \u0275cmp=N({type:o,selectors:[["app-folders-tree-view"]],inputs:{projects:"projects"},outputs:{select:"select"},standalone:!1,decls:8,vars:2,consts:[["treeNodeTemplate",""],[1,"form-group"],["ngbDropdown",""],["ngbDropdownMenu","",1,"scrollable-menu"],[1,"tree-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dropdown-item",2,"margin-left","20px"],[1,"tree-line"],[2,"margin-right","2px","margin-left","2px"],[2,"cursor","pointer",3,"click"],["type","button","style","border: none; background: none; cursor: pointer;",3,"click",4,"ngIf"],["type","button",2,"border","none","background","none","cursor","pointer",3,"click"],["style"," font-size: 20px; font-weight: bold; margin-right:2px; margin-left:2px;",4,"ngIf"],["style"," font-size: 20px; font-weight: bold; margin-right: 2px; margin-left: 2px;",4,"ngIf"],[2,"font-size","20px","font-weight","bold","margin-right","2px","margin-left","2px"],[1,"fas","fa-circle-notch","fa-spin"]],template:function(e,i){e&1&&(s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),T(4,qs,2,4,"ng-container",5),l()()(),T(5,Xs,5,1,"div",6)(6,il,8,9,"ng-template",null,0,se),l()),e&2&&(c(4),v("ngForOf",i.treeData),c(),v("ngIf",i.selectedNode))},dependencies:[J,X,Ri],styles:['.scrollable-menu[_ngcontent-%COMP%]{max-height:300px;height:300px;overflow-y:auto}.tree-container[_ngcontent-%COMP%]{padding:10px}.selected-item[_ngcontent-%COMP%]{background-color:#594fef45}.tree-line[_ngcontent-%COMP%]{width:2px;background-color:#ccc;margin-right:10px;position:relative;top:0}.dropdown-item[_ngcontent-%COMP%]{position:relative}.dropdown-item[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-10px;top:0;bottom:0;width:2px;background-color:#ccc;z-index:1000}']})};var rl=o=>({fav:o}),al=o=>({focused:o}),sl=o=>({selected:o});function ll(o,t){if(o&1&&(Oe(0),p(1),u(2,"translate"),u(3,"date"),De()),o&2){let e=_();c(),ne(" ",g(2,2,"FileCard.opened"),"",Q(3,4,e.card.openedDate,"HH:mm")," ")}}function cl(o,t){if(o&1&&(Oe(0),p(1),u(2,"translate"),u(3,"date"),De()),o&2){let e=_(2);c(),ne(" ",g(2,2,"FileCard.uploaded"),"",Q(3,4,e.card.postDate,"HH:mm")," ")}}function dl(o,t){if(o&1&&T(0,cl,4,7,"ng-container",36),o&2){let e=_();v("ngIf",e.card.postDate)}}function pl(o,t){if(o&1){let e=k();Oe(0),s(1,"a",20),F("click",function(){b(e);let n=_(),r=A(73);return y(n.archiveFile(r,n.card))}),C(2,"img",37),p(3),u(4,"translate"),l(),De()}o&2&&(c(3),D("",g(4,1,"FileCard.Delete")," "))}function ml(o,t){if(o&1){let e=k();s(0,"a",20),F("click",function(){b(e);let n=_(),r=A(73);return y(n.archiveFile(r,n.card))}),C(1,"img",38),p(2),u(3,"translate"),l()}o&2&&(c(2),D("",g(3,1,"FileCard.Archive")," "))}function ul(o,t){o&1&&st(0)}function fl(o,t){if(o&1&&(s(0,"div")(1,"a",39),C(2,"video",40),l()()),o&2){let e,i=_();Vi("file-img-holder ",i.FileTypes[(e=i.card.fileType)!==null&&e!==void 0?e:-1],""),c(),L("href",i.card.fileUrl,H),c(),v("src",i.card.fileUrl,H)}}function hl(o,t){if(o&1&&(s(0,"a",39),C(1,"img",41),l()),o&2){let e=_(3);L("href",e.card.externalFileUrl,H),c(),L("alt",e.card.title),v("src",e.card.externalFileUrl,H)}}function gl(o,t){if(o&1){let e=k();s(0,"a",39)(1,"img",42),F("error",function(){b(e);let n=_(3);return y(n.imageError=!0)})("load",function(){b(e);let n=_(3);return y(n.imageError=!1)}),l()()}if(o&2){let e=_(3);L("href",e.card.fileUrl,H),c(),L("alt",e.card.title),v("src",e.card.fileUrl,H)}}function vl(o,t){if(o&1&&T(0,hl,2,3,"a",39)(1,gl,2,3,"a",39),o&2){let e=_(2);K(e.card.externalFileUrl!=null?0:1)}}function _l(o,t){if(o&1&&(s(0,"a",43),C(1,"img",44),l()),o&2){let e,i=_(3);L("href",i.card.externalFileUrl,H),c(),L("alt",i.card.title),v("src","./assets/icons/file-"+i.FileTypes[(e=i.card.fileType)!==null&&e!==void 0?e:-1]+".svg",H)}}function bl(o,t){if(o&1&&(s(0,"a",43),C(1,"img",44),l()),o&2){let e,i=_(3);L("href",i.card.fileUrl,H),c(),L("alt",i.card.title),v("src","./assets/icons/file-"+i.FileTypes[(e=i.card.fileType)!==null&&e!==void 0?e:-1]+".svg",H)}}function yl(o,t){if(o&1&&T(0,_l,2,3,"a",43)(1,bl,2,3,"a",43),o&2){let e=_(2);K(e.card.externalFileUrl!=null?0:1)}}function Cl(o,t){if(o&1&&(s(0,"div"),T(1,vl,2,1)(2,yl,2,1),l()),o&2){let e,i,n,r=_();Vi("file-img-holder ",r.FileTypes[(e=r.card.fileType)!==null&&e!==void 0?e:-1],""),V("file",r.FileTypes[(i=r.card.fileType)!==null&&i!==void 0?i:-1]!="Image"),c(),K((n=r.FileTypes[(n=r.card.fileType)!==null&&n!==void 0?n:-1])==="Image"?1:2)}}function xl(o,t){o&1&&st(0)}function Sl(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(3);c(),D("",Q(2,1,((e=i.card.fileSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function wl(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(3);c(),D("",Q(2,1,((e=i.card.fileSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function Il(o,t){if(o&1&&(p(0),T(1,Sl,3,4,"span")(2,wl,3,4,"span")),o&2){let e,i,n=_(2);D(" ",(e=n.card.videoDuration)!==null&&e!==void 0?e:"00:00"," Min | "),c(),K(((i=n.card.fileSize)!==null&&i!==void 0?i:0)>1?1:2)}}function Fl(o,t){o&1&&p(0,"External file")}function Pl(o,t){if(o&1&&(C(0,"img",45),s(1,"span"),T(2,Il,3,2)(3,Fl,1,0),l()),o&2){let e=_();c(2),K(e.card.externalFileUrl==null?2:3)}}function Tl(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(3);c(),D("",Q(2,1,((e=i.card.fileSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function jl(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(3);c(),D("",Q(2,1,((e=i.card.fileSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function El(o,t){if(o&1&&T(0,Tl,3,4,"span")(1,jl,3,4,"span"),o&2){let e,i=_(2);K(((e=i.card.fileSize)!==null&&e!==void 0?e:0)>1?0:1)}}function Ml(o,t){o&1&&(s(0,"span"),p(1,"External file"),l())}function Ol(o,t){if(o&1&&T(0,El,2,1)(1,Ml,2,0,"span"),o&2){let e=_();K(e.card.externalFileUrl==null?0:1)}}function Dl(o,t){if(o&1){let e=k();s(0,"li",71)(1,"span",72),F("click",function(){let n=b(e).$implicit,r=_(2);return y(r.removeUser(n))}),p(2,"\xD7"),l(),s(3,"div",73)(4,"div",74)(5,"div",75),C(6,"img",44),l(),p(7),l()()()}if(o&2){let e=t.$implicit;L("title",e.name),c(6),L("alt",e==null?null:e.name),v("src",e.imageUrl?e.imageUrl:e.isMale==!0?"assets/images/profile/default-profile-img.png":e.isMale==!1?"assets/images/profile/default-profile-female-img.jpg":"assets/images/profile/unknown-person.svg",H),c(),ne("",e.name," (",e==null?null:e.email,") ")}}function kl(o,t){if(o&1){let e=k();s(0,"li",80),F("click",function(){let n=b(e).$implicit,r=_(3);return y(r.selectUser(n))}),s(1,"div",73)(2,"div",74)(3,"div",75),C(4,"img",44),l(),p(5),l()()()}if(o&2){let e=t.$implicit;v("ngClass",ce(5,sl,e.isSelected)),c(4),L("alt",e==null?null:e.name),v("src",e.imageUrl?e.imageUrl:e.isMale==!0?"assets/images/profile/default-profile-img.png":e.isMale==!1?"assets/images/profile/default-profile-female-img.jpg":"assets/images/profile/unknown-person.svg",H),c(),ne(" ",e==null?null:e.name," (",e==null?null:e.email,") ")}}function Bl(o,t){if(o&1&&(s(0,"div",76)(1,"div",77)(2,"ul",78),T(3,kl,6,7,"li",79),l()()()),o&2){let e=_(2);c(3),v("ngForOf",e.usersData)}}function Vl(o,t){o&1&&(s(0,"div",81),p(1),u(2,"translate"),l()),o&2&&(c(),D(" ",g(2,1,"RequieredField")," "))}function Rl(o,t){o&1&&(s(0,"div",81),p(1),u(2,"translate"),l()),o&2&&(c(),D(" ",g(2,1,"RequieredField")," "))}function Al(o,t){if(o&1&&(s(0,"div",53)(1,"label",82),p(2),u(3,"translate"),l(),s(4,"textarea",83),p(5,"Your message"),l(),T(6,Rl,3,3,"div",62),l()),o&2){let e,i=_(2);c(2),S(g(3,2,"FileCard.Message")),c(4),v("ngIf",((e=i.shareForm.get("message"))==null?null:e.invalid)&&(i.isSubmittedItem||((e=i.shareForm.get("message"))==null?null:e.touched)||((e=i.shareForm.get("message"))==null?null:e.dirty)))}}function zl(o,t){if(o&1){let e=k();s(0,"div",46)(1,"h4",47),p(2),l(),s(3,"button",48),F("click",function(){let n=b(e).$implicit;return y(n.dismiss("Cross click"))}),l()(),s(4,"div",49)(5,"form",50)(6,"div",51)(7,"div",52)(8,"div",53)(9,"label",54),p(10),u(11,"translate"),l(),s(12,"div",55)(13,"div",56)(14,"div",57)(15,"ul",58),T(16,Dl,8,5,"li",59),s(17,"li")(18,"input",60),u(19,"translate"),F("keyup.enter",function(){let n;b(e);let r=_();return y(r.onEnterSearchQuery((n=r.shareForm.get("searchQuery"))==null?null:n.value))}),l()()()()()(),T(20,Bl,4,1,"div",61)(21,Vl,3,3,"div",62),l()(),s(22,"div",63)(23,"div",64),C(24,"input",65),s(25,"label",66),p(26),u(27,"translate"),l()()()(),T(28,Al,7,4,"div",67),s(29,"div",68)(30,"button",69),F("click",function(){let n=b(e).$implicit;return y(n.close("Close click"))}),p(31),u(32,"translate"),l(),s(33,"button",70),F("click",function(){b(e);let n=_();return y(n.submitShare())}),p(34),u(35,"translate"),l()()()()}if(o&2){let e,i,n=_();c(2),D("Share file (",n.filename,")"),c(3),v("formGroup",n.shareForm),c(5),S(g(11,14,"FileCard.ShareWith")),c(6),v("ngForOf",n.selectedUsers),c(2),Pt("placeholder","",g(19,16,"Projects.EnterNameOrEmail"),"..."),v("ngClass",ce(24,al,((e=n.shareForm.get("searchQuery"))==null?null:e.value.length)>0)),c(2),v("ngIf",n.usersData.length>0),c(),v("ngIf",!n.selectedUsers.length&&n.isSubmittedItem),c(5),D(" ",g(27,18,"FileCard.NotifyUser")," "),c(2),v("ngIf",((i=n.shareForm.get("notify"))==null?null:i.value)==!0),c(2),v("disabled",n.value===!1),c(),D(" ",g(32,20,"Common.Cancel")," "),c(3),S(g(35,22,"Common.Confirm"))}}function Nl(o,t){o&1&&(s(0,"div",81),p(1),u(2,"translate"),l()),o&2&&(c(),D(" ",g(2,1,"RequieredField")," "))}function Ll(o,t){if(o&1){let e=k();s(0,"div",46)(1,"h4",47),p(2),u(3,"translate"),l(),s(4,"button",48),F("click",function(){let n=b(e).$implicit;return y(n.dismiss("Cross click"))}),l()(),s(5,"div",49)(6,"form",84,11),F("ngSubmit",function(){b(e);let n=A(7),r=_();return y(n.form.valid&&r.submitRename(r.card))}),s(8,"div",53)(9,"label",85),p(10),u(11,"translate"),l(),s(12,"input",86,12),Ut("ngModelChange",function(n){b(e);let r=_();return Lt(r.filename,n)||(r.filename=n),y(n)}),F("keyup",function(){b(e);let n=_();return y(n.checkMatch(n.card.title))}),l(),T(14,Nl,3,3,"div",62),l(),s(15,"div",68)(16,"button",69),F("click",function(){let n=b(e).$implicit;return y(n.close("Close click"))}),p(17),u(18,"translate"),l(),s(19,"button",87),p(20),u(21,"translate"),l()()()()}if(o&2){let e=A(7),i=A(13),n=_();c(2),S(g(3,8,"FileCard.RenameFile")),c(8),S(g(11,10,"FileCard.FileName")),c(2),Nt("ngModel",n.filename),c(2),v("ngIf",i.invalid&&(i.dirty||i.touched||e.submitted)),c(2),v("disabled",n.value===!1),c(),D(" ",g(18,12,"Common.Cancel")," "),c(2),v("disabled",n.match===!1),c(),S(g(21,14,"Common.Confirm"))}}function Ul(o,t){if(o&1){let e=k();s(0,"div",46)(1,"h4",47),p(2),u(3,"translate"),l(),s(4,"button",48),F("click",function(){let n=b(e).$implicit;return y(n.dismiss("Cross click"))}),l()(),s(5,"div",49)(6,"form",84,13),F("ngSubmit",function(){b(e);let n=A(7),r=_();return y(n.form.valid&&r.submitMove(r.card))}),s(8,"app-folders-tree-view",88),F("select",function(n){b(e);let r=_();return y(r.handleMoveToSelect(n))}),l(),s(9,"div",68)(10,"button",69),F("click",function(){let n=b(e).$implicit;return y(n.close("Close click"))}),p(11),u(12,"translate"),l(),s(13,"button",87),p(14),u(15,"translate"),l()()()()}if(o&2){let e=_();c(2),S(g(3,6,"FileCard.MoveFile")),c(6),v("projects",e.projects),c(2),v("disabled",e.value===!1),c(),D(" ",g(12,8,"Common.Cancel")," "),c(2),v("disabled",!e.moveToProjectId&&!e.moveToFolderId),c(),S(g(15,10,"Common.Confirm"))}}function Hl(o,t){if(o&1){let e=k();s(0,"div",46)(1,"h4",47),p(2),u(3,"translate"),l(),s(4,"button",48),F("click",function(){let n=b(e).$implicit;return y(n.dismiss("Cross click"))}),l()(),s(5,"div",49)(6,"form",84,14),F("ngSubmit",function(){b(e);let n=A(7),r=_();return y(n.form.valid&&r.submitCopy(r.card))}),s(8,"app-folders-tree-view",88),F("select",function(n){b(e);let r=_();return y(r.handleCopyToSelect(n))}),l(),s(9,"div",68)(10,"button",69),F("click",function(){let n=b(e).$implicit;return y(n.close("Close click"))}),p(11),u(12,"translate"),l(),s(13,"button",87),p(14),u(15,"translate"),l()()()()}if(o&2){let e=_();c(2),S(g(3,6,"FileCard.CopyTo")),c(6),v("projects",e.projects),c(2),v("disabled",e.value===!1),c(),D(" ",g(12,8,"Common.Cancel")," "),c(2),v("disabled",!e.copyToProjectId&&!e.copyToFolderId),c(),S(g(15,10,"Common.Confirm"))}}function Ql(o,t){if(o&1){let e=k();Oe(0),s(1,"h3",89),C(2,"i",90),p(3),u(4,"translate"),l(),s(5,"div",68)(6,"button",69),F("click",function(){b(e);let n=_().$implicit;return y(n.close("Close click"))}),p(7),u(8,"translate"),l(),s(9,"button",91),F("click",function(){b(e);let n=_(2);return y(n.submitDelete(n.card.fileId))}),p(10),u(11,"translate"),l()(),De()}if(o&2){let e=_(2);c(3),S(g(4,4,"FileCard.DeleteConfirm")),c(3),v("disabled",e.value===!1),c(),D(" ",g(8,6,"Common.Cancel")," "),c(3),S(g(11,8,"Common.Confirm"))}}function $l(o,t){if(o&1){let e=k();s(0,"h3",89),C(1,"i",90),p(2),u(3,"translate"),l(),s(4,"div",68)(5,"button",69),F("click",function(){b(e);let n=_().$implicit;return y(n.close("Close click"))}),p(6),u(7,"translate"),l(),s(8,"button",91),F("click",function(){b(e);let n=_(2);return y(n.submitArchive(n.card.fileId))}),p(9),u(10,"translate"),l()()}if(o&2){let e=_(2);c(2),S(g(3,4,"FileCard.ArchiveConfirm")),c(3),v("disabled",e.value===!1),c(),D(" ",g(7,6,"Common.Cancel")," "),c(3),S(g(10,8,"Common.Confirm"))}}function Wl(o,t){if(o&1){let e=k();s(0,"div",46)(1,"h4",47),p(2),u(3,"translate"),l(),s(4,"button",48),F("click",function(){let n=b(e).$implicit;return y(n.dismiss("Cross click"))}),l()(),s(5,"div",49),T(6,Ql,12,10,"ng-container",17)(7,$l,11,10,"ng-template",null,1,se),l()}if(o&2){let e=A(8),i=_();c(2),S(g(3,3,"FileCard.ArchiveFile")),c(4),v("ngIf",i.card.isArchived==!0)("ngIfElse",e)}}var ye=class o{constructor(t,e,i,n,r,a,d){this.fileCardService=t;this.el=e;this.modalService=i;this.projectService=n;this.toaster=r;this.translate=a;this.userService=d}projectFolderQuery;projectFolders=[];isFetchingProjects=!1;subscriptions=[];projects;isFetching=!1;pageSize=1e3;currentPage=1;totalItems=0;numberOfPages=0;selectedProjectType=null;selectedSortField=null;card;index;showInfo=new W;favorite=new W;archive=new W;delete=new W;rename=new W;imageError;activeCardIndex=null;FileTypes=fi;isFetchingUsers=!1;usersData=[];selectedUsers=[];shareForm;closeSub;static hasInitialized=!1;static cachedProjects=[];settings={counter:!1,plugins:[ja]};onBeforeSlide=t=>{let{index:e,prevIndex:i}=t;console.log(e,i)};ngOnInit(){if(this.projectFolderQuery=new et,this.projectFolderQuery.projectId=null,this.projectFolderQuery.parentId=null,this.projectFolderQuery.sortOrder=null,this.projectFolderQuery.pageNumber=1,this.projectFolderQuery.pageSize=1e3,this.projectFolderQuery.FavUserId=null,this.projectFolderQuery.isActive=!0,this.projectFolderQuery.showCurrentUserFav=!0,this.projectFolderQuery.type=null,this.closeSub=this.fileCardService.closeAllMenus$.subscribe(()=>{this.activeCardIndex=null}),!o.hasInitialized)o.hasInitialized=!0,this.fetchProjects();else{let t=setInterval(()=>{o.cachedProjects.length>0&&(this.projects=o.cachedProjects,clearInterval(t))},100)}this.initializeShareForm()}shareFile(t,e){this.usersData=[],this.selectedUsers=[],this.shareForm.reset({searchQuery:"",notify:!1,message:""}),this.filename=e.title,this.modalService.open(t,{centered:!0,size:"lg"})}initializeShareForm(){this.shareForm=new Wt({searchQuery:new ue(""),notify:new ue(!1),message:new ue("")}),this.shareForm.get("searchQuery")?.valueChanges.subscribe(t=>{this.onSearch(t)}),this.shareForm.get("notify")?.valueChanges.subscribe(t=>{let e=this.shareForm.get("message");t?e?.setValidators([si.required]):e?.clearValidators(),e?.updateValueAndValidity()})}isSubmittedItem=!1;submitShare(){if(this.isSubmittedItem=!0,this.shareForm.invalid||!this.selectedUsers||!this.selectedUsers.length){this.shareForm.markAllAsTouched(),this.toaster.error(this.translate.instant("Projects.EnterValidData"));return}let t=new Un;t.fileId=this.card.fileId??0,t.emails=this.selectedUsers.map(i=>i.email??""),t.message=this.shareForm.get("notify")?.value?this.shareForm.get("message")?.value:null;let e=this.projectService.shareFile(t).subscribe(i=>{i?(this.modalService.dismissAll(),this.toaster.success("",this.translate.instant("File shared successfully"))):this.toaster.error(this.translate.instant("Error happened while sharing, Try again please."))},i=>{console.error("Error creating project:",i),this.toaster.error(this.translate.instant("Error happened while sharing, Try again please."))});this.subscriptions.push(e)}onSearch(t){if(!this.isFetchingUsers)if(t){this.isFetchingUsers=!0;let e=this.userService.fetchUsers(t,1,10).subscribe(i=>{i&&(console.log("Users:",i),this.usersData=i.data.map(n=>this.mapUserToProjectUser(n))),this.isFetchingUsers=!1});this.subscriptions.push(e)}else this.usersData=[]}mapUserToProjectUser(t){return{name:t.name,email:t.email,imageUrl:t.imageUrl,isMale:t.isMale,isSelected:this.selectedUsers.some(e=>e.email===t.email)}}selectUser(t){this.selectedUsers.some(i=>i.email===t.email)||(t.isSelected=!0,this.selectedUsers.push(t))}onEnterSearchQuery(t){t&&this.usersData.length?this.selectUser(this.usersData[0]):this.isValidEmail(t)&&this.selectUser({name:"Unknown",email:t,imageUrl:null,isMale:null,isSelected:this.selectedUsers.some(e=>e.email==t)})}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}removeUser(t){this.selectedUsers=this.selectedUsers.filter(e=>e.email!==t.email),t.isSelected=!1}toggleMenu(t,e){e.preventDefault(),e.stopPropagation(),this.fileCardService.closeAllMenus(),this.activeCardIndex=this.activeCardIndex===t?null:t}onDocumentClick(t){let e=t.target;!e.closest(".file-action-menu")&&!e.closest(".dots-menu")&&this.fileCardService.closeAllMenus()}supportedFileTypes=["Pdf","Word","Excel","Image","Video"];getFileIcon(t){let e=this.FileTypes[t??-1];return this.supportedFileTypes.includes(e)?`./assets/icons/file-${e}.svg`:"./assets/icons/file-default.svg"}downloadFile(t){if(t&&t.fileUrl){let e=document.createElement("a");e.href=t.fileUrl,e.target="_blank",e.setAttribute("download",t.title||"download"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}fetchProjects(){if(this.isFetching)return;this.isFetching=!0;let t=this.projectService.fetchProjects(this.currentPage,this.pageSize,this.selectedProjectType,this.selectedSortField).subscribe(e=>{e&&(this.projects=e.data,o.cachedProjects=e.data,console.log("projects",this.projects),this.currentPage=e.currentPage,this.pageSize=e.pageSize,this.totalItems=e.totalItems,this.numberOfPages=e.numberOfPages),this.isFetching=!1});this.subscriptions.push(t)}fetchProjectFolders(t){if(this.projectFolderQuery.projectId=t,!this.projectFolderQuery.projectId||this.isFetchingProjects)return;this.isFetchingProjects=!0,this.projectFolderQuery.type=0;let e=this.projectService.fetchProjectFolders(this.projectFolderQuery).subscribe(i=>{i&&(console.log("Project folders1:",i),this.currentPage=i.currentPage,this.projectFolders=i),this.isFetchingProjects=!1});this.subscriptions.push(e)}filename;moveProject;copyProject;match=!1;renameFile(t,e){this.filename=e.title,this.modalService.open(t,{centered:!0,size:"lg"})}checkMatch(t){this.filename!=t?this.match=!0:this.match=!1}submitRename(t){let e=new FormData;e.append("Title",this.filename),e.append("IsActive",t.isActive),this.projectService.patchFile(t.fileId,e).subscribe(i=>{i&&(console.log(i),this.modalService.dismissAll(),this.rename.emit({fileId:t.fileId,filename:this.filename}),this.toaster.success("",this.translate.instant("File renamed successfully")))})}moveFile(t,e){this.modalService.open(t,{centered:!0,size:"lg"})}moveToProjectId=null;moveToFolderId=null;handleMoveToSelect(t){this.moveToProjectId=t.projectId,this.moveToFolderId=t.folderId}submitMove(t){let e=new FormData;e.append("ProjectId",(this.moveToProjectId??"").toString()),e.append("FolderId",(this.moveToFolderId??"").toString()),e.append("IsActive",t.isActive),this.projectService.patchFile(t.fileId,e).subscribe(i=>{i&&(console.log(i),this.modalService.dismissAll(),this.toaster.success("",this.translate.instant("File moved successfully")))})}copyFile(t,e){this.modalService.open(t,{centered:!0,size:"lg"})}copyToProjectId=null;copyToFolderId=null;handleCopyToSelect(t){this.copyToProjectId=t.projectId,this.copyToFolderId=t.folderId}submitCopy(t){let e=[],i=new FormData,n=t.externalFileUrl||t.fileUrl;if(n){let r=n,a="http://wotnfileshareapi.wotn.com.sa/Uploads/ProjectFiles/";n&&n.startsWith(a)&&(r=n.replace(a,"")),i.append("fileUrl",r??"")}i.append("fileType",t.fileType?.toString()??""),i.append("Title",t.title?.toString()??""),i.append("isActive",t.isActive?.toString()??""),i.append("TypeId",t.typeId?.toString()??""),i.append("projectId",this.copyToProjectId?.toString()??""),i.append("folderId",this.copyToFolderId?.toString()??""),i.append("fileSize",t.fileSize?.toString()??""),console.log(i),this.projectService.createFile1(i).subscribe(r=>{r&&(this.modalService.dismissAll(),this.toaster.success("",this.translate.instant("File copied successfully")))})}chooseProjectV(t){console.log(this.copyProject),this.moveProject=t.options[0].id}archiveFile(t,e){this.modalService.open(t,{centered:!0,size:"lg"})}submitArchive(t){this.projectService.archiveFile(t).subscribe(e=>{e&&(this.modalService.dismissAll(),this.archive.emit(t),this.toaster.success("",this.translate.instant("File archived successfully")))})}submitDelete(t){this.projectService.activateFile(t).subscribe(e=>{e&&(this.modalService.dismissAll(),this.delete.emit(t),this.toaster.success("",this.translate.instant("File deleted successfully")))})}ngOnDestroy(){this.closeSub.unsubscribe(),this.subscriptions.forEach(t=>t.unsubscribe())}static \u0275fac=function(e){return new(e||o)(j(Mi),j(fe),j(Pe),j(ae),j(oe),j(de),j(Kt))};static \u0275cmp=N({type:o,selectors:[["app-file-card"]],hostBindings:function(e,i){e&1&&F("click",function(r){return i.onDocumentClick(r)},!1,Zi)},inputs:{card:"card",index:"index"},outputs:{showInfo:"showInfo",favorite:"favorite",archive:"archive",delete:"delete",rename:"rename"},standalone:!1,decls:74,vars:45,consts:[["uploadedBlock",""],["unarchiveBlock",""],["thenBlock",""],["elseBlock",""],["thenBlock1",""],["elseBlock1",""],["shareModal",""],["renameModal",""],["moveModal",""],["copyModal",""],["archiveModal",""],["renameForm","ngForm"],["filename1","ngModel"],["moveForm","ngForm"],["copyForm","ngForm"],[1,"recent-file-card"],[1,"file-card-header","d-flex","flex-row","justify-content-between","align-items-center"],[4,"ngIf","ngIfElse"],["src","assets/icons/recent-file-settings.svg","alt","",1,"dots-menu",3,"click"],["id","menu-1",1,"file-action-menu"],[3,"click"],["src","assets/icons/share.svg","alt","Share"],["target","_blank",3,"href","download"],["src","assets/icons/download.svg","alt","Download"],["src","assets/icons/rename.svg","alt","Rename"],["src","assets/icons/move.svg","alt","Move"],["src","assets/icons/duplicate.svg","alt","Copy"],["src","assets/icons/info.svg","alt","File info"],[1,"delete"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"recent-file-type","pt-2","d-flex","justify-content-between","flex-row","align-items-center"],["alt","",1,"me-1",3,"src"],[3,"title"],[1,"star",3,"click","ngClass"],[1,"fa","fa-star"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],["src","assets/icons/delete.svg","alt","Delete"],["src","assets/icons/menu/archive.svg","alt","Delete"],["data-fancybox","gallery",3,"href"],["controls","",3,"src"],["onError","this.src='./assets/icons/file-default.svg';",3,"src","alt"],["onError","this.src='./assets/icons/file-default.svg';",3,"error","load","src","alt"],["target","_blank",3,"href"],[3,"src","alt"],["src","assets/icons/file-clock.svg","alt","",1,"me-1"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","customa"],[1,"form",3,"formGroup"],[1,"row","align-items-center"],[1,"col-lg-9"],[1,"form-group"],["for","peopleWithAccess"],[1,"select2","select2-container","select2-container--default","select2-container--open"],["role","combobox","id","select2-4-combo","tabindex","-1","aria-expanded","true",1,"selection","select2-focused"],[1,"select2-selection","select2-selection--multiple"],[1,"select2-selection__rendered",2,"padding","0.5rem!important"],["tabindex","0","class","select2-selection__choice",3,"title",4,"ngFor","ngForOf"],["type","text","id","searchQuery","formControlName","searchQuery","aria-describedby","searchHelp",1,"form-control",3,"keyup.enter","placeholder","ngClass"],["class","select2-container select2-container--default select2-container-dropdown select2-container--open",4,"ngIf"],["class","formError",4,"ngIf"],[1,"col-lg-3"],[1,"form-check","mt-3"],["type","checkbox","id","notify","formControlName","notify",1,"form-check-input"],["for","notify",1,"form-check-label"],["class","form-group",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click"],["tabindex","0",1,"select2-selection__choice",3,"title"],[1,"select2-selection__choice__remove","ng-star-inserted",2,"color","var(--select2-selection-choice-close-color, #999)","font-weight","700",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center"],[1,"image","me-2"],[1,"select2-container","select2-container--default","select2-container-dropdown","select2-container--open"],[1,"select2-dropdown","select2-dropdown--below"],["role","group",1,"select2-results__options","select2-results__options--nested",2,"height","auto","max-height","200px"],["role","option","class","select2-results__option","style","height: 40px; margin: 1px;",3,"ngClass","click",4,"ngFor","ngForOf"],["role","option",1,"select2-results__option",2,"height","40px","margin","1px",3,"click","ngClass"],[1,"formError"],["for","message"],["id","message","formControlName","message",1,"form-control"],[1,"form",3,"ngSubmit"],["for","filename"],["type","text","id","filename","name","filename","required","",1,"form-control",3,"ngModelChange","keyup","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"select","projects"],[1,"archive"],[1,"fa","fa-archive","me-2"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,i){if(e&1){let n=k();s(0,"div",15)(1,"div",16)(2,"span"),T(3,ll,4,7,"ng-container",17)(4,dl,1,1,"ng-template",null,0,se),l(),s(6,"img",18),F("click",function(a){return b(n),y(i.toggleMenu(i.card.fileId,a))}),l()(),s(7,"div",19)(8,"ul")(9,"li")(10,"a",20),F("click",function(){b(n);let a=A(65);return y(i.shareFile(a,i.card))}),C(11,"img",21),p(12),u(13,"translate"),l()(),s(14,"li")(15,"a",22),C(16,"img",23),p(17),u(18,"translate"),l()(),s(19,"li")(20,"a",20),F("click",function(){b(n);let a=A(67);return y(i.renameFile(a,i.card))}),C(21,"img",24),p(22),u(23,"translate"),l()(),s(24,"li")(25,"a",20),F("click",function(){b(n);let a=A(69);return y(i.moveFile(a,i.card))}),C(26,"img",25),p(27),u(28,"translate"),l()(),s(29,"li")(30,"a",20),F("click",function(){b(n);let a=A(71);return y(i.copyFile(a,i.card))}),C(31,"img",26),p(32),u(33,"translate"),l()(),s(34,"li")(35,"a",20),F("click",function(){return b(n),y(i.showInfo.emit(i.card))}),C(36,"img",27),p(37),u(38,"translate"),l()(),s(39,"li",28),T(40,pl,5,3,"ng-container",17)(41,ml,4,3,"ng-template",null,1,se),l()()(),T(43,ul,1,0,"ng-container",29)(44,fl,3,5,"ng-template",null,2,se)(46,Cl,3,6,"ng-template",null,3,se),s(48,"div",30)(49,"div"),C(50,"img",31),s(51,"span",32),p(52),u(53,"slice"),u(54,"slice"),l()(),s(55,"div")(56,"div",33),F("click",function(){return b(n),y(i.favorite.emit(i.card==null?null:i.card.fileId))}),C(57,"i",34),l()()(),s(58,"div",35),T(59,xl,1,0,"ng-container",29)(60,Pl,4,1,"ng-template",null,4,se)(62,Ol,2,1,"ng-template",null,5,se),l()(),T(64,zl,36,26,"ng-template",null,6,se)(66,Ll,22,16,"ng-template",null,7,se)(68,Ul,16,12,"ng-template",null,8,se)(70,Hl,16,12,"ng-template",null,9,se)(72,Wl,9,5,"ng-template",null,10,se)}if(e&2){let n,r,a=A(5),d=A(42),m=A(45),f=A(47),h=A(61),x=A(63);V("active",i.activeCardIndex===i.card.fileId),c(3),v("ngIf",i.card.openedDate)("ngIfElse",a),c(9),S(g(13,24,"FileCard.Share")),c(3),v("href",i.card.fileUrl,H)("download",i.card.title),c(2),D("",g(18,26,"FileCard.Download")," "),c(5),S(g(23,28,"FileCard.Rename")),c(5),S(g(28,30,"FileCard.MoveTo")),c(5),S(g(33,32,"FileCard.CopyTo")),c(5),S(g(38,34,"FileCard.FileInformation")),c(3),v("ngIf",i.card.isArchived==!0)("ngIfElse",d),c(3),v("ngIf",i.card.fileType==i.FileTypes.Video)("ngIfThen",m)("ngIfElse",f),c(7),v("src","assets/icons/file-"+i.FileTypes[(n=i.card.fileType)!==null&&n!==void 0?n:-1]+"1.svg",H),c(),v("title",i.card.title),c(),D(" ",((r=i.card.title)!==null&&r!==void 0?r:"").length>20?Xe(53,36,i.card.title,0,10)+"..."+Q(54,40,i.card.title,-4):i.card.title," "),c(4),v("ngClass",ce(43,rl,i.card.isFavByUser)),c(3),v("ngIf",i.card.fileType==i.FileTypes.Video)("ngIfThen",h)("ngIfElse",x)}},dependencies:[lt,J,X,Fe,Le,an,Ue,Ie,bi,qt,Ye,Xt,Yt,Hn,Ht,xe,on,re],styles:[".focused[_ngcontent-%COMP%]{background:#f9f9f9;border:1px solid #e0e1e2;color:#333;outline:0;box-shadow:0 0 15.5px #0000000d}.selected[_ngcontent-%COMP%]{background:var(--select2-option-selected-background, #ddd);color:var(--select2-option-selected-text-color, #000)}.select2-results__option[_ngcontent-%COMP%]:not(.selected):hover{background:var(--select2-option-hover-background, #f0f0f0);color:var(--select2-option-hover-text-color, #000);cursor:pointer}"]})};var ql=["dropdownRef"];function Xl(o,t){if(o&1&&C(0,"img",7),o&2){let e=_();v("src",e.icon,H)}}function Yl(o,t){if(o&1){let e=k();s(0,"li")(1,"a",10),F("click",function(){let n=b(e).$implicit,r=_(2);return y(r.selectOption(n))}),p(2),l()()}if(o&2){let e=t.$implicit;c(2),S(e)}}function Zl(o,t){if(o&1&&(s(0,"ul",8),T(1,Yl,3,1,"li",9),l()),o&2){let e=_();c(),v("ngForOf",e.options)}}var Me=class o{constructor(t,e){this.fileCardService=t;this.renderer=e}label="";icon="";options=[];optionSelected=new W;dropdownRef;isOpen=!1;sub;ngOnInit(){this.sub=this.fileCardService.closeAll$.subscribe(()=>{this.isOpen=!1})}toggleDropdown(t){t.preventDefault(),t.stopPropagation(),this.isOpen?this.isOpen=!1:(this.fileCardService.closeAll(),this.isOpen=!0)}selectOption(t){this.optionSelected.emit(t),this.isOpen=!1}handleOutsideClick(t){this.dropdownRef?.nativeElement.contains(t.target)||(this.isOpen=!1)}ngOnDestroy(){this.sub.unsubscribe()}static \u0275fac=function(e){return new(e||o)(j(Mi),j(me))};static \u0275cmp=N({type:o,selectors:[["app-sort-files"]],viewQuery:function(e,i){if(e&1&&ie(ql,5),e&2){let n;Z(n=G())&&(i.dropdownRef=n.first)}},hostBindings:function(e,i){e&1&&F("click",function(r){return i.handleOutsideClick(r)},!1,Zi)},inputs:{label:"label",icon:"icon",options:"options"},outputs:{optionSelected:"optionSelected"},standalone:!1,decls:8,vars:3,consts:[["dropdownRef",""],[1,"dropdown1","dropdown"],["href","#",1,"dropdown-toggle1","dropdown-toggle",3,"click"],["alt","",3,"src",4,"ngIf"],[1,"px-1"],["src","assets/icons/middle-arrow-down.svg","alt","",1,"arrow-icon"],["class","dropdown-menu1",4,"ngIf"],["alt","",3,"src"],[1,"dropdown-menu1"],[4,"ngFor","ngForOf"],["href","#",3,"click"]],template:function(e,i){if(e&1){let n=k();s(0,"div",1,0)(2,"a",2),F("click",function(a){return b(n),y(i.toggleDropdown(a))}),T(3,Xl,1,1,"img",3),s(4,"span",4),p(5),l(),C(6,"img",5),l(),T(7,Zl,2,1,"ul",6),l()}e&2&&(c(3),v("ngIf",i.icon),c(2),S(i.label),c(2),v("ngIf",i.isOpen))},dependencies:[J,X],encapsulation:2})};var Gl=["fileInfo"],Kl=o=>({template1:o});function Jl(o,t){o&1&&st(0)}function ec(o,t){if(o&1&&(s(0,"a",38)(1,"video",39),C(2,"source",40),l()()),o&2){let e=_();L("href",e.fileMidea==null?null:e.fileMidea.fileUrl,H),c(2),v("src",e.fileMidea==null?null:e.fileMidea.fileUrl,H)}}function tc(o,t){if(o&1&&(s(0,"a",38),C(1,"img",41),l()),o&2){let e=_(3);L("href",e.fileMidea==null?null:e.fileMidea.externalFileUrl,H),c(),L("alt",e.fileMidea==null?null:e.fileMidea.title),v("src",e.fileMidea==null?null:e.fileMidea.externalFileUrl,H)}}function ic(o,t){if(o&1&&(s(0,"a",38),C(1,"img",41),l()),o&2){let e=_(3);L("href",e.fileMidea==null?null:e.fileMidea.fileUrl,H),c(),L("alt",e.fileMidea==null?null:e.fileMidea.title),v("src",e.fileMidea==null?null:e.fileMidea.fileUrl,H)}}function nc(o,t){if(o&1&&T(0,tc,2,3,"a",38)(1,ic,2,3,"a",38),o&2){let e=_(2);K((e.fileMidea==null?null:e.fileMidea.externalFileUrl)!=null?0:1)}}function oc(o,t){if(o&1&&(s(0,"a",42),C(1,"img",43),l()),o&2){let e,i=_(3);L("href",i.fileMidea==null?null:i.fileMidea.externalFileUrl,H),c(),L("alt",i.fileMidea==null?null:i.fileMidea.title),v("src","./assets/icons/file-"+i.FileTypes[(e=i.fileMidea==null?null:i.fileMidea.fileType)!==null&&e!==void 0?e:-1]+".svg",H)}}function rc(o,t){if(o&1&&(s(0,"a",42),C(1,"img",43),l()),o&2){let e,i=_(3);L("href",i.fileMidea==null?null:i.fileMidea.fileUrl,H),c(),L("alt",i.fileMidea==null?null:i.fileMidea.title),v("src","./assets/icons/file-"+i.FileTypes[(e=i.fileMidea==null?null:i.fileMidea.fileType)!==null&&e!==void 0?e:-1]+".svg",H)}}function ac(o,t){if(o&1&&T(0,oc,2,3,"a",42)(1,rc,2,3,"a",42),o&2){let e=_(2);K((e.fileMidea==null?null:e.fileMidea.externalFileUrl)!=null?0:1)}}function sc(o,t){if(o&1&&T(0,nc,2,1)(1,ac,2,1),o&2){let e,i=_();K((e=i.FileTypes[(e=i.fileMidea==null?null:i.fileMidea.fileType)!==null&&e!==void 0?e:-1])==="Image"?0:1)}}function lc(o,t){if(o&1&&p(0),o&2){let e=_(2);S(e.description)}}function cc(o,t){o&1&&p(0,"...")}function dc(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(2);c(),D("",Q(2,1,((e=i.projectDetails==null?null:i.projectDetails.filesSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function pc(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(2);c(),D("",Q(2,1,((e=i.projectDetails==null?null:i.projectDetails.filesSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function mc(o,t){if(o&1&&(Oe(0),s(1,"div",44)(2,"div",45)(3,"h4"),p(4),u(5,"translate"),l(),s(6,"p"),p(7),l(),s(8,"h4"),p(9),u(10,"translate"),l(),s(11,"p"),T(12,lc,1,1)(13,cc,1,0),l(),s(14,"h4"),p(15),u(16,"translate"),l(),s(17,"p"),p(18),l()(),s(19,"div",45)(20,"h4"),p(21),u(22,"translate"),l(),s(23,"p"),T(24,dc,3,4,"span")(25,pc,3,4,"span"),l(),s(26,"h4"),p(27),u(28,"translate"),l(),s(29,"p"),p(30),l(),s(31,"h4"),p(32),u(33,"translate"),l(),s(34,"p"),p(35),u(36,"date"),l()()(),De()),o&2){let e,i=_();c(4),S(g(5,12,"FileInfo.ProjectTitle")),c(3),S(i.projectDetails.title),c(2),S(g(10,14,"FileInfo.Description")),c(3),K(i.description?12:13),c(3),S(g(16,16,"FileInfo.ProjectType")),c(3),S(i.getProjectTypeName(i.projectDetails.type)),c(3),S(g(22,18,"FileInfo.Size")),c(3),K(((e=i.projectDetails==null?null:i.projectDetails.filesSize)!==null&&e!==void 0?e:0)>1?24:25),c(3),S(g(28,20,"FileInfo.CreatedBy")),c(3),S(i.ownerName),c(2),S(g(33,22,"FileInfo.CreatedAt")),c(3),S(Q(36,24,i.projectDetails.postDate,"dd-MM-YYYY"))}}function uc(o,t){if(o&1&&(s(0,"div")(1,"div",33),p(2),u(3,"translate"),l(),s(4,"div",54),p(5),l()()),o&2){let e=_().$implicit;c(2),S(g(3,2,"FileInfo.Commented")),c(3),D(" ",e.comment," ")}}function fc(o,t){if(o&1&&(s(0,"li",47)(1,"div",29),C(2,"img",48),s(3,"div",31),p(4),l()(),s(5,"div",32),T(6,uc,6,4,"div",24),s(7,"div",34)(8,"a",38),C(9,"img",49),s(10,"span",50),p(11),u(12,"translate"),l(),p(13),u(14,"slice"),u(15,"slice"),l()(),s(16,"a",51),C(17,"img",52),p(18," Ahmed Mohamed"),l(),s(19,"div",36),p(20),u(21,"date"),l(),s(22,"a",53),p(23),u(24,"translate"),l()()()),o&2){let e,i=t.$implicit;c(4),S(i.createdByUserName),c(2),v("ngIf",i.comment),c(2),L("href",i==null?null:i.attachment,H),c(3),D("",g(12,8,"FileInfo.Attachment")," : "),c(2),D(" ",((e=i==null?null:i.attachment)!==null&&e!==void 0?e:"").length>20?Xe(14,10,i==null?null:i.attachment,0,30)+".."+Q(15,14,i==null?null:i.attachment,-4):i==null?null:i.attachment," "),c(7),S(Q(21,17,i.postDate,"h:mm a")),c(3),ne("",g(24,20,"FileInfo.ReplyTo")," ",i.createdByUserName,"")}}function hc(o,t){if(o&1&&(Oe(0),s(1,"ul",28),T(2,fc,25,22,"li",46),l(),De()),o&2){let e=_();c(2),v("ngForOf",e.fileDetails==null?null:e.fileDetails.projectFileHistories)}}function gc(o,t){if(o&1&&(Oe(0),s(1,"a",38),C(2,"img",49),p(3),u(4,"translate"),u(5,"slice"),u(6,"slice"),l(),De()),o&2){let e,i=_();c(),L("href",i.fileDetails==null?null:i.fileDetails.externalFileUrl,H),c(2),ne(" ",g(4,3,"FileInfo.Attachment")," ",((e=i.fileDetails==null?null:i.fileDetails.title)!==null&&e!==void 0?e:"").length>20?Xe(5,5,i.fileDetails==null?null:i.fileDetails.title,0,10)+"..."+Q(6,9,i.fileDetails==null?null:i.fileDetails.title,-4):i.fileDetails==null?null:i.fileDetails.title," ")}}function vc(o,t){if(o&1&&(Oe(0),s(1,"a",38),C(2,"img",49),p(3),u(4,"translate"),u(5,"slice"),u(6,"slice"),l(),De()),o&2){let e,i=_(2);c(),L("href",i.fileDetails==null?null:i.fileDetails.fileUrl,H),c(2),ne(" ",g(4,3,"FileInfo.Attachment")," ",((e=i.fileDetails==null?null:i.fileDetails.title)!==null&&e!==void 0?e:"").length>20?Xe(5,5,i.fileDetails==null?null:i.fileDetails.title,0,10)+"..."+Q(6,9,i.fileDetails==null?null:i.fileDetails.title,-4):i.fileDetails==null?null:i.fileDetails.title," ")}}function _c(o,t){if(o&1&&(C(0,"img",49),p(1),u(2,"translate"),u(3,"slice"),u(4,"slice")),o&2){let e,i=_(2);c(),ne(" ",g(2,2,"FileInfo.Attachment")," ",((e=i.fileDetails==null?null:i.fileDetails.title)!==null&&e!==void 0?e:"").length>20?Xe(3,4,i.fileDetails==null?null:i.fileDetails.title,0,10)+"..."+Q(4,8,i.fileDetails==null?null:i.fileDetails.title,-4):i.fileDetails==null?null:i.fileDetails.title," ")}}function bc(o,t){if(o&1&&T(0,vc,7,12,"ng-container",35)(1,_c,5,11,"ng-template",null,5,se),o&2){let e=A(2),i=_();v("ngIf",(i.fileDetails==null?null:i.fileDetails.fileType)==0||(i.fileDetails==null?null:i.fileDetails.fileType)==i.FileTypes.Video)("ngIfElse",e)}}function yc(o,t){if(o&1&&(s(0,"div",75),C(1,"img",76),l()),o&2){let e=_().data;c(),L("src",e==null?null:e.image,H)}}function Cc(o,t){if(o&1&&(T(0,yc,2,1,"div",75),p(1)),o&2){let e=t.data;K(e!=null&&e.image?0:-1),c(),D(" ",e==null?null:e.name," ")}}function xc(o,t){o&1&&st(0)}function Sc(o,t){if(o&1&&(s(0,"video",77),C(1,"source",40),l()),o&2){let e=_(3);c(),v("src",e.imagePreview,H)}}function wc(o,t){if(o&1&&C(0,"img",78),o&2){let e=_(4);v("src",e.imagePreview,H)}}function Ic(o,t){if(o&1&&C(0,"img",79),o&2){let e,i=_(4);v("src","./assets/icons/file-"+i.FileTypes[(e=i.fileType)!==null&&e!==void 0?e:-1]+".svg",H)}}function Fc(o,t){if(o&1&&T(0,wc,1,1,"img",78)(1,Ic,1,1,"img",79),o&2){let e,i=_(3);K((e=i.FileTypes[(e=i.fileType)!==null&&e!==void 0?e:-1])==="Image"?0:1)}}function Pc(o,t){if(o&1&&(s(0,"div",64),T(1,xc,1,0,"ng-container",22)(2,Sc,2,1,"ng-template",null,1,se)(4,Fc,2,1,"ng-template",null,2,se),l()),o&2){let e=A(3),i=A(5),n=_(2);c(),v("ngIf",n.fileType==n.FileTypes.Video)("ngIfThen",e)("ngIfElse",i)}}function Tc(o,t){if(o&1){let e=k();s(0,"div",55)(1,"h4",56),p(2),u(3,"translate"),l(),s(4,"button",57),F("click",function(){let n=b(e).$implicit;return y(n.dismiss("Cross click"))}),l()(),s(5,"div",58)(6,"form",59,6),F("ngSubmit",function(){b(e);let n=A(7),r=_();return y(n.form.valid&&r.submitComment(r.fileDetails))}),s(8,"div",60)(9,"label",61),p(10),u(11,"translate"),l(),s(12,"select2",62),F("update",function(n){b(e);let r=_();return y(r.chooseMention(n.value))}),T(13,Cc,2,2,"ng-template",null,7,se),l()(),s(15,"div",63)(16,"div",64)(17,"div",60)(18,"label",65),p(19),u(20,"translate"),l(),s(21,"div",66),F("click",function(){b(e);let n=A(31);return y(n.click())})("dragover",function(n){b(e);let r=_();return y(r.onDragOver(n))})("drop",function(n){b(e);let r=_();return y(r.onDrop(n))}),C(22,"img",67),u(23,"translate"),s(24,"h4"),p(25),u(26,"translate"),l(),s(27,"p"),p(28),u(29,"translate"),l(),s(30,"input",68,8),F("change",function(n){b(e);let r=_();return y(r.onFileChange(n))}),l()()()(),T(32,Pc,6,3,"div",69),l(),s(33,"div",60)(34,"label",70),p(35),u(36,"translate"),l(),s(37,"textarea",71),Ut("ngModelChange",function(n){b(e);let r=_();return Lt(r.commentText,n)||(r.commentText=n),y(n)}),p(38),u(39,"translate"),l()(),s(40,"div",72)(41,"button",73),F("click",function(){let n=b(e).$implicit;return y(n.close("Close click"))}),p(42),u(43,"translate"),l(),s(44,"button",74),p(45),u(46,"translate"),l()()()()}if(o&2){let e=A(14),i=_();c(2),S(g(3,17,"FileInfo.ChangeRequest")),c(8),S(g(11,19,"FileInfo.Mention")),c(2),v("data",i.mentionData)("templates",ce(37,Kl,e)),c(3),V("img-p",i.imagePreview),c(4),S(g(20,21,"FileInfo.AddFile")),c(3),L("alt",g(23,23,"Upload")),c(3),S(g(26,25,"Folders.DropImageHereOrBrowse")),c(3),S(g(29,27,"Folders.PhotoInfo")),c(4),v("ngIf",i.imagePreview),c(3),S(g(36,29,"FileInfo.AddComment")),c(2),Nt("ngModel",i.commentText),c(),S(g(39,31,"FileInfo.WriteCommentHere")),c(3),v("disabled",i.value===!1),c(),D(" ",g(43,33,"Common.Cancel")," "),c(3),S(g(46,35,"Common.Confirm"))}}var Re=class o{constructor(t,e,i,n,r,a,d){this.authService=t;this.userService=e;this.router=i;this.modalService=n;this.toaster=r;this.translate=a;this.projectService=d}FileTypes=fi;isFetchingUsers=!1;usersData=[];selectedUsers=[];subscriptions=[];mentionsIds;fileType;fileName="";fileMidea;owner="";tags=[];description="";projectDetails;fileDetails;accessUsers=[];timeline=[];shownInfo=!1;data;closeInfoEvent=new W;addTag=new W;share=new W;ownerName="";user;ngOnChanges(t){t.projectDetails&&this.projectDetails?.createdByUserId&&this.fetchOwnerName(),t.fileDetails&&this.fileDetails?.createdByUserId&&this.fetchUserName(),this.fetchUsers("")}fetchOwnerName(){this.authService.getUserById(this.projectDetails.createdByUserId).subscribe(t=>{this.ownerName=t.name},t=>{console.error("Error fetching user details:",t),this.ownerName="Admin"})}fetchUserName(){this.authService.getUserById(this.fileDetails.createdByUserId).subscribe(t=>{console.log(t),this.user=t},t=>{console.error("Error fetching user details:",t),this.user={name:"Admin"}})}closeInfo(){this.closeInfoEvent.emit()}getProjectTypeName(t){switch(t){case 0:return"Event";case 1:return"Conference";default:return""}}fileInfoRef;scrollTop=0;onWindowScroll(){let t=window.scrollY;if(this.fileInfoRef){let e=this.fileInfoRef.nativeElement;t>150?this.router.url.includes("project-details")?e.style.transform=`translateY(${t-260}px)`:e.style.transform=`translateY(${t-0}px)`:e.style.transform="translateY(0)"}}mentionData=[];imagePreview=null;selectedFile=null;commentText;mention;cc;fetchUsers(t){if(this.isFetchingUsers)return;this.isFetchingUsers=!0;let e=this.userService.fetchUsers(t,1,1e4).subscribe(i=>{i&&(console.log(i),i.data&&(this.mentionData=[{options:i.data.map((n,r)=>({value:n.id,label:n.name,data:{name:n.name,email:n.email,image:n.imageUrl||"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:(n.id||r+1).toString()}))}])),this.isFetchingUsers=!1});this.subscriptions.push(e)}chooseMention(t){this.mentionsIds=t,console.log(t)}chooseCc(t){console.log(t)}onFileChange(t){let e=t.target.files[0];if(e){this.selectedFile=e,console.log(this.selectedFile),this.fileType=this.getFileType(e);let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(e)}}onDrop(t){t.preventDefault();let e=t.dataTransfer?.files;if(e&&e.length){this.selectedFile=e[0],this.fileType=this.getFileType(this.selectedFile);let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(this.selectedFile)}}submitComment(t){let e=new FormData;this.selectedFile&&(e.append("AttachmentFile",this.selectedFile,this.selectedFile.name),this.fileType!==null&&e.append("fileType",this.fileType.toString())),this.mentionsIds.forEach(i=>{e.append("UserMentionIDs",i)}),e.append("HistoryComment",this.commentText),this.projectService.patchFile(t.fileId,e).subscribe(i=>{i&&(console.log(i),this.fileDetails=i,this.modalService.dismissAll(),this.toaster.success("",this.translate.instant("Request sent successfully")))})}getFileType(t){switch(t.name.split(".").pop()?.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":return 0;case"mp4":case"avi":return 1;case"pdf":return 2;case"doc":case"docx":return 3;case"xls":case"xlsx":return 4;case"ppt":case"pptx":return 5;case"txt":return 6;case"zip":return 7;default:return null}}comment(t,e){this.modalService.open(t,{centered:!0,size:"lg"})}onDragOver(t){t.preventDefault()}static \u0275fac=function(e){return new(e||o)(j(rn),j(Kt),j(Ne),j(Pe),j(oe),j(de),j(ae))};static \u0275cmp=N({type:o,selectors:[["app-file-info"]],viewQuery:function(e,i){if(e&1&&ie(Gl,7),e&2){let n;Z(n=G())&&(i.fileInfoRef=n.first)}},hostBindings:function(e,i){e&1&&F("scroll",function(){return i.onWindowScroll()},!1,It)},inputs:{fileName:"fileName",fileMidea:"fileMidea",owner:"owner",tags:"tags",description:"description",projectDetails:"projectDetails",fileDetails:"fileDetails",accessUsers:"accessUsers",timeline:"timeline",shownInfo:"shownInfo",data:"data"},outputs:{closeInfoEvent:"closeInfoEvent",addTag:"addTag",share:"share"},standalone:!1,features:[Yi],decls:60,vars:37,consts:[["fileInfo",""],["thenBlock",""],["elseBlock",""],["checkFileType",""],["commentModal",""],["defaultAttachment",""],["commentForm","ngForm"],["template1",""],["imageFile",""],[1,"file-info"],[1,"close-info",3,"click"],["src","./assets/icons/close.svg","alt",""],["id","myTab","role","tablist",1,"nav","nav-tabs","mb-3"],["role","presentation",1,"nav-item"],["id","Details-tab","data-bs-toggle","tab","data-bs-target","#Details-tab-pane","type","button","role","tab","aria-controls","Details-tab-pane","aria-selected","true",1,"nav-link","active"],["src","./assets/icons/timeline.svg","alt","",1,"me-1"],["id","Timeline-tab","data-bs-toggle","tab","data-bs-target","#Timeline-tab-pane","type","button","role","tab","aria-controls","Timeline-tab-pane","aria-selected","false",1,"nav-link"],["src","./assets/icons/clock.svg","alt","",1,"me-1"],["id","myTabContent",1,"tab-content"],["id","Details-tab-pane","role","tabpanel","aria-labelledby","Details-tab","tabindex","0",1,"tab-pane","fade","show","active"],["src","assets/icons/file-photo.svg","alt","",1,"me-2"],[1,"file-image"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"v-mar"],[4,"ngIf"],["id","Timeline-tab-pane","role","tabpanel","aria-labelledby","Timeline-tab","tabindex","0",1,"tab-pane","fade"],[1,"activities"],[1,"file-timeline","mt-3"],[1,"ms-4"],[1,"comment-header"],["alt","User",3,"src"],[1,"comment-name"],[1,"deta"],[1,"commented"],[1,"attachment"],[4,"ngIf","ngIfElse"],[1,"time","d-flex","justify-content-end"],[1,"comment-button",3,"click"],["data-fancybox","",3,"href"],["controls",""],[3,"src"],["onError","this.src='./assets/icons/file-default.svg';",3,"src","alt"],["target","_blank",3,"href"],[3,"src","alt"],[1,"row"],[1,"col-lg-6"],["class","active",4,"ngFor","ngForOf"],[1,"active"],["src","./assets/images/pp.jpg","alt","User"],["src","./assets/icons/attachment.svg","alt","",1,"me-1"],[2,"font-weight","600"],["href","",1,"replied"],["src","./assets/icons/reply1.svg","alt","",1,"me-1"],["href","#",1,"reply-button"],[1,"comment-text"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","customa"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","mention"],["multiple","",3,"update","data","templates"],[1,"row","align-items-end"],[1,"col"],["for","imageFile"],[1,"fileset",3,"click","dragover","drop"],["src","assets/images/Upload.svg",3,"alt"],["id","imageFile","name","imageFile","type","file",2,"display","none",3,"change"],["class","col",4,"ngIf"],["for","comment"],["id","commentText","name","commentText",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary"],[1,"image","me-2"],["alt","",3,"src"],["controls","",1,"img-preview"],["alt","",1,"img-preview",3,"src"],[1,"img-preview",3,"src"]],template:function(e,i){if(e&1){let n=k();s(0,"div",9,0)(2,"div",10),F("click",function(){return b(n),y(i.closeInfo())}),C(3,"img",11),l(),s(4,"ul",12)(5,"li",13)(6,"button",14),C(7,"img",15),p(8),u(9,"translate"),l()(),s(10,"li",13)(11,"button",16),C(12,"img",17),p(13),u(14,"translate"),l()()(),s(15,"div",18)(16,"div",19)(17,"h3"),C(18,"img",20),p(19),u(20,"slice"),u(21,"slice"),l(),s(22,"div",21),T(23,Jl,1,0,"ng-container",22)(24,ec,3,2,"ng-template",null,1,se)(26,sc,2,1,"ng-template",null,2,se),l(),s(28,"div",23)(29,"h3"),p(30),u(31,"translate"),l(),T(32,mc,37,27,"ng-container",24),l()(),s(33,"div",25)(34,"div",26)(35,"div",27),T(36,hc,3,1,"ng-container",24),s(37,"h3"),p(38),u(39,"date"),l(),s(40,"ul",28)(41,"li")(42,"div",29),C(43,"img",30),s(44,"div",31),p(45),l()(),s(46,"div",32)(47,"div",33),p(48),u(49,"translate"),l(),s(50,"div",34),T(51,gc,7,12,"ng-container",35)(52,bc,3,2,"ng-template",null,3,se),l(),s(54,"div",36),p(55),u(56,"date"),l()()()()(),s(57,"a",37),F("click",function(){b(n);let a=A(59);return y(i.comment(a,i.fileDetails))}),l()()()(),T(58,Tc,47,39,"ng-template",null,4,se),l()}if(e&2){let n,r=A(25),a=A(27),d=A(53);c(8),D(" ",g(9,16,"FileInfo.details")," "),c(5),D(" ",g(14,18,"FileInfo.timeline")," "),c(6),D("",((n=i.fileName)!==null&&n!==void 0?n:"").length>20?Xe(20,20,i.fileName,0,16)+"..."+Q(21,24,i.fileName,-4):i.fileName," "),c(4),v("ngIf",(i.fileMidea==null?null:i.fileMidea.fileType)==i.FileTypes.Video)("ngIfThen",r)("ngIfElse",a),c(7),S(g(31,27,"FileInfo.ProjectDetails")),c(2),v("ngIf",i.projectDetails),c(4),v("ngIf",i.fileDetails==null?null:i.fileDetails.projectFileHistories),c(2),S(Q(39,29,i.fileDetails==null?null:i.fileDetails.postDate,"dd MMM yyyy")),c(5),v("src",i.user!=null&&i.user.imageUrl?i.user==null?null:i.user.imageUrl:(i.user==null?null:i.user.isMale)!=!1?"assets/images/profile/default-profile-img.png":"assets/images/profile/default-profile-female-img.jpg",H),c(2),S(i.user==null?null:i.user.name),c(3),S(g(49,32,"FileInfo.FileCreated")),c(3),v("ngIf",(i.fileDetails==null?null:i.fileDetails.externalFileUrl)!=null)("ngIfElse",d),c(4),S(Q(56,34,i.fileDetails==null?null:i.fileDetails.postDate,"h:mm a"))}},dependencies:[J,X,Fe,Le,Ue,Ie,qt,Ye,Zt,Ht,xe,on,re],encapsulation:2})};var jc=["cardElement"],Ec=()=>["PDF","Word","Excel"],Mc=()=>["Name 1","Name 2","Name 3"],Oc=()=>["Newest","Oldest","Recently Edited"],Dc=()=>["/projects/project-details"],kc=o=>({id:o});function Bc(o,t){if(o&1){let e=k();s(0,"div")(1,"button",21),C(2,"img",22),p(3),u(4,"translate"),l(),s(5,"button",23),F("click",function(){b(e);let n=_();return y(n.closeInfo())}),C(6,"img",24),p(7),u(8,"translate"),l()()}o&2&&(c(3),S(g(4,2,"Common.Share")),c(4),S(g(8,4,"Common.Information")))}function Vc(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_().$implicit;c(),D("",Q(2,1,((e=i.filesSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function Rc(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_().$implicit;c(),D("",Q(2,1,((e=i.filesSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function Ac(o,t){if(o&1&&(s(0,"div",25)(1,"a",26)(2,"div",27),C(3,"img",28),l(),s(4,"div",29)(5,"p",30),p(6),l(),s(7,"p",31),T(8,Vc,3,4,"span")(9,Rc,3,4,"span"),p(10),u(11,"translate"),l()()()()),o&2){let e,i,n=t.$implicit;c(),v("routerLink",z(8,Dc))("queryParams",ce(9,kc,n.projectId)),c(5),S(n.title),c(2),K(((e=n.filesSize)!==null&&e!==void 0?e:0)>1?8:9),c(2),ne(" | ",(i=n.filesNum)!==null&&i!==void 0?i:0," ",g(11,6,"Home.Items"),"")}}function zc(o,t){if(o&1){let e=k();s(0,"div",25)(1,"app-file-card",32),F("toggleMenu",function(n){b(e);let r=_();return y(r.toggleMenu(n.index,n.event))})("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))})("favorite",function(n){b(e);let r=_();return y(r.favorite(n))})("rename",function(n){b(e);let r=_();return y(r.rename(n))})("archive",function(n){b(e);let r=_();return y(r.archive(n))})("delete",function(n){b(e);let r=_();return y(r.delete(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index,n=_();c(),v("card",e)("index",i)("activeCardIndex",n.activeCardIndex)}}function Nc(o,t){if(o&1){let e=k();s(0,"div",33)(1,"button",34),F("click",function(){b(e);let n=_();return y(n.loadMore())}),C(2,"i",35),p(3),u(4,"translate"),l()()}o&2&&(c(3),D(" ",g(4,1,"Home.LoadMore"),""))}var Qn=class o{constructor(t,e,i,n,r,a,d,m){this.renderer=t;this.fileUploadService=e;this.modalService=i;this.projectService=n;this.toaster=r;this.translate=a;this.el=d;this.uploadService=m}subscriptions=[];projects=[];projectFiles=[];isFetching=!1;isFetchingFiles=!1;pageSize=8;currentPage=1;totalItems=0;numberOfPages=0;ProjectTypes=dt;selectedProjectType=null;selectedSortField=null;cardElements;uploads=[];files;isUpload=!1;count=0;projectFileQuery;ngOnInit(){this.projectFileQuery=new je,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.fetchProjects(),this.fetchProjectFiles()}fetchProjects(){if(this.isFetching)return;this.isFetching=!0;let t=this.projectService.fetchProjects(this.currentPage,this.pageSize,this.selectedProjectType,this.selectedSortField).subscribe(e=>{e&&(console.log("Recent projects:",e),this.projects=e.data),this.isFetching=!1});this.subscriptions.push(t)}fetchProjectFiles(){let t=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(e=>{e&&(this.projectFiles=e,console.log(this.projectFiles)),this.isFetchingFiles=!1});this.subscriptions.push(t)}loadMore(){this.projectFileQuery.pageSize=this.projectFileQuery.pageSize+10,this.fetchProjectFiles()}favorite(t){console.log(t),this.projectService.setFavourite(t).subscribe(e=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchProjectFiles()})}rename(t){let e=this.projectFiles.find(i=>i.fileId===t.fileId);e&&(e.title=t.filename)}archive(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}delete(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}onTypeSelect(t){console.log("Selected type:",t)}onPeopleSelect(t){console.log("Selected person:",t)}onModifiedSelect(t){console.log("Selected modified:",t)}selectedFile;selectedProject;shownInfo=!1;showInfo(t){this.selectedFile=t,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let e=new FormData;e.append("isOpen","true"),e.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,e).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles())}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}openAddProjectModal(){let e=this.modalService.open(Si,{size:"xl",backdrop:"static",keyboard:!1}).componentInstance.isSuccess.subscribe(i=>{});this.subscriptions.push(e)}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close(),this.subscriptions.forEach(t=>t.unsubscribe())}static \u0275fac=function(e){return new(e||o)(j(me),j(Ee),j(Pe),j(ae),j(oe),j(de),j(fe),j(Ci))};static \u0275cmp=N({type:o,selectors:[["app-home"]],viewQuery:function(e,i){if(e&1&&ie(jc,5),e&2){let n;Z(n=G())&&(i.cardElements=n)}},standalone:!1,decls:39,vars:42,consts:[["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[4,"ngIf"],[1,"upper","d-flex","flex-row"],[1,"upload-btn","upper-folder",3,"click"],["src","assets/icons/folder-upper.svg","alt",""],[1,"pt-3"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-folder","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-folder-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[1,"recent-file","pt-5"],[1,"row","pt-3","recent-file-row"],["class","d-flex justify-content-center mt-2 mb-5",4,"ngIf"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-folder-card",3,"routerLink","queryParams"],[1,"folder-img"],["src","assets/icons/project.svg","alt",""],[1,"folder-text"],[1,"recent-folder-title"],[1,"recent-folder-details"],[3,"toggleMenu","showInfo","favorite","rename","archive","delete","card","index","activeCardIndex"],[1,"d-flex","justify-content-center","mt-2","mb-5"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"fa","fa-refresh","me-1"]],template:function(e,i){if(e&1){let n=k();s(0,"div",1)(1,"div",2)(2,"div",3),C(3,"div"),T(4,Bc,9,6,"div",4),l(),s(5,"div",5)(6,"button",6),F("click",function(){return b(n),y(i.openAddProjectModal())}),C(7,"img",7),s(8,"span",8),p(9),u(10,"translate"),l()()(),s(11,"div",9)(12,"strong"),p(13),u(14,"translate"),l(),s(15,"div",10)(16,"app-sort-files",11),F("optionSelected",function(a){return b(n),y(i.onTypeSelect(a))}),l(),s(17,"app-sort-files",11),F("optionSelected",function(a){return b(n),y(i.onPeopleSelect(a))}),l(),s(18,"app-sort-files",11),F("optionSelected",function(a){return b(n),y(i.onModifiedSelect(a))}),l()()(),s(19,"div",12)(20,"div",13),C(21,"img",14),s(22,"strong"),p(23),u(24,"translate"),l()(),s(25,"div",15),T(26,Ac,12,11,"div",16),l()(),s(27,"div",17)(28,"div",13),C(29,"img",14),s(30,"strong"),p(31),u(32,"translate"),l()(),s(33,"div",18),T(34,zc,2,3,"div",16),l()(),T(35,Nc,5,3,"div",19),l(),s(36,"div",2,0)(38,"app-file-info",20),F("closeInfoEvent",function(){return b(n),y(i.closeInfo())})("addTag",function(){return b(n),y(i.onAddTag())})("share",function(){return b(n),y(i.onShare())}),l()()()}e&2&&(V("expand",i.shownInfo),c(4),v("ngIf",i.shownInfo),c(5),S(g(10,31,"Home.CreateProject")),c(4),S(g(14,33,"Common.Sorting")),c(3),v("label","Type")("icon","assets/icons/file-text.svg")("options",z(39,Ec)),c(),v("label","People")("icon","assets/icons/profile-middle.svg")("options",z(40,Mc)),c(),v("label","Modified")("icon","assets/icons/modified-middle.svg")("options",z(41,Oc)),c(5),S(g(24,35,"Home.RecentProjects")),c(3),v("ngForOf",i.projects),c(5),S(g(32,37,"Home.RecentFile")),c(3),v("ngForOf",i.projectFiles),c(),v("ngIf",(i.projectFiles==null?null:i.projectFiles.length)>1),c(),V("active",i.shownInfo),c(2),v("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile))},dependencies:[J,X,ye,Me,we,Re,xe,re],encapsulation:2})};var Lc=["cardElement"],Uc=()=>["PDF","Word","Excel"],Hc=()=>["Name 1","Name 2","Name 3"],Qc=()=>["Newest","Oldest","Recently Edited"];function $c(o,t){if(o&1){let e=k();s(0,"div",12)(1,"app-file-card",13),F("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))})("favorite",function(n){b(e);let r=_();return y(r.favorite(n))})("rename",function(n){b(e);let r=_();return y(r.rename(n))})("archive",function(n){b(e);let r=_();return y(r.archive(n))})("delete",function(n){b(e);let r=_();return y(r.delete(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index;c(),v("card",e)("index",i)}}function Wc(o,t){if(o&1){let e=k();s(0,"div",12)(1,"app-file-card",13),F("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))})("favorite",function(n){b(e);let r=_();return y(r.favorite(n))})("rename",function(n){b(e);let r=_();return y(r.rename(n))})("archive",function(n){b(e);let r=_();return y(r.archive(n))})("delete",function(n){b(e);let r=_();return y(r.delete(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index;c(),v("card",e)("index",i)}}function qc(o,t){if(o&1){let e=k();s(0,"div",12)(1,"app-file-card",13),F("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))})("favorite",function(n){b(e);let r=_();return y(r.favorite(n))})("rename",function(n){b(e);let r=_();return y(r.rename(n))})("archive",function(n){b(e);let r=_();return y(r.archive(n))})("delete",function(n){b(e);let r=_();return y(r.delete(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index;c(),v("card",e)("index",i)}}var $n=class o{constructor(t,e,i,n,r,a){this.renderer=t;this.fileUploadService=e;this.projectService=i;this.toaster=n;this.translate=r;this.el=a}cardElements;uploads=[];files;isUpload=!1;count=0;subscriptions=[];projects=[];projectFiles=[];isFetching=!1;isFetchingFiles=!1;pageSize=20;currentPage=1;totalItems=0;numberOfPages=0;todayFiles;lastWeekFiles;lastMonthFiles;projectFileQuery;ngOnInit(){this.projectFileQuery=new je,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=25,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.fetchProjectFiles()}fetchProjectFiles(){let t=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(e=>{if(e){let i=new Date,n=new Date(i.getTime()-7*24*60*60*1e3),r=new Date(i.getTime()-30*24*60*60*1e3);this.todayFiles=e.filter(a=>(a.postDate?new Date(a.postDate):null)?.toDateString()===i.toDateString()),this.lastWeekFiles=e.filter(a=>{let d=a.postDate?new Date(a.postDate):null;return d&&d>n&&d<i&&d.toDateString()!==i.toDateString()}),this.lastMonthFiles=e.filter(a=>{let d=a.postDate?new Date(a.postDate):null;return d&&d>r&&d<=n})}this.isFetchingFiles=!1});this.subscriptions.push(t)}data=[{options:[{value:"Omar Ezz",label:"Omar Ezz",data:{name:"Omar Ezz",email:"Omar_Ezz@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"1"},{value:"Emad hamdi",label:"Emad Hamdi",data:{name:"Emad hamdi",email:"emad_hamdi@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"2"},{value:"Ehab Zakaria",label:"Ehab Zakaria",data:{name:"Ehab Zakaria",email:"ehab_zakaria@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"3"},{value:"mohamed Ezz",label:"mohamed Ezz",data:{name:"mohamed Ezz",email:"mohamed@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"4"},{value:"Ali hamdi",label:"Ali Hamdi",data:{name:"Ali hamdi",email:"Ali@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"5"},{value:"hassan Zakaria",label:"hassan Zakaria",data:{name:"hassan Zakaria",email:"hassan@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"6"}]}];favorite(t){console.log(t),this.projectService.setFavourite(t).subscribe(e=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchProjectFiles()})}rename(t){let e=this.todayFiles.find(i=>i.fileId===t.fileId);e&&(e.title=t.filename),e=this.lastWeekFiles.find(i=>i.fileId===t.fileId),e&&(e.title=t.filename),e=this.lastMonthFiles.find(i=>i.fileId===t.fileId),e&&(e.title=t.filename)}archive(t){this.todayFiles=this.todayFiles.filter(e=>e.fileId!==t),this.lastWeekFiles=this.lastWeekFiles.filter(e=>e.fileId!==t),this.lastMonthFiles=this.lastMonthFiles.filter(e=>e.fileId!==t)}delete(t){this.todayFiles=this.todayFiles.filter(e=>e.fileId!==t),this.lastWeekFiles=this.lastWeekFiles.filter(e=>e.fileId!==t),this.lastMonthFiles=this.lastMonthFiles.filter(e=>e.fileId!==t)}onTypeSelect(t){console.log("Selected type:",t)}onPeopleSelect(t){console.log("Selected person:",t)}onModifiedSelect(t){console.log("Selected modified:",t)}selectedFile;selectedProject;shownInfo=!1;showInfo(t){this.selectedFile=t,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let e=new FormData;e.append("isOpen","true"),e.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,e).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles())}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close()}static \u0275fac=function(e){return new(e||o)(j(me),j(Ee),j(ae),j(oe),j(de),j(fe))};static \u0275cmp=N({type:o,selectors:[["app-recents"]],viewQuery:function(e,i){if(e&1&&ie(Lc,5),e&2){let n;Z(n=G())&&(i.cardElements=n)}},standalone:!1,decls:43,vars:50,consts:[["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[3,"showInfo","favorite","rename","archive","delete","card","index"]],template:function(e,i){if(e&1){let n=k();s(0,"div",1)(1,"div",2)(2,"h3"),p(3),u(4,"translate"),l(),s(5,"div",3)(6,"strong"),p(7),u(8,"translate"),l(),s(9,"div",4)(10,"app-sort-files",5),u(11,"translate"),F("optionSelected",function(a){return b(n),y(i.onTypeSelect(a))}),l(),s(12,"app-sort-files",5),u(13,"translate"),F("optionSelected",function(a){return b(n),y(i.onPeopleSelect(a))}),l(),s(14,"app-sort-files",5),u(15,"translate"),F("optionSelected",function(a){return b(n),y(i.onModifiedSelect(a))}),l()()(),s(16,"div",6)(17,"div",7),C(18,"img",8),s(19,"strong"),p(20),u(21,"translate"),l()(),s(22,"div",9),T(23,$c,2,2,"div",10),l()(),s(24,"div",6)(25,"div",7),C(26,"img",8),s(27,"strong"),p(28),u(29,"translate"),l()(),s(30,"div",9),T(31,Wc,2,2,"div",10),l()(),s(32,"div",6)(33,"div",7),C(34,"img",8),s(35,"strong"),p(36),u(37,"translate"),l()(),s(38,"div",9),T(39,qc,2,2,"div",10),l()()(),s(40,"div",2,0)(42,"app-file-info",11),F("closeInfoEvent",function(){return b(n),y(i.closeInfo())})("addTag",function(){return b(n),y(i.onAddTag())})("share",function(){return b(n),y(i.onShare())}),l()()()}e&2&&(V("expand",i.shownInfo),c(3),S(g(4,31,"Sidebar.recent")),c(4),S(g(8,33,"Common.Sorting")),c(3),v("label",g(11,35,"Type"))("icon","assets/icons/file-text.svg")("options",z(47,Uc)),c(2),v("label",g(13,37,"People"))("icon","assets/icons/profile-middle.svg")("options",z(48,Hc)),c(2),v("label",g(15,39,"Modified"))("icon","assets/icons/modified-middle.svg")("options",z(49,Qc)),c(6),S(g(21,41,"Home.Today")),c(3),v("ngForOf",i.todayFiles),c(5),S(g(29,43,"Home.LastWeek")),c(3),v("ngForOf",i.lastWeekFiles),c(5),S(g(37,45,"Home.LastMonth")),c(3),v("ngForOf",i.lastMonthFiles),c(),V("active",i.shownInfo),c(2),v("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile))},dependencies:[J,ye,Me,Re,re],encapsulation:2})};var Xc=()=>["/projects/project-details"],Yc=o=>({id:o});function Zc(o,t){o&1&&(s(0,"span",17),p(1),u(2,"translate"),u(3,"translate"),l()),o&2&&(c(),ne("",g(2,2,"Projects.Type"),": ",g(3,4,"Projects.AllTypes"),""))}function Gc(o,t){o&1&&(s(0,"span",17),p(1),u(2,"translate"),u(3,"translate"),l()),o&2&&(c(),ne("",g(2,2,"Projects.Type"),": ",g(3,4,"Projects.Event"),""))}function Kc(o,t){o&1&&(s(0,"span",17),p(1),u(2,"translate"),u(3,"translate"),l()),o&2&&(c(),ne("",g(2,2,"Projects.Type"),": ",g(3,4,"Projects.Conference"),""))}function Jc(o,t){o&1&&(s(0,"span",17),p(1),u(2,"translate"),l()),o&2&&(c(),S(g(2,1,"Projects.Sort")))}function ed(o,t){o&1&&(s(0,"span",17),p(1),u(2,"translate"),u(3,"translate"),l()),o&2&&(c(),ne("",g(2,2,"Projects.Sort"),": ",g(3,4,"Projects.Newest"),""))}function td(o,t){o&1&&(s(0,"span",17),p(1),u(2,"translate"),u(3,"translate"),l()),o&2&&(c(),ne("",g(2,2,"Projects.Sort"),": ",g(3,4,"Projects.Oldest"),""))}function id(o,t){o&1&&(s(0,"span",17),p(1),u(2,"translate"),u(3,"translate"),l()),o&2&&(c(),ne("",g(2,2,"Projects.Sort"),": ",g(3,4,"Projects.NameAsc"),""))}function nd(o,t){o&1&&(s(0,"span",17),p(1),u(2,"translate"),u(3,"translate"),l()),o&2&&(c(),ne("",g(2,2,"Projects.Sort"),": ",g(3,4,"Projects.NameDesc"),""))}function od(o,t){if(o&1&&C(0,"img",24),o&2){let e=_().$implicit;v("src",e.imageUrl,H)}}function rd(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_().$implicit;c(),D("",Q(2,1,((e=i.filesSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function ad(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_().$implicit;c(),D("",Q(2,1,((e=i.filesSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function sd(o,t){if(o&1&&(s(0,"div",18)(1,"a",19)(2,"div",20),T(3,od,1,1,"img",21),l(),s(4,"div",22)(5,"span"),p(6),l()(),s(7,"div",23)(8,"span")(9,"span"),T(10,rd,3,4,"span")(11,ad,3,4,"span"),p(12),u(13,"translate"),l()()()()()),o&2){let e,i=t.$implicit;c(),v("routerLink",z(9,Xc))("queryParams",ce(10,Yc,i.projectId)),c(2),v("ngIf",i.imageUrl),c(3),S(i.title),c(4),K(((e=i.filesSize)!==null&&e!==void 0?e:0)>1?10:11),c(2),ne(" | ",i.filesNum," ",g(13,7,"Home.Items"),"")}}var Wn=class o{constructor(t,e,i){this.renderer=t;this.modalService=e;this.projectService=i}subscriptions=[];projects=[];isFetching=!1;pageSize=50;currentPage=1;totalItems=0;numberOfPages=0;ProjectTypes=dt;selectedProjectType=null;selectedSortField=null;ngOnInit(){this.fetchProjects()}fetchProjects(){if(this.isFetching)return;this.isFetching=!0;let t=this.projectService.fetchProjects(this.currentPage,this.pageSize,this.selectedProjectType,this.selectedSortField).subscribe(e=>{e&&(this.projects=e.data,this.currentPage=e.currentPage,this.pageSize=e.pageSize,this.totalItems=e.totalItems,this.numberOfPages=e.numberOfPages),this.isFetching=!1});this.subscriptions.push(t)}filterProjectsByType(t){this.currentPage=1,this.selectedProjectType=t,this.fetchProjects()}orderProjectsBy(t){this.currentPage=1,this.selectedSortField=t,this.fetchProjects()}openAddProjectModal(){let e=this.modalService.open(Si,{size:"xl",backdrop:"static",keyboard:!1}).componentInstance.isSuccess.subscribe(i=>{i&&this.fetchProjects()});this.subscriptions.push(e)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static \u0275fac=function(e){return new(e||o)(j(me),j(Pe),j(ae))};static \u0275cmp=N({type:o,selectors:[["app-projects"]],standalone:!1,decls:60,vars:50,consts:[[1,"row"],[1,"upper","d-flex","flex-row"],[1,"upload-btn",3,"click"],["src","assets/icons/plus.svg","alt",""],[1,"pt-3"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[1,"dropdown1","dropdown"],["href","javascript:;","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle1","dropdown-toggle"],["src","assets/icons/file-text.svg","alt",""],["class","px-1",4,"ngIf"],["src","assets/icons/middle-arrow-down.svg","alt","",1,"arrow-icon"],[1,"dropdown-menu1","dropdown-menu"],["href","javascript:;",3,"click"],["src","assets/icons/modified-middle.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[1,"px-1"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-file-card","projects-block",3,"routerLink","queryParams"],[1,"proj-img-holder","project-holder"],["alt","",3,"src",4,"ngIf"],[1,"recent-file-type","pt-2","d-flex","flex-row","align-items-center"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],["alt","",3,"src"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),F("click",function(){return i.openAddProjectModal()}),C(3,"img",3),s(4,"span",4),p(5),u(6,"translate"),l()()(),s(7,"div",5)(8,"strong"),p(9),u(10,"translate"),l(),s(11,"div",6)(12,"div",7)(13,"a",8),C(14,"img",9),T(15,Zc,4,6,"span",10)(16,Gc,4,6,"span",10)(17,Kc,4,6,"span",10),C(18,"img",11),l(),s(19,"ul",12)(20,"li")(21,"a",13),F("click",function(){return i.selectedProjectType!=null&&i.filterProjectsByType(null)}),p(22),u(23,"translate"),l()(),s(24,"li")(25,"a",13),F("click",function(){return i.selectedProjectType!=i.ProjectTypes.Event&&i.filterProjectsByType(i.ProjectTypes.Event)}),p(26),u(27,"translate"),l()(),s(28,"li")(29,"a",13),F("click",function(){return i.selectedProjectType!=i.ProjectTypes.Conference&&i.filterProjectsByType(i.ProjectTypes.Conference)}),p(30),u(31,"translate"),l()()()(),s(32,"div",7)(33,"a",8),C(34,"img",14),T(35,Jc,3,3,"span",10)(36,ed,4,6,"span",10)(37,td,4,6,"span",10)(38,id,4,6,"span",10)(39,nd,4,6,"span",10),C(40,"img",11),l(),s(41,"ul",12)(42,"li")(43,"a",13),F("click",function(){return i.selectedSortField!="DateDesc"&&i.orderProjectsBy("DateDesc")}),p(44),u(45,"translate"),l()(),s(46,"li")(47,"a",13),F("click",function(){return i.selectedSortField!="DateAsc"&&i.orderProjectsBy("DateAsc")}),p(48),u(49,"translate"),l()(),s(50,"li")(51,"a",13),F("click",function(){return i.selectedSortField!="TitleAsc"&&i.orderProjectsBy("TitleAsc")}),p(52),u(53,"translate"),l()(),s(54,"li")(55,"a",13),F("click",function(){return i.selectedSortField!="TitleDesc"&&i.orderProjectsBy("TitleDesc")}),p(56),u(57,"translate"),l()()()()()(),s(58,"div",15),T(59,sd,14,12,"div",16),l()()),e&2&&(c(5),S(g(6,32,"Projects.CreateProject")),c(4),S(g(10,34,"Common.Sorting")),c(6),v("ngIf",i.selectedProjectType==null),c(),v("ngIf",i.selectedProjectType==i.ProjectTypes.Event),c(),v("ngIf",i.selectedProjectType==i.ProjectTypes.Conference),c(4),V("selected",i.selectedProjectType==null),c(),S(g(23,36,"Projects.AllTypes")),c(3),V("selected",i.selectedProjectType==i.ProjectTypes.Event),c(),S(g(27,38,"Projects.Event")),c(3),V("selected",i.selectedProjectType==i.ProjectTypes.Conference),c(),S(g(31,40,"Projects.Conference")),c(5),v("ngIf",!i.selectedSortField),c(),v("ngIf",i.selectedSortField=="DateDesc"),c(),v("ngIf",i.selectedSortField=="DateAsc"),c(),v("ngIf",i.selectedSortField=="TitleAsc"),c(),v("ngIf",i.selectedSortField=="TitleDesc"),c(4),V("selected",i.selectedSortField=="DateDesc"),c(),S(g(45,42,"Projects.Newest")),c(3),V("selected",i.selectedSortField=="DateAsc"),c(),S(g(49,44,"Projects.Oldest")),c(3),V("selected",i.selectedSortField=="TitleAsc"),c(),S(g(53,46,"Projects.NameAsc")),c(3),V("selected",i.selectedSortField=="TitleDesc"),c(),S(g(57,48,"Projects.NameDesc")),c(3),v("ngForOf",i.projects))},dependencies:[J,X,we,xe,re],styles:["a.selected[_ngcontent-%COMP%]{color:#000!important;cursor:default}"]})};var ld=["cardElement"];function cd(o,t){if(o&1){let e=k();s(0,"button",8),F("click",function(){b(e);let n=_();return y(n.emptyTrash())}),C(1,"img",9),p(2,"Empty trash"),l()}}function dd(o,t){if(o&1){let e=k();s(0,"div",10)(1,"app-file-card",11),F("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index;c(),v("card",e)("index",i)}}function pd(o,t){o&1&&(s(0,"div",12)(1,"div",13),C(2,"img",14),s(3,"h4"),p(4,"The Trash is empty"),l(),s(5,"p"),p(6,"Items moved to the trash will be permanently deleted after 30 days."),l()()())}var qn=class o{constructor(t,e,i){this.renderer=t;this.fileUploadService=e;this.toaster=i}cardElements;uploads=[];files;isUpload=!1;count=0;cards=[{id:1,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/proj-d1.jpg",fileName:"WOTN drive.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1},{id:2,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"photo",fileImage:"assets/images/file-card.png",fileName:"WOTN drive.png",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"",Status:1},{id:3,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"text",fileImage:"assets/images/files/proj-d2.jpg",fileName:"WOTN drive.pdf",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"",Status:1},{id:4,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/project-1.jpg",fileName:"WOTN drive1.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1}];totalFileSizeMB=0;ngOnInit(){this.totalFileSizeMB=this.cards.reduce((t,e)=>t+this.parseFileSize(e.fileSize),0),console.log(`Total file size: ${this.totalFileSizeMB.toFixed(2)} MB`)}parseFileSize(t){let[e,i]=t.split(" "),n=parseFloat(e);switch(i?.toUpperCase()){case"GB":return n*1024;case"MB":return n;case"KB":return n/1024;default:return 0}}emptyTrash(){this.cards=[],this.toaster.success("","Trash is empty"),this.totalFileSizeMB=0}static \u0275fac=function(e){return new(e||o)(j(me),j(Ee),j(oe))};static \u0275cmp=N({type:o,selectors:[["app-bin"]],viewQuery:function(e,i){if(e&1&&ie(ld,5),e&2){let n;Z(n=G())&&(i.cardElements=n)}},standalone:!1,decls:14,vars:5,consts:[[1,"row"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],["class","btn btn-del",3,"click",4,"ngIf"],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],["class","row align-items-center justify-content-center mt-5 text-center",4,"ngIf"],[1,"btn","btn-del",3,"click"],["src","./assets/icons/trash1.svg","alt","",1,"me-2"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[3,"showInfo","card","index"],[1,"row","align-items-center","justify-content-center","mt-5","text-center"],[1,"col-lg-6"],["src","./assets/icons/trash.svg","alt",""]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h3"),p(5,"Trash"),l(),s(6,"div",3)(7,"span"),p(8),l()()(),s(9,"div"),T(10,cd,3,0,"button",4),l()(),s(11,"div",5),T(12,dd,2,2,"div",6),l(),T(13,pd,7,0,"div",7),l()()),e&2&&(c(8),ne("",i.totalFileSizeMB.toFixed(2)," MB | ",i.cards.length," items"),c(2),v("ngIf",i.cards.length>0),c(2),v("ngForOf",i.cards),c(),v("ngIf",i.cards.length==0))},dependencies:[J,X,ye],encapsulation:2})};var md=["cardElement"],ud=()=>["PDF","Word","Excel"],fd=()=>["Name 1","Name 2","Name 3"],hd=()=>["Newest","Oldest","Recently Edited"];function gd(o,t){if(o&1){let e=k();s(0,"div")(1,"button",13),C(2,"img",14),p(3,"Share"),l(),s(4,"button",15),F("click",function(){b(e);let n=_();return y(n.closeInfo())}),C(5,"img",16),p(6,"Information"),l()()}}function vd(o,t){if(o&1){let e=k();s(0,"div",17)(1,"app-file-card",18),F("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))})("favorite",function(n){b(e);let r=_();return y(r.favorite(n))})("rename",function(n){b(e);let r=_();return y(r.rename(n))})("archive",function(n){b(e);let r=_();return y(r.archive(n))})("delete",function(n){b(e);let r=_();return y(r.delete(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index;c(),v("card",e)("index",i)}}var Xn=class o{constructor(t,e){this.renderer=t;this.fileUploadService=e}cardElements;uploads=[];files;isUpload=!1;count=0;data=[{options:[{value:"Omar Ezz",label:"Omar Ezz",data:{name:"Omar Ezz",email:"Omar_Ezz@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"1"},{value:"Emad hamdi",label:"Emad Hamdi",data:{name:"Emad hamdi",email:"emad_hamdi@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"2"},{value:"Ehab Zakaria",label:"Ehab Zakaria",data:{name:"Ehab Zakaria",email:"ehab_zakaria@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"3"},{value:"mohamed Ezz",label:"mohamed Ezz",data:{name:"mohamed Ezz",email:"mohamed@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"4"},{value:"Ali hamdi",label:"Ali Hamdi",data:{name:"Ali hamdi",email:"Ali@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"5"},{value:"hassan Zakaria",label:"hassan Zakaria",data:{name:"hassan Zakaria",email:"hassan@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"6"}]}];cards=[{id:1,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/proj-d1.jpg",fileName:"WOTN drive.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1},{id:2,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"photo",fileImage:"assets/images/file-card.png",fileName:"WOTN drive.png",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"",Status:1},{id:3,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"text",fileImage:"assets/images/files/proj-d2.jpg",fileName:"WOTN drive.pdf",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!1,videoDuration:"",Status:1},{id:4,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/project-1.jpg",fileName:"WOTN drive1.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1}];onTypeSelect(t){console.log("Selected type:",t)}onPeopleSelect(t){console.log("Selected person:",t)}onModifiedSelect(t){console.log("Selected modified:",t)}shownInfo=!1;showInfo(t){console.log(t),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.shownInfo=!this.shownInfo}static \u0275fac=function(e){return new(e||o)(j(me),j(Ee))};static \u0275cmp=N({type:o,selectors:[["app-shared"]],viewQuery:function(e,i){if(e&1&&ie(md,5),e&2){let n;Z(n=G())&&(i.cardElements=n)}},standalone:!1,decls:24,vars:16,consts:[[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[3,"showInfo","favorite","rename","archive","delete","card","index"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h3"),p(5,"Shared with me"),l(),s(6,"div",3)(7,"span"),p(8,"105.3 MB | 235 items"),l()()(),T(9,gd,7,0,"div",4),l(),s(10,"div",5)(11,"strong"),p(12,"Sorting"),l(),s(13,"div",6)(14,"app-sort-files",7),F("optionSelected",function(r){return i.onTypeSelect(r)}),l(),s(15,"app-sort-files",7),F("optionSelected",function(r){return i.onPeopleSelect(r)}),l(),s(16,"app-sort-files",7),F("optionSelected",function(r){return i.onModifiedSelect(r)}),l()()(),s(17,"div",8)(18,"div",9),C(19,"img",10),s(20,"strong"),p(21,"Today"),l()(),s(22,"div",11),T(23,vd,2,2,"div",12),l()()()()),e&2&&(V("expand",i.shownInfo),c(9),v("ngIf",i.shownInfo),c(5),v("label","Type")("icon","assets/icons/file-text.svg")("options",z(13,ud)),c(),v("label","People")("icon","assets/icons/profile-middle.svg")("options",z(14,fd)),c(),v("label","Modified")("icon","assets/icons/modified-middle.svg")("options",z(15,hd)),c(7),v("ngForOf",i.cards))},dependencies:[J,X,ye,Me],encapsulation:2})};var _d=["cardElement"],bd=()=>["PDF","Word","Excel"],yd=()=>["Name 1","Name 2","Name 3"],Cd=()=>["Newest","Oldest","Recently Edited"];function xd(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_();c(),D("",Q(2,1,((e=i.totalFileSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function Sd(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_();c(),D("",Q(2,1,((e=i.totalFileSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function wd(o,t){if(o&1){let e=k();s(0,"div")(1,"button",13),C(2,"img",14),p(3),u(4,"translate"),l(),s(5,"button",15),F("click",function(){b(e);let n=_();return y(n.closeInfo())}),C(6,"img",16),p(7),u(8,"translate"),l()()}o&2&&(c(3),S(g(4,2,"Common.Share")),c(4),S(g(8,4,"Common.Information")))}function Id(o,t){if(o&1){let e=k();s(0,"div",17)(1,"app-file-card",18),F("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))})("favorite",function(n){b(e);let r=_();return y(r.favorite(n))})("rename",function(n){b(e);let r=_();return y(r.rename(n))})("archive",function(n){b(e);let r=_();return y(r.archive(n))})("delete",function(n){b(e);let r=_();return y(r.delete(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index;c(),v("card",e)("index",i)}}var Yn=class o{constructor(t,e,i,n,r,a){this.renderer=t;this.fileUploadService=e;this.projectService=i;this.toaster=n;this.translate=r;this.el=a}subscriptions=[];projects=[];projectFiles=[];isFetching=!1;isFetchingFiles=!1;pageSize=20;currentPage=1;totalItems=0;numberOfPages=0;ProjectTypes=dt;selectedProjectType=null;selectedSortField=null;cardElements;uploads=[];files;isUpload=!1;count=0;totalFileSize;fileCount;projectFileQuery;ngOnInit(){this.projectFileQuery=new je,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=100,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.fetchProjectFiles()}fetchProjectFiles(){let t=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(e=>{if(e){let i=Number(localStorage.getItem("userId"));this.projectFiles=e.filter(n=>n.createdByUserId===i),this.totalFileSize=this.projectFiles.reduce((n,r)=>n+(r.fileSize??0),0),this.fileCount=this.projectFiles.length,console.log("Project files:",this.projectFiles)}this.isFetchingFiles=!1});this.subscriptions.push(t)}favorite(t){console.log(t),this.projectService.setFavourite(t).subscribe(e=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchProjectFiles()})}rename(t){let e=this.projectFiles.find(i=>i.fileId===t.fileId);e&&(e.title=t.filename)}archive(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}delete(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}onTypeSelect(t){console.log("Selected type:",t)}onPeopleSelect(t){console.log("Selected person:",t)}onModifiedSelect(t){console.log("Selected modified:",t)}selectedFile;selectedProject;shownInfo=!1;showInfo(t){this.selectedFile=t,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let e=new FormData;e.append("isOpen","true"),e.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,e).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles())}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close()}static \u0275fac=function(e){return new(e||o)(j(me),j(Ee),j(ae),j(oe),j(de),j(fe))};static \u0275cmp=N({type:o,selectors:[["app-mine"]],viewQuery:function(e,i){if(e&1&&ie(_d,5),e&2){let n;Z(n=G())&&(i.cardElements=n)}},standalone:!1,decls:30,vars:42,consts:[["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-3"],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[3,"showInfo","favorite","rename","archive","delete","card","index"]],template:function(e,i){if(e&1){let n=k();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h3"),p(5),u(6,"translate"),l(),s(7,"div",4)(8,"span"),T(9,xd,3,4,"span")(10,Sd,3,4,"span"),p(11),l()()(),T(12,wd,9,6,"div",5),l(),s(13,"div",6)(14,"strong"),p(15),u(16,"translate"),l(),s(17,"div",7)(18,"app-sort-files",8),u(19,"translate"),F("optionSelected",function(a){return b(n),y(i.onTypeSelect(a))}),l(),s(20,"app-sort-files",8),u(21,"translate"),F("optionSelected",function(a){return b(n),y(i.onPeopleSelect(a))}),l(),s(22,"app-sort-files",8),u(23,"translate"),F("optionSelected",function(a){return b(n),y(i.onModifiedSelect(a))}),l()()(),s(24,"div",9)(25,"div",10),T(26,Id,2,2,"div",11),l()()(),s(27,"div",2,0)(29,"app-file-info",12),F("closeInfoEvent",function(){return b(n),y(i.closeInfo())})("addTag",function(){return b(n),y(i.onAddTag())})("share",function(){return b(n),y(i.onShare())}),l()()()}if(e&2){let n,r;V("expand",i.shownInfo),c(5),S(g(6,29,"Sidebar.files")),c(4),K(((n=i.totalFileSize)!==null&&n!==void 0?n:0)>1?9:10),c(2),D(" | ",(r=i.fileCount)!==null&&r!==void 0?r:0," items"),c(),v("ngIf",i.shownInfo),c(3),S(g(16,31,"Common.Sorting")),c(3),v("label",g(19,33,"Type"))("icon","assets/icons/file-text.svg")("options",z(39,bd)),c(2),v("label",g(21,35,"People"))("icon","assets/icons/profile-middle.svg")("options",z(40,yd)),c(2),v("label",g(23,37,"Modified"))("icon","assets/icons/modified-middle.svg")("options",z(41,Cd)),c(4),v("ngForOf",i.projectFiles),c(),V("active",i.shownInfo),c(2),v("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile)}},dependencies:[J,X,ye,Me,Re,xe,re],encapsulation:2})};var tt=class o{constructor(t){this.http=t}isLoadingSubject=new yt(!1);setLoading(t){this.isLoadingSubject.next(t)}fetchColors(){return this.setLoading(!0),this.http.get(Fr,{observe:"response"}).pipe(rt(t=>{let e=t.body;var i;t.headers.get("pagination")&&(i=JSON.parse(t.headers.get("pagination")??""));let n={currentPage:i?Number(i.currentPage):0,pageSize:i?Number(i.pageSize):0,numberOfPages:i?Number(i.numberOfPages):0,totalItems:i?Number(i.totalItems):0};return $e(ve({},n),{data:e})}),xt(t=>this.handleError("fetching colors",t)),St(()=>this.setLoading(!1)))}handleError(t,e){return console.error(`Error ${t}:`,e),this.setLoading(!1),Ct(void 0)}static \u0275fac=function(e){return new(e||o)(Vt($t))};static \u0275prov=ge({token:o,factory:o.\u0275fac,providedIn:"root"})};var Fd=()=>["PDF","Word","Excel"],Pd=()=>["Name 1","Name 2","Name 3"],Td=()=>["Newest","Oldest","Recently Edited"],jd=()=>["/projects/folder-details"],Ed=(o,t)=>({id:o,projectId:t}),Md=o=>({fav:o});function Od(o,t){if(o&1){let e=k();s(0,"div")(1,"button",14),C(2,"img",15),p(3),u(4,"translate"),l(),s(5,"button",16),F("click",function(){b(e);let n=_();return y(n.closeInfo())}),C(6,"img",17),p(7),u(8,"translate"),l()()}o&2&&(c(3),S(g(4,2,"Common.Share")),c(4),S(g(8,4,"Common.Information")))}function Dd(o,t){if(o&1&&C(0,"img",29),o&2){let e=_().$implicit;v("src",e.imageUrl,H)}}function kd(o,t){o&1&&C(0,"i",30)}function Bd(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_().$implicit;c(),D("",Q(2,1,((e=i.filesSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function Vd(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_().$implicit;c(),D("",Q(2,1,((e=i.filesSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function Rd(o,t){if(o&1){let e=k();s(0,"div",18)(1,"div",19)(2,"a",20)(3,"div",21),T(4,Dd,1,1,"img",22)(5,kd,1,0,"i",23),l()(),s(6,"div",24)(7,"div")(8,"span",25),p(9),u(10,"slice"),u(11,"slice"),l()(),s(12,"div")(13,"div",26),F("click",function(){let n=b(e).$implicit,r=_();return y(r.favoriteFolder(n==null?null:n.folderId))}),C(14,"i",27),l()()(),s(15,"div",28)(16,"span"),T(17,Bd,3,4,"span")(18,Vd,3,4,"span"),p(19),l()()()()}if(o&2){let e,i,n,r=t.$implicit,a=_();c(2),v("routerLink",z(22,jd))("queryParams",We(23,Ed,r.folderId,r.projectId)),c(),ut("background",a.getColor(r.colorId)?"linear-gradient(0deg, rgba(58,81,100,1) 21%, "+a.getColor(r.colorId)+" 100%)":"#3A5164")("border-bottom",r.imageUrl?"7px solid "+a.getColor(r.colorId):"none"),V("map-related",r.areaReference),c(),v("ngIf",r.imageUrl),c(),v("ngIf",r.areaReference),c(3),v("title",r.title),c(),D(" ",((e=r.title)!==null&&e!==void 0?e:"").length>20?Xe(10,15,r.title,0,16)+"..."+Q(11,19,r.title,-4):r.title," "),c(4),v("ngClass",ce(26,Md,r.isFavByUser)),c(4),K(((i=r.filesSize)!==null&&i!==void 0?i:0)>1?17:18),c(2),D(" | ",(n=r.filesNum)!==null&&n!==void 0?n:0," items ")}}function Ad(o,t){if(o&1){let e=k();s(0,"div",18)(1,"app-file-card",31),F("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))})("favorite",function(n){b(e);let r=_();return y(r.favorite(n))})("rename",function(n){b(e);let r=_();return y(r.rename(n))})("archive",function(n){b(e);let r=_();return y(r.archive(n))})("delete",function(n){b(e);let r=_();return y(r.delete(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index;c(),v("card",e)("index",i)}}var Zn=class o{constructor(t,e,i,n,r){this.projectService=t;this.el=e;this.toaster=i;this.translate=n;this.categoriesService=r}projectFiles=[];projectFolderQuery;bootstrap;subscriptions=[];projectId;isFetching=!1;isFetchingProjects=!1;isFetchingFiles=!1;userId;projectFolders=[];colors=[];tagsInput="";tags=[];isFetchingColors=!1;projectFileQuery;ngOnInit(){ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.userId=localStorage.getItem("userId"),this.projectFolderQuery=new et,this.projectFolderQuery.projectId=null,this.projectFolderQuery.parentId=null,this.projectFolderQuery.sortOrder=null,this.projectFolderQuery.pageNumber=1,this.projectFolderQuery.pageSize=1e3,this.projectFolderQuery.FavUserId=this.userId,this.projectFolderQuery.isActive=!0,this.projectFolderQuery.showCurrentUserFav=!0,this.projectFolderQuery.type=null,this.projectFolderQuery.colorId=null,this.projectFileQuery=new je,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=this.userId,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,this.fetchProjectFiles(),this.fetchProjectFolders(),this.fetchColors()}fetchProjectFiles(){let t=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(e=>{e&&(console.log(e),this.projectFiles=e,console.log(this.projectFiles)),this.isFetchingFiles=!1});this.subscriptions.push(t)}fetchProjectFolders(){this.isFetchingProjects=!0;let t=this.projectService.fetchProjectFolders(this.projectFolderQuery).subscribe(e=>{e&&(console.log("Project folders:",e),this.projectFolders=e),this.isFetchingProjects=!1});this.subscriptions.push(t)}fetchColors(){if(this.isFetchingColors)return;this.isFetchingColors=!0;let t=this.categoriesService.fetchColors().subscribe(e=>{e&&(this.colors=e.data),this.isFetchingColors=!1});this.subscriptions.push(t)}getColor(t){let e=this.colors.find(i=>i.catId===t);return e?e.colorDegree:null}favorite(t){console.log(t),this.projectService.setFavourite(t).subscribe(e=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchProjectFiles()})}rename(t){let e=this.projectFiles.find(i=>i.fileId===t.fileId);e&&(e.title=t.filename)}archive(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}delete(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}favoriteFolder(t){console.log(t),this.projectService.setFavouriteFolder(t).subscribe(e=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully"));let i=this.projectFolders.find(n=>n.folderId==t);i&&(i.isFavByUser=!i?.isFavByUser),this.fetchProjectFolders()})}onTypeSelect(t){}onPeopleSelect(t){}onModifiedSelect(t){}selectedFile;selectedProject;shownInfo=!1;showInfo(t){this.selectedFile=t,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let e=new FormData;e.append("isOpen","true"),e.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,e).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles())}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close()}static \u0275fac=function(e){return new(e||o)(j(ae),j(fe),j(oe),j(de),j(tt))};static \u0275cmp=N({type:o,selectors:[["app-favorite"]],standalone:!1,decls:38,vars:47,consts:[["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[4,"ngIf"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-file-card","projects-block"],[3,"routerLink","queryParams"],[1,"proj-img-holder","folder-holder"],[3,"src",4,"ngIf"],["class","fa fa-map","style","color: #bbd5d559;",4,"ngIf"],[1,"recent-file-type","pt-2","d-flex","justify-content-between","flex-row","align-items-center"],[3,"title"],[1,"star",3,"click","ngClass"],[1,"fa","fa-star"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[3,"src"],[1,"fa","fa-map",2,"color","#bbd5d559"],[3,"showInfo","favorite","rename","archive","delete","card","index"]],template:function(e,i){if(e&1){let n=k();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h3"),p(5),u(6,"translate"),l()(),T(7,Od,9,6,"div",4),l(),s(8,"div",5)(9,"strong"),p(10),u(11,"translate"),l(),s(12,"div",6)(13,"app-sort-files",7),u(14,"translate"),F("optionSelected",function(a){return b(n),y(i.onTypeSelect(a))}),l(),s(15,"app-sort-files",7),u(16,"translate"),F("optionSelected",function(a){return b(n),y(i.onPeopleSelect(a))}),l(),s(17,"app-sort-files",7),u(18,"translate"),F("optionSelected",function(a){return b(n),y(i.onModifiedSelect(a))}),l()()(),s(19,"div",8)(20,"div",9),C(21,"img",10),s(22,"strong"),p(23),u(24,"translate"),l()(),s(25,"div",11),T(26,Rd,20,28,"div",12),l()(),s(27,"div",8)(28,"div",9),C(29,"img",10),s(30,"strong"),p(31),u(32,"translate"),l()(),s(33,"div",11),T(34,Ad,2,2,"div",12),l()()(),s(35,"div",2,0)(37,"app-file-info",13),F("closeInfoEvent",function(){return b(n),y(i.closeInfo())})("addTag",function(){return b(n),y(i.onAddTag())})("share",function(){return b(n),y(i.onShare())}),l()()()}e&2&&(V("expand",i.shownInfo),c(5),S(g(6,30,"Sidebar.favorite")),c(2),v("ngIf",i.shownInfo),c(3),S(g(11,32,"Common.Sorting")),c(3),v("label",g(14,34,"Type"))("icon","assets/icons/file-text.svg")("options",z(44,Fd)),c(2),v("label",g(16,36,"People"))("icon","assets/icons/profile-middle.svg")("options",z(45,Pd)),c(2),v("label",g(18,38,"Modified"))("icon","assets/icons/modified-middle.svg")("options",z(46,Td)),c(6),S(g(24,40,"Common.Folders")),c(3),v("ngForOf",i.projectFolders),c(5),S(g(32,42,"Common.Files")),c(3),v("ngForOf",i.projectFiles),c(),V("active",i.shownInfo),c(2),v("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile))},dependencies:[lt,J,X,ye,Me,we,Re,Ht,xe,re],encapsulation:2})};var Gn=class o{projectId;title;type=null;brief;projectHtml;imageUrl;startDate;endDate;location;typeId=10;isActive=!0;filesNum=0;filesSize=0;static \u0275fac=function(e){return new(e||o)};static \u0275prov=ge({token:o,factory:o.\u0275fac,providedIn:"root"})},Kn=class{folderId;parentId;projectId;type=null;title;brief;folderHtml;imageUrl;createdByUserId;typeId;catId;postDate;numOrder;isActive;filesNum=0;filesSize=0};var Ho=["*"];function zd(o,t){o&1&&(s(0,"span",3),wt(),s(1,"svg",4),C(2,"path",5)(3,"g")(4,"g")(5,"g")(6,"g")(7,"g")(8,"g"),l()())}function Nd(o,t){if(o&1){let e=k();s(0,"div",2),F("click",function(){b(e);let n=_();return y(n.hide())}),l()}}var Ld=[[["ng2-dropdown-button"]],[["ng2-dropdown-menu"]]],Ud=["ng2-dropdown-button","ng2-dropdown-menu"],Hd=(()=>{class o{constructor(e){this.element=e,this.onMenuToggled=new W,this.showCaret=!0}toggleMenu(){this.onMenuToggled.emit(!0)}getPosition(){return this.element.nativeElement.getBoundingClientRect()}}return o.\u0275fac=function(e){return new(e||o)(j(fe))},o.\u0275cmp=N({type:o,selectors:[["ng2-dropdown-button"]],inputs:{showCaret:"showCaret"},outputs:{onMenuToggled:"onMenuToggled"},standalone:!1,ngContentSelectors:Ho,decls:4,vars:1,consts:[["type","button","tabindex","0s",1,"ng2-dropdown-button",3,"click"],[1,"ng2-dropdown-button__label"],["class","ng2-dropdown-button__caret",4,"ngIf"],[1,"ng2-dropdown-button__caret"],["enable-background","new 0 0 32 32","height","16px","id","\u0421\u043B\u043E\u0439_1","version","1.1","viewBox","0 0 32 32","width","16px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["d","M24.285,11.284L16,19.571l-8.285-8.288c-0.395-0.395-1.034-0.395-1.429,0  c-0.394,0.395-0.394,1.035,0,1.43l8.999,9.002l0,0l0,0c0.394,0.395,1.034,0.395,1.428,0l8.999-9.002  c0.394-0.395,0.394-1.036,0-1.431C25.319,10.889,24.679,10.889,24.285,11.284z","fill","#121313","id","Expand_More"]],template:function(e,i){e&1&&(ni(),s(0,"button",0),F("click",function(){return i.toggleMenu()}),s(1,"span",1),At(2),l(),T(3,zd,9,0,"span",2),l()),e&2&&(c(3),v("ngIf",i.showCaret))},dependencies:[X],styles:[".ng2-dropdown-button[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,Helvetica,Arial;background:#fff;padding:.45rem .25rem;font-size:14px;letter-spacing:.08rem;color:#444;outline:0;cursor:pointer;font-weight:400;border:none;border-bottom:1px solid #efefef;text-align:left;min-width:100px;width:100%;display:flex;flex-direction:row;max-width:150px}.ng2-dropdown-button[_ngcontent-%COMP%]:hover{color:#222}.ng2-dropdown-button[_ngcontent-%COMP%]:active, .ng2-dropdown-button[_ngcontent-%COMP%]:focus{color:#222;border-bottom:2px solid #2196F3}.ng2-dropdown-button__label[_ngcontent-%COMP%]{flex:1 1 95%}.ng2-dropdown-button__caret[_ngcontent-%COMP%]{width:12px;height:12px;display:flex;flex:1 1 6%}.ng2-dropdown-button--icon[_nghost-%COMP%]   .ng2-dropdown-button[_ngcontent-%COMP%], .ng2-dropdown-button--icon   [_nghost-%COMP%]   .ng2-dropdown-button[_ngcontent-%COMP%]{border:none;min-width:40px;width:40px;border-radius:100%;transition:all .2s;text-align:center;height:40px;padding:.5em}.ng2-dropdown-button--icon[_nghost-%COMP%]   .ng2-dropdown-button[_ngcontent-%COMP%]:active, .ng2-dropdown-button--icon   [_nghost-%COMP%]   .ng2-dropdown-button[_ngcontent-%COMP%]:active{background:rgba(0,0,0,.2)}"]}),o})(),qi={BACKSPACE:9,PREV:38,NEXT:40,ENTER:13,ESCAPE:27},Qd=(o,t,e)=>{o<t.length-1&&e.select(t[o+1],!0)},$d=(o,t,e)=>{o>0&&e.select(t[o-1],!0)},Wd=(o,t,e)=>{o<t.length-1?e.select(t[o+1],!0):e.select(t[0],!0)};function qd(){this.hide()}var Xd=(o,t,e)=>e.selectedItem?e.selectedItem.click():void 0,Oa={[qi.BACKSPACE]:Wd,[qi.PREV]:$d,[qi.NEXT]:Qd,[qi.ENTER]:Xd,[qi.ESCAPE]:qd};function Yd(o){[38,40].indexOf(o.keyCode)>-1&&o.preventDefault()}var Uo=class{constructor(){this.onItemSelected=new W,this.onItemClicked=new W,this.onItemDestroyed=new W}get selectedItem(){return this._selectedItem}select(t,e=!0){this._selectedItem=t,!(!e||!t)&&(t.focus(),this.onItemSelected.emit(t))}unselect(){this._selectedItem=void 0}},Jn=(()=>{class o{constructor(){this.menuState={isVisible:!1,toString(){return this.isVisible===!0?"visible":"hidden"}},this.dropdownState=new Uo}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=ge({token:o,factory:o.\u0275fac}),o})(),Qo=(()=>{class o{constructor(e,i){this.state=e,this.element=i,this.preventClose=!1}ngOnDestroy(){this.state.dropdownState.onItemDestroyed.emit(this)}get isSelected(){return this===this.state.dropdownState.selectedItem}select(e){this.state.dropdownState.select(this,!0),e&&(e.stopPropagation(),e.preventDefault())}click(){this.state.dropdownState.onItemClicked.emit(this)}focus(){this.element.nativeElement.children[0].focus()}}return o.\u0275fac=function(e){return new(e||o)(j(Jn),j(fe))},o.\u0275cmp=N({type:o,selectors:[["ng2-menu-item"]],inputs:{preventClose:"preventClose",value:"value"},standalone:!1,ngContentSelectors:Ho,decls:2,vars:2,consts:[["role","button","tabindex","0",1,"ng2-menu-item",3,"keydown.enter","click","mouseover"]],template:function(e,i){e&1&&(ni(),s(0,"div",0),F("keydown.enter",function(){return i.click()})("click",function(){return i.click()})("mouseover",function(){return i.select()}),At(1),l()),e&2&&V("ng2-menu-item--selected",i.isSelected)},styles:[".ng2-menu-item[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,Helvetica,Arial;background:#fff;color:#000000de;cursor:pointer;font-size:.9em;text-transform:none;font-weight:400;letter-spacing:.03em;height:48px;line-height:48px;padding:.3em 1.25rem;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;transition:background .25s}.ng2-menu-item--selected[_ngcontent-%COMP%]{background:rgba(158,158,158,.2);outline:0}.ng2-menu-item[_ngcontent-%COMP%]:focus{outline:0}.ng2-menu-item[_ngcontent-%COMP%]:active{background:rgba(158,158,158,.4)}ng2-menu-item[_nghost-%COMP%]     [ng2-menu-item-icon]{vertical-align:middle;font-size:28px;width:1.5em;height:30px;color:#00000070}"]}),o})(),$o=(()=>{class o{constructor(e,i,n){this.dropdownState=e,this.element=i,this.renderer=n,this.width=4,this.focusFirstElement=!0,this.appendToBody=!0,this.zIndex=1e3,this.listeners={arrowHandler:void 0,handleKeypress:void 0}}show(e,i=!0){let n=typeof document<"u"?document:void 0,r=typeof window<"u"?window:void 0;this.dropdownState.menuState.isVisible||(this.listeners.handleKeypress=this.renderer.listen(n.body,"keydown",this.handleKeypress.bind(this)),this.listeners.arrowHandler=this.renderer.listen(r,"keydown",Yd)),this.dropdownState.menuState.isVisible=!0,e&&this.updatePosition(e,i)}hide(){this.dropdownState.menuState.isVisible=!1,this.dropdownState.dropdownState.unselect(),this.listeners.arrowHandler&&this.listeners.arrowHandler(),this.listeners.handleKeypress&&this.listeners.handleKeypress()}updatePosition(e,i){this.position=e,this.updateOnChange(i)}handleKeypress(e){let i=e.keyCode,n=this.items.toArray(),r=n.indexOf(this.dropdownState.dropdownState.selectedItem);Oa.hasOwnProperty(i)&&Oa[i].call(this,r,n,this.dropdownState.dropdownState)}getMenuElement(){return this.element.nativeElement.children[0]}calcPositionOffset(e){let i=typeof window<"u"?window:void 0,n=typeof document<"u"?document:void 0;if(!i||!n||!e)return;let r=this.getMenuElement(),a=i.pageXOffset!==void 0,d=(n.compatMode||"")==="CSS1Compat",m=a?i.pageXOffset:d?n.documentElement.scrollLeft:n.body.scrollLeft,f=a?i.pageYOffset:d?n.documentElement.scrollTop:n.body.scrollTop,{top:h,left:x}=this.applyOffset(`${e.top+(this.appendToBody?f-15:0)}px`,`${e.left+m-5}px`),I=r.clientWidth,w=r.clientHeight,P=parseInt(h)+w+(this.appendToBody?0:f-15),M=parseInt(x)+I,E=i.innerHeight+i.scrollY,O=i.innerWidth+i.scrollX;if(P>=E&&(h=`${parseInt(h.replace("px",""))-w}px`),M>=O){let R=M-O+30;x=`${parseInt(x.replace("px",""))-R}px`}return{top:h,left:x}}applyOffset(e,i){if(!this.offset)return{top:e,left:i};let n=this.offset.split(" ");return n[1]||(n[1]="0"),e=`${parseInt(e.replace("px",""))+parseInt(n[0])}px`,i=`${parseInt(i.replace("px",""))+parseInt(n[1])}px`,{top:e,left:i}}ngOnInit(){let e=typeof document<"u"?document:void 0;this.appendToBody&&e.body.appendChild(this.element.nativeElement)}updateOnChange(e=!0){let i=this.getMenuElement(),n=this.calcPositionOffset(this.position);n&&(this.renderer.setStyle(i,"top",n.top.toString()),this.renderer.setStyle(i,"left",n.left.toString())),this.focusFirstElement&&this.items.first&&!this.dropdownState.dropdownState.selectedItem&&this.dropdownState.dropdownState.select(this.items.first,!1)}ngOnDestroy(){let e=this.element.nativeElement;e.parentNode.removeChild(e),this.listeners.handleKeypress&&this.listeners.handleKeypress()}}return o.\u0275fac=function(e){return new(e||o)(j(Jn),j(fe),j(me))},o.\u0275cmp=N({type:o,selectors:[["ng2-dropdown-menu"]],contentQueries:function(e,i,n){if(e&1&&zt(n,Qo,5),e&2){let r;Z(r=G())&&(i.items=r)}},inputs:{width:"width",focusFirstElement:"focusFirstElement",offset:"offset",appendToBody:"appendToBody",zIndex:"zIndex"},standalone:!1,ngContentSelectors:Ho,decls:4,vars:12,consts:[[1,"ng2-dropdown-menu__options-container"],["class","ng2-dropdown-backdrop",3,"click",4,"ngIf"],[1,"ng2-dropdown-backdrop",3,"click"]],template:function(e,i){e&1&&(ni(),s(0,"div")(1,"div",0),At(2),l()(),T(3,Nd,1,0,"div",1)),e&2&&(Vi("ng2-dropdown-menu ng2-dropdown-menu---width--",i.width,""),ut("z-index",i.zIndex),V("ng2-dropdown-menu--inside-element",!i.appendToBody)("ng2-dropdown-menu--open",i.dropdownState.menuState.isVisible),v("@fade",i.dropdownState.menuState.toString()),c(),v("@opacity",i.dropdownState.menuState.toString()),c(2),v("ngIf",i.dropdownState.menuState.isVisible))},dependencies:[X],styles:["[_nghost-%COMP%]{display:block}.ng2-dropdown-menu[_ngcontent-%COMP%]{overflow-y:auto;box-shadow:0 1px 2px #0000004d;position:absolute;padding:.5em 0;background:#fff;border-radius:1px;max-height:400px;width:260px;min-height:0;display:block}.ng2-dropdown-menu.ng2-dropdown-menu--inside-element[_ngcontent-%COMP%]{position:fixed}.ng2-dropdown-menu.ng2-dropdown-menu--width--2[_ngcontent-%COMP%]{width:200px}.ng2-dropdown-menu.ng2-dropdown-menu--width--4[_ngcontent-%COMP%]{width:260px}.ng2-dropdown-menu.ng2-dropdown-menu--width--6[_ngcontent-%COMP%]{width:320px}.ng2-dropdown-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;overflow:hidden}[_nghost-%COMP%]     .ng2-menu-divider{height:1px;min-height:1px;max-height:1px;width:100%;display:block;background:#f9f9f9}"],data:{animation:[_i("fade",[ri("visible",he({opacity:1,height:"*",width:"*"})),ri("hidden",he({opacity:0,overflow:"hidden",height:0,width:0})),jt("hidden => visible",[Tt("250ms ease-in",he({opacity:1,height:"*",width:"*"}))]),jt("visible => hidden",[Tt("350ms ease-out",he({opacity:0,width:0,height:0}))])]),_i("opacity",[jt("hidden => visible",[Tt("450ms ease-in",ai([he({opacity:0,offset:0}),he({opacity:1,offset:1})]))]),jt("visible => hidden",[Tt("250ms ease-out",ai([he({opacity:1,offset:0}),he({opacity:.5,offset:.3}),he({opacity:0,offset:1})]))])])]}}),o})(),eo=(()=>{class o{constructor(e){this.state=e,this.dynamicUpdate=!0,this.onItemClicked=new W,this.onItemSelected=new W,this.onShow=new W,this.onHide=new W}ngOnInit(){this.state.dropdownState.onItemClicked.subscribe(e=>{this.onItemClicked.emit(e),!e.preventClose&&this.hide.call(this)}),this.button&&this.button.onMenuToggled.subscribe(()=>{this.toggleMenu()}),this.state.dropdownState.onItemSelected.subscribe(e=>{this.onItemSelected.emit(e)}),this.state.dropdownState.onItemDestroyed.subscribe(e=>{let i,n=this.menu.items.toArray();e===this.state.dropdownState.selectedItem&&(this.menu.focusFirstElement&&(i=e===n[0]&&n.length>1?n[1]:n[0]),this.state.dropdownState.select(i))})}toggleMenu(e=this.button.getPosition()){this.state.menuState.isVisible?this.hide():this.show(e)}hide(){this.menu.hide(),this.onHide.emit(this)}show(e=this.button.getPosition()){this.menu.show(e,this.dynamicUpdate),this.onShow.emit(this)}scrollListener(){this.button&&this.dynamicUpdate&&this.menu.updatePosition(this.button.getPosition(),!0)}}return o.\u0275fac=function(e){return new(e||o)(j(Jn))},o.\u0275cmp=N({type:o,selectors:[["ng2-dropdown"]],contentQueries:function(e,i,n){if(e&1&&(zt(n,Hd,7),zt(n,$o,7)),e&2){let r;Z(r=G())&&(i.button=r.first),Z(r=G())&&(i.menu=r.first)}},hostBindings:function(e,i){e&1&&F("scroll",function(){return i.scrollListener()},!1,It)},inputs:{dynamicUpdate:"dynamicUpdate"},outputs:{onItemClicked:"onItemClicked",onItemSelected:"onItemSelected",onShow:"onShow",onHide:"onHide"},standalone:!1,features:[Ji([Jn])],ngContentSelectors:Ud,decls:3,vars:0,consts:[[1,"ng2-dropdown-container"]],template:function(e,i){e&1&&(ni(Ld),s(0,"div",0),At(1),At(2,1),l())},encapsulation:2}),o})(),Da=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=Rt({type:o}),o.\u0275inj=Bt({imports:[[oi]]}),o})();var Gd=["input"],Kd=(o,t)=>({item:o,index:t});function Jd(o,t){}function ep(o,t){if(o&1&&(s(0,"div"),T(1,Jd,0,0,"ng-template",4),l()),o&2){let e=_();Ft("contenteditable",e.editing),c(),v("ngTemplateOutletContext",We(3,Kd,e.model,e.index))("ngTemplateOutlet",e.template)}}function tp(o,t){if(o&1){let e=k();s(0,"delete-icon",8),F("click",function(n){b(e);let r=_(2);return y(r.remove(n))}),l()}}function ip(o,t){if(o&1){let e=k();s(0,"div",5)(1,"div",6),F("keydown.enter",function(n){b(e);let r=_();return y(r.disableEditMode(n))})("keydown.escape",function(n){b(e);let r=_();return y(r.disableEditMode(n))})("click",function(n){b(e);let r=_();return y(r.editing?n.stopPropagation():void 0)})("blur",function(n){b(e);let r=_();return y(r.onBlurred(n))}),p(2),l(),T(3,tp,1,0,"delete-icon",7),l()}if(o&2){let e=_();c(),Ft("contenteditable",e.editing)("title",e.getDisplayValue(e.model)),c(),D(" ",e.getDisplayValue(e.model)," "),c(),v("ngIf",e.isDeleteIconVisible())}}function np(o,t){if(o&1&&C(0,"tag-ripple",9),o&2){let e=_();v("state",e.rippleState),Ft("tabindex",-1)}}var op=(o,t,e)=>({item:o,index:t,last:e});function rp(o,t){if(o&1&&(C(0,"span",6),u(1,"highlight")),o&2){let e=_().$implicit,i=_();v("innerHTML",Q(1,1,e[i.displayBy],i.tagInput.inputForm.value.value),or)}}function ap(o,t){}function sp(o,t){if(o&1&&T(0,ap,0,0,"ng-template",7),o&2){let e=_(),i=e.$implicit,n=e.index,r=e.last,a=_();v("ngTemplateOutlet",a.templates.first)("ngTemplateOutletContext",en(2,op,i,n,r))}}function lp(o,t){if(o&1&&(s(0,"ng2-menu-item",3),T(1,rp,2,4,"span",4)(2,sp,1,6,null,5),l()),o&2){let e=t.$implicit,i=_();v("value",e)("ngSwitch",!!i.templates.length),c(),v("ngSwitchCase",!1)}}var cp=["*"];function dp(o,t){if(o&1){let e=k();s(0,"tag",6),F("onSelect",function(){let n=b(e).$implicit,r=_();return y(r.selectItem(n))})("onRemove",function(){let n=b(e),r=n.$implicit,a=n.index,d=_();return y(d.onRemoveRequested(r,a))})("onKeyDown",function(n){b(e);let r=_();return y(r.handleKeydown(n))})("onTagEdited",function(n){b(e);let r=_();return y(r.updateEditedTag(n))})("onBlur",function(n){let r=b(e).index,a=_();return y(a.onTagBlurred(n,r))})("dragstart",function(n){let r=b(e),a=r.$implicit,d=r.index,m=_();return y(m.dragZone?m.onDragStarted(n,a,d):void 0)})("drop",function(n){let r=b(e).index,a=_();return y(a.dragZone?a.onTagDropped(n,r):void 0)})("dragenter",function(n){b(e);let r=_();return y(r.dragZone?r.onDragOver(n):void 0)})("dragover",function(n){let r=b(e).index,a=_();return y(a.dragZone?a.onDragOver(n,r):void 0)})("dragleave",function(){b(e);let n=_();return y(n.dragZone?n.dragProvider.onDragEnd():void 0)}),l()}if(o&2){let e=t.$implicit,i=t.index,n=_();L("draggable",n.editable),v("canAddTag",n.isTagValid)("disabled",n.disable)("@animation",n.animationMetadata)("hasRipple",n.ripple)("index",i)("removable",n.removable)("editable",n.editable)("displayBy",n.displayBy)("identifyBy",n.identifyBy)("template",n.hasCustomTemplate()?n.templates.first:void 0)("draggable",n.dragZone)("model",e),Ft("tabindex",0)}}function pp(o,t){o&1&&C(0,"div",7)}function mp(o,t){if(o&1&&(s(0,"p",10)(1,"span"),p(2),l()()),o&2){let e=t.$implicit;c(2),S(e)}}function up(o,t){if(o&1&&(s(0,"div",8),T(1,mp,3,1,"p",9),l()),o&2){let e=_();v("ngClass",e.theme),c(),v("ngForOf",e.errors)}}var fp=o=>o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),hp=(()=>{class o{transform(e,i){if(!i.trim())return e;try{let n=new RegExp(`(${fp(i)})`,"i");return e.replace(n,"<b>$1</b>")}catch{return e}}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=ar({name:"highlight",type:o,pure:!0,standalone:!1}),o})(),gp="+ Tag",vp="Enter a new tag",Wo="keydown",_p="keyup";var bp="The number of items specified was greater than the property max-items.",Dt={DELETE:"DELETE",SWITCH_PREV:"SWITCH_PREV",SWITCH_NEXT:"SWITCH_NEXT",TAB:"TAB"},yp={8:Dt.DELETE,46:Dt.DELETE,37:Dt.SWITCH_PREV,39:Dt.SWITCH_NEXT,9:Dt.TAB},ka="Text",to="NEXT",qo="PREV",La=(()=>{class o{constructor(){this.state={dragging:!1,dropping:!1,index:void 0}}setDraggedItem(e,i){e&&e.dataTransfer&&e.dataTransfer.setData(ka,JSON.stringify(i))}getDraggedItem(e){if(e&&e.dataTransfer){let i=e.dataTransfer.getData(ka);try{return JSON.parse(i)}catch{return}}}setSender(e){this.sender=e}setReceiver(e){this.receiver=e}onTagDropped(e,i,n){this.onDragEnd(),this.sender.onRemoveRequested(e,i),this.receiver.onAddingRequested(!1,e,n)}setState(e){this.state=ve(ve({},this.state),e)}getState(e){return e?this.state[e]:this.state}onDragEnd(){this.setState({dragging:!1,dropping:!1,index:void 0})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=ge({token:o,factory:o.\u0275fac}),o})(),q={tagInput:{separatorKeys:[],separatorKeyCodes:[],maxItems:1/0,placeholder:gp,secondaryPlaceholder:vp,validators:[],asyncValidators:[],onlyFromAutocomplete:!1,errorMessages:{},theme:"",onTextChangeDebounce:250,inputId:null,inputClass:"",clearOnBlur:!1,hideForm:!1,addOnBlur:!1,addOnPaste:!1,pasteSplitPattern:",",blinkIfDupe:!0,removable:!0,editable:!1,allowDupes:!1,modelAsStrings:!1,trimTags:!0,ripple:!0,tabIndex:"",disable:!1,dragZone:"",onRemoving:void 0,onAdding:void 0,displayBy:"display",identifyBy:"value",animationDuration:{enter:"250ms",leave:"150ms"}},dropdown:{displayBy:"display",identifyBy:"value",appendToBody:!0,offset:"50 0",focusFirstElement:!1,showDropdownIfEmpty:!1,minimumTextLength:1,limitItemsTo:1/0,keepOpen:!0,dynamicUpdate:!0,zIndex:1e3,matchingFn:Cp}};function Cp(o,t){let e=t[this.displayBy].toString();return e&&e.toLowerCase().indexOf(o.toLowerCase())>=0}var Xo=(()=>{class o{setOptions(e){o.defaults.tagInput=ve(ve({},q.tagInput),e.tagInput),o.defaults.dropdown=ve(ve({},q.dropdown),e.dropdown)}}return o.defaults=q,o})();function Ba(o){return o===Object(o)}var xp=(()=>{class o{constructor(){this._items=[],this.displayBy=Xo.defaults.tagInput.displayBy,this.identifyBy=Xo.defaults.tagInput.identifyBy}get items(){return this._items}set items(e){this._items=e,this._onChangeCallback(this._items)}onTouched(){this._onTouchedCallback()}writeValue(e){this._items=e||[]}registerOnChange(e){this._onChangeCallback=e}registerOnTouched(e){this._onTouchedCallback=e}getItemValue(e,i=!1){let n=i&&this.dropdown?this.dropdown.identifyBy:this.identifyBy;return Ba(e)?e[n]:e}getItemDisplay(e,i=!1){let n=i&&this.dropdown?this.dropdown.displayBy:this.displayBy;return Ba(e)?e[n]:e}getItemsWithout(e){return this.items.filter((i,n)=>n!==e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=rr({type:o,inputs:{displayBy:"displayBy",identifyBy:"identifyBy"},standalone:!1}),o})();function Va(o,t,e=!0){if(!this.listeners.hasOwnProperty(o))throw new Error("The event entered may be wrong");e&&this.listeners[o].push(t)}var Ra=(()=>{class o{constructor(){this.onSubmit=new W,this.onBlur=new W,this.onFocus=new W,this.onKeyup=new W,this.onKeydown=new W,this.inputTextChange=new W,this.validators=[],this.asyncValidators=[],this.tabindex="",this.disabled=!1,this.item=new ue({value:"",disabled:this.disabled})}get inputText(){return this.item.value}set inputText(e){this.item.setValue(e),this.inputTextChange.emit(e)}ngOnInit(){this.item.setValidators(this.validators),this.item.setAsyncValidators(this.asyncValidators),this.form=new Wt({item:this.item})}ngOnChanges(e){e.disabled&&!e.disabled.firstChange&&(e.disabled.currentValue?this.form.controls.item.disable():this.form.controls.item.enable())}get value(){return this.form.get("item")}isInputFocused(){let e=typeof document<"u"?document:void 0;return e?e.activeElement===this.input.nativeElement:!1}getErrorMessages(e){return Object.keys(e).filter(i=>this.value.hasError(i)).map(i=>e[i])}hasErrors(){let{dirty:e,value:i,valid:n}=this.form;return e&&i.item&&!n}focus(){this.input.nativeElement.focus()}blur(){this.input.nativeElement.blur()}getElementPosition(){return this.input.nativeElement.getBoundingClientRect()}destroy(){let e=this.input.nativeElement;e.parentElement.removeChild(e)}onKeyDown(e){if(this.inputText=this.value.value,e.key==="Enter")this.submit(e);else return this.onKeydown.emit(e)}onKeyUp(e){return this.inputText=this.value.value,this.onKeyup.emit(e)}submit(e){e.preventDefault(),this.onSubmit.emit(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=N({type:o,selectors:[["tag-input-form"]],viewQuery:function(e,i){if(e&1&&ie(Gd,5),e&2){let n;Z(n=G())&&(i.input=n.first)}},inputs:{placeholder:"placeholder",validators:"validators",asyncValidators:"asyncValidators",inputId:"inputId",inputClass:"inputClass",tabindex:"tabindex",disabled:"disabled",inputText:"inputText"},outputs:{onSubmit:"onSubmit",onBlur:"onBlur",onFocus:"onFocus",onKeyup:"onKeyup",onKeydown:"onKeydown",inputTextChange:"inputTextChange"},standalone:!1,features:[Yi],decls:3,vars:8,consts:[["input",""],[3,"ngSubmit","formGroup"],["type","text","autocomplete","off","minlength","1","formControlName","item",1,"ng2-tag-input__text-input",3,"focus","blur","keydown","keyup","tabindex","ngClass"]],template:function(e,i){if(e&1){let n=k();s(0,"form",1),F("ngSubmit",function(a){return b(n),y(i.submit(a))}),s(1,"input",2,0),F("focus",function(a){return b(n),y(i.onFocus.emit(a))})("blur",function(a){return b(n),y(i.onBlur.emit(a))})("keydown",function(a){return b(n),y(i.onKeyDown(a))})("keyup",function(a){return b(n),y(i.onKeyUp(a))}),l()()}e&2&&(v("formGroup",i.form),c(),L("tabindex",i.disabled?-1:i.tabindex?i.tabindex:0),v("ngClass",i.inputClass),Ft("id",i.inputId)("placeholder",i.placeholder)("aria-label",i.placeholder)("tabindex",i.tabindex)("disabled",i.disabled?i.disabled:null))},dependencies:[Fe,Ie,Xt,Le,Ar,Ue,Yt,lt],styles:[".dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 1px #323232}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]{background-color:#fff;display:inline-block;color:#555;vertical-align:middle;max-width:100%;height:42px;line-height:44px}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;box-shadow:none;outline:none;background-color:transparent;padding:0 6px;margin:0;width:auto;max-width:inherit}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#777;opacity:1}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none;box-shadow:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #0006;border:1px solid #ccc}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #d9534f}.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;transition:all .25s;padding:.25rem 0;min-height:32px;cursor:text;border-bottom:2px solid #efefef}.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #2196F3}.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #f44336}.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.minimal.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:1px solid transparent}.minimal.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.minimal.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.minimal.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.minimal.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.minimal.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.dark.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #444}.dark.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.dark.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.dark.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.dark.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.dark.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #efefef}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #0275d8}.bootstrap.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #d9534f}.bootstrap.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;padding:4px;cursor:text;box-shadow:inset 0 1px 1px #00000013;border-radius:4px}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap3-info.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:1px solid #d9534f}.bootstrap3-info.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.error-message[_ngcontent-%COMP%]{font-size:.8em;color:#f44336;margin:.5em 0 0}.bootstrap[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d9534f}.ng2-tag-input__text-input[_ngcontent-%COMP%]{display:inline;vertical-align:middle;border:none;padding:0 .5rem;height:38px;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif}.ng2-tag-input__text-input[_ngcontent-%COMP%]:focus{outline:0}.ng2-tag-input__text-input[disabled=true][_ngcontent-%COMP%]{opacity:.5;background:#fff}"]}),o})(),Aa=(()=>{class o{constructor(){this.state="none"}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=N({type:o,selectors:[["tag-ripple"]],inputs:{state:"state"},standalone:!1,decls:1,vars:1,consts:[[1,"tag-ripple"]],template:function(e,i){e&1&&C(0,"div",0),e&2&&v("@ink",i.state)},styles:["[_nghost-%COMP%]{width:100%;height:100%;left:0;overflow:hidden;position:absolute}.tag-ripple[_ngcontent-%COMP%]{background:rgba(0,0,0,.1);top:50%;left:50%;height:100%;transform:translate(-50%,-50%);position:absolute}"],data:{animation:[_i("ink",[ri("none",he({width:0,opacity:0})),jt("none => clicked",[Tt(300,ai([he({opacity:1,offset:0,width:"30%",borderRadius:"100%"}),he({opacity:1,offset:.5,width:"50%"}),he({opacity:.5,offset:1,width:"100%",borderRadius:"16px"})]))])])]}}),o})(),Sp=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=N({type:o,selectors:[["delete-icon"]],standalone:!1,decls:3,vars:0,consts:[["height","16px","viewBox","0 0 32 32","width","16px"],["d","M17.459,16.014l8.239-8.194c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.391-1.034-0.391-1.428,0  l-8.232,8.187L7.73,6.284c-0.394-0.395-1.034-0.395-1.428,0c-0.394,0.396-0.394,1.037,0,1.432l8.302,8.303l-8.332,8.286  c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.428,0l8.325-8.279l8.275,8.276c0.394,0.395,1.034,0.395,1.428,0  c0.394-0.396,0.394-1.037,0-1.432L17.459,16.014z","fill","#121313"]],template:function(e,i){e&1&&(s(0,"span"),wt(),s(1,"svg",0),C(2,"path",1),l()())},styles:[".dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 1px #323232}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]{background-color:#fff;display:inline-block;color:#555;vertical-align:middle;max-width:100%;height:42px;line-height:44px}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;box-shadow:none;outline:none;background-color:transparent;padding:0 6px;margin:0;width:auto;max-width:inherit}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#777;opacity:1}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none;box-shadow:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #0006;border:1px solid #ccc}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #d9534f}.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;transition:all .25s;padding:.25rem 0;min-height:32px;cursor:text;border-bottom:2px solid #efefef}.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #2196F3}.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #f44336}.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.minimal.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:1px solid transparent}.minimal.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.minimal.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.minimal.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.minimal.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.minimal.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.dark.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #444}.dark.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.dark.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.dark.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.dark.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.dark.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #efefef}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #0275d8}.bootstrap.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #d9534f}.bootstrap.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;padding:4px;cursor:text;box-shadow:inset 0 1px 1px #00000013;border-radius:4px}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap3-info.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:1px solid #d9534f}.bootstrap3-info.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.error-message[_ngcontent-%COMP%]{font-size:.8em;color:#f44336;margin:.5em 0 0}.bootstrap[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d9534f}delete-icon[_nghost-%COMP%]{width:20px;height:16px;transition:all .15s;display:inline-block;text-align:right}delete-icon[_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#444}delete-icon[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{vertical-align:bottom;height:34px}delete-icon[_nghost-%COMP%]:hover{transform:scale(1.5) translateY(-3px)}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%]{text-align:right}.dark[_nghost-%COMP%]   path[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.dark[_nghost-%COMP%]   svg[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   svg[_ngcontent-%COMP%]{vertical-align:bottom;height:34px}.minimal[_nghost-%COMP%], .minimal   [_nghost-%COMP%]{text-align:right}.minimal[_nghost-%COMP%]   path[_ngcontent-%COMP%], .minimal   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#444}.minimal[_nghost-%COMP%]   svg[_ngcontent-%COMP%], .minimal   [_nghost-%COMP%]   svg[_ngcontent-%COMP%]{vertical-align:bottom;height:34px}.bootstrap[_nghost-%COMP%], .bootstrap   [_nghost-%COMP%]{text-align:right}.bootstrap[_nghost-%COMP%]   path[_ngcontent-%COMP%], .bootstrap   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.bootstrap[_nghost-%COMP%]   svg[_ngcontent-%COMP%], .bootstrap   [_nghost-%COMP%]   svg[_ngcontent-%COMP%]{vertical-align:bottom;height:34px}tag:focus[_nghost-%COMP%]   path[_ngcontent-%COMP%], tag:focus   [_nghost-%COMP%]   path[_ngcontent-%COMP%], tag:active[_nghost-%COMP%]   path[_ngcontent-%COMP%], tag:active   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.dark   tag:focus[_nghost-%COMP%]   path[_ngcontent-%COMP%], .dark   tag:focus   [_nghost-%COMP%]   path[_ngcontent-%COMP%], .dark   tag:active[_nghost-%COMP%]   path[_ngcontent-%COMP%], .dark   tag:active   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#000}.minimal   tag:focus[_nghost-%COMP%]   path[_ngcontent-%COMP%], .minimal   tag:focus   [_nghost-%COMP%]   path[_ngcontent-%COMP%], .minimal   tag:active[_nghost-%COMP%]   path[_ngcontent-%COMP%], .minimal   tag:active   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#000}.bootstrap   tag:focus[_nghost-%COMP%]   path[_ngcontent-%COMP%], .bootstrap   tag:focus   [_nghost-%COMP%]   path[_ngcontent-%COMP%], .bootstrap   tag:active[_nghost-%COMP%]   path[_ngcontent-%COMP%], .bootstrap   tag:active   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.bootstrap3-info[_nghost-%COMP%], .bootstrap3-info   [_nghost-%COMP%]{height:inherit}.bootstrap3-info[_nghost-%COMP%]   path[_ngcontent-%COMP%], .bootstrap3-info   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}"]}),o})(),za=typeof window<"u"?window.navigator:{userAgent:"Chrome",vendor:"Google Inc"},wp=/Chrome/.test(za.userAgent)&&/Google Inc/.test(za.vendor),Na=(()=>{class o{constructor(e,i,n){this.element=e,this.renderer=i,this.cdRef=n,this.disabled=!1,this.onSelect=new W,this.onRemove=new W,this.onBlur=new W,this.onKeyDown=new W,this.onTagEdited=new W,this.editing=!1,this.rippleState="none"}get readonly(){return typeof this.model!="string"&&this.model.readonly===!0}select(e){this.readonly||this.disabled||(e&&e.stopPropagation(),this.focus(),this.onSelect.emit(this.model))}remove(e){e.stopPropagation(),this.onRemove.emit(this)}focus(){this.element.nativeElement.focus()}move(){this.moving=!0}keydown(e){if(this.editing){if(e.keyCode===13)return this.disableEditMode(e)}else this.onKeyDown.emit({event:e,model:this.model})}blink(){let e=this.element.nativeElement.classList;e.add("blink"),setTimeout(()=>e.remove("blink"),50)}toggleEditMode(){if(this.editable)return this.editing?void 0:this.activateEditMode()}onBlurred(e){if(!this.editable)return;this.disableEditMode();let i=e.target.innerText,n=typeof this.model=="string"?i:$e(ve({},this.model),{[this.displayBy]:i});this.onBlur.emit(n)}getDisplayValue(e){return typeof e=="string"?e:e[this.displayBy]}get isRippleVisible(){return!this.readonly&&!this.editing&&wp&&this.hasRipple}disableEditMode(e){let i=this.element.nativeElement.classList,n=this.getContentEditableText();if(this.editing=!1,i.remove("tag--editing"),!n){this.setContentEditableText(this.model);return}this.storeNewValue(n),this.cdRef.detectChanges(),e&&e.preventDefault()}isDeleteIconVisible(){return!this.readonly&&!this.disabled&&this.removable&&!this.editing}getContentEditableText(){let e=this.getContentEditable();return e?e.innerText.trim():""}setContentEditableText(e){let i=this.getContentEditable(),n=this.getDisplayValue(e);i.innerText=n}activateEditMode(){this.element.nativeElement.classList.add("tag--editing"),this.editing=!0}storeNewValue(e){let i=a=>typeof a=="string"?a===e:a[this.displayBy]===e,n=()=>this.model[this.identifyBy]!==this.model[this.displayBy];if(i(this.model))return;let r=typeof this.model=="string"?e:{index:this.index,[this.identifyBy]:n()?this.model[this.identifyBy]:e,[this.displayBy]:e};this.canAddTag(r)?this.onTagEdited.emit({tag:r,index:this.index}):this.setContentEditableText(this.model)}getContentEditable(){return this.element.nativeElement.querySelector("[contenteditable]")}}return o.\u0275fac=function(e){return new(e||o)(j(fe),j(me),j(tn))},o.\u0275cmp=N({type:o,selectors:[["tag"]],viewQuery:function(e,i){if(e&1&&ie(Aa,5),e&2){let n;Z(n=G())&&(i.ripple=n.first)}},hostVars:2,hostBindings:function(e,i){e&1&&F("keydown",function(r){return i.keydown(r)}),e&2&&V("moving",i.moving)},inputs:{model:"model",removable:"removable",editable:"editable",template:"template",displayBy:"displayBy",identifyBy:"identifyBy",index:"index",hasRipple:"hasRipple",disabled:"disabled",canAddTag:"canAddTag"},outputs:{onSelect:"onSelect",onRemove:"onRemove",onBlur:"onBlur",onKeyDown:"onKeyDown",onTagEdited:"onTagEdited"},standalone:!1,decls:4,vars:8,consts:[[3,"click","dblclick","mousedown","mouseup","ngSwitch"],[4,"ngSwitchCase"],["class","tag-wrapper",4,"ngSwitchCase"],[3,"state",4,"ngIf"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],[1,"tag-wrapper"],["spellcheck","false",1,"tag__text","inline",3,"keydown.enter","keydown.escape","click","blur"],["aria-label","Remove tag","role","button",3,"click",4,"ngIf"],["aria-label","Remove tag","role","button",3,"click"],[3,"state"]],template:function(e,i){e&1&&(s(0,"div",0),F("click",function(r){return i.select(r)})("dblclick",function(){return i.toggleEditMode()})("mousedown",function(){return i.rippleState="clicked"})("mouseup",function(){return i.rippleState="none"}),T(1,ep,2,6,"div",1)(2,ip,4,4,"div",2),l(),T(3,np,1,2,"tag-ripple",3)),e&2&&(V("disabled",i.disabled),v("ngSwitch",!!i.template),Ft("tabindex",-1)("aria-label",i.getDisplayValue(i.model)),c(),v("ngSwitchCase",!0),c(),v("ngSwitchCase",!1),c(),v("ngIf",i.isRippleVisible))},dependencies:[Sp,Aa,uo,fo,Ri,X],styles:["[_nghost-%COMP%], [_nghost-%COMP%] > div[_ngcontent-%COMP%], [_nghost-%COMP%] > div[_ngcontent-%COMP%]:focus{outline:0;overflow:hidden;transition:opacity 1s;z-index:1}[_nghost-%COMP%]{max-width:400px}.blink[_nghost-%COMP%]{-webkit-animation:_ngcontent-%COMP%_blink .3s normal forwards ease-in-out;animation:_ngcontent-%COMP%_blink .3s normal forwards ease-in-out}@-webkit-keyframes _ngcontent-%COMP%_blink{0%{opacity:.3}}@keyframes _ngcontent-%COMP%_blink{0%{opacity:.3}}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   [contenteditable=true][_ngcontent-%COMP%]{outline:0}.tag-wrapper[_ngcontent-%COMP%]{flex-direction:row;display:flex}.tag__text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),o})(),Ip=[_i("animation",[ri("in",he({opacity:1})),ri("out",he({opacity:0})),jt(":enter",[Tt("{{ enter }}",ai([he({opacity:0,offset:0,transform:"translate(0px, 20px)"}),he({opacity:.3,offset:.3,transform:"translate(0px, -10px)"}),he({opacity:.5,offset:.5,transform:"translate(0px, 0px)"}),he({opacity:.75,offset:.75,transform:"translate(0px, 5px)"}),he({opacity:1,offset:1,transform:"translate(0px, 0px)"})]))]),jt(":leave",[Tt("{{ leave }}",ai([he({opacity:1,transform:"translateX(0)",offset:0}),he({opacity:1,transform:"translateX(-15px)",offset:.7}),he({opacity:0,transform:"translateX(100%)",offset:1})]))])])],Yo=(()=>{class o{constructor(e){this.injector=e,this.offset=q.dropdown.offset,this.focusFirstElement=q.dropdown.focusFirstElement,this.showDropdownIfEmpty=q.dropdown.showDropdownIfEmpty,this.minimumTextLength=q.dropdown.minimumTextLength,this.limitItemsTo=q.dropdown.limitItemsTo,this.displayBy=q.dropdown.displayBy,this.identifyBy=q.dropdown.identifyBy,this.matchingFn=q.dropdown.matchingFn,this.appendToBody=q.dropdown.appendToBody,this.keepOpen=q.dropdown.keepOpen,this.dynamicUpdate=q.dropdown.dynamicUpdate,this.zIndex=q.dropdown.zIndex,this.items=[],this.tagInput=this.injector.get(io),this._autocompleteItems=[],this.show=()=>{let i=this.tagInput.items.length===this.tagInput.maxItems,n=this.getFormValue(),r=n.trim().length>=this.minimumTextLength,a=this.calculatePosition(),d=this.getMatchingItems(n),m=d.length>0,f=this.isVisible===!1,h=this.showDropdownIfEmpty&&m&&!n,x=this.tagInput.disable,I=f&&(m&&r||h),w=this.isVisible&&!m;if(this.autocompleteObservable&&r)return this.getItemsFromObservable(n);if(!this.showDropdownIfEmpty&&!n||i||x)return this.dropdown.hide();this.setItems(d),I?this.dropdown.show(a):w&&this.hide()},this.requestAdding=i=>Xi(this,null,function*(){let n=this.createTagModel(i);yield this.tagInput.onAddingRequested(!0,n).catch(()=>{})}),this.resetItems=()=>{this.items=[]},this.getItemsFromObservable=i=>{this.setLoadingState(!0);let n=r=>{this.setLoadingState(!1).populateItems(r),this.setItems(this.getMatchingItems(i)),this.items.length?this.dropdown.show(this.calculatePosition()):this.dropdown.hide()};this.autocompleteObservable(i).pipe(gi()).subscribe(n,()=>this.setLoadingState(!1))}}set autocompleteItems(e){this._autocompleteItems=e}get autocompleteItems(){let e=this._autocompleteItems;return e?e.map(i=>typeof i=="string"?{[this.displayBy]:i,[this.identifyBy]:i}:i):[]}ngAfterViewInit(){this.onItemClicked().subscribe(n=>{this.requestAdding(n)}),this.onHide().subscribe(this.resetItems);let e=200,i=this.keepOpen;this.tagInput.onTextChange.asObservable().pipe(tr(),ki(e),at(n=>i===!1?n.length>0:!0)).subscribe(this.show)}updatePosition(){let e=this.tagInput.inputForm.getElementPosition();this.dropdown.menu.updatePosition(e,this.dynamicUpdate)}get isVisible(){return this.dropdown.menu.dropdownState.menuState.isVisible}onHide(){return this.dropdown.onHide}onItemClicked(){return this.dropdown.onItemClicked}get selectedItem(){return this.dropdown.menu.dropdownState.dropdownState.selectedItem}get state(){return this.dropdown.menu.dropdownState}hide(){this.resetItems(),this.dropdown.hide()}scrollListener(){!this.isVisible||!this.dynamicUpdate||this.updatePosition()}onWindowBlur(){this.dropdown.hide()}getFormValue(){let e=this.tagInput.formValue;return e?e.toString().trim():""}calculatePosition(){return this.tagInput.inputForm.getElementPosition()}createTagModel(e){let i=typeof e.value=="string"?e.value:e.value[this.displayBy],n=typeof e.value=="string"?e.value:e.value[this.identifyBy];return $e(ve({},e.value),{[this.tagInput.displayBy]:i,[this.tagInput.identifyBy]:n})}getMatchingItems(e){if(!e&&!this.showDropdownIfEmpty)return[];let i=this.tagInput.allowDupes;return this.autocompleteItems.filter(n=>{let r=i?!1:this.tagInput.tags.some(a=>{let d=this.tagInput.identifyBy;return(typeof a.model=="string"?a.model:a.model[d])===n[this.identifyBy]});return this.matchingFn(e,n)&&r===!1})}setItems(e){this.items=e.slice(0,this.limitItemsTo||e.length)}populateItems(e){return this.autocompleteItems=e.map(i=>typeof i=="string"?{[this.displayBy]:i,[this.identifyBy]:i}:i),this}setLoadingState(e){return this.tagInput.isLoading=e,this}}return o.\u0275fac=function(e){return new(e||o)(j(nr))},o.\u0275cmp=N({type:o,selectors:[["tag-input-dropdown"]],contentQueries:function(e,i,n){if(e&1&&zt(n,mo,4),e&2){let r;Z(r=G())&&(i.templates=r)}},viewQuery:function(e,i){if(e&1&&ie(eo,5),e&2){let n;Z(n=G())&&(i.dropdown=n.first)}},hostBindings:function(e,i){e&1&&F("scroll",function(){return i.scrollListener()},!1,It)("blur",function(){return i.onWindowBlur()},!1,It)},inputs:{offset:"offset",focusFirstElement:"focusFirstElement",showDropdownIfEmpty:"showDropdownIfEmpty",autocompleteObservable:"autocompleteObservable",minimumTextLength:"minimumTextLength",limitItemsTo:"limitItemsTo",displayBy:"displayBy",identifyBy:"identifyBy",matchingFn:"matchingFn",appendToBody:"appendToBody",keepOpen:"keepOpen",dynamicUpdate:"dynamicUpdate",zIndex:"zIndex",autocompleteItems:"autocompleteItems"},standalone:!1,decls:3,vars:6,consts:[[3,"dynamicUpdate"],[3,"focusFirstElement","zIndex","appendToBody","offset"],[3,"value","ngSwitch",4,"ngFor","ngForOf"],[3,"value","ngSwitch"],[3,"innerHTML",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"innerHTML"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){e&1&&(s(0,"ng2-dropdown",0)(1,"ng2-dropdown-menu",1),T(2,lp,3,3,"ng2-menu-item",2),l()()),e&2&&(v("dynamicUpdate",i.dynamicUpdate),c(),v("focusFirstElement",i.focusFirstElement)("zIndex",i.zIndex)("appendToBody",i.appendToBody)("offset",i.offset),c(),v("ngForOf",i.items))},dependencies:[eo,$o,Qo,J,uo,fo,dr,Ri,hp],encapsulation:2}),o})(),Fp={provide:Br,useExisting:ir(()=>io),multi:!0},io=(()=>{class o extends xp{constructor(e,i){super(),this.renderer=e,this.dragProvider=i,this.separatorKeys=q.tagInput.separatorKeys,this.separatorKeyCodes=q.tagInput.separatorKeyCodes,this.placeholder=q.tagInput.placeholder,this.secondaryPlaceholder=q.tagInput.secondaryPlaceholder,this.maxItems=q.tagInput.maxItems,this.validators=q.tagInput.validators,this.asyncValidators=q.tagInput.asyncValidators,this.onlyFromAutocomplete=q.tagInput.onlyFromAutocomplete,this.errorMessages=q.tagInput.errorMessages,this.theme=q.tagInput.theme,this.onTextChangeDebounce=q.tagInput.onTextChangeDebounce,this.inputId=q.tagInput.inputId,this.inputClass=q.tagInput.inputClass,this.clearOnBlur=q.tagInput.clearOnBlur,this.hideForm=q.tagInput.hideForm,this.addOnBlur=q.tagInput.addOnBlur,this.addOnPaste=q.tagInput.addOnPaste,this.pasteSplitPattern=q.tagInput.pasteSplitPattern,this.blinkIfDupe=q.tagInput.blinkIfDupe,this.removable=q.tagInput.removable,this.editable=q.tagInput.editable,this.allowDupes=q.tagInput.allowDupes,this.modelAsStrings=q.tagInput.modelAsStrings,this.trimTags=q.tagInput.trimTags,this.ripple=q.tagInput.ripple,this.tabindex=q.tagInput.tabIndex,this.disable=q.tagInput.disable,this.dragZone=q.tagInput.dragZone,this.onRemoving=q.tagInput.onRemoving,this.onAdding=q.tagInput.onAdding,this.animationDuration=q.tagInput.animationDuration,this.onAdd=new W,this.onRemove=new W,this.onSelect=new W,this.onFocus=new W,this.onBlur=new W,this.onTextChange=new W,this.onPaste=new W,this.onValidationError=new W,this.onTagEdited=new W,this.isLoading=!1,this.listeners={[Wo]:[],[_p]:[]},this.inputTextChange=new W,this.inputTextValue="",this.errors=[],this.appendTag=(n,r=this.items.length)=>{let a=this.items,d=this.modelAsStrings?n[this.identifyBy]:n;this.items=[...a.slice(0,r),d,...a.slice(r,a.length)]},this.createTag=n=>{let r=(a,d)=>typeof a=="string"?a.trim():a[d];return $e(ve({},typeof n!="string"?n:{}),{[this.displayBy]:this.trimTags?r(n,this.displayBy):n,[this.identifyBy]:this.trimTags?r(n,this.identifyBy):n})},this.isTagValid=(n,r=!1)=>{let a=this.dropdown?this.dropdown.selectedItem:void 0,d=this.getItemDisplay(n).trim();if(a&&!r||!d)return!1;let m=this.findDupe(n,r);if(!this.allowDupes&&m&&this.blinkIfDupe){let x=this.tags.find(I=>this.getItemValue(I.model)===this.getItemValue(m));x&&x.blink()}let f=r&&this.onlyFromAutocomplete,h=[!m||this.allowDupes,!this.maxItemsReached,f||!this.onlyFromAutocomplete];return h.filter(Boolean).length===h.length},this.onPasteCallback=n=>Xi(this,null,function*(){let a=(()=>{let f=!!window.clipboardData,h=f?window.clipboardData:n.clipboardData,x=f?"Text":"text/plain";return h===null?"":h.getData(x)||""})(),d=a.split(this.pasteSplitPattern).map(f=>{let h=this.createTag(f);return this.setInputValue(h[this.displayBy]),this.onAddingRequested(!1,h)}),m=()=>setTimeout(()=>this.setInputValue(""),50);Promise.all(d).then(()=>{this.onPaste.emit(a),m()}).catch(m)})}get inputText(){return this.inputTextValue}set inputText(e){this.inputTextValue=e,this.inputTextChange.emit(e)}get tabindexAttr(){return this.tabindex!==""?"-1":""}ngAfterViewInit(){this.setUpKeypressListeners(),this.setupSeparatorKeysListener(),this.setUpInputKeydownListeners(),this.onTextChange.observers.length&&this.setUpTextChangeSubscriber(),(this.clearOnBlur||this.addOnBlur)&&this.setUpOnBlurSubscriber(),this.addOnPaste&&this.setUpOnPasteListener();let e=this.inputForm.form.statusChanges;e.pipe(at(i=>i!=="PENDING")).subscribe(()=>{this.errors=this.inputForm.getErrorMessages(this.errorMessages)}),this.isProgressBarVisible$=e.pipe(rt(i=>i==="PENDING"||this.isLoading)),this.hideForm&&this.inputForm.destroy()}ngOnInit(){this.maxItems!==void 0&&this.items&&this.items.length>this.maxItems&&(this.maxItems=this.items.length,console.warn(bp)),this.editable=this.onlyFromAutocomplete?!1:this.editable,this.setAnimationMetadata()}onRemoveRequested(e,i){return new Promise(n=>{let r=a=>{this.removeItem(a,i),n(e)};this.onRemoving?this.onRemoving(e).pipe(gi()).subscribe(r):r(e)})}onAddingRequested(e,i,n,r){return new Promise((a,d)=>{let m=f=>this.addItem(e,f,n,r).then(a).catch(d);return this.onAdding?this.onAdding(i).pipe(gi()).subscribe(m,d):m(i)})}selectItem(e,i=!0){e&&typeof e!="string"&&e.readonly||this.selectedTag===e||(this.selectedTag=e,i&&this.onSelect.emit(e))}fireEvents(e,i){this.listeners[e].forEach(n=>n.call(this,i))}handleKeydown(e){let i=e.event,n=i.keyCode||i.which,r=i.shiftKey||!1;switch(yp[n]){case Dt.DELETE:if(this.selectedTag&&this.removable){let a=this.items.indexOf(this.selectedTag);this.onRemoveRequested(this.selectedTag,a)}break;case Dt.SWITCH_PREV:this.moveToTag(e.model,qo);break;case Dt.SWITCH_NEXT:this.moveToTag(e.model,to);break;case Dt.TAB:if(r){if(this.isFirstTag(e.model))return;this.moveToTag(e.model,qo)}else{if(this.isLastTag(e.model)&&(this.disable||this.maxItemsReached))return;this.moveToTag(e.model,to)}break;default:return}i.preventDefault()}onFormSubmit(){return Xi(this,null,function*(){try{yield this.onAddingRequested(!1,this.formValue)}catch{return}})}setInputValue(e,i=!0){this.getControl().setValue(e,{emitEvent:i})}getControl(){return this.inputForm.value}focus(e=!1,i=!1){this.dragProvider.getState("dragging")||(this.selectItem(void 0,!1),e&&(this.inputForm.focus(),this.onFocus.emit(this.formValue)))}blur(){this.onTouched(),this.onBlur.emit(this.formValue)}hasErrors(){return!!this.inputForm&&this.inputForm.hasErrors()}isInputFocused(){return!!this.inputForm&&this.inputForm.isInputFocused()}hasCustomTemplate(){let e=this.templates?this.templates.first:void 0,i=this.dropdown&&this.dropdown.templates?this.dropdown.templates.first:void 0;return!!(e&&e!==i)}get maxItemsReached(){return this.maxItems!==void 0&&this.items.length>=this.maxItems}get formValue(){let e=this.inputForm.value;return e?e.value:""}onDragStarted(e,i,n){e.stopPropagation();let r={zone:this.dragZone,tag:i,index:n};this.dragProvider.setSender(this),this.dragProvider.setDraggedItem(e,r),this.dragProvider.setState({dragging:!0,index:n})}onDragOver(e,i){this.dragProvider.setState({dropping:!0}),this.dragProvider.setReceiver(this),e.preventDefault()}onTagDropped(e,i){let n=this.dragProvider.getDraggedItem(e);!n||n.zone!==this.dragZone||(this.dragProvider.onTagDropped(n.tag,n.index,i),e.preventDefault(),e.stopPropagation())}isDropping(){let e=this.dragProvider.receiver===this,i=this.dragProvider.getState("dropping");return!!(e&&i)}onTagBlurred(e,i){this.items[i]=e,this.blur()}trackBy(e,i){return i[this.identifyBy]}updateEditedTag(e){this.onTagEdited.emit(e)}moveToTag(e,i){let n=this.isLastTag(e),r=this.isFirstTag(e);if(i===to&&n||i===qo&&r){this.focus(!0);return}let d=i===to?1:-1,m=this.getTagIndex(e)+d,f=this.getTagAtIndex(m);return f.select.call(f)}isFirstTag(e){return this.tags.first.model===e}isLastTag(e){return this.tags.last.model===e}getTagIndex(e){return this.tags.toArray().findIndex(n=>n.model===e)}getTagAtIndex(e){return this.tags.toArray()[e]}removeItem(e,i){this.items=this.getItemsWithout(i),this.selectedTag===e&&this.selectItem(void 0,!1),this.focus(!0,!1),this.onRemove.emit(e)}addItem(e=!1,i,n,r){let a=this.getItemDisplay(i),d=this.createTag(i);return e&&this.setInputValue(this.getItemValue(i,!0)),new Promise((m,f)=>{let h=()=>{this.setInputValue(""),r?this.focus(!1,!1):this.focus(!0,!1),m(a)},x=()=>{this.appendTag(d,n),this.onAdd.emit(d),this.dropdown&&(this.dropdown.hide(),this.dropdown.showDropdownIfEmpty&&this.dropdown.show())},I=this.inputForm.form.status,w=this.isTagValid(d,e),P=()=>(this.onValidationError.emit(d),f());if(I==="VALID"&&w)return x(),h();if(I==="INVALID"||!w)return h(),P();if(I==="PENDING")return this.inputForm.form.statusChanges.pipe(at(E=>E!=="PENDING"),gi()).subscribe(E=>E==="VALID"&&w?(x(),h()):(h(),P()))})}setupSeparatorKeysListener(){let e=this.separatorKeyCodes.length>0||this.separatorKeys.length>0,i=n=>{let r=this.separatorKeyCodes.indexOf(n.keyCode)>=0,a=this.separatorKeys.indexOf(n.key)>=0,d=n.keyCode===229;(r||a&&!d)&&(n.preventDefault(),this.onAddingRequested(!1,this.formValue).catch(()=>{}))};Va.call(this,Wo,i,e)}setUpKeypressListeners(){let e=i=>{(i.keyCode===37||i.keyCode===8)&&!this.formValue&&this.items.length&&this.tags.last.select.call(this.tags.last)};Va.call(this,Wo,e)}setUpInputKeydownListeners(){this.inputForm.onKeydown.subscribe(e=>{e.key==="Backspace"&&this.formValue.trim()===""&&e.preventDefault()})}setUpOnPasteListener(){let e=this.inputForm.input.nativeElement;this.renderer.listen(e,"paste",i=>(this.onPasteCallback(i),i.preventDefault(),!0))}setUpTextChangeSubscriber(){this.inputForm.form.valueChanges.pipe(ki(this.onTextChangeDebounce)).subscribe(e=>{this.onTextChange.emit(e.item)})}setUpOnBlurSubscriber(){let e=()=>!(this.dropdown&&this.dropdown.isVisible)&&!!this.formValue;this.inputForm.onBlur.pipe(ki(100),at(e)).subscribe(()=>{let i=()=>this.setInputValue("");if(this.addOnBlur)return this.onAddingRequested(!1,this.formValue,void 0,!0).then(i).catch(i);i()})}findDupe(e,i){let n=i?this.dropdown.identifyBy:this.identifyBy,r=e[n];return this.items.find(a=>this.getItemValue(a)===r)}setAnimationMetadata(){this.animationMetadata={value:"in",params:ve({},this.animationDuration)}}}return o.\u0275fac=function(e){return new(e||o)(j(me),j(La))},o.\u0275cmp=N({type:o,selectors:[["tag-input"]],contentQueries:function(e,i,n){if(e&1&&(zt(n,Yo,5),zt(n,mo,4)),e&2){let r;Z(r=G())&&(i.dropdown=r.first),Z(r=G())&&(i.templates=r)}},viewQuery:function(e,i){if(e&1&&(ie(Ra,5),ie(Na,5)),e&2){let n;Z(n=G())&&(i.inputForm=n.first),Z(n=G())&&(i.tags=n)}},hostVars:1,hostBindings:function(e,i){e&2&&Ft("tabindex",i.tabindexAttr)},inputs:{separatorKeys:"separatorKeys",separatorKeyCodes:"separatorKeyCodes",placeholder:"placeholder",secondaryPlaceholder:"secondaryPlaceholder",maxItems:"maxItems",validators:"validators",asyncValidators:"asyncValidators",onlyFromAutocomplete:"onlyFromAutocomplete",errorMessages:"errorMessages",theme:"theme",onTextChangeDebounce:"onTextChangeDebounce",inputId:"inputId",inputClass:"inputClass",clearOnBlur:"clearOnBlur",hideForm:"hideForm",addOnBlur:"addOnBlur",addOnPaste:"addOnPaste",pasteSplitPattern:"pasteSplitPattern",blinkIfDupe:"blinkIfDupe",removable:"removable",editable:"editable",allowDupes:"allowDupes",modelAsStrings:"modelAsStrings",trimTags:"trimTags",inputText:"inputText",ripple:"ripple",tabindex:"tabindex",disable:"disable",dragZone:"dragZone",onRemoving:"onRemoving",onAdding:"onAdding",animationDuration:"animationDuration"},outputs:{onAdd:"onAdd",onRemove:"onRemove",onSelect:"onSelect",onFocus:"onFocus",onBlur:"onBlur",onTextChange:"onTextChange",onPaste:"onPaste",onValidationError:"onValidationError",onTagEdited:"onTagEdited",inputTextChange:"inputTextChange"},standalone:!1,features:[Ji([Fp]),sr],ngContentSelectors:cp,decls:8,vars:27,consts:[[1,"ng2-tag-input",3,"click","drop","dragenter","dragover","dragend","ngClass"],[1,"ng2-tags-container"],[3,"draggable","canAddTag","disabled","hasRipple","index","removable","editable","displayBy","identifyBy","template","model","onSelect","onRemove","onKeyDown","onTagEdited","onBlur","dragstart","drop","dragenter","dragover","dragleave",4,"ngFor","ngForOf","ngForTrackBy"],[3,"onSubmit","onBlur","click","onKeydown","onKeyup","inputText","disabled","validators","asyncValidators","hidden","placeholder","inputClass","inputId","tabindex"],["class","progress-bar",4,"ngIf"],["class","error-messages",3,"ngClass",4,"ngIf"],[3,"onSelect","onRemove","onKeyDown","onTagEdited","onBlur","dragstart","drop","dragenter","dragover","dragleave","draggable","canAddTag","disabled","hasRipple","index","removable","editable","displayBy","identifyBy","template","model"],[1,"progress-bar"],[1,"error-messages",3,"ngClass"],["class","error-message",4,"ngFor","ngForOf"],[1,"error-message"]],template:function(e,i){e&1&&(ni(),s(0,"div",0),F("click",function(){return i.focus(!0,!1)})("drop",function(r){return i.dragZone?i.onTagDropped(r,void 0):void 0})("dragenter",function(r){return i.dragZone?i.onDragOver(r):void 0})("dragover",function(r){return i.dragZone?i.onDragOver(r):void 0})("dragend",function(){return i.dragZone?i.dragProvider.onDragEnd():void 0}),s(1,"div",1),T(2,dp,1,14,"tag",2),s(3,"tag-input-form",3),F("onSubmit",function(){return i.onFormSubmit()})("onBlur",function(){return i.blur()})("click",function(){return i.dropdown?i.dropdown.show():void 0})("onKeydown",function(r){return i.fireEvents("keydown",r)})("onKeyup",function(r){return i.fireEvents("keyup",r)}),l()(),T(4,pp,1,0,"div",4),u(5,"async"),l(),T(6,up,2,2,"div",5),At(7)),e&2&&(V("ng2-tag-input--dropping",i.isDropping())("ng2-tag-input--disabled",i.disable)("ng2-tag-input--loading",i.isLoading)("ng2-tag-input--invalid",i.hasErrors())("ng2-tag-input--focused",i.isInputFocused()),v("ngClass",i.theme),Ft("tabindex",-1),c(2),v("ngForOf",i.items)("ngForTrackBy",i.trackBy),c(),v("inputText",i.inputText)("disabled",i.disable)("validators",i.validators)("asyncValidators",i.asyncValidators)("hidden",i.maxItemsReached)("placeholder",i.items.length?i.placeholder:i.secondaryPlaceholder)("inputClass",i.inputClass)("inputId",i.inputId)("tabindex",i.tabindex),c(),v("ngIf",g(5,25,i.isProgressBarVisible$)),c(2),v("ngIf",i.hasErrors()))},dependencies:[Na,Ra,lt,J,X,pr],styles:['.dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 1px #323232}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]{background-color:#fff;display:inline-block;color:#555;vertical-align:middle;max-width:100%;height:42px;line-height:44px}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;box-shadow:none;outline:none;background-color:transparent;padding:0 6px;margin:0;width:auto;max-width:inherit}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#777;opacity:1}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none;box-shadow:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #0006;border:1px solid #ccc}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #d9534f}.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;transition:all .25s;padding:.25rem 0;min-height:32px;cursor:text;border-bottom:2px solid #efefef}.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #2196F3}.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #f44336}.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.minimal.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:1px solid transparent}.minimal.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.minimal.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.minimal.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.minimal.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.minimal.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.dark.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #444}.dark.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.dark.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.dark.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.dark.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.dark.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #efefef}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #0275d8}.bootstrap.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #d9534f}.bootstrap.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;padding:4px;cursor:text;box-shadow:inset 0 1px 1px #00000013;border-radius:4px}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap3-info.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:1px solid #d9534f}.bootstrap3-info.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.error-message[_ngcontent-%COMP%]{font-size:.8em;color:#f44336;margin:.5em 0 0}.bootstrap[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d9534f}.progress-bar[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%]:before{height:2px;width:100%;margin:0}.progress-bar[_ngcontent-%COMP%]{background-color:#2196f3;display:flex;position:absolute;bottom:0}.progress-bar[_ngcontent-%COMP%]:before{background-color:#82c4f8;content:"";-webkit-animation:_ngcontent-%COMP%_running-progress 2s cubic-bezier(.4,0,.2,1) infinite;animation:_ngcontent-%COMP%_running-progress 2s cubic-bezier(.4,0,.2,1) infinite}@-webkit-keyframes _ngcontent-%COMP%_running-progress{0%{margin-left:0;margin-right:100%}50%{margin-left:25%;margin-right:0}to{margin-left:100%;margin-right:0}}@keyframes _ngcontent-%COMP%_running-progress{0%{margin-left:0;margin-right:100%}50%{margin-left:25%;margin-right:0}to{margin-left:100%;margin-right:0}}tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;font-family:Roboto,Helvetica Neue,sans-serif;font-weight:400;font-size:1em;letter-spacing:.05rem;color:#444;border-radius:16px;transition:all .3s;margin:.1rem .3rem .1rem 0;padding:.08rem .45rem;height:32px;line-height:34px;background:#efefef;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;outline:0;cursor:pointer;position:relative}tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):focus{background:#2196F3;color:#fff;box-shadow:0 2px 3px 1px #d4d1d1}tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):active{background:#0d8aee;color:#fff;box-shadow:0 2px 3px 1px #d4d1d1}tag[_ngcontent-%COMP%]:not(:focus):not(.tag--editing):not(:active):not(.readonly):hover{background:#e2e2e2;color:#000;color:initial;box-shadow:0 2px 3px 1px #d4d1d1}tag.readonly[_ngcontent-%COMP%]{cursor:default}tag.readonly[_ngcontent-%COMP%]:focus, tag[_ngcontent-%COMP%]:focus{outline:0}tag.tag--editing[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;cursor:text}.minimal[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;border-radius:0;background:#f9f9f9;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;outline:0;cursor:pointer;position:relative}.minimal[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):focus{background:#d0d0d0;color:#000;color:initial}.minimal[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):active{background:#d0d0d0;color:#000;color:initial}.minimal[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(:focus):not(.tag--editing):not(:active):not(.readonly):hover{background:#ececec}.minimal[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]{cursor:default}.minimal[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]:focus, .minimal[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{outline:0}.minimal[_ngcontent-%COMP%]   tag.tag--editing[_ngcontent-%COMP%]{cursor:text}.dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;color:#f9f9f9;border-radius:3px;background:#444;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;outline:0;cursor:pointer;position:relative}.dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):focus{background:#efefef;color:#444}.dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(:focus):not(.tag--editing):not(:active):not(.readonly):hover{background:#2b2b2b;color:#f9f9f9}.dark[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]{cursor:default}.dark[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]:focus, .dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{outline:0}.dark[_ngcontent-%COMP%]   tag.tag--editing[_ngcontent-%COMP%]{cursor:text}.bootstrap[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;color:#f9f9f9;border-radius:.25rem;background:#0275d8;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;outline:0;cursor:pointer;position:relative}.bootstrap[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):focus{background:#025aa5}.bootstrap[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):active{background:#025aa5}.bootstrap[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(:focus):not(.tag--editing):not(:active):not(.readonly):hover{background:#0267bf;color:#f9f9f9}.bootstrap[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]{cursor:default}.bootstrap[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]:focus, .bootstrap[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{outline:0}.bootstrap[_ngcontent-%COMP%]   tag.tag--editing[_ngcontent-%COMP%]{cursor:text}.bootstrap3-info[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;font-family:inherit;font-weight:400;font-size:95%;color:#fff;border-radius:.25em;background:#5bc0de;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;outline:0;cursor:pointer;position:relative;padding:.25em .6em;text-align:center;white-space:nowrap}.bootstrap3-info[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):focus{background:#28a1c5}.bootstrap3-info[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):active{background:#28a1c5}.bootstrap3-info[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(:focus):not(.tag--editing):not(:active):not(.readonly):hover{background:#46b8da;color:#fff}.bootstrap3-info[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]{cursor:default}.bootstrap3-info[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]:focus, .bootstrap3-info[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{outline:0}.bootstrap3-info[_ngcontent-%COMP%]   tag.tag--editing[_ngcontent-%COMP%]{cursor:text}[_nghost-%COMP%]{display:block}'],data:{animation:Ip}}),o})(),Pp=new Xo,Ua=(()=>{class o{static withDefaults(e){Pp.setOptions(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=Rt({type:o}),o.\u0275inj=Bt({providers:[La,{provide:Vr,useValue:!1}],imports:[[oi,dn,cn,Da]]}),o})();var jp=o=>({"background-color":o});function Ep(o,t){o&1&&(s(0,"div",33),p(1),u(2,"translate"),l()),o&2&&(c(),D(" ",g(2,1,"RequieredField")," "))}function Mp(o,t){if(o&1){let e=k();s(0,"div",34),F("click",function(){let n=b(e).$implicit,r=_();return y(r.selectColor(n.catId))}),l()}if(o&2){let e=t.$implicit,i=_();V("selected",i.selectedColorId===e.catId),v("ngStyle",ce(3,jp,e.colorDegree))}}function Op(o,t){if(o&1&&(s(0,"div",35)(1,"h5"),p(2),u(3,"translate"),l(),s(4,"div",36),C(5,"img",37),u(6,"translate"),l()()),o&2){let e=_();c(2),D("",g(3,3,"Folders.ImagePreview"),":"),c(3),L("alt",g(6,5,"Folders.UploadedImage")),v("src",e.imagePreview,H)}}var Oi=class o{constructor(t,e,i,n,r){this.activeModal=t;this.translate=e;this.toastr=i;this.projectService=n;this.categoriesService=r}isSuccess=new W;projectId;parentId;folderForm;hasError=!1;isLoading=!1;isSubmittedItem=!1;selectedFile=null;imagePreview=null;selectedColorId=null;colors=[];tagsInput="";tags=[];isFetchingColors=!1;isFetchingTags=!1;subscriptions=[];ngOnInit(){this.fetchColors(),this.initializeForm()}initializeForm(){this.folderForm=new Wt({title:new ue("",si.required),brief:new ue(""),imageFile:new ue(null),parentId:new ue(this.parentId),projectId:new ue(this.projectId),typeId:new ue(11),type:new ue(0),isActive:new ue(!0),tags:new ue([])})}fetchColors(){if(this.isFetchingColors)return;this.isFetchingColors=!0;let t=this.categoriesService.fetchColors().subscribe(e=>{e&&(console.log("Project folders:",e),this.colors=e.data,console.log(this.colors)),this.isFetchingColors=!1});this.subscriptions.push(t)}selectColor(t){this.selectedColorId=t}requestAutocompleteItems=t=>!t||t.length<2?Ct([]):this.projectService.fetchTags(t,1,5);submitFolder(){if(this.isSubmittedItem=!0,this.folderForm.invalid){this.folderForm.markAllAsTouched(),this.toastr.error(this.translate.instant("Folders.EnterValidData"));return}let t=new FormData;Object.keys(this.folderForm.controls).forEach(i=>{i=="tags"?this.folderForm.get(i)?.value.forEach(n=>{t.append(i,n?.display)}):t.append(i,this.folderForm.get(i)?.value)}),this.selectedFile&&t.append("imageFile",this.selectedFile,this.selectedFile.name),this.selectedColorId&&t.append("colorId",this.selectedColorId.toString());let e=this.projectService.createFolder(t).subscribe(i=>{i?(this.toastr.success(this.translate.instant("Folders.FolderAddedSuccessfully")),this.isSuccess.emit(!0),this.closeModal()):this.showError(this.translate.instant("Folders.FolderCreationFailed"))},i=>{console.error("Error creating folder:",i),this.showError(this.translate.instant("Folders.FolderCreationFailed"))});this.subscriptions.push(e)}showError(t){this.toastr.error(t)}closeModal(){this.activeModal.close()}onDragOver(t){t.preventDefault()}onFileChange(t){let e=t.target.files[0];if(e){this.selectedFile=e;let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(e)}}onDrop(t){t.preventDefault();let e=t.dataTransfer?.files;if(e&&e.length){this.selectedFile=e[0];let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(this.selectedFile)}}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static \u0275fac=function(e){return new(e||o)(j(yi),j(de),j(oe),j(ae),j(tt))};static \u0275cmp=N({type:o,selectors:[["app-folder-create"]],outputs:{isSuccess:"isSuccess"},standalone:!1,decls:71,vars:57,consts:[["imageFile",""],[1,"modal-header"],[1,"d-flex","mod-head","justify-content-between"],["id","addFolderModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","ms-2",3,"click"],[3,"ngSubmit","formGroup"],["id","parentId","formControlName","parentId","type","hidden"],["id","projectId","formControlName","projectId","type","hidden"],["id","typeId","formControlName","typeId","type","hidden"],["id","type","formControlName","type","type","hidden"],["id","isActive","formControlName","isActive","type","hidden"],[1,"modal-body"],[1,"row"],[1,"col-lg-12"],[1,"form-group"],["for","title"],["id","title","type","text","formControlName","title",1,"form-control",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],["for","brief"],["id","brief","formControlName","brief","rows","3",1,"form-control",3,"placeholder"],[1,"color-options"],[1,"color-swatch","not-determined",3,"click"],["class","color-swatch",3,"ngStyle","selected","click",4,"ngFor","ngForOf"],["for","tags"],["id","tags","formControlName","tags",3,"editable","placeholder","onTextChangeDebounce","secondaryPlaceholder","onlyFromAutocomplete"],[3,"autocompleteObservable","showDropdownIfEmpty","minimumTextLength","zIndex"],["for","imageFile"],[1,"fileset",3,"click","dragover","drop"],["src","assets/images/Upload.svg",3,"alt"],["id","imageFile","accept","image/*","formControlName","imageFile","type","file",2,"display","none",3,"change"],["class","image-preview d-flex align-items-center mt-2",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"],[1,"alert","alert-danger"],[1,"color-swatch",3,"click","ngStyle"],[1,"image-preview","d-flex","align-items-center","mt-2"],[1,"proj-img-holder","ms-3"],[3,"src","alt"]],template:function(e,i){if(e&1){let n=k();s(0,"div",1)(1,"div",2)(2,"h5",3),p(3),u(4,"translate"),l(),s(5,"div")(6,"button",4),F("click",function(){return b(n),y(i.closeModal())}),l()()()(),s(7,"form",5),F("ngSubmit",function(){return b(n),y(i.submitFolder())}),C(8,"input",6)(9,"input",7)(10,"input",8)(11,"input",9)(12,"input",10),s(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"label",15),p(18),u(19,"translate"),s(20,"em"),p(21,"*"),l()(),C(22,"input",16),u(23,"translate"),l(),T(24,Ep,3,3,"div",17),l(),s(25,"div",13)(26,"div",14)(27,"label",18),p(28),u(29,"translate"),l(),C(30,"textarea",19),u(31,"translate"),l()(),s(32,"div",13)(33,"div",14)(34,"label"),p(35),u(36,"translate"),l(),s(37,"div",20)(38,"div",21),F("click",function(){return b(n),y(i.selectColor(null))}),l(),T(39,Mp,1,5,"div",22),l()()(),s(40,"div",13)(41,"div",14)(42,"label",23),p(43),u(44,"translate"),l(),s(45,"tag-input",24),u(46,"translate"),u(47,"translate"),C(48,"tag-input-dropdown",25),l()()(),s(49,"div",13)(50,"div",14)(51,"label",26),p(52),u(53,"translate"),l(),s(54,"div",27),F("click",function(){b(n);let a=A(64);return y(a.click())})("dragover",function(a){return b(n),y(i.onDragOver(a))})("drop",function(a){return b(n),y(i.onDrop(a))}),C(55,"img",28),u(56,"translate"),s(57,"h4"),p(58),u(59,"translate"),l(),s(60,"p"),p(61),u(62,"translate"),l(),s(63,"input",29,0),F("change",function(a){return b(n),y(i.onFileChange(a))}),l()()()(),s(65,"div",13),T(66,Op,7,7,"div",30),l()(),s(67,"div",31)(68,"button",32),p(69),u(70,"translate"),l()()()()}if(e&2){let n;c(3),S(g(4,29,"Folders.CreateFolder")),c(4),v("formGroup",i.folderForm),c(11),D("",g(19,31,"Folders.FolderName")," "),c(4),Pt("placeholder","",g(23,33,"Folders.WriteFolderNameHere"),"..."),c(2),v("ngIf",((n=i.folderForm.get("title"))==null?null:n.invalid)&&(i.isSubmittedItem||((n=i.folderForm.get("title"))==null?null:n.touched)||((n=i.folderForm.get("title"))==null?null:n.dirty))),c(4),S(g(29,35,"Folders.Description")),c(2),Pt("placeholder","",g(31,37,"Folders.WriteDescriptionHere"),"..."),c(5),S(g(36,39,"Folders.SelectColor")),c(3),V("selected",!i.selectedColorId),c(),v("ngForOf",i.colors),c(4),S(g(44,41,"Folders.Tags")),c(2),v("editable",!0)("placeholder",g(46,43,"Folders.EnterTags"))("onTextChangeDebounce",500)("secondaryPlaceholder",g(47,45,"Folders.SearchTags"))("onlyFromAutocomplete",!1),c(3),v("autocompleteObservable",i.requestAutocompleteItems)("showDropdownIfEmpty",!0)("minimumTextLength",2)("zIndex",1e4),c(4),D(" ",g(53,47,"Folders.AddPropjectPhoto"),""),c(3),L("alt",g(56,49,"Upload")),c(3),S(g(59,51,"Folders.DropImageHereOrBrowse")),c(3),S(g(62,53,"Folders.PhotoInfo")),c(5),v("ngIf",i.imagePreview),c(3),D(" ",g(70,55,"Save")," ")}},dependencies:[J,X,nn,Fe,Le,Ue,Ie,Xt,Yt,io,Yo,re],encapsulation:2})};var no=class o{constructor(t){this.activeModal=t}title="";message="";static \u0275fac=function(e){return new(e||o)(j(yi))};static \u0275cmp=N({type:o,selectors:[["app-confirmation-dialog"]],inputs:{title:"title",message:"message"},standalone:!1,decls:11,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"h4",1),p(2),l()(),s(3,"div",2)(4,"p"),p(5),l()(),s(6,"div",3)(7,"button",4),F("click",function(){return i.activeModal.dismiss()}),p(8,"Cancel"),l(),s(9,"button",5),F("click",function(){return i.activeModal.close(!0)}),p(10,"Confirm"),l()()),e&2&&(c(2),S(i.title),c(3),S(i.message))},encapsulation:2})};var Dp=["load"],kp=["saveToLocalStorage"],Bp=["saveDetails"],Vp=["changeMapFile"];function Rp(o,t){if(o&1){let e=k();s(0,"button",103),F("click",function(){b(e);let n=_();return y(n.saveMap())}),p(1),u(2,"translate"),l()}o&2&&(c(),S(g(2,1,"Map.Save")))}function Ap(o,t){if(o&1){let e=k();s(0,"button",104),F("click",function(){b(e);let n=_();return y(n.saveMap(!0))}),p(1),u(2,"translate"),l()}if(o&2){let e=_();v("disabled",!e.isThereMapChanges),c(),S(g(2,2,"Map.Generate"))}}var Di=class o{constructor(t,e,i,n,r){this.projectService=t;this.modalService=e;this.toaster=i;this.router=n;this.translate=r}projectFolders=[];projectId=null;folderId=null;areaToOpen=null;save=new W;subscriptions=[];loadButton;saveToLocalStorage;saveDetails;changeMapFile;areasToAdd=[];areasToUpdate=[];foldersToDelete=[];isThereMapChanges=!1;isMapMode=!1;intervalId;ngOnInit(){this.loadStyles(),this.loadScripts()}ngAfterViewInit(){this.checkAreaToOpen()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}checkAreaToOpen(){this.intervalId=setInterval(()=>{this.areaToOpen&&(this.loadMap(),clearInterval(this.intervalId))},100)}loadStyles(){let t=document.createElement("link");t.rel="stylesheet",t.href="assets/css/map_main.css?v=1.7",document.head.appendChild(t)}loadScripts(){let t=document.createElement("script");t.src="assets/scripts/summerHTMLImageMapCreator.js?v=1.7",document.body.appendChild(t)}setupMapInteractions(){let t=document.querySelectorAll("#svg rect, #svg circle, #svg polygon"),e=document.getElementById("map-menu"),i=null;t.forEach(r=>{r.addEventListener("click",a=>{a.stopPropagation();let m=document.getElementById("svg").getBoundingClientRect();if(e.style.display="none",i=r,document.getElementById("image")?.classList.contains("edit"))return;var h=i.parentElement?.querySelector("[data-shape-id]")?.getAttribute("data-shape-id")??null;if(!this.projectFolders.find(E=>E.areaReference==h&&E.type==1))return;let I=a.clientX,w=a.clientY,P=e.offsetWidth,M=e.offsetHeight;e.style.top=`${w-m.top-M}px`,e.style.left=`${I-m.left-P}px`,e.style.display="block"})}),document.addEventListener("click",()=>{e.style.display="none",i=null}),document.getElementById("openOption").addEventListener("click",()=>{if(i){var r=i.parentElement?.querySelector("[data-shape-id]")?.getAttribute("data-shape-id")??null;let d=this.projectFolders.find(m=>m.areaReference==r);if(!d)return;this.router.navigate(["/projects/folder-details"],{queryParams:{id:d.folderId,projectId:d.projectId,fromParentMap:!0}})}e.style.display="none"})}loadMap(){this.areaToOpen&&(localStorage.setItem("SummerHTMLImageMapCreator",this.areaToOpen),this.setMapChanges()),this.loadButton.nativeElement.click(),setTimeout(()=>{this.setupMapInteractions()},2e3)}btnSaveToLocalStorage(){this.saveToLocalStorage.nativeElement.click(),this.setMapChanges()}saveMap(t=!1){this.btnSaveToLocalStorage(),setTimeout(()=>{let e=new FormData,i=localStorage.getItem("SummerHTMLImageMapCreator");if(i&&(this.folderId&&e.append("folderHtml",i??""),this.folderId||e.append("projectHtml",i??"")),this.folderId){let n=this.projectService.patchFolder(this.folderId??0,e).subscribe(r=>{r?(this.areaToOpen=i,t?this.generateAreasFolders():(this.save.emit({mapHtml:i,reloadFolders:!1}),this.toaster.success(this.translate.instant("Maps.MapSavedSuccessfully")))):this.showError(this.translate.instant("Maps.MapSaveFaild"))},r=>{console.error("Error saving map:",r),this.showError(this.translate.instant("Maps.MapSaveFaild"))});this.subscriptions.push(n)}else{let n=this.projectService.patchProject(this.projectId??0,e).subscribe(r=>{r?(this.areaToOpen=i,t?this.generateAreasFolders():(this.save.emit({mapHtml:i,reloadFolders:!1}),this.toaster.success(this.translate.instant("Maps.MapSavedSuccessfully")))):this.showError(this.translate.instant("Maps.MapSaveFaild"))},r=>{console.error("Error saving map:",r),this.showError(this.translate.instant("Maps.MapSaveFaild"))});this.subscriptions.push(n)}},500)}setMapChanges(){let t=JSON.parse(localStorage.getItem("SummerHTMLImageMapCreator")??""),e=this.projectFolders.map(n=>({folderId:n.folderId,areaReference:n.areaReference,title:n.title})),i=t?.areas?.map(n=>({id:n.attributes.id,title:n.attributes.title,desc:n.attributes.desc}))??[];this.areasToAdd=i.filter(n=>!e.some(r=>r.areaReference===n.id)&&n.title),this.areasToUpdate=i.filter(n=>e.some(r=>r.areaReference===n.id&&r.title!==n.title)),this.foldersToDelete=e.filter(n=>!i.some(r=>r.id===n.areaReference)),this.isThereMapChanges=this.areasToAdd.length>0||this.areasToUpdate.length>0||this.foldersToDelete.length>0}saveArea(){this.saveDetails.nativeElement.click()}generateAreasFolders(){if(JSON.parse(this.areaToOpen??"")){let e=[];this.setMapChanges(),this.areasToAdd.forEach(i=>{let n=new FormData;n.append("title",i.title),n.append("brief",i.desc),n.append("parentId",this.folderId?this.folderId.toString():""),n.append("projectId",this.projectId?.toString()??""),n.append("typeId","11"),n.append("type",1 .toString()),n.append("isActive","true"),n.append("areaReference",i.id);let r=this.projectService.createFolder(n);e.push(r)}),this.areasToUpdate.forEach(i=>{let n=this.projectFolders.find(d=>d.areaReference==i.id),r=new FormData;r.append("title",i.title),r.append("brief",i.desc),r.append("parentId",n?.parentId?.toString()??""),r.append("projectId",n?.projectId?.toString()??""),r.append("typeId",n?.typeId?.toString()??""),r.append("type",n?.type?.toString()??""),r.append("isActive",n?.isActive?.toString()??""),r.append("areaReference",i.id);let a=this.projectService.updateFolder(n?.folderId??0,r);e.push(a)}),this.foldersToDelete.forEach(i=>{let n=this.projectService.activateFolder(i?.folderId??0);e.push(n)}),e.length>0?mt(e).subscribe(i=>{i.forEach((n,r)=>{}),this.isThereMapChanges=!1,this.save.emit({mapHtml:this.areaToOpen,reloadFolders:!0}),this.toaster.success(this.translate.instant("Maps.MapSavedSuccessfully"))},i=>{console.error("Error creating folders:",i),this.showError(this.translate.instant("Folders.FolderCreationFailed"))}):(this.isThereMapChanges=!1,this.save.emit({mapHtml:this.areaToOpen,reloadFolders:!0}))}else this.showError(this.translate.instant("Maps.NoAreasToGenerate"))}changeImage(){if(this.areaToOpen){let t=this.modalService.open(no);t.componentInstance.title="Change Map Image",t.componentInstance.message=`All Map data will be deleted,
 Are you sure you want to continue?`,t.result.then(e=>{e&&this.changeMapFile.nativeElement.click()},e=>{})}else this.changeMapFile.nativeElement.click()}onChangeMapFileSelected=t=>{if(t.length===0)return;let e=t[0];if(!e.type.startsWith("image/")){alert("Please upload a valid image file.");return}let i=new FileReader;i.onload=n=>{let r=n.target?.result;this.areaToOpen=JSON.stringify({img:r}),this.loadMap()},i.readAsDataURL(e)};showError(t){this.toaster.error(t)}static \u0275fac=function(e){return new(e||o)(j(ae),j(Pe),j(oe),j(Ne),j(de))};static \u0275cmp=N({type:o,selectors:[["app-map-details"]],viewQuery:function(e,i){if(e&1&&(ie(Dp,5),ie(kp,5),ie(Bp,5),ie(Vp,5)),e&2){let n;Z(n=G())&&(i.loadButton=n.first),Z(n=G())&&(i.saveToLocalStorage=n.first),Z(n=G())&&(i.saveDetails=n.first),Z(n=G())&&(i.changeMapFile=n.first)}},inputs:{projectFolders:"projectFolders",projectId:"projectId",folderId:"folderId",areaToOpen:"areaToOpen"},outputs:{save:"save"},standalone:!1,decls:276,vars:116,consts:[["saveToLocalStorage",""],["load",""],["changeMapFile",""],["saveDetails",""],[1,"upper","d-flex","flex-row"],["type","button","class","btn btn-primary me-2",3,"click",4,"ngIf"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],["id","save",2,"display","none"],["id","wrapper"],["id","image_wrapper"],[1,"relativee"],["id","header"],["id","nav",1,"clearfix"],[2,"display","none",3,"click"],["href","javascript:;"],["id","load",2,"display","none"],["id","from_html",2,"display","none"],["id","rectangle"],["href","javascript:;","title","Rectangle"],["src","./assets/images/rectangle.svg",2,"width","24px"],["id","circle"],["href","javascript:;","title","Circle"],["src","./assets/images/circle.svg",2,"width","24px"],["id","polygon"],["href","javascript:;","title","Polygon"],["src","./assets/images/polygon.svg",2,"width","24px"],["id","edit"],["href","javascript:;","title","Edit"],["src","./assets/images/edit.svg",2,"width","24px"],["id","to_html",2,"display","none"],["id","preview",2,"display","none"],["id","clear",2,"display","none"],["href","javascript:;","title","New image",3,"click"],["src","./assets/images/image-pen.svg",2,"width","24px"],["id","new_image",2,"display","none"],["id","show_help",2,"display","none"],["type","file","accept","image/*",1,"form-control",2,"display","none",3,"change"],["id","coords"],["id","debug"],["id","main-w"],["id","image"],["src","","alt","#","id","img"],["xmlns","http://www.w3.org/2000/svg","version","1.2","baseProfile","tiny","id","svg"],["id","map-menu",1,"map-menu","dropdown-menu",2,"padding","1px","width","100px","min-width","100px"],["href","javascript:;","id","openOption",1,"dropdown-item","ai-icon"],["id","code"],["title","close",1,"close_button"],["id","code_content"],["id","edit_details",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","rectangleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","close_button"],["src","./assets/images/close.svg","alt",""],[1,"modal-body"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],["type","text","id","title_attr",1,"form-control",3,"placeholder"],["type","hidden","id","id_attr"],["type","text","id","href_attr",1,"form-control",3,"placeholder"],[1,"col-lg-12"],["id","desc_attr",1,"form-control",3,"placeholder"],["type","text","id","alt_attr",1,"form-control",2,"display","none",3,"placeholder"],[1,"modal-footer","d-flex","justify-content-end"],["id","save_details","type","button",2,"display","none"],["type","button",1,"btn","btn-primary","mt-1",3,"click"],["id","from_html_wrapper"],["id","from_html_form"],["for","code_input"],["id","code_input"],["id","load_code_button"],["id","get_image_wrapper"],[1,"container",2,"display","none"],[1,"row","justify-content-center","align-items-center","h-100"],[1,"col-lg-4"],["id","get_image"],["id","logo_get_image"],["href",""],["src","./assets/images/logo.svg","alt","Summer html image map creator"],["id","loading"],["id","file_reader_support"],["id","dropzone"],["title","clear",1,"clear_button"],["src","","alt","preview","id","sm_img"],["for","url"],["id","url_wrapper"],["type","text","id","url",1,"form-control"],["id","button",1,"btn","btn-primary"],["id","overlay"],["id","help"],[1,"txt"],[1,"key"],["id","rectangleModal","tabindex","-1","aria-labelledby","rectangleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["type","text",1,"form-control",3,"placeholder"],[1,"form-control",3,"placeholder"],["for",""],["type","color","id","exampleColorInput","value","#563d7c","title","Choose your color",1,"form-control","form-control-color"],["type","file","placeholder","color",1,"form-control"],["type","button",1,"btn","btn-primary","me-3"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary","me-2",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(e,i){if(e&1){let n=k();s(0,"div",4),T(1,Rp,3,3,"button",5)(2,Ap,3,4,"button",6),s(3,"button",7,0),p(5),u(6,"translate"),l()(),s(7,"div",8)(8,"div",9)(9,"div",10)(10,"header",11)(11,"nav",12)(12,"ul")(13,"li",13),F("click",function(){return b(n),y(i.btnSaveToLocalStorage())}),s(14,"a",14),p(15),u(16,"translate"),l()(),s(17,"li",15)(18,"a",14,1),p(20),u(21,"translate"),l()(),s(22,"li",16)(23,"a",14),p(24),u(25,"translate"),l()(),s(26,"li",17)(27,"a",18),C(28,"img",19),l()(),s(29,"li",20)(30,"a",21),C(31,"img",22),l()(),s(32,"li",23)(33,"a",24),C(34,"img",25),l()(),s(35,"li",26)(36,"a",27),C(37,"img",28),l()(),s(38,"li",29)(39,"a",14),p(40),u(41,"translate"),l()(),s(42,"li",30)(43,"a",14),p(44),u(45,"translate"),l()(),s(46,"li",31)(47,"a",14),p(48),u(49,"translate"),l()(),s(50,"li")(51,"a",32),F("click",function(){return b(n),y(i.changeImage())}),C(52,"img",33),l()(),s(53,"li",34)(54,"a",14),p(55),u(56,"translate"),l()(),s(57,"li",35)(58,"a",14),p(59,"?"),l()()()(),s(60,"input",36,2),F("change",function(){b(n);let a=A(61);return y(i.onChangeMapFileSelected(a.files))}),l(),C(62,"div",37)(63,"div",38),l(),s(64,"div",39)(65,"div",40),C(66,"img",41),wt(),C(67,"svg",42),l(),Bi(),s(68,"div",43)(69,"a",44)(70,"span"),p(71),u(72,"translate"),l()()()()(),s(73,"div",45),C(74,"span",46)(75,"div",47),l(),s(76,"form",48)(77,"div",49)(78,"div",50)(79,"h5",51),p(80),u(81,"translate"),l(),s(82,"button",52),C(83,"img",53),l()(),s(84,"div",54)(85,"div",55)(86,"div",56)(87,"div",57)(88,"label"),p(89),u(90,"translate"),l(),C(91,"input",58),u(92,"translate"),l()(),C(93,"input",59),s(94,"div",56)(95,"div",57)(96,"label"),p(97),u(98,"translate"),l(),C(99,"input",60),u(100,"translate"),l()(),s(101,"div",61)(102,"div",57)(103,"label"),p(104),u(105,"translate"),l(),C(106,"textarea",62),u(107,"translate"),l()(),C(108,"input",63),u(109,"translate"),l()(),s(110,"div",64),C(111,"button",65,3),s(113,"button",66),F("click",function(){return b(n),y(i.saveArea())}),p(114),u(115,"translate"),l()()()(),s(116,"div",67)(117,"form",68)(118,"h5"),p(119),u(120,"translate"),l(),C(121,"span",46),s(122,"p")(123,"label",69),p(124),u(125,"translate"),l(),C(126,"textarea",70),l(),s(127,"button",71),p(128),u(129,"translate"),l()()(),s(130,"div",72)(131,"div",73)(132,"div",74)(133,"div",75)(134,"div",76),C(135,"span",46),s(136,"div",77)(137,"a",78),C(138,"img",79),l()(),s(139,"div",80),p(140),u(141,"translate"),l(),s(142,"div",81)(143,"label"),p(144),u(145,"translate"),l(),s(146,"div",82)(147,"span",83),p(148,"x"),l(),C(149,"img",84),l(),s(150,"b"),p(151),u(152,"translate"),l()(),s(153,"label",85),p(154),u(155,"translate"),l(),s(156,"span",86)(157,"span",83),p(158,"x"),l(),C(159,"input",87),l(),s(160,"button",88),p(161),u(162,"translate"),l()()()()()(),C(163,"div",89),s(164,"div",90),C(165,"span",46),s(166,"div",91)(167,"section")(168,"h2"),p(169),u(170,"translate"),l(),s(171,"p")(172,"span",92),p(173,"F5"),l(),p(174," \u2014 reload the page and display the form for loading image again"),l(),s(175,"p")(176,"span",92),p(177,"S"),l(),p(178," \u2014 save map params in localStorage"),l()(),s(179,"section")(180,"h2"),p(181),u(182,"translate"),l(),s(183,"p")(184,"span",92),p(185,"ENTER"),l(),p(186," \u2014 stop polygon drawing (or click on first helper)"),l(),s(187,"p")(188,"span",92),p(189,"ESC"),l(),p(190," \u2014 cancel drawing of a new area"),l(),s(191,"p")(192,"span",92),p(193,"SHIFT"),l(),p(194," \u2014 square drawing in case of a rectangle and right angle drawing in case of a polygon "),l()(),s(195,"section")(196,"h2"),p(197),u(198,"translate"),l(),s(199,"p")(200,"span",92),p(201,"DELETE"),l(),p(202," \u2014 remove a selected area"),l(),s(203,"p")(204,"span",92),p(205,"ESC"),l(),p(206," \u2014 cancel editing of a selected area"),l(),s(207,"p")(208,"span",92),p(209,"SHIFT"),l(),p(210," \u2014 edit and save proportions for rectangle"),l(),s(211,"p")(212,"span",92),p(213,"I"),l(),p(214," \u2014 edit attributes of a selected area (or dblclick on an area)"),l(),s(215,"p")(216,"span",92),p(217,"CTRL"),l(),p(218," + "),s(219,"span",92),p(220,"C"),l(),p(221," \u2014 a copy of the selected area"),l(),s(222,"p")(223,"span",92),p(224,"\u2191"),l(),p(225," \u2014 move a selected area up"),l(),s(226,"p")(227,"span",92),p(228,"\u2193"),l(),p(229," \u2014 move a selected area down"),l(),s(230,"p")(231,"span",92),p(232,"\u2190"),l(),p(233," \u2014 move a selected area to the left"),l(),s(234,"p")(235,"span",92),p(236,"\u2192"),l(),p(237," \u2014 move a selected area to the right"),l()()()(),s(238,"div",93)(239,"div",94)(240,"div",49)(241,"div",50)(242,"h5",51),p(243),u(244,"translate"),l(),C(245,"button",95),l(),s(246,"div",54)(247,"div",57)(248,"label"),p(249),u(250,"translate"),l(),C(251,"input",96),u(252,"translate"),l(),s(253,"div",57)(254,"label"),p(255),u(256,"translate"),l(),C(257,"textarea",97),u(258,"translate"),l(),s(259,"div",57)(260,"label",98),p(261),u(262,"translate"),l(),C(263,"input",99),l(),s(264,"div",57)(265,"label",98),p(266),u(267,"translate"),l(),C(268,"input",100),l()(),s(269,"div",64)(270,"button",101),p(271),u(272,"translate"),l(),s(273,"button",102),p(274),u(275,"translate"),l()()()()()()()}e&2&&(c(),v("ngIf",i.areaToOpen),c(),v("ngIf",i.areaToOpen),c(3),S(g(6,40,"Map.Save")),c(10),S(g(16,42,"Map.Save")),c(5),S(g(21,44,"Map.Load")),c(4),S(g(25,46,"Map.FromHtml")),c(16),S(g(41,48,"Map.ToHtml")),c(4),S(g(45,50,"Map.Preview")),c(4),S(g(49,52,"Map.Clear")),c(7),S(g(56,54,"Map.NewImage")),c(16),D(" ",g(72,56,"Map.Open")," "),c(9),S(g(81,58,"Map.PartInfo")),c(9),S(g(90,60,"Map.PartTitle")),c(2),L("placeholder",g(92,62,"Map.Title")),c(6),S(g(98,64,"Map.Link")),c(2),L("placeholder",g(100,66,"Map.Href")),c(5),S(g(105,68,"Map.PartDescription")),c(2),L("placeholder",g(107,70,"Map.Description")),c(2),L("placeholder",g(109,72,"Map.Alt")),c(6),S(g(115,74,"Map.Save")),c(5),S(g(120,76,"Map.LoadingAreas")),c(5),S(g(125,78,"Map.EnterHtmlCode")),c(4),S(g(129,80,"Map.Load")),c(12),S(g(141,82,"Map.Loading")),c(4),S(g(145,84,"Map.DragImage")),c(7),S(g(152,86,"Map.Or")),c(3),S(g(155,88,"Map.TypeUrl")),c(7),S(g(162,90,"Map.Ok")),c(8),S(g(170,92,"Map.Main")),c(12),S(g(182,94,"Map.DrawingMode")),c(16),S(g(198,96,"Map.EditingMode")),c(46),S(g(244,98,"Map.PartInfo")),c(6),S(g(250,100,"Map.PartTitle")),c(2),L("placeholder",g(252,102,"Map.Title")),c(4),S(g(256,104,"Map.PartDescription")),c(2),L("placeholder",g(258,106,"Map.Description")),c(4),S(g(262,108,"Map.LabelColor")),c(5),S(g(267,110,"Map.PartImage")),c(5),S(g(272,112,"Map.Submit")),c(3),S(g(275,114,"Map.Close")))},dependencies:[X,Fe,Ie,Ye,re],styles:[".file-info.fixed[_ngcontent-%COMP%]{position:relative;top:20px}ul.select2-results__options[_ngcontent-%COMP%]{height:125px}.title-badge[_ngcontent-%COMP%]{fill:#00f!important;font-size:14px;font-weight:700;text-anchor:middle}.title-badge-container[_ngcontent-%COMP%]{stroke-width:3px!important;stroke:#ff0!important;fill:#ff0!important}.nav-tabs[_ngcontent-%COMP%]{justify-content:flex-start;margin-bottom:0!important;padding-bottom:0!important;border-bottom:0!important}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:15px 25px}#header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;width:50px}#header[_ngcontent-%COMP%]{width:69px;height:100%;position:absolute;left:0;top:0}#main-w[_ngcontent-%COMP%]{overflow:auto;height:calc(100vh - 18em);position:relative;display:block;margin:0 auto 0 69px}.map-menu[_ngcontent-%COMP%]{position:absolute;display:none;background:#fff;border:1px solid #ccc;padding:10px;z-index:10}.map-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.map-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 10px;cursor:pointer}.map-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#f0f0f0}"]})};var zp=["sidebar"],Np=["dynamicContainer"],Lp=o=>({template1:o}),Up=o=>({"background-color":o}),Hp=()=>["/projects/folder-details"],Qp=(o,t)=>({id:o,projectId:t}),$p=o=>({fav:o});function Wp(o,t){o&1&&(s(0,"div"),p(1),u(2,"translate"),l()),o&2&&(c(),D(" ",g(2,1,"Folders.FileUrlIsRequired")," "))}function qp(o,t){if(o&1&&(s(0,"div",68),T(1,Wp,3,3,"div",31),l()),o&2){_();let e=A(20);c(),v("ngIf",e==null||e.errors==null?null:e.errors.required)}}function Xp(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_();c(),D("",Q(2,1,((e=i.project==null?null:i.project.filesSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function Yp(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_();c(),D("",Q(2,1,((e=i.project==null?null:i.project.filesSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function Zp(o,t){if(o&1){let e=k();s(0,"div")(1,"button",69),C(2,"img",70),p(3),u(4,"translate"),l(),s(5,"button",71),F("click",function(){b(e);let n=_();return y(n.closeInfo())}),C(6,"img",72),p(7),u(8,"translate"),l()()}o&2&&(c(3),D("",g(4,2,"Common.Share")," "),c(4),D("",g(8,4,"Common.Information")," "))}function Gp(o,t){if(o&1){let e=k();s(0,"ul",73)(1,"li",74)(2,"button",75),F("click",function(){b(e);let n=_();return y(n.selectedTab="folders")}),C(3,"i",76),p(4),u(5,"translate"),l()(),s(6,"li",74)(7,"button",77),F("click",function(){b(e);let n=_();return y(n.selectedTab="map")}),C(8,"i",78),p(9),u(10,"translate"),l()()()}if(o&2){let e=_();c(2),V("active",e.selectedTab=="folders"),c(2),D(" ",g(5,6,"Common.Folders")," "),c(3),V("active",e.selectedTab=="map"),c(2),D(" ",g(10,8,"Map.Title")," ")}}function Kp(o,t){if(o&1){let e=k();s(0,"a",37),F("click",function(){b(e),_();let n=A(68);return y(n.click())}),C(1,"img",38),s(2,"span",39),p(3),u(4,"translate"),l()()}o&2&&(c(3),S(g(4,1,"Folders.AddMap")))}function Jp(o,t){if(o&1&&p(0),o&2){let e=t.data;D(" ",e==null?null:e.name," ")}}function em(o,t){if(o&1){let e=k();s(0,"div",79),F("click",function(){let n=b(e).$implicit,r=_();return y(r.selectColor(n.catId))}),l()}if(o&2){let e=t.$implicit,i=_();V("selected",i.selectedColorId===e.catId),v("ngStyle",ce(3,Up,e.colorDegree))}}function tm(o,t){o&1&&(s(0,"span",49),p(1),u(2,"translate"),l()),o&2&&(c(),S(g(2,1,"Common.Sorting")))}function im(o,t){o&1&&(s(0,"span",49),p(1),u(2,"translate"),u(3,"translate"),l()),o&2&&(c(),ne("",g(2,2,"Common.Sorting"),": ",g(3,4,"Newest"),""))}function nm(o,t){o&1&&(s(0,"span",49),p(1),u(2,"translate"),u(3,"translate"),l()),o&2&&(c(),ne("",g(2,2,"Common.Sorting"),": ",g(3,4,"Oldest"),""))}function om(o,t){o&1&&(s(0,"span",49),p(1),u(2,"translate"),u(3,"translate"),l()),o&2&&(c(),ne("",g(2,2,"Common.Sorting"),": ",g(3,4,"Name Asc"),""))}function rm(o,t){o&1&&(s(0,"span",49),p(1),u(2,"translate"),u(3,"translate"),l()),o&2&&(c(),ne("",g(2,2,"Common.Sorting"),": ",g(3,4,"Name Desc"),""))}function am(o,t){if(o&1&&C(0,"img",90),o&2){let e=_().$implicit;v("src",e.imageUrl,H)}}function sm(o,t){o&1&&C(0,"i",91)}function lm(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_().$implicit;c(),D("",Q(2,1,((e=i.filesSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function cm(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_().$implicit;c(),D("",Q(2,1,((e=i.filesSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function dm(o,t){if(o&1){let e=k();s(0,"div",80)(1,"div",81)(2,"a",82)(3,"div",83),T(4,am,1,1,"img",84)(5,sm,1,0,"i",85),l()(),s(6,"div",86)(7,"div")(8,"span",87),p(9),u(10,"slice"),u(11,"slice"),l()(),s(12,"div")(13,"div",88),F("click",function(){let n=b(e).$implicit,r=_();return y(r.favoriteFolder(n==null?null:n.folderId))}),C(14,"i",89),l()()(),s(15,"div",30)(16,"span"),T(17,lm,3,4,"span")(18,cm,3,4,"span"),p(19),u(20,"translate"),l()()()()}if(o&2){let e,i,n,r=t.$implicit,a=_();c(2),v("routerLink",z(25,Hp))("queryParams",We(26,Qp,r.folderId,r.projectId)),c(),ut("background",a.getColor(r.colorId)?"linear-gradient(0deg, rgba(58,81,100,1) 21%, "+a.getColor(r.colorId)+" 100%)":"#3A5164")("border-bottom",r.imageUrl?"7px solid "+a.getColor(r.colorId):"none"),V("map-related",r.areaReference),c(),v("ngIf",r.imageUrl),c(),v("ngIf",r.areaReference),c(3),v("title",r.title),c(),D(" ",((e=r.title)!==null&&e!==void 0?e:"").length>20?Xe(10,16,r.title,0,16)+"..."+Q(11,20,r.title,-4):r.title," "),c(4),v("ngClass",ce(29,$p,r.isFavByUser)),c(4),K(((i=r.filesSize)!==null&&i!==void 0?i:0)>1?17:18),c(2),ne(" | ",(n=r.filesNum)!==null&&n!==void 0?n:0," ",g(20,23,"Home.Items")," ")}}function pm(o,t){if(o&1){let e=k();s(0,"div",80)(1,"app-file-card",92),F("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))})("favorite",function(n){b(e);let r=_();return y(r.favorite(n))})("rename",function(n){b(e);let r=_();return y(r.rename(n))})("archive",function(n){b(e);let r=_();return y(r.archive(n))})("delete",function(n){b(e);let r=_();return y(r.delete(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index;c(),v("card",e)("index",i)}}var oo=class o{constructor(t,e,i,n,r,a,d,m,f,h,x,I,w){this.route=t;this.renderer=e;this.projectCoverService=i;this.fileUploadService=n;this.projectService=r;this.modalService=a;this.router=d;this.toaster=m;this.translate=f;this.resolver=h;this.el=x;this.uploadService=I;this.categoriesService=w;this.route.queryParams.subscribe(P=>{this.projectId=P.id})}sidebar;container;mapComponentRef=null;projectFileQuery;projectFolderQuery;active=1;uploads=[];projectFolders=[];projectFiles=[];isUpload=!1;count=0;bootstrap;colors=[];tagsInput="";tags=[];isFetchingColors=!1;isFetchingTags=!1;subscriptions=[];projectId;project;isFetching=!1;isFetchingProjects=!1;isFetchingFiles=!1;extFile="";selectedFile;selectedProject;selectedSortField=null;currentPage;selectedColorId=null;tagsItems;areaToOpen=null;selectedTab="folders";ngOnInit(){ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.projectFolderQuery=new et,this.projectFolderQuery.projectId=this.projectId,this.projectFolderQuery.parentId=null,this.projectFolderQuery.sortOrder=null,this.projectFolderQuery.pageNumber=1,this.projectFolderQuery.pageSize=1e3,this.projectFolderQuery.FavUserId=null,this.projectFolderQuery.isActive=!0,this.projectFolderQuery.showCurrentUserFav=!0,this.projectFolderQuery.type=null,this.projectFileQuery=new je,this.projectFileQuery.projectId=this.projectId,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,this.fetchProject(this.projectId),this.fetchProjectFolders(),this.fetchProjectFiles(this.projectId),this.fetchColors(),this.getTags()}handleMapSave(t){this.project.projectHtml=t.mapHtml,this.areaToOpen=this.project.projectHtml,this.isAreaLoaded=!0,t.reloadFolders&&(this.fetchProjectFolders(),this.fetchProjectFiles(this.projectId))}isAreaLoaded=!1;fetchProject(t){if(!t||this.isFetching)return;this.isFetching=!0,this.areaToOpen=null,this.selectedTab="folders",this.project=new Gn;let e=this.projectService.fetchProject(t).subscribe(i=>{i&&(this.project=i,this.project?.projectHtml&&(this.areaToOpen=this.project.projectHtml,this.isAreaLoaded=!0,this.loadMap()),this.project?.imageUrl&&setTimeout(()=>{this.projectCoverService.setSource(this.project?.imageUrl??""),this.projectCoverService.setShow(!0)})),this.isFetching=!1});this.subscriptions.push(e)}isFoldersLoaded=!1;fetchProjectFolders(){if(!this.projectFolderQuery.projectId||this.isFetchingProjects)return;this.isFetchingProjects=!0;let t=this.projectService.fetchProjectFolders(this.projectFolderQuery).subscribe(e=>{e&&(console.log("Project folders:",e),this.currentPage=e.currentPage,this.projectFolders=e,this.isFoldersLoaded=!0,this.loadMap()),this.isFetchingProjects=!1});this.subscriptions.push(t)}fetchProjectFiles(t){if(!t||this.isFetchingFiles)return;this.isFetchingFiles=!0;let e=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(i=>{i&&(this.projectFiles=i,console.log(this.projectFiles)),this.isFetchingFiles=!1});this.subscriptions.push(e)}orderFoldersBy(t){this.currentPage=1,this.projectFolderQuery.sortOrder=t,this.fetchProjectFolders()}selectColor(t){this.selectedColorId=t,this.projectFolderQuery.colorId=t,this.fetchProjectFolders()}fetchColors(){if(this.isFetchingColors)return;this.isFetchingColors=!0;let t=this.categoriesService.fetchColors().subscribe(e=>{e&&(this.colors=e.data),this.isFetchingColors=!1});this.subscriptions.push(t)}getColor(t){let e=this.colors.find(i=>i.catId===t);return e?e.colorDegree:null}getTags(){this.projectService.showTags().subscribe(t=>{console.log("tags",t),this.tagsItems=[{options:(t||[]).map(e=>({value:e.title,label:e.title,id:e.tagId.toString(),data:{name:e.title},templateId:"template1",templateSelectionId:"template1Selection"}))}]})}selectedTags;update(t){console.log("update event fired",t,new Error().stack);let e=(t.options||[]).map(i=>i.id);console.log("Selected option IDs:",e),e.forEach(i=>{this.projectFolderQuery.TagIDs=i}),this.fetchProjectFolders()}selectTag(){console.log(this.tags),this.fetchProjectFolders()}onTypeSelect(t){console.log("Selected type:",t)}onPeopleSelect(t){console.log("Selected person:",t)}onModifiedSelect(t){console.log("Selected modified:",t)}shownInfo=!1;showInfo(t){this.selectedFile=t,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let e=new FormData;e.append("isOpen","true"),e.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,e).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles(this.projectId))}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}favorite(t){console.log(t),this.projectService.setFavourite(t).subscribe(e=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully"));let i=this.projectFiles.find(n=>n.fileId==t);i&&(i.isFavByUser=!i?.isFavByUser)})}rename(t){let e=this.projectFiles.find(i=>i.fileId===t.fileId);e&&(e.title=t.filename)}archive(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}delete(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}favoriteFolder(t){console.log(t),this.projectService.setFavouriteFolder(t).subscribe(e=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully"));let i=this.projectFolders.find(n=>n.folderId==t);i&&(i.isFavByUser=!i?.isFavByUser),this.fetchProjectFolders()})}onMapFileSelected=t=>{if(t.length===0)return;let e=t[0];if(!e.type.startsWith("image/")){alert("Please upload a valid image file.");return}let i=new FileReader;i.onload=n=>{let r=n.target?.result,a=new FormData,d=JSON.stringify({img:r});a.append("projectHtml",d);let m=this.projectService.patchProject(this.projectId??0,a).subscribe(f=>{f?(this.project.projectHtml=d,this.areaToOpen=d,this.isAreaLoaded=!0,this.loadMap(),this.selectedTab="map",this.toaster.success(this.translate.instant("Maps.MapSavedSuccessfully"))):console.error(this.translate.instant("Maps.MapSaveFaild"))},f=>{console.error("Error saving map:",f)});this.subscriptions.push(m)},i.readAsDataURL(e)};externalUpload(){let t=new FormData,e=new File([this.extFile],this.extFile,{type:"text/plain"});t.append("Title",e.name);let i=this.getFileType(e);i!==null&&t.append("fileType",i.toString()),t.append("isActive","true"),t.append("TypeId","12"),t.append("projectId",this.projectId?.toString()??""),t.append("folderId",""),t.append("ExternalFileUrl",this.extFile),console.log("formData",t),this.projectService.createFile1(t).subscribe(n=>{n&&(console.log("Upload complete for",n),this.closeProjectUploadModal(),this.fetchProjectFiles(this.projectId))})}onFilesSelected=t=>{if(t.length===0)return;this.uploads=[],this.isUpload=!0,this.count=t.length;let e=[];for(let i=0;i<t.length;i++){let n=t[i],r=this.uploadService.startUpload(n.name),a=new FormData;a.append("fileFile",n,n.name);let d=this.getFileType(n);d!==null&&a.append("fileType",d.toString()),a.append("Title",n.name),a.append("isActive","true"),a.append("TypeId","12"),a.append("projectId",this.projectId?.toString()??""),a.append("folderId","");let m={fileName:n.name,progress:0};this.uploads.push(m);let f=this.projectService.createFile(a).pipe(vi(h=>{h.type===Qt.UploadProgress?h.total&&(m.progress=Math.round(100*h.loaded/h.total),this.uploadService.updateProgress(r,m.progress)):h.type===Qt.Response&&(m.progress=100,this.uploadService.updateProgress(r,m.progress),console.log("Upload complete for",m.fileName,h.body),this.fetchProjectFiles(this.projectId))}));e.push(f)}mt(e).subscribe({next:i=>{console.log("All uploads completed!",i),setTimeout(()=>{this.isUpload=!1,this.closeProjectUploadModal()},3e3)},error:i=>{console.error("Error during file upload:",i),this.isUpload=!1}})};getFileType(t){switch(t.name.split(".").pop()?.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":return 0;case"mp4":case"avi":return 1;case"pdf":return 2;case"doc":case"docx":return 3;case"xls":case"xlsx":return 4;case"ppt":case"pptx":return 5;case"txt":return 6;case"zip":return 7;default:return null}}modalInstance;ngAfterViewInit(){this.displayMapComponent();let t=document.getElementById("projectUploadModal");if(t){let e=window.bootstrap;this.modalInstance=new e.Modal(t)}setTimeout(()=>this.checkScroll(),0)}closeProjectUploadModal(){this.modalInstance?.hide()}openAddFolderModal(){let t=this.modalService.open(Oi,{backdrop:"static",keyboard:!1});t.componentInstance.projectId=this.projectId,t.componentInstance.parentId="";let e=t.componentInstance.isSuccess.subscribe(i=>{i&&this.fetchProjectFolders()});this.subscriptions.push(e)}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close(),setTimeout(()=>{this.projectCoverService.setShow(!1)}),this.subscriptions.forEach(t=>t.unsubscribe())}isFixed=!1;longList=Array.from({length:100},(t,e)=>`Item ${e+1}`);onWindowScroll(){this.checkScroll()}checkScroll(){}displayMapComponent(){if(!this.container)return;let t=this.resolver.resolveComponentFactory(Di);this.mapComponentRef=this.container.createComponent(t),this.mapComponentRef.instance.projectId=this.projectId,this.mapComponentRef.instance.folderId=null,this.mapComponentRef.instance.projectFolders=this.projectFolders,this.mapComponentRef.instance.areaToOpen=this.areaToOpen,this.mapComponentRef.instance.save.subscribe(e=>{this.handleMapSave(e)})}loadMap(){this.isAreaLoaded&&this.isFoldersLoaded&&this.mapComponentRef&&(this.mapComponentRef.instance.projectFolders=this.projectFolders,this.mapComponentRef.instance.areaToOpen=this.areaToOpen,this.mapComponentRef.instance.loadMap())}static \u0275fac=function(e){return new(e||o)(j(ft),j(me),j(ht),j(Ee),j(ae),j(Pe),j(Ne),j(oe),j(de),j(Gi),j(fe),j(Ci),j(tt))};static \u0275cmp=N({type:o,selectors:[["app-project-details"]],viewQuery:function(e,i){if(e&1&&(ie(zp,5),ie(Np,5,Ki)),e&2){let n;Z(n=G())&&(i.sidebar=n.first),Z(n=G())&&(i.container=n.first)}},hostBindings:function(e,i){e&1&&F("scroll",function(){return i.onWindowScroll()},!1,It)},standalone:!1,decls:147,vars:107,consts:[["extFileForm","ngForm"],["extFile1","ngModel"],["mapFile",""],["file",""],["template1",""],["dynamicContainer",""],["sidebar",""],[1,"row","home-layout"],[1,"col"],["id","projectUploadModal","tabindex","-1","aria-labelledby","projectUploadModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"d-flex","mod-head","justify-content-between"],["id","projectUploadModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","ms-2"],[1,"modal-body"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for",""],["type","text","id","extFile","name","extFile","required","",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["class","alert alert-danger",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger","ms-3"],[1,"relativee"],["id","sticky-start"],[1,"main-top"],[1,"row"],[1,"col-lg-8","d-flex","justify-content-between","heady"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"col-lg-4","d-flex","justify-content-end"],["class","nav nav-tabs","id","myTab","role","tablist",4,"ngIf"],["id","myTabContent",1,"tab-content"],["id","folder-tab-pane","role","tabpanel","aria-labelledby","folder-tab","tabindex","0",1,"tab-pane","fade"],[1,"upper","d-flex","flex-row"],[1,"upload-btn",3,"click"],["src","assets/icons/plus.svg","alt",""],[1,"pt-3"],["data-bs-toggle","modal","data-bs-target","#projectUploadModal",1,"upload-btn"],["class","upload-btn",3,"click",4,"ngIf"],["type","file","accept","image/*",1,"form-control",2,"display","none",3,"change"],["type","file","placeholder","Choose file","multiple","",1,"form-control",2,"display","none",3,"change"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[1,"dropdown1","dropdown"],["href","javascript:;","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle1","dropdown-toggle"],["src","assets/icons/modified-middle.svg","alt",""],[1,"px-1"],["src","assets/icons/middle-arrow-down.svg","alt","",1,"arrow-icon"],[1,"dropdown-menu1","dropdown-menu",2,"width","300px"],[2,"padding","10px",3,"click"],["placeholder","Select tags","displaySearchStatus","always","multiple","",3,"update","data","value","templates"],[1,"dropdown-menu1","dropdown-menu"],[2,"padding","10px"],[1,"color-options"],[1,"color-swatch","not-determined",3,"click"],["class","color-swatch",3,"ngStyle","selected","click",4,"ngFor","ngForOf"],["class","px-1",4,"ngIf"],["href","javascript:;",3,"click"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],["id","Map-tab-pane","role","tabpanel","aria-labelledby","Map-tab","tabindex","0",1,"tab-pane","fade"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],[1,"alert","alert-danger"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","folder-tab","data-bs-toggle","tab","data-bs-target","#folder-tab-pane","type","button","role","tab","aria-controls","folder-tab-pane",1,"nav-link",3,"click"],[1,"fa-regular","fa-folder","me-1"],["id","Map-tab","data-bs-toggle","tab","data-bs-target","#Map-tab-pane","type","button","role","tab","aria-controls","Map-tab-pane",1,"nav-link",3,"click"],[1,"fa-regular","fa-map","me-1"],[1,"color-swatch",3,"click","ngStyle"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-file-card","projects-block"],[3,"routerLink","queryParams"],[1,"proj-img-holder","folder-holder"],[3,"src",4,"ngIf"],["class","fa fa-map","style","color: #bbd5d559;",4,"ngIf"],[1,"recent-file-type","pt-2","d-flex","justify-content-between","flex-row","align-items-center"],[3,"title"],[1,"star",3,"click","ngClass"],[1,"fa","fa-star"],[3,"src"],[1,"fa","fa-map",2,"color","#bbd5d559"],[3,"showInfo","favorite","rename","archive","delete","card","index"]],template:function(e,i){if(e&1){let n=k();s(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div",13)(7,"h5",14),p(8),u(9,"translate"),l(),s(10,"div"),C(11,"button",15),l()()(),s(12,"div",16)(13,"form",17,0),F("ngSubmit",function(){b(n);let a=A(14);return y(a.form.valid&&i.externalUpload())}),s(15,"div",18)(16,"label",19),p(17),u(18,"translate"),l(),s(19,"input",20,1),u(21,"translate"),Ut("ngModelChange",function(a){return b(n),Lt(i.extFile,a)||(i.extFile=a),y(a)}),l(),T(22,qp,2,1,"div",21),l(),C(23,"hr"),s(24,"div",22)(25,"button",23),p(26),u(27,"translate"),l(),s(28,"button",24),p(29),u(30,"translate"),l()()()()()()(),s(31,"div",25),C(32,"div",26),s(33,"div",27)(34,"div",28)(35,"div",29)(36,"div")(37,"h3"),p(38),l(),s(39,"div",30)(40,"span"),T(41,Xp,3,4,"span")(42,Yp,3,4,"span"),p(43),u(44,"translate"),l()()(),T(45,Zp,9,6,"div",31),l(),s(46,"div",32),T(47,Gp,11,10,"ul",33),l()()(),s(48,"div",34)(49,"div",35)(50,"div",36)(51,"button",37),F("click",function(){return b(n),y(i.openAddFolderModal())}),C(52,"img",38),s(53,"span",39),p(54),u(55,"translate"),l()(),s(56,"button",40),C(57,"img",38),s(58,"span",39),p(59),u(60,"translate"),l()(),s(61,"button",37),F("click",function(){b(n);let a=A(70);return y(a.click())}),C(62,"img",38),s(63,"span",39),p(64),u(65,"translate"),l()(),T(66,Kp,5,3,"a",41),s(67,"input",42,2),F("change",function(){b(n);let a=A(68);return y(i.onMapFileSelected(a.files))}),l(),s(69,"input",43,3),F("change",function(){b(n);let a=A(70);return y(i.onFilesSelected(a.files))}),l()(),s(71,"div",44)(72,"strong"),p(73),u(74,"translate"),l(),s(75,"div",45)(76,"div",46)(77,"a",47),C(78,"img",48),s(79,"span",49),p(80),u(81,"translate"),l(),C(82,"img",50),l(),s(83,"ul",51)(84,"li",52),F("click",function(a){return b(n),y(a.stopPropagation())}),s(85,"select2",53),F("update",function(a){return b(n),y(i.update(a))}),T(86,Jp,1,1,"ng-template",null,4,se),l()()()(),s(88,"div",46)(89,"a",47),C(90,"img",48),s(91,"span",49),p(92),u(93,"translate"),l(),C(94,"img",50),l(),s(95,"ul",54)(96,"li",55)(97,"div",56)(98,"div",57),F("click",function(){return b(n),y(i.selectColor(null))}),l(),T(99,em,1,5,"div",58),l()()()(),s(100,"div",46)(101,"a",47),C(102,"img",48),T(103,tm,3,3,"span",59)(104,im,4,6,"span",59)(105,nm,4,6,"span",59)(106,om,4,6,"span",59)(107,rm,4,6,"span",59),C(108,"img",50),l(),s(109,"ul",54)(110,"li")(111,"a",60),F("click",function(){return b(n),y(i.selectedSortField!="DateDesc"&&i.orderFoldersBy("DateDesc"))}),p(112),u(113,"translate"),l()(),s(114,"li")(115,"a",60),F("click",function(){return b(n),y(i.selectedSortField!="DateAsc"&&i.orderFoldersBy("DateAsc"))}),p(116),u(117,"translate"),l()(),s(118,"li")(119,"a",60),F("click",function(){return b(n),y(i.selectedSortField!="TitleAsc"&&i.orderFoldersBy("TitleAsc"))}),p(120),u(121,"translate"),l()(),s(122,"li")(123,"a",60),F("click",function(){return b(n),y(i.selectedSortField!="TitleDesc"&&i.orderFoldersBy("TitleDesc"))}),p(124),u(125,"translate"),l()()()()()(),s(126,"div",61)(127,"div",62),C(128,"img",63),s(129,"strong"),p(130),u(131,"translate"),l()(),s(132,"div",64),T(133,dm,21,31,"div",65),l(),s(134,"div",62),C(135,"img",63),s(136,"strong"),p(137),u(138,"translate"),l()(),s(139,"div",64),T(140,pm,2,2,"div",65),l()()(),s(141,"div",66),C(142,"div",null,5),l()()()(),s(144,"div",8,6)(146,"app-file-info",67),F("closeInfoEvent",function(){return b(n),y(i.closeInfo())})("addTag",function(){return b(n),y(i.onAddTag())})("share",function(){return b(n),y(i.onShare())}),l()()()}if(e&2){let n,r=A(14),a=A(20),d=A(87);V("expand",i.shownInfo),c(8),S(g(9,69,"Folders.UploadFiles")),c(9),S(g(18,71,"Folders.FilesUrl")),c(2),L("placeholder",g(21,73,"Folders.FilesUrl")),Nt("ngModel",i.extFile),c(3),v("ngIf",a.invalid&&(a.dirty||a.touched||r.submitted)),c(4),S(g(27,75,"Common.Upload")),c(3),S(g(30,77,"Common.Close")),c(9),S(i.project==null?null:i.project.title),c(3),K(((n=i.project==null?null:i.project.filesSize)!==null&&n!==void 0?n:0)>1?41:42),c(2),ne(" | ",i.project==null?null:i.project.filesNum," ",g(44,79,"Home.Items")," "),c(2),v("ngIf",i.shownInfo),c(2),v("ngIf",i.areaToOpen),c(2),V("active",i.selectedTab=="folders")("show",i.selectedTab=="folders"),c(5),S(g(55,81,"Folders.CreateFolder")),c(5),S(g(60,83,"Folders.ImportFilesViaUrl")),c(5),S(g(65,85,"Folders.UploadFile")),c(2),v("ngIf",!i.isFetching&&!i.areaToOpen),c(7),S(g(74,87,"Common.Sorting")),c(7),S(g(81,89,"Folders.Tags")),c(5),v("data",i.tagsItems)("value",i.selectedTags)("templates",ce(105,Lp,d)),c(7),S(g(93,91,"Folders.Color")),c(6),V("selected",!i.selectedColorId),c(),v("ngForOf",i.colors),c(4),v("ngIf",!i.selectedSortField),c(),v("ngIf",i.selectedSortField=="DateDesc"),c(),v("ngIf",i.selectedSortField=="DateAsc"),c(),v("ngIf",i.selectedSortField=="TitleAsc"),c(),v("ngIf",i.selectedSortField=="TitleDesc"),c(4),V("selected",i.selectedSortField=="DateDesc"),c(),S(g(113,93,"Newest")),c(3),V("selected",i.selectedSortField=="DateAsc"),c(),S(g(117,95,"Oldest")),c(3),V("selected",i.selectedSortField=="TitleAsc"),c(),S(g(121,97,"Name Asc")),c(3),V("selected",i.selectedSortField=="TitleDesc"),c(),S(g(125,99,"Name Desc")),c(6),S(g(131,101,"Common.Folders")),c(3),v("ngForOf",i.projectFolders),c(4),S(g(138,103,"Common.Files")),c(3),v("ngForOf",i.projectFiles),c(),V("active",i.selectedTab=="map")("show",i.selectedTab=="map"),c(3),V("active",i.shownInfo),c(2),v("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile)}},dependencies:[lt,J,X,nn,ye,we,Re,Fe,Le,Ue,Ie,bi,qt,Ye,Zt,Ht,xe,re],styles:[".file-info.fixed[_ngcontent-%COMP%]{position:relative;top:20px}ul.select2-results__options[_ngcontent-%COMP%]{height:125px}.nav-tabs[_ngcontent-%COMP%]{justify-content:flex-start;margin-bottom:0!important;padding-bottom:0!important;border-bottom:0!important}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:15px 25px}#header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;width:50px}#header[_ngcontent-%COMP%]{width:69px;height:100%;position:absolute;left:0;top:0}"]})};var mm=["cardElement"],um=()=>["/projects/project-map"],fm=()=>({id:2}),hm=()=>["PDF","Word","Excel"],gm=()=>["Name 1","Name 2","Name 3"],vm=()=>["Newest","Oldest","Recently Edited"],_m=()=>["/projects/project-screen-details"];function bm(o,t){if(o&1){let e=k();s(0,"div")(1,"button",45),C(2,"img",46),p(3,"Share"),l(),s(4,"button",47),F("click",function(){b(e);let n=_();return y(n.closeInfo())}),C(5,"img",48),p(6,"Information"),l()()}}function ym(o,t){if(o&1&&(s(0,"div"),C(1,"app-upload-toast",49),l()),o&2){let e=t.$implicit;c(),v("fileName",e.fileName)("progress",e.progress)}}function Cm(o,t){if(o&1){let e=k();s(0,"div",39)(1,"app-file-card",50),F("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))})("favorite",function(n){b(e);let r=_();return y(r.favorite(n))})("rename",function(n){b(e);let r=_();return y(r.rename(n))})("archive",function(n){b(e);let r=_();return y(r.archive(n))})("delete",function(n){b(e);let r=_();return y(r.delete(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index;c(),v("card",e)("index",i)}}var ro=class o{constructor(t,e,i){this.renderer=t;this.projectCoverService=e;this.fileUploadService=i}cardElements;uploads=[];files;isUpload=!1;count=0;bootstrap;ngOnInit(){setTimeout(()=>{this.projectCoverService.setShow(!0),this.projectCoverService.setSource("assets/images/files/proj4.jpg")})}data=[{options:[{value:"Omar Ezz",label:"Omar Ezz",data:{name:"Omar Ezz",email:"Omar_Ezz@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"1"},{value:"Emad hamdi",label:"Emad Hamdi",data:{name:"Emad hamdi",email:"emad_hamdi@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"2"},{value:"Ehab Zakaria",label:"Ehab Zakaria",data:{name:"Ehab Zakaria",email:"ehab_zakaria@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"3"},{value:"mohamed Ezz",label:"mohamed Ezz",data:{name:"mohamed Ezz",email:"mohamed@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"4"},{value:"Ali hamdi",label:"Ali Hamdi",data:{name:"Ali hamdi",email:"Ali@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"5"},{value:"hassan Zakaria",label:"hassan Zakaria",data:{name:"hassan Zakaria",email:"hassan@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"6"}]}];cards=[{id:1,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/proj-d1.jpg",fileName:"WOTN drive.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1},{id:2,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"photo",fileImage:"assets/images/file-card.png",fileName:"WOTN drive.png",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"",Status:1},{id:3,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"text",fileImage:"assets/images/files/proj-d2.jpg",fileName:"WOTN drive.pdf",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"",Status:1},{id:4,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/project-1.jpg",fileName:"WOTN drive1.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1}];onTypeSelect(t){console.log("Selected type:",t)}onPeopleSelect(t){console.log("Selected person:",t)}onModifiedSelect(t){console.log("Selected modified:",t)}shownInfo=!1;showInfo(t){console.log(t),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.shownInfo=!this.shownInfo}onFilesSelected=t=>{if(t.length===0)return;this.uploads=[],this.isUpload=!0,this.count=t.length;let e=[];for(let i=0;i<t.length;i++){let n=t[i],r=new FormData;r.append("file",n,n.name);let a={fileName:n.name,progress:0};this.uploads.push(a);let d=this.fileUploadService.upload(r).pipe(vi(m=>{m.type?m.total&&(a.progress=Math.round(100*m.loaded/m.total)):m.type===Qt.Response&&(a.progress=100,console.log("Upload complete for",a.fileName,m.body))}));e.push(d)}mt(e).subscribe({next:i=>{console.log("All uploads completed!",i),setTimeout(()=>{this.isUpload=!1,this.closeProjectUploadModal()},3e3)},error:i=>{console.error("Error during file upload:",i),this.isUpload=!1}})};modalInstance;ngAfterViewInit(){let t=document.getElementById("projectUploadModal");if(t){let e=window.bootstrap;this.modalInstance=new e.Modal(t)}}openProjectUploadModal(){this.modalInstance?.show()}closeProjectUploadModal(){this.modalInstance?.hide()}static \u0275fac=function(e){return new(e||o)(j(me),j(ht),j(Ee))};static \u0275cmp=N({type:o,selectors:[["app-project-screen-details"]],viewQuery:function(e,i){if(e&1&&ie(mm,5),e&2){let n;Z(n=G())&&(i.cardElements=n)}},standalone:!1,decls:82,vars:26,consts:[["file",""],[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"upper","d-flex","flex-row"],["data-bs-toggle","modal","data-bs-target","#projectUploadModal",1,"upload-btn"],["src","assets/icons/plus.svg","alt",""],[1,"pt-3"],[1,"upload-btn",3,"click"],[1,"upload-btn",3,"routerLink","queryParams"],[1,"las","la-map","la-2x"],["type","file","placeholder","Choose file","multiple","",1,"form-control",2,"display","none",3,"change"],[1,"toaste"],[1,"heade","d-flex","justify-content-between"],["src","assets/icons/close.svg","alt","",1,"close"],[1,"t-body"],[4,"ngFor","ngForOf"],["id","projectUploadModal","tabindex","-1","aria-labelledby","projectUploadModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"d-flex","mod-head","justify-content-between"],["id","projectUploadModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","ms-2"],[1,"modal-body"],[1,"form-group"],["for",""],["type","text","placeholder","Files url",1,"form-control"],[1,"d-flex","justify-content-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-file-card","projects-block",3,"routerLink"],[1,"proj-img-holder"],["src","./assets/images/files/project-5.jpg","alt",""],[1,"recent-file-type","pt-2","d-flex","flex-row","align-items-center"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[3,"fileName","progress"],[3,"showInfo","favorite","rename","archive","delete","card","index"]],template:function(e,i){if(e&1){let n=k();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h3"),p(5,"Project title"),l(),s(6,"div",4)(7,"span"),p(8,"105.3 MB | 235 items"),l()()(),T(9,bm,7,0,"div",5),l(),s(10,"div",6)(11,"button",7),C(12,"img",8),s(13,"span",9),p(14,"Import Files via URL"),l()(),s(15,"button",10),F("click",function(){b(n);let a=A(24);return y(a.click())}),C(16,"img",8),s(17,"span",9),p(18,"Upload File"),l()(),s(19,"a",11),C(20,"i",12),s(21,"span",9),p(22,"Map Files"),l()(),s(23,"input",13,0),F("change",function(){b(n);let a=A(24);return y(i.onFilesSelected(a.files))}),l(),s(25,"div",14)(26,"h3",15)(27,"div"),p(28,"Loading "),s(29,"span"),p(30),l(),p(31," item."),l(),C(32,"img",16),l(),s(33,"div",17),T(34,ym,2,2,"div",18),l()()(),s(35,"div",19)(36,"div",20)(37,"div",21)(38,"div",22)(39,"div",23)(40,"h5",24),p(41,"Upload files"),l(),s(42,"div"),C(43,"button",25),l()()(),s(44,"div",26)(45,"div",27)(46,"label",28),p(47,"Files url"),l(),C(48,"input",29),l(),C(49,"hr"),s(50,"div",30)(51,"button",31),p(52,"Done"),l()()()()()(),s(53,"div",32)(54,"strong"),p(55,"Sorting"),l(),s(56,"div",33)(57,"app-sort-files",34),F("optionSelected",function(a){return b(n),y(i.onTypeSelect(a))}),l(),s(58,"app-sort-files",34),F("optionSelected",function(a){return b(n),y(i.onPeopleSelect(a))}),l(),s(59,"app-sort-files",34),F("optionSelected",function(a){return b(n),y(i.onModifiedSelect(a))}),l()()(),s(60,"div",35)(61,"div",36),C(62,"img",37),s(63,"strong"),p(64,"Folders"),l()(),s(65,"div",38)(66,"div",39)(67,"a",40)(68,"div",41),C(69,"img",42),l(),s(70,"div",43)(71,"span"),p(72,"Sub folder"),l()(),s(73,"div",4)(74,"span"),p(75," 105.3 MB | 223 items"),l()()()()(),s(76,"div",36),C(77,"img",37),s(78,"strong"),p(79,"recent file"),l()(),s(80,"div",38),T(81,Cm,2,2,"div",44),l()()()()}e&2&&(V("expand",i.shownInfo),c(9),v("ngIf",i.shownInfo),c(10),v("routerLink",z(20,um))("queryParams",z(21,fm)),c(6),V("load",i.isUpload),c(5),S(i.count),c(4),v("ngForOf",i.uploads),c(23),v("label","Type")("icon","assets/icons/file-text.svg")("options",z(22,hm)),c(),v("label","People")("icon","assets/icons/profile-middle.svg")("options",z(23,gm)),c(),v("label","Modified")("icon","assets/icons/modified-middle.svg")("options",z(24,vm)),c(8),v("routerLink",z(25,_m)),c(14),v("ngForOf",i.cards))},dependencies:[J,X,Nr,ye,Me,we],encapsulation:2})};var xm=["dynamicContainer"],Sm=()=>["PDF","Word","Excel"],wm=()=>["Name 1","Name 2","Name 3"],Im=(o,t,e)=>[o,t,e],Fm=()=>["/projects/folder-details"],Pm=(o,t)=>({id:o,projectId:t});function Tm(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_();c(),D("",Q(2,1,((e=i.folder==null?null:i.folder.filesSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function jm(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_();c(),D("",Q(2,1,((e=i.folder==null?null:i.folder.filesSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function Em(o,t){if(o&1){let e=k();s(0,"div")(1,"button",54),C(2,"img",55),p(3),u(4,"translate"),l(),s(5,"button",56),F("click",function(){b(e);let n=_();return y(n.closeInfo())}),C(6,"img",57),p(7),u(8,"translate"),l()()}o&2&&(c(3),D("",g(4,2,"Common.Share")," "),c(4),D("",g(8,4,"Common.Information")," "))}function Mm(o,t){if(o&1){let e=k();s(0,"ul",58)(1,"li",59)(2,"button",60),F("click",function(){b(e);let n=_();return y(n.selectedTab="folders")}),C(3,"i",61),p(4),u(5,"translate"),l()(),s(6,"li",59)(7,"button",62),F("click",function(){b(e);let n=_();return y(n.selectedTab="map")}),C(8,"i",63),p(9),u(10,"translate"),l()()()}if(o&2){let e=_();c(2),V("active",e.selectedTab=="folders"),c(2),D(" ",g(5,6,"Common.Folders")," "),c(3),V("active",e.selectedTab=="map"),c(2),D(" ",g(10,8,"Map.Title")," ")}}function Om(o,t){if(o&1){let e=k();s(0,"a",21),F("click",function(){b(e),_();let n=A(40);return y(n.click())}),C(1,"img",22),s(2,"span",23),p(3),u(4,"translate"),l()()}o&2&&(c(3),S(g(4,1,"Folders.AddMap")))}function Dm(o,t){o&1&&(s(0,"div"),p(1),u(2,"translate"),l()),o&2&&(c(),D(" ",g(2,1,"Folders.FileUrlIsRequired")," "))}function km(o,t){if(o&1&&(s(0,"div",64),T(1,Dm,3,3,"div",15),l()),o&2){_();let e=A(61);c(),v("ngIf",e==null||e.errors==null?null:e.errors.required)}}function Bm(o,t){if(o&1&&C(0,"img",71),o&2){let e=_().$implicit;v("src",e.imageUrl,H)}}function Vm(o,t){o&1&&C(0,"i",72)}function Rm(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_().$implicit;c(),D("",Q(2,1,((e=i.filesSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function Am(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_().$implicit;c(),D("",Q(2,1,((e=i.filesSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function zm(o,t){if(o&1&&(s(0,"div",65)(1,"a",66)(2,"div",67),T(3,Bm,1,1,"img",68)(4,Vm,1,0,"i",69),l(),s(5,"div",70)(6,"span"),p(7),l()(),s(8,"div",14)(9,"span"),T(10,Rm,3,4,"span")(11,Am,3,4,"span"),p(12),u(13,"translate"),l()()()()),o&2){let e,i,n=t.$implicit,r=_();c(),v("routerLink",z(16,Fm))("queryParams",We(17,Pm,n.folderId,n.projectId)),c(),ut("background",r.getColor(n.colorId)?"linear-gradient(0deg, rgba(58,81,100,1) 21%, "+r.getColor(n.colorId)+" 100%)":"#3A5164")("border-bottom",n.imageUrl?"7px solid "+r.getColor(n.colorId):"none"),V("map-related",n.areaReference),c(),v("ngIf",n.imageUrl),c(),v("ngIf",n.areaReference),c(3),S(n.title),c(3),K(((e=n.filesSize)!==null&&e!==void 0?e:0)>1?10:11),c(2),ne(" | ",(i=n.filesNum)!==null&&i!==void 0?i:0," ",g(13,14,"Home.Items")," ")}}function Nm(o,t){if(o&1){let e=k();s(0,"div",65)(1,"app-file-card",73),F("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))})("favorite",function(n){b(e);let r=_();return y(r.favorite(n))})("rename",function(n){b(e);let r=_();return y(r.rename(n))})("archive",function(n){b(e);let r=_();return y(r.archive(n))})("delete",function(n){b(e);let r=_();return y(r.delete(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index;c(),v("card",e)("index",i)}}var ao=class o{constructor(t,e,i,n,r,a,d,m,f,h,x,I){this.route=t;this.renderer=e;this.projectCoverService=i;this.resolver=n;this.projectService=r;this.modalService=a;this.toaster=d;this.router=m;this.translate=f;this.el=h;this.uploadService=x;this.categoriesService=I}active=1;uploads=[];projectFolders=[];projectFiles=[];isUpload=!1;count=0;bootstrap;extFile="";subscriptions=[];folderId;folder;isFetching=!1;isFetchingProjects=!1;isFetchingFiles=!1;colors=[];tagsInput="";tags=[];isFetchingColors=!1;fetchProjectFolders;projectId;areaToOpen=null;selectedTab="folders";container;mapComponentRef=null;projectFileQuery;projectFolderQuery;ngOnInit(){this.route.queryParams.subscribe(t=>{this.folderId=t.id,this.projectId=t.projectId,ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.projectFolderQuery=new et,this.projectFolderQuery.projectId=this.projectId,this.projectFolderQuery.parentId=this.folderId,this.projectFolderQuery.sortOrder=null,this.projectFolderQuery.pageNumber=1,this.projectFolderQuery.pageSize=1e3,this.projectFolderQuery.FavUserId=null,this.projectFolderQuery.isActive=!0,this.projectFolderQuery.showCurrentUserFav=!0,this.projectFolderQuery.type=null,this.projectFolderQuery.colorId=null,this.projectFileQuery=new je,this.projectFileQuery.projectId=this.projectId,this.projectFileQuery.folderId=this.folderId,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,console.log(this.projectFileQuery),this.fetchFolder(this.folderId),this.fetchFolderFiles(this.projectId),this.fetchFolderFolders(),this.fetchColors()})}isAreaLoaded=!1;fetchFolder(t){if(!t||this.isFetching)return;this.isFetching=!0,this.areaToOpen=null,this.selectedTab="folders",this.folder=new Kn;let e=this.projectService.fetchFolder(t).subscribe(i=>{i&&(console.log("folder",i),this.folder=i,this.folder?.folderHtml&&(this.areaToOpen=this.folder.folderHtml,this.isAreaLoaded=!0,this.loadMap()),this.folder?.imageUrl&&setTimeout(()=>{this.projectCoverService.setShow(!1)})),this.isFetching=!1});this.subscriptions.push(e)}isFoldersLoaded=!1;fetchFolderFolders(){if(!this.projectFolderQuery.projectId||this.isFetchingProjects)return;this.isFetchingProjects=!0;let t=this.projectService.fetchProjectFolders(this.projectFolderQuery).subscribe(e=>{e&&(console.log("projectFolders",e),this.projectFolders=e,this.isFoldersLoaded=!0,this.loadMap()),this.isFetchingProjects=!1});this.subscriptions.push(t)}fetchFolderFiles(t){if(!t||this.isFetchingFiles)return;this.isFetchingFiles=!0;let e=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(i=>{i&&(console.log("projectFiles",i),this.projectFiles=i),this.isFetchingFiles=!1});this.subscriptions.push(e)}fetchColors(){if(this.isFetchingColors)return;this.isFetchingColors=!0;let t=this.categoriesService.fetchColors().subscribe(e=>{e&&(this.colors=e.data),this.isFetchingColors=!1});this.subscriptions.push(t)}getColor(t){let e=this.colors.find(i=>i.catId===t);return e?e.colorDegree:null}onMapFileSelected=t=>{if(t.length===0)return;let e=t[0];if(!e.type.startsWith("image/")){alert("Please upload a valid image file.");return}let i=new FileReader;i.onload=n=>{let r=n.target?.result,a=new FormData,d=JSON.stringify({img:r});a.append("folderHtml",d);let m=this.projectService.patchFolder(this.folderId??0,a).subscribe(f=>{f?(this.folder.folderHtml=d,this.areaToOpen=d,this.isAreaLoaded=!0,this.loadMap(),this.selectedTab="map",this.toaster.success(this.translate.instant("Maps.MapSavedSuccessfully"))):console.error(this.translate.instant("Maps.MapSaveFaild"))},f=>{console.error("Error saving map:",f)});this.subscriptions.push(m)},i.readAsDataURL(e)};favorite(t){console.log(t),this.projectService.setFavourite(t).subscribe(e=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchFolderFiles(this.projectId)})}rename(t){let e=this.projectFiles.find(i=>i.fileId===t.fileId);e&&(e.title=t.filename)}archive(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}delete(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}onTypeSelect(t){}onPeopleSelect(t){}onModifiedSelect(t){}selectedFile;selectedProject;shownInfo=!1;showInfo(t){this.selectedFile=t,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let e=new FormData;e.append("isOpen","true"),e.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,e).subscribe(i=>{i&&(console.log(i),this.fetchFolderFiles(this.projectId))}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}externalUpload(){let t=new FormData,e=new File([this.extFile],this.extFile,{type:"text/plain"});t.append("Title",e.name);let i=this.getFileType(e);i!==null&&t.append("fileType",i.toString()),t.append("isActive","true"),t.append("TypeId","12"),t.append("projectId",this.projectId?.toString()??""),t.append("folderId",this.folderId?.toString()??""),t.append("ExternalFileUrl",this.extFile),console.log("formData",t),this.projectService.createFile1(t).subscribe(n=>{n&&(console.log("Upload complete for",n),this.closeProjectUploadModal(),this.fetchFolderFiles(this.projectId))})}onFilesSelected=t=>{if(t.length===0)return;this.uploads=[],this.isUpload=!0,this.count=t.length;let e=[];for(let i=0;i<t.length;i++){let n=t[i],r=new FormData;r.append("fileFile",n,n.name);let a=this.uploadService.startUpload(n.name),d=this.getFileType(n);d!==null&&r.append("fileType",d.toString()),r.append("Title",n.name),r.append("isActive","true"),r.append("TypeId","12"),r.append("projectId",this.projectId?.toString()??""),r.append("folderId",this.folderId?.toString()??"");let m={fileName:n.name,progress:0};this.uploads.push(m);let f=this.projectService.createFile(r).pipe(vi(h=>{h.type===Qt.UploadProgress?h.total&&(console.log("event",h),m.progress=Math.round(100*h.loaded/h.total),this.uploadService.updateProgress(a,m.progress)):h.type===Qt.Response&&(m.progress=100,this.uploadService.updateProgress(a,m.progress),console.log("Upload complete for",m.fileName,h.body),this.fetchFolderFiles(this.projectId))}));e.push(f)}mt(e).subscribe({next:i=>{console.log("All uploads completed!",i),setTimeout(()=>{this.isUpload=!1,this.closeProjectUploadModal()},3e3)},error:i=>{console.error("Error during file upload:",i),this.isUpload=!1}})};getFileType(t){switch(t.name.split(".").pop()?.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":return 0;case"mp4":case"avi":return 1;case"pdf":return 2;case"doc":case"docx":return 3;case"xls":case"xlsx":return 4;case"ppt":case"pptx":return 5;case"txt":return 6;case"zip":return 7;default:return null}}modalInstance;ngAfterViewInit(){this.displayMapComponent();let t=document.getElementById("projectUploadModal");if(t){let e=window.bootstrap;this.modalInstance=new e.Modal(t)}}closeProjectUploadModal(){this.modalInstance?.hide()}openAddFolderModal(){let t=this.modalService.open(Oi,{backdrop:"static",keyboard:!1});t.componentInstance.projectId=this.folder.projectId,t.componentInstance.parentId=this.folderId;let e=t.componentInstance.isSuccess.subscribe(i=>{i&&this.fetchFolderFolders()});this.subscriptions.push(e)}handleMapSave(t){this.folder.folderHtml=t.mapHtml,this.areaToOpen=this.folder.folderHtml,this.isAreaLoaded=!0,t.reloadFolders&&(this.fetchFolderFolders(),this.fetchFolderFiles(this.projectId))}displayMapComponent(){if(!this.container)return;let t=this.resolver.resolveComponentFactory(Di);this.mapComponentRef=this.container.createComponent(t),this.mapComponentRef.instance.projectId=this.projectId,this.mapComponentRef.instance.folderId=this.folderId,this.mapComponentRef.instance.projectFolders=this.projectFolders,this.mapComponentRef.instance.areaToOpen=this.areaToOpen,this.mapComponentRef.instance.save.subscribe(e=>{this.handleMapSave(e)})}loadMap(){this.isAreaLoaded&&this.isFoldersLoaded&&this.mapComponentRef&&(this.mapComponentRef.instance.projectFolders=this.projectFolders,this.mapComponentRef.instance.areaToOpen=this.areaToOpen,this.mapComponentRef.instance.folderId=this.folderId,this.mapComponentRef.instance.loadMap())}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close(),setTimeout(()=>{this.projectCoverService.setShow(!1)}),this.subscriptions.forEach(t=>t.unsubscribe())}static \u0275fac=function(e){return new(e||o)(j(ft),j(me),j(ht),j(Gi),j(ae),j(Pe),j(oe),j(Ne),j(de),j(fe),j(Ci),j(tt))};static \u0275cmp=N({type:o,selectors:[["app-folder-details"]],viewQuery:function(e,i){if(e&1&&ie(xm,5,Ki),e&2){let n;Z(n=G())&&(i.container=n.first)}},standalone:!1,decls:107,vars:95,consts:[["mapFile",""],["file",""],["extFileForm","ngForm"],["extFile1","ngModel"],["dynamicContainer",""],["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"relativee"],["id","sticky-start"],[1,"main-top"],[1,"row"],[1,"col-lg-8","d-flex","justify-content-between","heady"],[1,"d-flex","justify-content-between","heady"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"col-lg-4","d-flex","justify-content-end"],["class","nav nav-tabs","id","myTab","role","tablist",4,"ngIf"],["id","myTabContent",1,"tab-content"],["id","folder-tab-pane","role","tabpanel","aria-labelledby","folder-tab","tabindex","0",1,"tab-pane","fade"],[1,"upper","d-flex","flex-row"],[1,"upload-btn",3,"click"],["src","assets/icons/plus.svg","alt",""],[1,"pt-3"],["data-bs-toggle","modal","data-bs-target","#projectUploadModal",1,"upload-btn"],["class","upload-btn",3,"click",4,"ngIf"],["type","file","accept","image/*",1,"form-control",2,"display","none",3,"change"],["type","file","placeholder","Choose file","multiple","",1,"form-control",2,"display","none",3,"change"],["id","projectUploadModal","tabindex","-1","aria-labelledby","projectUploadModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"d-flex","mod-head","justify-content-between"],["id","projectUploadModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","ms-2"],[1,"modal-body"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for",""],["type","text","id","extFile","name","extFile","required","",1,"form-control",3,"ngModelChange","placeholder","ngModel"],["class","alert alert-danger",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger","ms-3"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],["id","Map-tab-pane","role","tabpanel","aria-labelledby","Map-tab","tabindex","0",1,"tab-pane","fade"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","folder-tab","data-bs-toggle","tab","data-bs-target","#folder-tab-pane","type","button","role","tab","aria-controls","folder-tab-pane",1,"nav-link",3,"click"],[1,"fa-regular","fa-folder","me-1"],["id","Map-tab","data-bs-toggle","tab","data-bs-target","#Map-tab-pane","type","button","role","tab","aria-controls","Map-tab-pane",1,"nav-link",3,"click"],[1,"fa-regular","fa-map","me-1"],[1,"alert","alert-danger"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-file-card","projects-block",3,"routerLink","queryParams"],[1,"proj-img-holder","folder-holder"],[3,"src",4,"ngIf"],["class","fa fa-map","style","color: #bbd5d559;",4,"ngIf"],[1,"recent-file-type","pt-2","d-flex","flex-row","align-items-center"],[3,"src"],[1,"fa","fa-map",2,"color","#bbd5d559"],[3,"showInfo","favorite","rename","archive","delete","card","index"]],template:function(e,i){if(e&1){let n=k();s(0,"div",6)(1,"div",7)(2,"div",8),C(3,"div",9),s(4,"div",10)(5,"div",11)(6,"div",12)(7,"div",13)(8,"div")(9,"h3"),p(10),l(),s(11,"div",14)(12,"span"),T(13,Tm,3,4,"span")(14,jm,3,4,"span"),p(15),u(16,"translate"),l()()(),T(17,Em,9,6,"div",15),l()(),s(18,"div",16),T(19,Mm,11,10,"ul",17),l()()(),s(20,"div",18)(21,"div",19)(22,"div",20)(23,"button",21),F("click",function(){return b(n),y(i.openAddFolderModal())}),C(24,"img",22),s(25,"span",23),p(26),u(27,"translate"),l()(),s(28,"button",24),C(29,"img",22),s(30,"span",23),p(31),u(32,"translate"),l()(),s(33,"button",21),F("click",function(){b(n);let a=A(42);return y(a.click())}),C(34,"img",22),s(35,"span",23),p(36),u(37,"translate"),l()(),T(38,Om,5,3,"a",25),s(39,"input",26,0),F("change",function(){b(n);let a=A(40);return y(i.onMapFileSelected(a.files))}),l(),s(41,"input",27,1),F("change",function(){b(n);let a=A(42);return y(i.onFilesSelected(a.files))}),l()(),s(43,"div",28)(44,"div",29)(45,"div",30)(46,"div",31)(47,"div",32)(48,"h5",33),p(49),u(50,"translate"),l(),s(51,"div"),C(52,"button",34),l()()(),s(53,"div",35)(54,"form",36,2),F("ngSubmit",function(){b(n);let a=A(55);return y(a.form.valid&&i.externalUpload())}),s(56,"div",37)(57,"label",38),p(58),u(59,"translate"),l(),s(60,"input",39,3),u(62,"translate"),Ut("ngModelChange",function(a){return b(n),Lt(i.extFile,a)||(i.extFile=a),y(a)}),l(),T(63,km,2,1,"div",40),l(),C(64,"hr"),s(65,"div",41)(66,"button",42),p(67),u(68,"translate"),l(),s(69,"button",43),p(70),u(71,"translate"),l()()()()()()(),s(72,"div",44)(73,"strong"),p(74),u(75,"translate"),l(),s(76,"div",45)(77,"app-sort-files",46),u(78,"translate"),F("optionSelected",function(a){return b(n),y(i.onTypeSelect(a))}),l(),s(79,"app-sort-files",46),u(80,"translate"),F("optionSelected",function(a){return b(n),y(i.onPeopleSelect(a))}),l(),s(81,"app-sort-files",46),u(82,"translate"),u(83,"translate"),u(84,"translate"),u(85,"translate"),F("optionSelected",function(a){return b(n),y(i.onModifiedSelect(a))}),l()()(),s(86,"div",47)(87,"div",48),C(88,"img",49),s(89,"strong"),p(90),u(91,"translate"),l()(),s(92,"div",50),T(93,zm,14,20,"div",51),l(),s(94,"div",48),C(95,"img",49),s(96,"strong"),p(97),u(98,"translate"),l()(),s(99,"div",50),T(100,Nm,2,2,"div",51),l()()(),s(101,"div",52),C(102,"div",null,4),l()()()(),s(104,"div",7,5)(106,"app-file-info",53),F("closeInfoEvent",function(){return b(n),y(i.closeInfo())})("addTag",function(){return b(n),y(i.onAddTag())})("share",function(){return b(n),y(i.onShare())}),l()()()}if(e&2){let n,r,a=A(55),d=A(61);V("expand",i.shownInfo),c(10),S(i.folder==null?null:i.folder.title),c(3),K(((n=i.folder==null?null:i.folder.filesSize)!==null&&n!==void 0?n:0)>1?13:14),c(2),ne("| ",(r=i.folder==null?null:i.folder.filesNum)!==null&&r!==void 0?r:0," ",g(16,53,"Home.Items")," "),c(2),v("ngIf",i.shownInfo),c(2),v("ngIf",i.areaToOpen),c(2),V("active",i.selectedTab=="folders")("show",i.selectedTab=="folders"),c(5),S(g(27,55,"Folders.CreateFolder")),c(5),S(g(32,57,"Folders.ImportFilesViaUrl")),c(5),S(g(37,59,"Folders.UploadFile")),c(2),v("ngIf",!i.isFetching&&!i.areaToOpen),c(11),S(g(50,61,"Folders.UploadFiles")),c(9),S(g(59,63,"Folders.FilesUrl")),c(2),L("placeholder",g(62,65,"Folders.FilesUrl")),Nt("ngModel",i.extFile),c(3),v("ngIf",d.invalid&&(d.dirty||d.touched||a.submitted)),c(4),S(g(68,67,"Common.Upload")),c(3),S(g(71,69,"Common.Close")),c(4),S(g(75,71,"Common.Sorting")),c(3),v("label",g(78,73,"Type"))("icon","assets/icons/file-text.svg")("options",z(89,Sm)),c(2),v("label",g(80,75,"People"))("icon","assets/icons/profile-middle.svg")("options",z(90,wm)),c(2),v("label",g(82,77,"Modified"))("icon","assets/icons/modified-middle.svg")("options",en(91,Im,g(83,79,"Newest"),g(84,81,"Oldest"),g(85,83,"Recently Edited"))),c(9),S(g(91,85,"Common.Folders")),c(3),v("ngForOf",i.projectFolders),c(4),S(g(98,87,"Common.Files")),c(3),v("ngForOf",i.projectFiles),c(),V("active",i.selectedTab=="map")("show",i.selectedTab=="map"),c(3),V("active",i.shownInfo),c(2),v("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile)}},dependencies:[J,X,ye,Me,we,Re,Fe,Le,Ue,Ie,bi,qt,Ye,xe,re],encapsulation:2})};var Lm=["cardElement"],Um=()=>["PDF","Word","Excel"],Hm=()=>["Name 1","Name 2","Name 3"],Qm=()=>["Newest","Oldest","Recently Edited"];function $m(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_();c(),D("",Q(2,1,((e=i.totalFileSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function Wm(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_();c(),D("",Q(2,1,((e=i.totalFileSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function qm(o,t){if(o&1){let e=k();s(0,"div")(1,"button",15),C(2,"img",16),p(3),u(4,"translate"),l(),s(5,"button",17),F("click",function(){b(e);let n=_();return y(n.closeInfo())}),C(6,"img",18),p(7),u(8,"translate"),l()()}o&2&&(c(3),S(g(4,2,"Common.Share")),c(4),S(g(8,4,"Common.Information")))}function Xm(o,t){if(o&1){let e=k();s(0,"div",19)(1,"app-file-card",20),F("showInfo",function(n){b(e);let r=_();return y(r.showInfo(n))})("favorite",function(n){b(e);let r=_();return y(r.favorite(n))})("rename",function(n){b(e);let r=_();return y(r.rename(n))})("delete",function(n){b(e);let r=_();return y(r.delete(n))}),l()()}if(o&2){let e=t.$implicit,i=t.index;c(),v("card",e)("index",i)}}var so=class o{constructor(t,e,i,n,r,a){this.renderer=t;this.fileUploadService=e;this.projectService=i;this.toaster=n;this.translate=r;this.el=a}subscriptions=[];projects=[];projectFiles=[];isFetching=!1;isFetchingFiles=!1;pageSize=20;currentPage=1;totalItems=0;numberOfPages=0;ProjectTypes=dt;selectedProjectType=null;selectedSortField=null;cardElements;uploads=[];files;isUpload=!1;count=0;totalFileSize;fileCount;projectFileQuery;ngOnInit(){this.projectFileQuery=new je,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="true",this.projectFileQuery.ShowCurrentUserFav=!0,ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.fetchProjectFiles()}fetchProjectFiles(){let t=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(e=>{e&&(this.projectFiles=e,this.totalFileSize=this.projectFiles.reduce((i,n)=>i+(n.fileSize??0),0),this.fileCount=this.projectFiles.length,console.log("Project files:",this.projectFiles)),this.isFetchingFiles=!1});this.subscriptions.push(t)}favorite(t){console.log(t),this.projectService.setFavourite(t).subscribe(e=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchProjectFiles()})}rename(t){let e=this.projectFiles.find(i=>i.fileId===t.fileId);e&&(e.title=t.filename)}delete(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}onTypeSelect(t){console.log("Selected type:",t)}onPeopleSelect(t){console.log("Selected person:",t)}onModifiedSelect(t){console.log("Selected modified:",t)}selectedFile;selectedProject;shownInfo=!1;showInfo(t){this.selectedFile=t,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let e=new FormData;e.append("isOpen","true"),e.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,e).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles())}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close()}static \u0275fac=function(e){return new(e||o)(j(me),j(Ee),j(ae),j(oe),j(de),j(fe))};static \u0275cmp=N({type:o,selectors:[["app-archive"]],viewQuery:function(e,i){if(e&1&&ie(Lm,5),e&2){let n;Z(n=G())&&(i.cardElements=n)}},standalone:!1,decls:35,vars:45,consts:[["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[3,"showInfo","favorite","rename","delete","card","index"]],template:function(e,i){if(e&1){let n=k();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h3"),p(5),u(6,"translate"),l(),s(7,"div",4)(8,"span"),T(9,$m,3,4,"span")(10,Wm,3,4,"span"),p(11),l()()(),T(12,qm,9,6,"div",5),l(),s(13,"div",6)(14,"strong"),p(15),u(16,"translate"),l(),s(17,"div",7)(18,"app-sort-files",8),u(19,"translate"),F("optionSelected",function(a){return b(n),y(i.onTypeSelect(a))}),l(),s(20,"app-sort-files",8),u(21,"translate"),F("optionSelected",function(a){return b(n),y(i.onPeopleSelect(a))}),l(),s(22,"app-sort-files",8),u(23,"translate"),F("optionSelected",function(a){return b(n),y(i.onModifiedSelect(a))}),l()()(),s(24,"div",9)(25,"div",10),C(26,"img",11),s(27,"strong"),p(28),u(29,"translate"),l()(),s(30,"div",12),T(31,Xm,2,2,"div",13),l()()(),s(32,"div",2,0)(34,"app-file-info",14),F("closeInfoEvent",function(){return b(n),y(i.closeInfo())})("addTag",function(){return b(n),y(i.onAddTag())})("share",function(){return b(n),y(i.onShare())}),l()()()}if(e&2){let n,r;V("expand",i.shownInfo),c(5),S(g(6,30,"Sidebar.archive")),c(4),K(((n=i.totalFileSize)!==null&&n!==void 0?n:0)>1?9:10),c(2),D(" | ",(r=i.fileCount)!==null&&r!==void 0?r:0," items"),c(),v("ngIf",i.shownInfo),c(3),S(g(16,32,"Common.Sorting")),c(3),v("label",g(19,34,"Type"))("icon","assets/icons/file-text.svg")("options",z(42,Um)),c(2),v("label",g(21,36,"People"))("icon","assets/icons/profile-middle.svg")("options",z(43,Hm)),c(2),v("label",g(23,38,"Modified"))("icon","assets/icons/modified-middle.svg")("options",z(44,Qm)),c(6),S(g(29,40,"Home.Today")),c(3),v("ngForOf",i.projectFiles),c(),V("active",i.shownInfo),c(2),v("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile)}},dependencies:[J,X,ye,Me,Re,xe,re],encapsulation:2})};var Zo=()=>["/projects/project-details"],Go=o=>({id:o}),Ha=()=>["/projects/folder-details"],Qa=(o,t)=>({id:o,projectId:t}),Ym=()=>["/search"];function Zm(o,t){o&1&&st(0)}function Gm(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(3).$implicit;c(),D("",Q(2,1,((e=i==null?null:i.filesSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function Km(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(3).$implicit;c(),D("",Q(2,1,((e=i==null?null:i.filesSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function Jm(o,t){if(o&1&&(s(0,"div",13)(1,"a",15)(2,"h3",16),C(3,"img",17),p(4),l(),s(5,"div",18)(6,"div",19)(7,"span"),T(8,Gm,3,4,"span")(9,Km,3,4,"span"),p(10),l()()()()()),o&2){let e,i=_(2).$implicit;c(),v("routerLink",z(5,Zo))("queryParams",ce(6,Go,i.projectId)),c(3),D(" ",i.title," "),c(4),K(((e=i==null?null:i.filesSize)!==null&&e!==void 0?e:0)>1?8:9),c(2),D(" | ",i==null?null:i.filesNum," items ")}}function e0(o,t){if(o&1&&T(0,Jm,11,8,"div",14),o&2){let e=_(3);v("ngIf",e.selectedType=="project"||e.selectedType=="all")}}function t0(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(3).$implicit;c(),D("",Q(2,1,((e=i==null?null:i.filesSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function i0(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(3).$implicit;c(),D("",Q(2,1,((e=i==null?null:i.filesSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function n0(o,t){if(o&1&&(s(0,"div",13)(1,"a",15)(2,"h3",16),C(3,"img",20),p(4),l()(),s(5,"div",18)(6,"div",21)(7,"span",22),T(8,t0,3,4,"span")(9,i0,3,4,"span"),p(10),l(),p(11," | "),l(),s(12,"a",23),p(13),l()()()),o&2){let e,i=_(2).$implicit;c(),v("routerLink",z(8,Ha))("queryParams",We(9,Qa,i.folderId,i.projectId)),c(3),D(" ",i.title," "),c(4),K(((e=i==null?null:i.filesSize)!==null&&e!==void 0?e:0)>1?8:9),c(2),D(" | ",i==null?null:i.filesNum," items "),c(2),v("routerLink",z(12,Zo))("queryParams",ce(13,Go,i.projectId)),c(),S(i.projectTitle)}}function o0(o,t){if(o&1&&T(0,n0,14,15,"div",14),o&2){let e=_(3);v("ngIf",e.selectedType=="folder"||e.selectedType=="all")}}function r0(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(3).$implicit;c(),D("",Q(2,1,((e=i==null?null:i.fileSize)!==null&&e!==void 0?e:0)/1.024,"1.2-2")," MB")}}function a0(o,t){if(o&1&&(s(0,"span"),p(1),u(2,"number"),l()),o&2){let e,i=_(3).$implicit;c(),D("",Q(2,1,((e=i==null?null:i.filesSize)!==null&&e!==void 0?e:0)*1024,"1.2-2")," KB")}}function s0(o,t){o&1&&C(0,"img",28)}function l0(o,t){if(o&1&&(s(0,"a",15),p(1),l()),o&2){let e=_(3).$implicit;v("routerLink",z(3,Ha))("queryParams",We(4,Qa,e.folderId,e.projectId)),c(),S(e.folderTitle)}}function c0(o,t){if(o&1&&(s(0,"div",13)(1,"a",24)(2,"h3",16),C(3,"img",25),p(4),l()(),s(5,"div",18)(6,"div",21)(7,"span",22),T(8,r0,3,4,"span")(9,a0,3,4,"span"),l(),p(10," | "),l(),s(11,"div")(12,"a",15),p(13),l(),T(14,s0,1,0,"img",26)(15,l0,2,7,"a",27),l()()()),o&2){let e,i=_(2).$implicit;c(),v("routerLink",z(8,Ym)),c(3),D(" ",i.title," "),c(4),K(((e=i==null?null:i.fileSize)!==null&&e!==void 0?e:0)>1?8:9),c(4),v("routerLink",z(9,Zo))("queryParams",ce(10,Go,i.projectId)),c(),S(i.projectTitle),c(),v("ngIf",i.folderTitle),c(),v("ngIf",i.folderTitle)}}function d0(o,t){if(o&1&&T(0,c0,16,12,"div",14),o&2){let e=_(3);v("ngIf",e.selectedType=="file"||e.selectedType=="all")}}function p0(o,t){if(o&1&&(s(0,"div"),T(1,e0,1,1,"div",13)(2,o0,1,1,"div",13)(3,d0,1,1,"div",13),l()),o&2){let e,i=t.$implicit;c(),K((e=i._type)==="project"?1:e==="folder"?2:e==="file"?3:-1)}}function m0(o,t){if(o&1){let e=k();s(0,"div",6)(1,"a",7),F("click",function(n){return b(e),_().setFilter("all"),y(n.preventDefault())}),C(2,"img",8),p(3),u(4,"translate"),l(),s(5,"a",7),F("click",function(n){return b(e),_().setFilter("project"),y(n.preventDefault())}),C(6,"img",9),p(7),u(8,"translate"),l(),s(9,"a",7),F("click",function(n){return b(e),_().setFilter("folder"),y(n.preventDefault())}),C(10,"img",10),p(11),u(12,"translate"),l(),s(13,"a",7),F("click",function(n){return b(e),_().setFilter("file"),y(n.preventDefault())}),C(14,"img",11),p(15),u(16,"translate"),l()(),T(17,p0,4,1,"div",12)}if(o&2){let e=_();c(),V("active",e.selectedType==="all"),c(2),D(" ",g(4,13,"Search.All")," "),c(2),V("active",e.selectedType==="project"),c(2),D(" ",g(8,15,"Search.Project")," "),c(2),V("active",e.selectedType==="folder"),c(2),D(" ",g(12,17,"Search.Folder")," "),c(2),V("active",e.selectedType==="file"),c(2),D(" ",g(16,19,"Search.File")," "),c(2),v("ngForOf",e.allSearchResults)}}function u0(o,t){o&1&&(s(0,"div",29),C(1,"img",30),s(2,"h2"),p(3),u(4,"translate"),l(),s(5,"h4"),p(6),u(7,"translate"),l()()),o&2&&(c(3),S(g(4,2,"Search.NoResults")),c(3),S(g(7,4,"Search.NoMatch")))}var lo=class o{constructor(t,e,i,n,r,a,d,m){this.route=t;this.renderer=e;this.projectService=i;this.modalService=n;this.router=r;this.toaster=a;this.translate=d;this.categoriesService=m}projectFileQuery;projectFolderQuery;active=1;uploads=[];projects=[];projectFolders=[];projectFiles=[];colors=[];isUpload=!1;count=0;bootstrap;subscriptions=[];isFetchingProjects=!1;isFetchingProjectFolders=!1;isFetchingFiles=!1;isFetchingColors=!1;selectedType="all";keyword=null;allSearchResults;ngOnInit(){this.projectFolderQuery=new et,this.projectFolderQuery.projectId=null,this.projectFolderQuery.parentId=null,this.projectFolderQuery.sortOrder=null,this.projectFolderQuery.pageNumber=1,this.projectFolderQuery.pageSize=1e3,this.projectFolderQuery.FavUserId=null,this.projectFolderQuery.isActive=!0,this.projectFolderQuery.showCurrentUserFav=!0,this.projectFolderQuery.type=null,this.projectFileQuery=new je,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.ShowCurrentUserFav=!0,this.projectFileQuery.isArchived="false",this.route.queryParams.subscribe(t=>{if(this.keyword=t.keyword,this.fetchColors(),this.keyword){let e=document.getElementById("searchInput");e&&(e.value=this.keyword),mt({projects:this.projectService.fetchProjects(1,1e3,null,null,this.keyword),folders:this.projectService.fetchProjectFolders($e(ve({},this.projectFolderQuery),{keyword:this.keyword})),files:this.projectService.fetchProjectFiles($e(ve({},this.projectFileQuery),{keyword:this.keyword}))}).subscribe(({projects:i,folders:n,files:r})=>{this.projects=i?.data??[],this.projectFolders=n??[],this.projectFiles=r??[],this.collectResaults()})}})}collectResaults(){this.allSearchResults=[...this.projects.map(t=>ve({_type:"project"},t)),...this.projectFolders.map(t=>ve({_type:"folder"},t)),...this.projectFiles.map(t=>ve({_type:"file"},t))],console.log(this.allSearchResults)}get filteredResults(){return this.selectedType==="all"?this.allSearchResults:this.allSearchResults.filter(t=>t._type===this.selectedType)}setFilter(t){this.selectedType=t}fetchColors(){if(this.isFetchingColors)return;this.isFetchingColors=!0;let t=this.categoriesService.fetchColors().subscribe(e=>{e&&(this.colors=e.data),this.isFetchingColors=!1});this.subscriptions.push(t)}getColor(t){let e=this.colors.find(i=>i.catId===t);return e?e.colorDegree:null}favorite(t){console.log(t),this.projectService.setFavourite(t).subscribe(e=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully"))})}rename(t){let e=this.projectFiles.find(i=>i.fileId===t.fileId);e&&(e.title=t.filename)}archive(t){this.projectFiles=this.projectFiles.filter(e=>e.fileId!==t)}ngOnDestroy(){let t=document.getElementById("searchInput");t&&(t.value=""),this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(e){return new(e||o)(j(ft),j(me),j(ae),j(Pe),j(Ne),j(oe),j(de),j(tt))};static \u0275cmp=N({type:o,selectors:[["app-search"]],standalone:!1,decls:11,vars:6,consts:[["thenBlock",""],["elseBlock",""],[1,"row"],[1,"col"],[1,"relativee"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"search-filters"],["href","#",3,"click"],["src","./assets/icons/search/all.svg","alt",""],["src","./assets/icons/search/project.svg","alt",""],["src","./assets/icons/search/folder.svg","alt",""],["src","./assets/icons/search/file.svg","alt",""],[4,"ngFor","ngForOf"],[1,"search-resault"],["class","search-resault",4,"ngIf"],[3,"routerLink","queryParams"],[1,"d-flex","align-items-center"],["src","./assets/icons/search/project.svg","alt","",1,"me-2"],[1,"breadcrumb","d-flex"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],["src","./assets/icons/search/folder.svg","alt","",1,"me-2"],[1,"recent-file-footer","pt-0","d-flex","flex-row","align-items-center","me-1"],[1,"me-1"],[1,"ms-1",3,"routerLink","queryParams"],[3,"routerLink"],["src","./assets/icons/search/file.svg","alt","",1,"me-2"],["src","assets/icons/breadcrumb.svg","class","mx-2","alt","",4,"ngIf"],[3,"routerLink","queryParams",4,"ngIf"],["src","assets/icons/breadcrumb.svg","alt","",1,"mx-2"],[1,"no-resaults"],["src","./assets/icons/search/no-resaults.svg","alt",""]],template:function(e,i){if(e&1&&(s(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3"),p(4),u(5,"translate"),l(),T(6,Zm,1,0,"ng-container",5)(7,m0,18,21,"ng-template",null,0,se)(9,u0,8,6,"ng-template",null,1,se),l()()()),e&2){let n=A(8),r=A(10);c(4),S(g(5,4,"Search.Result")),c(2),v("ngIf",i.allSearchResults.length>1)("ngIfThen",n)("ngIfElse",r)}},dependencies:[J,X,we,xe,re],styles:[".file-info.fixed[_ngcontent-%COMP%]{position:relative;top:20px}ul.select2-results__options[_ngcontent-%COMP%]{height:125px}.nav-tabs[_ngcontent-%COMP%]{justify-content:flex-start;margin-bottom:0!important;padding-bottom:0!important;border-bottom:0!important}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:15px 25px}#header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;width:50px}#header[_ngcontent-%COMP%]{width:69px;height:100%;position:absolute;left:0;top:0}"]})};var f0=[{path:"",component:gn,children:[{path:"",component:Qn,data:{title:"Home"}},{path:"recent-files",component:$n,data:{title:"Recent files"}},{path:"projects",component:Wn,data:{title:"Projects"}},{path:"bin",component:qn,data:{title:"Trash"}},{path:"shared",component:Xn,data:{title:"Shared with me"}},{path:"my-files",component:Yn,data:{title:"My Files"}},{path:"favorite",component:Zn,data:{title:"favorite"}},{path:"archive",component:so,data:{title:"archive"}},{path:"search",component:lo,data:{title:"search"}},{path:"projects/project-details",component:oo,data:{title:"Project details",breadcrumb:"projects"}},{path:"projects/project-screen-details",component:ro,data:{title:"Project screen details",breadcrumb:"projects"}},{path:"projects/folder-details",component:ao,data:{title:"Folder details",breadcrumb:"projects"}}]}],co=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=Rt({type:o});static \u0275inj=Bt({imports:[Ni.forChild(f0),Ni]})};var $a=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=Rt({type:o});static \u0275inj=Bt({imports:[oi,Ur,Lr,co,oi,dn,cn,Ni,zr,Zt,Dr,Ua]})};export{$a as PagesModule};
