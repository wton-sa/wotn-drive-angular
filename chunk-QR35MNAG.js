import{a as Xt,b as bi,c as Fe,d as Rr,e as yi,f as zr,g as Nr,h as Lr}from"./chunk-7GSFVMDU.js";import{a as Mr}from"./chunk-RPKWM7KC.js";import{$a as x,$b as nn,Ab as lr,Ac as fo,Ad as _i,B as er,Bb as j,Bc as vr,Ca as N,Cb as Q,Cc as _r,Cd as Vr,D as St,Da as Vt,Db as L,Dc as br,Dd as ln,E as hi,Ea as or,Eb as ze,Ec as ho,Ed as cn,Fa as rr,Fb as ne,Fc as yr,Ga as ar,Gc as Cr,Ha as F,Hb as en,Hc as Sr,Ic as xr,Ja as Ft,Jc as go,K as gi,Ka as h,Kc as wr,La as pt,Lc as Fr,Ma as k,Mc as Ir,Na as sr,Nc as Pr,O as tr,Oa as Ai,Oc as Tr,P as fe,Pa as K,Pc as Er,Q as kt,Qc as jr,Rc as on,S as At,Sb as at,Ta as s,Tb as J,Ua as l,Ub as Z,Uc as vi,Va as v,Vb as mo,Vc as Pt,W as Xi,Wa as je,Wb as uo,X as _,Xa as Me,Xb as cr,Xc as ue,Y as b,Ya as rt,Yb as tn,Yc as oi,Z as xt,Za as O,Zb as Ri,Zc as ri,_ as ki,_b as dr,_c as Tt,a as he,ab as g,ac as ye,b as Qe,ba as ir,bb as ii,bc as Ut,cb as Rt,cc as ni,cd as oe,d as Zi,da as $,db as q,eb as It,fb as zt,fd as le,g as co,gb as ie,gd as ut,h as bt,ha as me,hb as Y,hc as zi,hd as Or,ib as G,ic as Ht,id as Dr,jc as Qt,jd as rn,kd as kr,l as yt,lb as V,ld as Le,mb as p,md as ai,n as nt,nb as z,oa as nr,ob as M,od as Be,p as dt,pa as U,pb as Vi,pc as Ni,pd as xe,qa as wt,qb as Nt,qc as mt,qd as $t,ra as Yi,rb as Lt,rc as pr,rd as qe,sa as c,sb as Bt,sc as Ne,sd as pe,ta as po,tc as Se,td as Wt,u as ot,ua as Gi,uc as mr,ud as we,vc as Li,vd as qt,wa as de,wb as Ji,wc as ur,wd as Zt,xa as I,xb as R,xc as fr,xd as Ar,y as Ct,ya as Ki,yb as se,yc as hr,yd as an,z as Di,zb as $e,zc as gr,zd as sn}from"./chunk-IABVTHWR.js";var ft=class o{showSubject=new bt(!1);sourceSubject=new bt("");show$=this.showSubject.asObservable();source$=this.sourceSubject.asObservable();setShow(e){this.showSubject.next(e)}setSource(e){this.sourceSubject.next(e)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=fe({token:o,factory:o.\u0275fac,providedIn:"root"})};var pn=class o{id;name;email;phoneNumber;imageUrl;dateJoin;isMale;isActive;roleId;static \u0275fac=function(t){return new(t||o)};static \u0275prov=fe({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ga=o=>({template1:o}),Br=()=>["/permissions"],Ka=()=>["/auth/change-password"],Ja=()=>["/"],es=o=>["/",o];function ts(o,e){if(o&1&&(s(0,"div",90),v(1,"img",91),l()),o&2){let t=g().data;c(),q("src",t==null?null:t.image,U)}}function is(o,e){if(o&1&&(F(0,ts,2,1,"div",90),p(1)),o&2){let t=e.data;K(t!=null&&t.image?0:-1),c(),M(" ",t==null?null:t.name," ")}}function ns(o,e){if(o&1&&(je(0),s(1,"span"),p(2),l(),Me()),o&2){let t=g();c(2),z(t.title)}}function os(o,e){if(o&1&&(s(0,"a",92),p(1),l()),o&2){let t=g(2);h("routerLink",se(2,es,t.breadcrumb)),c(),z(t.breadcrumb)}}function rs(o,e){o&1&&v(0,"img",93)}function as(o,e){if(o&1&&(je(0),s(1,"a",92),p(2,"Home"),l(),v(3,"img",93),F(4,os,2,4,"a",94)(5,rs,1,0,"img",95),s(6,"span"),p(7),l(),Me()),o&2){let t=g();c(),h("routerLink",R(4,Ja)),c(3),h("ngIf",t.breadcrumb),c(),h("ngIf",t.breadcrumb),c(2),z(t.title)}}function ss(o,e){if(o&1){let t=O();je(0),s(1,"button",96),x("click",function(){_(t);let n=g();return b(n.goBack())}),v(2,"i",97),p(3," back "),l(),Me()}}var mn=class o{constructor(e,t,i,n,r,a,d){this.authService=e;this.router=t;this.login=i;this.toaster=n;this.translate=r;this.el=a;this.activatedRoute=d;this.router.events.pipe(ot(m=>m instanceof Ni)).subscribe(()=>{let m=this.activatedRoute.firstChild;m&&(this.title=m.snapshot.data.title,this.breadcrumb=m.snapshot.data.breadcrumb)})}title="";breadcrumb="";currentUser=new pn;data=[{options:[{value:"Omar Ezz",label:"Omar Ezz",data:{name:"Omar Ezz",email:"Omar_Ezz@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"1"},{value:"Emad hamdi",label:"Emad Hamdi",data:{name:"Emad hamdi",email:"emad_hamdi@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"2"},{value:"Ehab Zakaria",label:"Ehab Zakaria",data:{name:"Ehab Zakaria",email:"ehab_zakaria@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"3"},{value:"mohamed Ezz",label:"mohamed Ezz",data:{name:"mohamed Ezz",email:"mohamed@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"4"},{value:"Ali hamdi",label:"Ali Hamdi",data:{name:"Ali hamdi",email:"Ali@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"5"},{value:"hassan Zakaria",label:"hassan Zakaria",data:{name:"hassan Zakaria",email:"hassan@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"6"}]}];update(e){console.log(e)}ngOnInit(){this.currentUser.id=Number(localStorage.getItem("userId")),this.currentUser.name=localStorage.getItem("userName"),this.currentUser.email=localStorage.getItem("email"),this.currentUser.phoneNumber=localStorage.getItem("phoneNumber"),this.currentUser.imageUrl=localStorage.getItem("imageUrl"),this.currentUser.roleId=Number(localStorage.getItem("roleId")),this.currentUser.isActive=localStorage.getItem("isActive")==="true",this.currentUser.isMale=localStorage.getItem("isMale")==="true",this.currentUser.dateJoin=new Date(localStorage.getItem("dateJoin")||"")}logout(){this.authService.logout().subscribe(e=>{console.log("logout_data",e),localStorage.clear(),localStorage.setItem("TimeSeveral","yes"),localStorage.setItem("isLoggedIn","false"),this.authService.isLoggedIn=!1,this.toaster.success("",this.translate.instant("Logout")),this.router.navigate(["/auth/login"])},e=>{this.toaster.error("",this.translate.instant("LogOut.logoutFailure"))})}ngAfterViewInit(){}goBack(){this.router.navigateByUrl(this.router.url,{skipLocationChange:!0}).then(()=>{window.history.back()})}toggle(){let e=document.getElementById("main-wrapper"),t=this.el.nativeElement.querySelector(".hamburger");e?.classList.toggle("menu-toggle"),t?.classList.toggle("is-active")}filterData(){let e=document.getElementById("filterData"),t=this.el.nativeElement.querySelector(".filter");e?.classList.toggle("active"),t?.classList.toggle("is-active")}search(e){this.router.navigate(["/search"],{queryParams:{keyword:e}})}static \u0275fac=function(t){return new(t||o)(I(on),I(Ne),I(Mr),I(oe),I(le),I(me),I(mt))};static \u0275cmp=N({type:o,selectors:[["app-header"]],standalone:!1,decls:207,vars:18,consts:[["searchInput",""],["template1",""],[1,"nav-header"],["href","home.html",1,"brand-logo"],["src","assets/images/logo.svg","alt","",1,"logo-abbr"],[1,"nav-control"],[1,"hamburger",3,"click"],[1,"line"],[1,"header","home"],[1,"header-content"],[1,"navbar","navbar-expand"],[1,"collapse","navbar-collapse","justify-content-between"],[1,"header-left"],[1,"filter",3,"click"],["src","assets/icons/search.svg","alt",""],["id","searchInput","type","search","placeholder","Search","aria-label","Search",1,"form-control","search",3,"keydown.enter"],["id","filterData",1,"filterData"],[1,"head-title"],["src","assets/icons/close.svg","alt","",3,"click"],[1,"filter-body"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],["for",""],["type","text","placeholder","Write Name Here........",1,"form-control"],["name","","id","",1,"form-control"],["value",""],[1,"col-lg-12"],["placeholder","Enter Name or Email address","displaySearchStatus","default","multiple","","showSelectAll","",3,"update","data","templates"],[1,"col-lg-4"],["type","date","placeholder","Enter Name or Email address",1,"form-control","date"],[1,"tags"],[1,"custom-check"],["type","checkbox","name","tag","id","tag1","checked",""],["for","tag1",1,"tag"],["type","checkbox","name","tag","id","tag2"],["for","tag2",1,"tag"],["type","checkbox","name","tag","id","tag3"],["for","tag3",1,"tag"],["type","checkbox","name","tag","id","tag4"],["for","tag4",1,"tag"],[1,"d-flex","justify-content-end"],["href","",1,"btn","btn-solid","me-3"],["href","",1,"btn","btn-primary"],[1,"navbar-nav","header-right"],[1,"nav-item","dropdown","notification_dropdown"],["href","#","role","button","data-bs-toggle","dropdown",1,"nav-link","bell","ai-icon"],["id","icon-lange","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-flag"],["d","M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"],["x1","4","y1","22","x2","4","y2","15"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","ai-icon",3,"routerLink"],["src","assets/icons/flag-sa.svg",1,"lang","me-2"],[1,"ml-2"],["src","assets/icons/flag-us.svg",1,"lang","me-2"],["id","icon-user","xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-bell"],["d","M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"],["d","M13.73 21a2 2 0 0 1-3.46 0"],[1,"pulse-css"],[1,"dropdown-menu","dropdown-menu-end","noti"],["id","DZ_W_Notification1",1,"widget-media","dz-scroll","p-3",2,"height","380px"],[1,"timeline"],[1,"timeline-panel"],[1,"media","me-2"],["alt","image","width","50","src","assets/images/avatar/1.jpg"],[1,"media-body"],[1,"mb-1"],[1,"d-block"],[1,"media","me-2","media-info"],[1,"media","me-2","media-success"],[1,"media","me-2","media-danger"],[1,"media","me-2","media-primary"],[1,"nav-item","dropdown","header-profile"],["href","#","role","button","data-bs-toggle","dropdown",1,"nav-link"],["width","20","alt","",3,"src"],[1,"header-info","pl-2"],[1,"dropdown-menu","dropdown-menu-right"],[1,"d-flex","align-items-center","px-4"],["width","20","alt","",1,"me-2",3,"src"],[1,"header-info"],[1,"mx-4","limit"],[1,"d-flex","align-items-center","justify-content-between"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",2,"width","25%"],[1,"ti","ti-angle-right"],[1,"pt-2","px-4"],[1,"btn","btn-primary","d-block",3,"click"],[1,"breadcrumb","d-flex","justify-content-between"],[1,"d-flex"],[4,"ngIf"],[1,"image","me-2"],["alt","",3,"src"],[3,"routerLink"],["src","assets/icons/breadcrumb.svg","alt","",1,"mx-2"],[3,"routerLink",4,"ngIf"],["src","assets/icons/breadcrumb.svg","class","mx-2","alt","",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"ti","ti-arrow-left","me-1"]],template:function(t,i){if(t&1){let n=O();s(0,"div",2)(1,"a",3),v(2,"img",4),l(),s(3,"div",5)(4,"div",6),x("click",function(){return _(n),b(i.toggle())}),v(5,"span",7)(6,"span",7)(7,"span",7),l()()(),s(8,"div",8)(9,"div",9)(10,"nav",10)(11,"div",11)(12,"div",12)(13,"form")(14,"a",13),x("click",function(){_(n);let a=V(17);return b(i.search(a.value))}),v(15,"img",14),l(),s(16,"input",15,0),x("keydown.enter",function(){_(n);let a=V(17);return b(i.search(a.value))}),l()(),s(18,"div",16)(19,"div",17)(20,"h3"),p(21,"Search"),l(),s(22,"img",18),x("click",function(){return _(n),b(i.filterData())}),l()(),s(23,"div",19)(24,"div",20)(25,"div",21)(26,"div",22)(27,"label",23),p(28,"Folder Name"),l(),v(29,"input",24),l()(),s(30,"div",21)(31,"div",22)(32,"label",23),p(33,"Project Type"),l(),s(34,"select",25)(35,"option",26),p(36,"Any"),l(),s(37,"option",26),p(38,"event"),l()()()(),s(39,"div",27)(40,"div",22)(41,"label",23),p(42,"Shared To"),l(),s(43,"select2",28),x("update",function(a){return _(n),b(i.update(a))}),F(44,is,2,2,"ng-template",null,1,ne),l()()(),s(46,"div",29)(47,"div",22)(48,"label",23),p(49,"Owner"),l(),s(50,"select",25)(51,"option",26),p(52,"Anyaone"),l(),s(53,"option",26),p(54,"Ehab"),l()()()(),s(55,"div",29)(56,"div",22)(57,"label",23),p(58,"Location"),l(),s(59,"select",25)(60,"option",26),p(61,"Anywhere"),l(),s(62,"option",26),p(63,"Egypt"),l()()()(),s(64,"div",29)(65,"div",22)(66,"label",23),p(67,"Date Modified"),l(),v(68,"input",30),l()()(),s(69,"div",22)(70,"label",23),p(71,"Tags"),l(),s(72,"div",31)(73,"div",32),v(74,"input",33),s(75,"label",34),p(76,"Website"),l()(),s(77,"div",32),v(78,"input",35),s(79,"label",36),p(80,"Government agencies"),l()(),s(81,"div",32),v(82,"input",37),s(83,"label",38),p(84,"Photo"),l()(),s(85,"div",32),v(86,"input",39),s(87,"label",40),p(88,"Videos"),l()()()(),s(89,"div",41)(90,"a",42),p(91,"Reset"),l(),s(92,"a",43),p(93,"Search"),l()()()()(),s(94,"ul",44)(95,"li",45)(96,"a",46),xt(),s(97,"svg",47),v(98,"path",48)(99,"line",49),l()(),ki(),s(100,"div",50)(101,"a",51),v(102,"img",52),s(103,"span",53),p(104,"\u0639\u0631\u0628\u064A"),l()(),s(105,"a",51),v(106,"img",54),s(107,"span",53),p(108,"English"),l()()()(),s(109,"li",45)(110,"a",46),xt(),s(111,"svg",55),v(112,"path",56)(113,"path",57),l(),ki(),v(114,"div",58),l(),s(115,"div",59)(116,"div",60)(117,"ul",61)(118,"li")(119,"div",62)(120,"div",63),v(121,"img",64),l(),s(122,"div",65)(123,"h6",66),p(124,"You have a new notification from WOTN"),l(),s(125,"small",67),p(126,"11/7/2024 - 02:26 PM"),l()()()(),s(127,"li")(128,"div",62)(129,"div",68),p(130," WOTN "),l(),s(131,"div",65)(132,"h6",66),p(133,"You have a new notification from WOTN"),l(),s(134,"small",67),p(135,"11/7/2024 - 02:26 PM"),l()()()(),s(136,"li")(137,"div",62),v(138,"div",69),s(139,"div",65)(140,"h6",66),p(141,"You have a new notification from WOTN"),l(),s(142,"small",67),p(143,"11/7/2024 - 02:26 PM"),l()()()(),s(144,"li")(145,"div",62)(146,"div",63),v(147,"img",64),l(),s(148,"div",65)(149,"h6",66),p(150,"You have a new notification from WOTN"),l(),s(151,"small",67),p(152,"11/7/2024 - 02:26 PM"),l()()()(),s(153,"li")(154,"div",62)(155,"div",70),p(156," WOTN "),l(),s(157,"div",65)(158,"h6",66),p(159,"You have a new notification from WOTN"),l(),s(160,"small",67),p(161,"11/7/2024 - 02:26 PM"),l()()()(),s(162,"li")(163,"div",62),v(164,"div",71),s(165,"div",65)(166,"h6",66),p(167,"You have a new notification from WOTN"),l(),s(168,"small",67),p(169,"11/7/2024 - 02:26 PM"),l()()()()()()()(),s(170,"li",72)(171,"a",73),v(172,"img",74),s(173,"div",75)(174,"span")(175,"strong"),p(176),l()()()(),s(177,"div",76)(178,"div",77),v(179,"img",78),s(180,"div",79)(181,"span")(182,"strong"),p(183),l()(),v(184,"br"),s(185,"span"),p(186),l()()(),s(187,"div",80)(188,"span",81),p(189,"Limit"),s(190,"span"),p(191,"1 GB of 50 GB"),l()(),s(192,"div",82),v(193,"div",83),l()(),s(194,"a",51)(195,"span",81),p(196,"Change Password "),v(197,"i",84),l()(),s(198,"div",85)(199,"a",86),x("click",function(){return _(n),b(i.logout())}),p(200,"Log out"),l()()()()()()()(),s(201,"div",87)(202,"div",88),F(203,ns,3,1,"ng-container",89)(204,as,8,5,"ng-container",89),l(),s(205,"div",88),F(206,ss,4,0,"ng-container",89),l()()()}if(t&2){let n=V(45);c(43),h("data",i.data)("templates",se(13,Ga,n)),c(58),h("routerLink",R(15,Br)),c(4),h("routerLink",R(16,Br)),c(67),h("src",i.currentUser.imageUrl,U),c(4),z(i.currentUser.name),c(3),h("src",i.currentUser.imageUrl,U),c(4),z(i.currentUser.name),c(3),z(i.currentUser.email),c(8),h("routerLink",R(17,Ka)),c(9),h("ngIf",i.title=="Home"),c(),h("ngIf",i.title!="Home"),c(2),h("ngIf",i.title!="Home")}},dependencies:[Z,Se,we,an,sn,xe,qe,Xt],styles:[".header-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], .header-left[_ngcontent-%COMP%]{position:relative}.header-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{position:absolute;top:50%;right:6px;transform:translateY(-50%);z-index:1;width:40px;line-height:40px;height:40px;text-align:center;border-radius:50%}a.filter[_ngcontent-%COMP%]{cursor:pointer;transition:all .6s ease-in-out;-ms-transition:all .6s ease-in-out;-o-transition:all .6s ease-in-out;-webkit-transition:all .6s ease-in-out;-moz-transition:all .6s ease-in-out}a.filter.is-active[_ngcontent-%COMP%], a.filter[_ngcontent-%COMP%]:hover{background:#eee}.filterData[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #EDEDED;background:#fff;box-shadow:0 0 22px #43434324;position:absolute;width:100%;top:70px;transform:translateY(-100%);left:0;z-index:9;height:0;opacity:0;overflow:hidden;transition:all .4s ease-in-out;-ms-transition:all .4s ease-in-out;-o-transition:all .4s ease-in-out;-webkit-transition:all .4s ease-in-out;-moz-transition:all .4s ease-in-out}.filterData.active[_ngcontent-%COMP%]{height:auto;opacity:1;transform:translateY(0)}.filterData[_ngcontent-%COMP%]   .head-title[_ngcontent-%COMP%]{padding:10px 32px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #D7D7D7}.head-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000;font-size:20px;font-style:normal;font-weight:500;line-height:150%;margin:0}.head-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;transition:all .6s ease-in-out;-ms-transition:all .6s ease-in-out;-o-transition:all .6s ease-in-out;-webkit-transition:all .6s ease-in-out;-moz-transition:all .6s ease-in-out}.head-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:rotate(180deg)}.filter-body[_ngcontent-%COMP%]{border-radius:20px;padding:25px 32px;position:relative;background:#fff;z-index:9}.tags[_ngcontent-%COMP%]{position:relative;display:flex;column-gap:5px}.tags[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.tag[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #D7D7D7;padding:10px 15px;color:#918c8c;font-size:13px;font-style:normal;font-weight:300;line-height:150%;cursor:pointer}.tags[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background:#3a5164;color:#fff}.tag[_ngcontent-%COMP%]:hover{color:#3a5164;background:#f8fafc}.select2-container--default[_ngcontent-%COMP%]   .select2-selection--multiple[_ngcontent-%COMP%]{border:none;background:transparent}"]})};var cs=()=>["/"],Ci=()=>({exact:!0}),ds=()=>["recent-files"],ps=()=>["my-files"],ms=()=>["projects"],us=()=>["favorite"],fs=()=>["archive"],un=class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=N({type:o,selectors:[["app-sidebar"]],standalone:!1,decls:34,vars:24,consts:[[1,"deznav"],[1,"deznav-scroll"],["id","menu",1,"metismenu","pt-5"],["routerLinkActive","active",1,"ai-icon",3,"routerLink","routerLinkActiveOptions"],["src","./assets/icons/menu/home.svg","alt","",1,"me-2"],[1,"nav-text"],["src","./assets/icons/menu/recent.svg","alt","",1,"me-2"],[1,"divider"],["src","./assets/icons/menu/mine.svg","alt","",1,"me-2"],["src","./assets/icons/menu/folder.svg","alt","",1,"me-2"],["src","./assets/icons/menu/star.svg","alt","",1,"me-2"],["src","./assets/icons/menu/archive.svg","alt","",1,"me-2"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li")(4,"a",3),v(5,"img",4),s(6,"span",5),p(7,"Home"),l()()(),s(8,"li")(9,"a",3),v(10,"img",6),s(11,"span",5),p(12,"recent"),l()()(),v(13,"li",7),s(14,"li")(15,"a",3),v(16,"img",8),s(17,"span",5),p(18,"My Files"),l()()(),s(19,"li")(20,"a",3),v(21,"img",9),s(22,"span",5),p(23,"Projects"),l()()(),s(24,"li")(25,"a",3),v(26,"img",10),s(27,"span",5),p(28,"favorite"),l()()(),s(29,"li")(30,"a",3),v(31,"img",11),s(32,"span",5),p(33,"Archive"),l()()()()()()),t&2&&(c(4),h("routerLink",R(12,cs))("routerLinkActiveOptions",R(13,Ci)),c(5),h("routerLink",R(14,ds))("routerLinkActiveOptions",R(15,Ci)),c(6),h("routerLink",R(16,ps))("routerLinkActiveOptions",R(17,Ci)),c(5),h("routerLink",R(18,ms))("routerLinkActiveOptions",R(19,Ci)),c(5),h("routerLink",R(20,us))("routerLinkActiveOptions",R(21,Ci)),c(5),h("routerLink",R(22,fs))("routerLinkActiveOptions",R(23,Ci)))},dependencies:[Se,mr],encapsulation:2})};var fn=class o{show;source;static \u0275fac=function(t){return new(t||o)};static \u0275cmp=N({type:o,selectors:[["app-project-cover"]],inputs:{show:"show",source:"source"},standalone:!1,decls:2,vars:3,consts:[[1,"project-cover"],["alt","",2,"filter","blur(8px)","-webkit-filter","blur(8px)",3,"src"]],template:function(t,i){t&1&&(s(0,"div",0),v(1,"img",1),l()),t&2&&(k("hidden",!i.show),c(),q("src",i.source,U))},encapsulation:2})};var hn=class o{constructor(e,t,i,n){this.router=e;this.activatedRoute=t;this.projectCoverService=i;this.cdr=n;this.router.events.pipe(ot(r=>r instanceof Ni)).subscribe(()=>{let r=this.activatedRoute.firstChild;r&&(this.title=r.snapshot.data.title,this.breadcrumb=r.snapshot.data.breadcrumb)})}title="";breadcrumb="";show=!1;source="";ngOnInit(){this.projectCoverService.show$.subscribe(e=>{this.show=e}),this.projectCoverService.source$.subscribe(e=>{this.source=e}),this.cdr.detectChanges(),this.router.events.pipe(ot(e=>e instanceof Ni)).subscribe(()=>{setTimeout(()=>{this.projectCoverService.setShow(!1),this.projectCoverService.setSource("")})})}static \u0275fac=function(t){return new(t||o)(I(Ne),I(mt),I(ft),I(en))};static \u0275cmp=N({type:o,selectors:[["app-pages"]],standalone:!1,decls:8,vars:2,consts:[["id","main-wrapper"],[1,"content-body"],[3,"show","source"],[1,"container-fluid"],[1,"main-body"]],template:function(t,i){t&1&&(s(0,"div",0),v(1,"app-header")(2,"app-sidebar"),s(3,"div",1),v(4,"app-project-cover",2),s(5,"div",3)(6,"div",4),v(7,"router-outlet"),l()()()()),t&2&&(c(4),h("show",i.show)("source",i.source))},dependencies:[mn,un,pr,fn],encapsulation:2})};var lt=(t=>(t[t.Event=0]="Event",t[t.Conference=1]="Conference",t))(lt||{});var re=class o{constructor(e){this.http=e}isLoadingSubject=new bt(!1);setLoading(e){this.isLoadingSubject.next(e)}createProject(e){return this.http.post(ur,e)}createFile(e){return this.http.post(ho,e,{reportProgress:!0,observe:"events",responseType:"json"})}patchProject(e,t){return this.http.patch(Pr+e.toString(),t)}createFile1(e){return this.http.post(ho,e)}createFolder(e){return this.http.post(fo,e)}createMap(e){return this.http.post(fo,e,{reportProgress:!0,observe:"events",responseType:"json"})}updateFolder(e,t){return this.http.put(vr+e.toString(),t)}activateFolder(e){return this.http.post(_r+e.toString(),{})}activateFile(e){return this.http.post(Tr+e.toString(),{})}archiveFile(e){return this.http.post(Er+e.toString(),{})}shareFile(e){return this.http.post(jr,e)}patchFolder(e,t){return this.http.patch(br+e.toString(),t)}fetchProjects(e,t,i=null,n=null,r=null){this.setLoading(!0);let a=new zi().set("isActive","").set("pageNumber",e.toString()).set("pageSize",t.toString());return i!=null&&(a=a.set("Type",i.toString())),n&&(a=a.set("sortOrder",n)),r!=null&&(a=a.set("keyword",r)),this.http.get(fr,{params:a,observe:"response"}).pipe(nt(d=>{let m=d.body;var u;d.headers.get("pagination")&&(u=JSON.parse(d.headers.get("pagination")??""));let f={currentPage:u?Number(u.currentPage):0,pageSize:u?Number(u.pageSize):0,numberOfPages:u?Number(u.numberOfPages):0,totalItems:u?Number(u.totalItems):0};return Qe(he({},f),{data:m})}),Ct(d=>this.handleError("fetching projects",d)),St(()=>this.setLoading(!1)))}fetchProject(e){return this.setLoading(!0),this.http.get(hr+e?.toString(),{observe:"response"}).pipe(nt(t=>t.body),Ct(t=>this.handleError("fetching project",t)),St(()=>this.setLoading(!1)))}fetchFolder(e){return this.setLoading(!0),this.http.get(gr+e?.toString(),{observe:"response"}).pipe(nt(t=>t.body),Ct(t=>this.handleError("fetching folder",t)),St(()=>this.setLoading(!1)))}fetchProjectFolders(e){this.setLoading(!0);let t={params:e};return this.http.get(yr,t)}fetchProjectFiles(e){this.setLoading(!0);let t={params:e};return this.http.get(Cr,t)}fetchTags(e,t,i){this.setLoading(!0);let n=new zi().set("isActive","").set("pageNumber",t.toString()).set("pageSize",i.toString());return e!=null&&(n=n.set("keyword",e)),this.http.get(go,{params:n,observe:"response"}).pipe(nt(r=>r.body?.map(d=>d?.title)??[]),Ct(r=>(this.handleError("fetching tags",r),yt([]))),St(()=>this.setLoading(!1)))}showTags(){let e={};return this.http.get(go,e)}handleError(e,t){return console.error(`Error ${e}:`,t),this.setLoading(!1),yt(void 0)}setFavourite(e){let t={};return this.http.post(Sr+"/"+e,t)}setFavouriteFolder(e){let t={};return this.http.post(xr+"/"+e,t)}patchFile(e,t){return this.http.patch(Ir+"/"+e.toString(),t)}static \u0275fac=function(t){return new(t||o)(At(Qt))};static \u0275prov=fe({token:o,factory:o.\u0275fac,providedIn:"root"})};var Gt=class o{constructor(e){this.http=e}isLoadingSubject=new bt(!1);setLoading(e){this.isLoadingSubject.next(e)}fetchUsers(e,t,i,n=null){this.setLoading(!0);let r=new zi().set("isActive","").set("pageNumber",t.toString()).set("pageSize",i.toString());return n&&(r=r.set("sortOrder",n)),e&&(r=r.set("keyword",e)),this.http.get(wr,{params:r,observe:"response"}).pipe(nt(a=>{let d=a.body;var m;a.headers.get("pagination")&&(m=JSON.parse(a.headers.get("pagination")??""));let u={currentPage:m?Number(m.currentPage):0,pageSize:m?Number(m.pageSize):0,numberOfPages:m?Number(m.numberOfPages):0,totalItems:m?Number(m.totalItems):0};return Qe(he({},u),{data:d})}),Ct(a=>this.handleError("fetching users",a)),St(()=>this.setLoading(!1)))}handleError(e,t){return console.error(`Error ${e}:`,t),this.setLoading(!1),yt(void 0)}static \u0275fac=function(t){return new(t||o)(At(Qt))};static \u0275prov=fe({token:o,factory:o.\u0275fac,providedIn:"root"})};var vs=o=>({focused:o}),_s=o=>({selected:o});function bs(o,e){o&1&&(s(0,"div",47),p(1),j(2,"translate"),l()),o&2&&(c(),M(" ",Q(2,1,"RequieredField")," "))}function ys(o,e){o&1&&(s(0,"div",47),p(1),j(2,"translate"),l()),o&2&&(c(),M(" ",Q(2,1,"RequieredField")," "))}function Cs(o,e){o&1&&(s(0,"div",47),p(1),j(2,"translate"),l()),o&2&&(c(),M(" ",Q(2,1,"Projects.EndDateMustBeGreater")," "))}function Ss(o,e){if(o&1){let t=O();s(0,"li",48)(1,"span",49),x("click",function(){let n=_(t).$implicit,r=g();return b(r.removeUser(n))}),p(2,"\xD7"),l(),s(3,"div",50)(4,"div",51)(5,"div",52),v(6,"img",53),l(),p(7),l(),s(8,"select",54),x("change",function(n){let r=_(t).$implicit,a=g();return b(a.onRoleChange(r,n.target.value))}),s(9,"option",55),p(10,"Viewer"),l(),s(11,"option",56),p(12,"Editor"),l(),s(13,"option",57),p(14,"Admin"),l()()()()}if(o&2){let t=e.$implicit;q("title",t.name),c(6),q("alt",t.name),h("src",t.imageUrl?t.imageUrl:t.isMale!=!1?"assets/images/profile/default-profile-img.png":"assets/images/profile/default-profile-female-img.jpg",U),c(),M("",t.name," ")}}function xs(o,e){if(o&1){let t=O();s(0,"li",62),x("click",function(){let n=_(t).$implicit,r=g(2);return b(r.selectUser(n))}),s(1,"div",50)(2,"div",51)(3,"div",52),v(4,"img",53),l(),p(5),l()()()}if(o&2){let t=e.$implicit;h("ngClass",se(4,_s,t.isSelected)),c(4),q("alt",t==null?null:t.name),h("src",t.imageUrl?t.imageUrl:t.isMale!=!1?"assets/images/profile/default-profile-img.png":"assets/images/profile/default-profile-female-img.jpg",U),c(),M(" ",t==null?null:t.name," ")}}function ws(o,e){if(o&1&&(s(0,"div",58)(1,"div",59)(2,"ul",60),F(3,xs,6,6,"li",61),l()()()),o&2){let t=g();c(3),h("ngForOf",t.usersData)}}function Fs(o,e){o&1&&(s(0,"div",47),p(1),j(2,"translate"),l()),o&2&&(c(),M(" ",Q(2,1,"RequieredField")," "))}function Is(o,e){if(o&1&&(s(0,"div",11)(1,"label",63),p(2,"Message"),l(),s(3,"textarea",64),p(4,"Your message"),l(),F(5,Fs,3,3,"div",14),l()),o&2){let t,i=g();c(5),h("ngIf",((t=i.projectForm.get("message"))==null?null:t.invalid)&&(i.isSubmittedItem||((t=i.projectForm.get("message"))==null?null:t.touched)||((t=i.projectForm.get("message"))==null?null:t.dirty)))}}function Ps(o,e){if(o&1&&(s(0,"div",65)(1,"h5"),p(2),j(3,"translate"),l(),s(4,"div",66),v(5,"img",53),j(6,"translate"),l()()),o&2){let t=g();c(2),M("",Q(3,3,"Projects.ImagePreview"),":"),c(3),q("alt",Q(6,5,"Projects.UploadedImage")),h("src",t.imagePreview,U)}}var Si=class o{constructor(e,t,i,n,r){this.activeModal=e;this.translate=t;this.toastr=i;this.projectService=n;this.userService=r}isSuccess=new $;projectForm;hasError=!1;isLoading=!1;isSubmittedItem=!1;selectedFile=null;ProjectTypes=lt;imagePreview=null;isFetchingUsers=!1;usersData=[];selectedUsers=[];subscriptions=[];ngOnInit(){this.initializeForm(),this.projectForm.get("searchQuery")?.valueChanges.subscribe(e=>{this.onSearch(e)})}onSearch(e){if(!this.isFetchingUsers)if(e){this.isFetchingUsers=!0;let t=this.userService.fetchUsers(e,1,1e4).subscribe(i=>{i&&(console.log("Users:",i),this.usersData=i.data.map(n=>this.mapUserToProjectUser(n))),this.isFetchingUsers=!1});this.subscriptions.push(t)}else this.usersData=[]}mapUserToProjectUser(e){return{id:e.id,name:e.name,email:e.email,phoneNumber:e.phoneNumber,imageUrl:e.imageUrl,isMale:e.isMale,isSelected:this.selectedUsers.some(t=>t.id===e.id),projectRole:1}}selectUser(e){this.selectedUsers.some(i=>i.id===e.id)||(e.isSelected=!0,this.selectedUsers.push(e))}removeUser(e){this.selectedUsers=this.selectedUsers.filter(t=>t.id!==e.id),e.isSelected=!1}onRoleChange(e,t){e.projectRole=t}initializeForm(){this.projectForm=new $t({title:new pe("",ai.required),type:new pe("",ai.required),brief:new pe(""),location:new pe(null),imageFile:new pe(null),startDate:new pe(null),endDate:new pe(null),typeId:new pe(10),isActive:new pe(!0),searchQuery:new pe(""),notify:new pe(!1),message:new pe("")},{validators:this.dateGreaterThan("startDate","endDate")})}submitProject(){if(this.isSubmittedItem=!0,this.projectForm.invalid){this.projectForm.markAllAsTouched(),this.toastr.error(this.translate.instant("Projects.EnterValidData"));return}let e=new FormData;Object.keys(this.projectForm.controls).forEach(i=>{e.append(i,this.projectForm.get(i)?.value)}),this.selectedFile&&e.append("imageFile",this.selectedFile,this.selectedFile.name);for(let i of this.selectedUsers)i.projectRole==1&&e.append("UserViewIDs",i?.id.toString()),i.projectRole==2&&e.append("UserUpdateIDs",i?.id.toString()),i.projectRole==3&&e.append("UserApproveIDs",i?.id.toString());let t=this.projectService.createProject(e).subscribe(i=>{i?(this.toastr.success(this.translate.instant("Projects.ProjectAddedSuccessfully")),this.isSuccess.emit(!0),this.closeModal()):this.showError(this.translate.instant("Projects.ProjectCreationFaild"))},i=>{console.error("Error creating project:",i),this.showError(this.translate.instant("Projects.ProjectCreationFaild"))});this.subscriptions.push(t)}showError(e){this.toastr.error(e)}closeModal(){this.activeModal.close()}onDragOver(e){e.preventDefault()}onFileChange(e){let t=e.target.files[0];if(t){this.selectedFile=t;let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(t)}}onDrop(e){e.preventDefault();let t=e.dataTransfer?.files;if(t&&t.length){this.selectedFile=t[0];let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(this.selectedFile)}}dateGreaterThan(e,t){return i=>{let n=i.get(e)?.value,r=i.get(t)?.value;return n&&!r||!n&&r||n&&r&&new Date(r)<=new Date(n)?{dateInvalid:!0}:null}}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||o)(I(bi),I(le),I(oe),I(re),I(Gt))};static \u0275cmp=N({type:o,selectors:[["app-project-create"]],outputs:{isSuccess:"isSuccess"},standalone:!1,decls:103,vars:70,consts:[["imageFile",""],[1,"modal-header"],[1,"d-flex","mod-head","justify-content-between"],["id","addProjectModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","ms-2",3,"click"],[3,"ngSubmit","formGroup"],["id","typeId","formControlName","typeId","type","hidden"],["id","isActive","formControlName","isActive","type","hidden"],[1,"modal-body"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],["for","title"],["id","title","type","text","formControlName","title",1,"form-control",3,"placeholder"],["class","formError",4,"ngIf"],["for","type"],["id","type","formControlName","type",1,"form-control"],["value","","disabled",""],[3,"value"],[1,"col-lg-12"],["for","brief"],["id","brief","formControlName","brief","rows","4",1,"form-control",3,"placeholder"],["for","startDate"],["id","startDate","type","date","formControlName","startDate",1,"form-control"],["for","endDate"],["id","endDate","type","date","formControlName","endDate",1,"form-control"],[1,"col-lg-9"],["for","peopleWithAccess"],[1,"select2","select2-container","select2-container--default","select2-container--open"],["role","combobox","id","select2-4-combo","tabindex","-1","aria-expanded","true",1,"selection","select2-focused"],[1,"select2-selection","select2-selection--multiple"],[1,"select2-selection__rendered",2,"padding","0.5rem!important"],["tabindex","0","class","select2-selection__choice",3,"title",4,"ngFor","ngForOf"],["type","text","id","searchQuery","formControlName","searchQuery","aria-describedby","searchHelp",1,"form-control",3,"placeholder","ngClass"],["class","select2-container select2-container--default select2-container-dropdown select2-container--open",4,"ngIf"],[1,"col-lg-3","align-self-center"],[1,"form-check","mt-3"],["type","checkbox","id","notify","formControlName","notify",1,"form-check-input"],["for","notify",1,"form-check-label"],["class","form-group",4,"ngIf"],["for","imageFile"],[1,"fileset",3,"click","dragover","drop"],["src","assets/images/Upload.svg",3,"alt"],["id","imageFile","accept","image/*","formControlName","imageFile","type","file",2,"display","none",3,"change"],["class","image-preview d-flex align-items-center mt-2",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"],[1,"formError"],["tabindex","0",1,"select2-selection__choice",3,"title"],[1,"select2-selection__choice__remove","ng-star-inserted",2,"color","var(--select2-selection-choice-close-color, #999)","font-weight","700",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center"],[1,"image","me-2"],[3,"src","alt"],["name","role1",1,"form-control",3,"change"],["value","1"],["value","2"],["value","3"],[1,"select2-container","select2-container--default","select2-container-dropdown","select2-container--open"],[1,"select2-dropdown","select2-dropdown--below"],["role","group",1,"select2-results__options","select2-results__options--nested",2,"height","auto","max-height","200px"],["role","option","class","select2-results__option","style","height: 40px; margin: 1px;",3,"ngClass","click",4,"ngFor","ngForOf"],["role","option",1,"select2-results__option",2,"height","40px","margin","1px",3,"click","ngClass"],["for","message"],["id","message","formControlName","message",1,"form-control"],[1,"image-preview","d-flex","align-items-center","mt-2"],[1,"proj-img-holder","ms-3"]],template:function(t,i){if(t&1){let n=O();s(0,"div",1)(1,"div",2)(2,"h5",3),p(3),j(4,"translate"),l(),s(5,"div")(6,"button",4),x("click",function(){return _(n),b(i.closeModal())}),l()()()(),s(7,"form",5),x("ngSubmit",function(){return _(n),b(i.submitProject())}),v(8,"input",6)(9,"input",7),s(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"label",12),p(15),j(16,"translate"),s(17,"em"),p(18,"*"),l()(),v(19,"input",13),j(20,"translate"),F(21,bs,3,3,"div",14),l()(),s(22,"div",10)(23,"div",11)(24,"label",15),p(25),j(26,"translate"),s(27,"em"),p(28,"*"),l()(),s(29,"select",16)(30,"option",17),p(31),j(32,"translate"),l(),s(33,"option",18),p(34),j(35,"translate"),l(),s(36,"option",18),p(37),j(38,"translate"),l()(),F(39,ys,3,3,"div",14),l()(),s(40,"div",19)(41,"div",11)(42,"label",20),p(43),j(44,"translate"),l(),v(45,"textarea",21),j(46,"translate"),l()(),s(47,"div",10)(48,"div",11)(49,"label",22),p(50),j(51,"translate"),l(),v(52,"input",23),l()(),s(53,"div",10)(54,"div",11)(55,"label",24),p(56),j(57,"translate"),l(),v(58,"input",25),F(59,Cs,3,3,"div",14),l()(),s(60,"div",26)(61,"div",11)(62,"label",27),p(63),j(64,"translate"),l(),s(65,"div",28)(66,"div",29)(67,"div",30)(68,"ul",31),F(69,Ss,15,4,"li",32),s(70,"li"),v(71,"input",33),j(72,"translate"),l()()()()(),F(73,ws,4,1,"div",34),l()(),s(74,"div",35)(75,"div",36),v(76,"input",37),s(77,"label",38),p(78," Notify user "),l()()(),s(79,"div",19),F(80,Is,6,1,"div",39),l(),s(81,"div",19)(82,"div",11)(83,"label",40),p(84),j(85,"translate"),l(),s(86,"div",41),x("click",function(){_(n);let a=V(96);return b(a.click())})("dragover",function(a){return _(n),b(i.onDragOver(a))})("drop",function(a){return _(n),b(i.onDrop(a))}),v(87,"img",42),j(88,"translate"),s(89,"h4"),p(90),j(91,"translate"),l(),s(92,"p"),p(93),j(94,"translate"),l(),s(95,"input",43,0),x("change",function(a){return _(n),b(i.onFileChange(a))}),l()()()(),s(97,"div",19),F(98,Ps,7,7,"div",44),l()(),s(99,"div",45)(100,"button",46),p(101),j(102,"translate"),l()()()()}if(t&2){let n,r,a,d,m;c(3),z(Q(4,32,"Projects.CreateProject")),c(4),h("formGroup",i.projectForm),c(8),M("",Q(16,34,"Projects.ProjectName")," "),c(4),It("placeholder","",Q(20,36,"Projects.WriteProjectNameHere"),"..."),c(2),h("ngIf",((n=i.projectForm.get("title"))==null?null:n.invalid)&&(i.isSubmittedItem||((n=i.projectForm.get("title"))==null?null:n.touched)||((n=i.projectForm.get("title"))==null?null:n.dirty))),c(4),z(Q(26,38,"Projects.ProjectType")),c(6),z(Q(32,40,"Projects.SelectProjectType")),c(2),h("value",i.ProjectTypes.Event),c(),z(Q(35,42,"Projects.Event")),c(2),h("value",i.ProjectTypes.Conference),c(),z(Q(38,44,"Projects.Conference")),c(2),h("ngIf",((r=i.projectForm.get("type"))==null?null:r.invalid)&&(i.isSubmittedItem||((r=i.projectForm.get("type"))==null?null:r.touched)||((r=i.projectForm.get("type"))==null?null:r.dirty))),c(4),z(Q(44,46,"Projects.Description")),c(2),It("placeholder","",Q(46,48,"Projects.WriteDescriptionHere"),"..."),c(5),z(Q(51,50,"Projects.StartDate")),c(6),z(Q(57,52,"Projects.EndDate")),c(3),h("ngIf",(i.projectForm.errors==null?null:i.projectForm.errors.dateInvalid)&&(i.isSubmittedItem||((a=i.projectForm.get("startDate"))==null?null:a.touched)||((a=i.projectForm.get("endDate"))==null?null:a.touched))),c(4),z(Q(64,54,"Projects.PeopleWithAccess")),c(6),h("ngForOf",i.selectedUsers),c(2),It("placeholder","",Q(72,56,"Projects.EnterNameOrEmail"),"..."),h("ngClass",se(68,vs,((d=i.projectForm.get("searchQuery"))==null?null:d.value.length)>0)),c(2),h("ngIf",i.usersData.length>0),c(7),h("ngIf",((m=i.projectForm.get("notify"))==null?null:m.value)==!0),c(4),M(" ",Q(85,58,"Projects.AddPropjectPhoto"),""),c(3),q("alt",Q(88,60,"Upload")),c(3),z(Q(91,62,"Projects.DropImageHereOrBrowse")),c(3),z(Q(94,64,"Projects.PhotoInfo")),c(5),h("ngIf",i.imagePreview),c(3),M(" ",Q(102,66,"Save")," ")}},dependencies:[at,J,Z,we,an,sn,Le,rn,Ar,Be,xe,qt,Zt,ut],styles:[".focused[_ngcontent-%COMP%]{background:#f9f9f9;border:1px solid #e0e1e2;color:#333;outline:0;box-shadow:0 0 15.5px #0000000d}.selected[_ngcontent-%COMP%]{background:var(--select2-option-selected-background, #ddd);color:var(--select2-option-selected-text-color, #000)}.select2-results__option[_ngcontent-%COMP%]:not(.selected):hover{background:var(--select2-option-hover-background, #f0f0f0);color:var(--select2-option-hover-text-color, #000);cursor:pointer}"]})};var D=(o,e=1e4)=>(o=parseFloat(o+"")||0,Math.round((o+Number.EPSILON)*e)/e),Ao=function(o){if(!(o&&o instanceof Element&&o.offsetParent))return!1;let e=o.scrollHeight>o.clientHeight,t=window.getComputedStyle(o).overflowY,i=t.indexOf("hidden")!==-1,n=t.indexOf("visible")!==-1;return e&&!i&&!n},Tn=function(o,e=void 0){return!(!o||o===document.body||e&&o===e)&&(Ao(o)?o:Tn(o.parentElement,e))},gt=function(o){var e=new DOMParser().parseFromString(o,"text/html").body;if(e.childElementCount>1){for(var t=document.createElement("div");e.firstChild;)t.appendChild(e.firstChild);return t}return e.firstChild},No=o=>`${o||""}`.split(" ").filter(e=>!!e),vt=(o,e,t)=>{o&&No(e).forEach(i=>{o.classList.toggle(i,t||!1)})},Jt=class{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}},xi={passive:!1},Vo=class{constructor(e,{start:t=()=>!0,move:i=()=>{},end:n=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=t,this.moveCallback=i,this.endCallback=n;for(let r of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[r]=this[r].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,xi),this.element.addEventListener("touchstart",this.onTouchStart,xi),this.element.addEventListener("touchmove",this.onMove,xi),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||e.button!==0)return;let t=new Jt(e);this.currentPointers.some(i=>i.id===t.id)||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(let t of Array.from(e.changedTouches||[]))this.triggerPointerStart(new Jt(t),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){let t=this.currentPointers.slice(),i="changedTouches"in e?Array.from(e.changedTouches||[]).map(r=>new Jt(r)):[new Jt(e)],n=[];for(let r of i){let a=this.currentPointers.findIndex(d=>d.id===r.id);a<0||(n.push(r),this.currentPointers[a]=r)}n.length&&this.moveCallback(e,this.currentPointers.slice(),t)}onPointerEnd(e){e.buttons>0&&e.button!==0||(this.triggerPointerEnd(e,new Jt(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(let t of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new Jt(t))}triggerPointerStart(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,t){let i=this.currentPointers.findIndex(n=>n.id===t.id);i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,t,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){let e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,xi),this.element.removeEventListener("touchstart",this.onTouchStart,xi),this.element.removeEventListener("touchmove",this.onMove,xi),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}};function Hr(o,e){return e?Math.sqrt(Math.pow(e.clientX-o.clientX,2)+Math.pow(e.clientY-o.clientY,2)):0}function Qr(o,e){return e?{clientX:(o.clientX+e.clientX)/2,clientY:(o.clientY+e.clientY)/2}:o}var Ro=o=>typeof o=="object"&&o!==null&&o.constructor===Object&&Object.prototype.toString.call(o)==="[object Object]",He=(o,...e)=>{let t=e.length;for(let i=0;i<t;i++){let n=e[i]||{};Object.entries(n).forEach(([r,a])=>{let d=Array.isArray(a)?[]:{};o[r]||Object.assign(o,{[r]:d}),Ro(a)?Object.assign(o[r],He(d,a)):Array.isArray(a)?Object.assign(o,{[r]:[...a]}):Object.assign(o,{[r]:a})})}return o},bo=function(o,e){return o.split(".").reduce((t,i)=>typeof t=="object"?t[i]:void 0,e)},Ei=class{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(let t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}setOptions(e){this.options=e?He({},this.constructor.defaults,e):{};for(let[t,i]of Object.entries(this.option("on")||{}))this.on(t,i)}option(e,...t){let i=bo(e,this.options);return i&&typeof i=="function"&&(i=i.call(this,this,...t)),i}optionFor(e,t,i,...n){let r=bo(t,e);var a;typeof(a=r)!="string"||isNaN(a)||isNaN(parseFloat(a))||(r=parseFloat(r)),r==="true"&&(r=!0),r==="false"&&(r=!1),r&&typeof r=="function"&&(r=r.call(this,this,e,...n));let d=bo(t,this.options);return d&&typeof d=="function"?r=d.call(this,this,e,...n,r):r===void 0&&(r=d),r===void 0?i:r}cn(e){let t=this.options.classes;return t&&t[e]||""}localize(e,t=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(i,n,r)=>{let a="";return r?a=this.option(`${n[0]+n.toLowerCase().substring(1)}.l10n.${r}`):n&&(a=this.option(`l10n.${n}`)),a||(a=i),a});for(let i=0;i<t.length;i++)e=e.split(t[i][0]).join(t[i][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(i,n)=>n)}on(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),this.events||(this.events=new Map),i.forEach(n=>{let r=this.events.get(n);r||(this.events.set(n,[]),r=[]),r.includes(t)||r.push(t),this.events.set(n,r)})}off(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),i.forEach(n=>{let r=this.events.get(n);if(Array.isArray(r)){let a=r.indexOf(t);a>-1&&r.splice(a,1)}})}emit(e,...t){[...this.events.get(e)||[]].forEach(i=>i(this,...t)),e!=="*"&&this.emit("*",e,...t)}};Object.defineProperty(Ei,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(Ei,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});var $i=class extends Ei{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){let t=new Map;for(let[i,n]of Object.entries(e)){let r=this.option(i),a=this.plugins[i];a||r===!1?a&&r===!1&&(a.detach(),delete this.plugins[i]):t.set(i,new n(this,r||{}))}for(let[i,n]of t)this.plugins[i]=n,n.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(let t of e){let i=this.plugins[t];i&&i.detach(),delete this.plugins[t]}return this.emit("detachPlugins"),this}},ce;(function(o){o[o.Init=0]="Init",o[o.Error=1]="Error",o[o.Ready=2]="Ready",o[o.Panning=3]="Panning",o[o.Mousemove=4]="Mousemove",o[o.Destroy=5]="Destroy"})(ce||(ce={}));var Et=["a","b","c","d","e","f"],_a={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},Ts={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:_a},$r='<circle cx="25" cy="25" r="20"></circle>',Lo='<div class="f-spinner"><svg viewBox="0 0 50 50">'+$r+$r+"</svg></div>",Ue=o=>o&&o!==null&&o instanceof Element&&"nodeType"in o,ae=(o,e)=>{o&&No(e).forEach(t=>{o.classList.remove(t)})},B=(o,e)=>{o&&No(e).forEach(t=>{o.classList.add(t)})},gn={a:1,b:0,c:0,d:1,e:0,f:0},Es=1e5,vn=1e4,Ze="mousemove",Wr="drag",qr="content",Xe="auto",yo=null,Co=null,mi=class o extends $i{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return Co===null&&(Co=window.matchMedia("(hover: none)").matches),Co}get isMobile(){return yo===null&&(yo=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),yo}get panMode(){return this.options.panMode!==Ze||this.isTouchDevice?Wr:Ze}get panOnlyZoomed(){let e=this.options.panOnlyZoomed;return e===Xe?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){let{a:e,b:t}=this.current;return Math.sqrt(e*e+t*t)||1}get targetScale(){let{a:e,b:t}=this.target;return Math.sqrt(e*e+t*t)||1}get minScale(){return this.option("minScale")||1}get fullScale(){let{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){let{containerRect:e,contentRect:t}=this,i=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){let e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(let e of Et){let t=e=="e"||e==="f"?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>t)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,t={},i={}){var n;if(super(t),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ce.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},gn)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},gn)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},o.Plugins),i)),this.emit("attachPlugins"),this.emit("init");let r=this.content;if(r.addEventListener("load",this.onLoad),r.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));let a=gt(Lo);!e.contains(r)||r.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(a):this.spinner=((n=r.parentElement)===null||n===void 0?void 0:n.insertBefore(a,r))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){let{container:e}=this,t=this.cn(qr),i=this.option(qr)||e.querySelector(`.${t}`);if(i||(i=e.querySelector("img,picture")||e.firstElementChild,i&&B(i,t)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){let{spinner:e,container:t,state:i}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&t.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===ce.Init?this.enable():this.updateMetrics()}onError(){this.state!==ce.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=ce.Error,this.emit("error"))}getNextScale(e){let{fullScale:t,targetScale:i,coverScale:n,maxScale:r,minScale:a}=this,d=a;switch(e){case"toggleMax":d=i-a<.5*(r-a)?r:a;break;case"toggleCover":d=i-a<.5*(n-a)?n:a;break;case"toggleZoom":d=i-a<.5*(t-a)?t:a;break;case"iterateZoom":let m=[1,t,r].sort((f,y)=>f-y),u=m.findIndex(f=>f>i+1e-5);d=m[u]||1}return d}attachObserver(){var e;let t=()=>{let{container:i,containerRect:n}=this;return Math.abs(n.width-i.getBoundingClientRect().width)>.1||Math.abs(n.height-i.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(t()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{t()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(e=this.resizeObserver)===null||e===void 0||e.observe(this.container)}detachObserver(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}attachEvents(){let{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new Vo(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(Ze,this.onMouseMove)}detachEvents(){var e;let{container:t}=this;t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("wheel",this.onWheel,{passive:!1}),(e=this.pointerTracker)===null||e===void 0||e.stop(),this.pointerTracker=null,document.removeEventListener(Ze,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();let e=this.friction,t=this.option("maxVelocity");for(let i of Et)e?(this.velocity[i]*=1-e,t&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],t),-1*t)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(let e of Et)e==="e"&&this.isBouncingX||e==="f"&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,t=0){let{current:i}=this,n=i.e+e,r=i.f+t,a=this.getBounds(),{x:d,y:m}=a,u=d.min,f=d.max,y=m.min,S=m.max,C=0,w=0;return u!==1/0&&n<u?C=u-n:f!==1/0&&n>f&&(C=f-n),y!==1/0&&r<y?w=y-r:S!==1/0&&r>S&&(w=S-r),Math.abs(C)<1e-4&&(C=0),Math.abs(w)<1e-4&&(w=0),Object.assign(Object.assign({},a),{xDiff:C,yDiff:w,inBounds:!C&&!w})}clampTargetBounds(){let{target:e}=this,{x:t,y:i}=this.getBounds();t.min!==1/0&&(e.e=Math.max(e.e,t.min)),t.max!==1/0&&(e.e=Math.min(e.e,t.max)),i.min!==1/0&&(e.f=Math.max(e.f,i.min)),i.max!==1/0&&(e.f=Math.min(e.f,i.max))}calculateContentDim(e=this.current){let{content:t,contentRect:i}=this,{fitWidth:n,fitHeight:r,fullWidth:a,fullHeight:d}=i,m=a,u=d;if(this.option("zoom")||this.angle!==0){let f=!(t instanceof HTMLImageElement)&&(window.getComputedStyle(t).maxWidth==="none"||window.getComputedStyle(t).maxHeight==="none"),y=f?a:n,S=f?d:r,C=this.getMatrix(e),w=new DOMPoint(0,0).matrixTransform(C),T=new DOMPoint(0+y,0).matrixTransform(C),P=new DOMPoint(0+y,0+S).matrixTransform(C),E=new DOMPoint(0,0+S).matrixTransform(C),A=Math.abs(P.x-w.x),H=Math.abs(P.y-w.y),X=Math.abs(E.x-T.x),et=Math.abs(E.y-T.y);m=Math.max(A,X),u=Math.max(H,et)}return{contentWidth:m,contentHeight:u}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===Ze||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);let{target:e}=this,{x:t,y:i,xDiff:n,yDiff:r}=this.checkBounds(),a=this.option("maxVelocity"),d=this.velocity.e,m=this.velocity.f;n!==0?(this.isBouncingX=!0,n*d<=0?d+=.14*n:(d=.14*n,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),a&&(d=Math.max(Math.min(d,a),-1*a))):this.isBouncingX=!1,r!==0?(this.isBouncingY=!0,r*m<=0?m+=.14*r:(m=.14*r,i.min!==1/0&&(this.target.f=Math.max(e.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(e.f,i.max))),a&&(m=Math.max(Math.min(m,a),-1*a))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=d),this.isBouncingY&&(this.velocity.f=m)}enable(){let{content:e}=this,t=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(let i of Et)this.current[i]=this.target[i]=t[i];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=ce.Ready,this.emit("ready")}onClick(e){var t;e.type==="click"&&e.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((t=this.pointerTracker)===null||t===void 0||t.clear(),this.trackingPoints=[],this.startDecelAnim());let i=e.target;if(!i||e.defaultPrevented)return;if(i.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{let C=window.getSelection();return C&&C.type==="Range"})()&&!i.closest("button"))return;let n=i.closest("[data-panzoom-action]"),r=i.closest("[data-panzoom-change]"),a=n||r,d=a&&Ue(a)?a.dataset:null;if(d){let C=d.panzoomChange,w=d.panzoomAction;if((C||w)&&e.preventDefault(),C){let T={};try{T=JSON.parse(C)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(T)}if(w)return void(this[w]&&this[w]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(i.closest("[data-fancybox]"))return;let m=this.content.getBoundingClientRect(),u=this.dragStart;if(u.time&&!this.canZoomOut()&&(Math.abs(m.x-u.x)>2||Math.abs(m.y-u.y)>2))return;this.dragStart.time=0;let f=C=>{this.option("zoom",e)&&C&&typeof C=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(C)&&typeof this[C]=="function"&&(e.preventDefault(),this[C]({event:e}))},y=this.option("click",e),S=this.option("dblClick",e);S?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",e),!e.defaultPrevented&&y&&f(y)):(this.emit("dblClick",e),e.defaultPrevented||f(S)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&y&&f(y))}addTrackingPoint(e){let t=this.trackingPoints.filter(i=>i.time>Date.now()-100);t.push(e),this.trackingPoints=t}onPointerDown(e,t,i){var n;if(this.option("touch",e)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];let r=this.content.getBoundingClientRect();if(this.dragStart={x:r.x,y:r.y,top:r.top,left:r.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===Ze&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;let a=e.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(a.nodeName)||a.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(n=window.getSelection())===null||n===void 0||n.removeAllRanges()}if(e.type==="mousedown")["A","BUTTON"].includes(a.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}onPointerMove(e,t,i){if(this.option("touch",e)===!1||!this.isDragging||t.length<2&&this.panOnlyZoomed&&D(this.targetScale)<=D(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))return;this.addTrackingPoint(t[0]);let{content:n}=this,r=Qr(i[0],i[1]),a=Qr(t[0],t[1]),d=0,m=0;if(t.length>1){let H=n.getBoundingClientRect();d=r.clientX-H.left-.5*H.width,m=r.clientY-H.top-.5*H.height}let u=Hr(i[0],i[1]),f=Hr(t[0],t[1]),y=u?f/u:1,S=a.clientX-r.clientX,C=a.clientY-r.clientY;this.dragOffset.x+=S,this.dragOffset.y+=C,this.dragOffset.time=Date.now()-this.dragStart.time;let w=D(this.targetScale)===D(this.minScale)&&this.option("lockAxis");if(w&&!this.lockedAxis)if(w==="xy"||w==="y"||e.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();let H=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=H>45&&H<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,S=0,C=0}else this.lockedAxis=w;if(Tn(e.target,this.content)&&(w="x",this.dragOffset.y=0),w&&w!=="xy"&&this.lockedAxis!==w&&D(this.targetScale)===D(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));let T=this.checkBounds(S,C);this.option("rubberband")?(this.isInfinite!=="x"&&(T.xDiff>0&&S<0||T.xDiff<0&&S>0)&&(S*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*T.xDiff))),this.isInfinite!=="y"&&(T.yDiff>0&&C<0||T.yDiff<0&&C>0)&&(C*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*T.yDiff)))):(T.xDiff&&(S=0),T.yDiff&&(C=0));let P=this.targetScale,E=this.minScale,A=this.maxScale;P<.5*E&&(y=Math.max(y,E)),P>1.5*A&&(y=Math.min(y,A)),this.lockedAxis==="y"&&D(P)===D(E)&&(S=0),this.lockedAxis==="x"&&D(P)===D(E)&&(C=0),this.applyChange({originX:d,originY:m,panX:S,panY:C,scale:y,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,t,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),Tn(e.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==ce.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;let t=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(let H of Et)this.velocity[H]=0;this.target.e=this.current.e,this.target.f=this.current.f,ae(this.container,"is-scaling"),ae(this.container,"is-animating"),this.isTicking=!1;let{trackingPoints:i}=this,n=i[0],r=i[i.length-1],a=0,d=0,m=0;r&&n&&(a=r.clientX-n.clientX,d=r.clientY-n.clientY,m=r.time-n.time);let u=((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1;u!==1&&(a*=u,d*=u);let f=0,y=0,S=0,C=0,w=this.option("decelFriction"),T=this.targetScale;if(m>0){S=Math.abs(a)>3?a/(m/30):0,C=Math.abs(d)>3?d/(m/30):0;let H=this.option("maxVelocity");H&&(S=Math.max(Math.min(S,H),-1*H),C=Math.max(Math.min(C,H),-1*H))}S&&(f=S/(1/(1-w)-1)),C&&(y=C/(1/(1-w)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&D(T)===this.minScale)&&(f=S=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&D(T)===this.minScale)&&(y=C=0);let P=this.dragOffset.x,E=this.dragOffset.y,A=this.option("dragMinThreshold")||0;Math.abs(P)<A&&Math.abs(E)<A&&(f=y=0,S=C=0),(this.option("zoom")&&(T<this.minScale-1e-5||T>this.maxScale+1e-5)||t&&!f&&!y)&&(w=.35),this.applyChange({panX:f,panY:y,friction:w}),this.emit("decel",S,C,P,E)}onWheel(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(r,a){return Math.abs(a)>Math.abs(r)?a:r});let i=Math.max(-1,Math.min(1,t));if(this.emit("wheel",e,i),this.panMode===Ze||e.defaultPrevented)return;let n=this.option("wheel");n==="pan"?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):n==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){e.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");let{current:e,target:t,content:i,contentRect:n}=this,r=Object.assign({},gn);for(let P of Et){let E=P=="e"||P==="f"?vn:Es;r[P]=D(e[P],E),Math.abs(t[P]-e[P])<(P=="e"||P==="f"?.51:.001)&&(e[P]=t[P])}let{a,b:d,c:m,d:u,e:f,f:y}=r,S=`matrix(${a}, ${d}, ${m}, ${u}, ${f}, ${y})`,C=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(C=C.parentElement||C),C.style.transform===S)return;C.style.transform=S;let{contentWidth:w,contentHeight:T}=this.calculateContentDim();n.width=w,n.height=T,this.emit("afterTransform")}updateMetrics(e=!1){var t;if(!this||this.state===ce.Destroy||this.isContentLoading)return;let i=Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1),{container:n,content:r}=this,a=r instanceof HTMLImageElement,d=n.getBoundingClientRect(),m=getComputedStyle(this.container),u=d.width*i,f=d.height*i,y=parseFloat(m.paddingTop)+parseFloat(m.paddingBottom),S=u-(parseFloat(m.paddingLeft)+parseFloat(m.paddingRight)),C=f-y;this.containerRect={width:u,height:f,innerWidth:S,innerHeight:C};let w=parseFloat(r.dataset.width||"")||(Oe=>{let Dt=0;return Dt=Oe instanceof HTMLImageElement?Oe.naturalWidth:Oe instanceof SVGElement?Oe.width.baseVal.value:Math.max(Oe.offsetWidth,Oe.scrollWidth),Dt||0})(r),T=parseFloat(r.dataset.height||"")||(Oe=>{let Dt=0;return Dt=Oe instanceof HTMLImageElement?Oe.naturalHeight:Oe instanceof SVGElement?Oe.height.baseVal.value:Math.max(Oe.offsetHeight,Oe.scrollHeight),Dt||0})(r),P=this.option("width",w)||Xe,E=this.option("height",T)||Xe,A=P===Xe,H=E===Xe;typeof P!="number"&&(P=w),typeof E!="number"&&(E=T),A&&(P=w*(E/T)),H&&(E=T/(w/P));let X=r.parentElement instanceof HTMLPictureElement?r.parentElement:r;this.option("transformParent")&&(X=X.parentElement||X);let et=X.getAttribute("style")||"";X.style.setProperty("transform","none","important"),a&&(X.style.width="",X.style.height=""),X.offsetHeight;let tt=r.getBoundingClientRect(),ve=tt.width*i,it=tt.height*i,Qa=ve,$a=it;ve=Math.min(ve,P),it=Math.min(it,E),a?{width:ve,height:it}=((Oe,Dt,Wa,qa)=>{let Za=Wa/Oe,Xa=qa/Dt,Jo=Math.min(Za,Xa);return{width:Oe*=Jo,height:Dt*=Jo}})(P,E,ve,it):(ve=Math.min(ve,P),it=Math.min(it,E));let Go=.5*($a-it),Ko=.5*(Qa-ve);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:tt.top-d.top+Go,bottom:d.bottom-tt.bottom+Go,left:tt.left-d.left+Ko,right:d.right-tt.right+Ko,fitWidth:ve,fitHeight:it,width:ve,height:it,fullWidth:P,fullHeight:E}),X.style.cssText=et,a&&(X.style.width=`${ve}px`,X.style.height=`${it}px`),this.setTransform(),e!==!0&&this.emit("refresh"),this.ignoreBounds||(D(this.targetScale)<D(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===ce.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){let{contentWidth:e,contentHeight:t}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:n}=this,{fitWidth:r,fitHeight:a}=this.contentRect,d=0,m=0,u=0,f=0,y=this.option("infinite");if(y===!0||n&&y===n)d=-1/0,u=1/0,m=-1/0,f=1/0;else{let{containerRect:S,contentRect:C}=this,w=D(r*i,vn),T=D(a*i,vn),{innerWidth:P,innerHeight:E}=S;if(S.width===w&&(P=S.width),S.width===T&&(E=S.height),e>P){u=.5*(e-P),d=-1*u;let A=.5*(C.right-C.left);d+=A,u+=A}if(r>P&&e<P&&(d-=.5*(r-P),u-=.5*(r-P)),t>E){f=.5*(t-E),m=-1*f;let A=.5*(C.bottom-C.top);m+=A,f+=A}a>E&&t<E&&(d-=.5*(a-E),u-=.5*(a-E))}return{x:{min:d,max:u},y:{min:m,max:f}}}getBounds(){let e=this.option("bounds");return e!==Xe?e:this.calculateBounds()}updateControls(){let e=this,t=e.container,{panMode:i,contentRect:n,targetScale:r,minScale:a}=e,d=a,m=e.option("click")||!1;m&&(d=e.getNextScale(m));let u=e.canZoomIn(),f=e.canZoomOut(),y=i===Wr&&!!this.option("touch"),S=f&&y;if(y&&(D(r)<D(a)&&!this.panOnlyZoomed&&(S=!0),(D(n.width,1)>D(n.fitWidth,1)||D(n.height,1)>D(n.fitHeight,1))&&(S=!0)),D(n.width*r,1)<D(n.fitWidth,1)&&(S=!1),i===Ze&&(S=!1),vt(t,this.cn("isDraggable"),S),!this.option("zoom"))return;let C=u&&D(d)>D(r),w=!C&&!S&&f&&D(d)<D(r);vt(t,this.cn("canZoomIn"),C),vt(t,this.cn("canZoomOut"),w);for(let T of t.querySelectorAll("[data-panzoom-action]")){let P=!1,E=!1;switch(T.dataset.panzoomAction){case"zoomIn":u?P=!0:E=!0;break;case"zoomOut":f?P=!0:E=!0;break;case"toggleZoom":case"iterateZoom":u||f?P=!0:E=!0;let A=T.querySelector("g");A&&(A.style.display=u?"":"none")}P?(T.removeAttribute("disabled"),T.removeAttribute("tabindex")):E&&(T.setAttribute("disabled",""),T.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:t=this.target.f,scale:i=this.targetScale,friction:n=this.option("friction"),angle:r=0,originX:a=0,originY:d=0,flipX:m=!1,flipY:u=!1,ignoreBounds:f=!1}){this.state!==ce.Destroy&&this.applyChange({panX:e-this.target.e,panY:t-this.target.f,scale:i/this.targetScale,angle:r,originX:a,originY:d,friction:n,flipX:m,flipY:u,ignoreBounds:f})}applyChange({panX:e=0,panY:t=0,scale:i=1,angle:n=0,originX:r=-this.current.e,originY:a=-this.current.f,friction:d=this.option("friction"),flipX:m=!1,flipY:u=!1,ignoreBounds:f=!1,bounce:y=this.option("bounce")}){let S=this.state;if(S===ce.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=d||0,this.ignoreBounds=f;let{current:C}=this,w=C.e,T=C.f,P=this.getMatrix(this.target),E=new DOMMatrix().translate(w,T).translate(r,a).translate(e,t);if(this.option("zoom")){if(!f){let A=this.targetScale,H=this.minScale,X=this.maxScale;A*i<H&&(i=H/A),A*i>X&&(i=X/A)}E=E.scale(i)}E=E.translate(-r,-a).translate(-w,-T).multiply(P),n&&(E=E.rotate(n)),m&&(E=E.scale(-1,1)),u&&(E=E.scale(1,-1));for(let A of Et)A!=="e"&&A!=="f"&&(E[A]>this.minScale+1e-5||E[A]<this.minScale-1e-5)?this.target[A]=E[A]:this.target[A]=D(E[A],vn);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===Ze||y===!1)&&!f&&this.clampTargetBounds(),S===ce.Init?this.animate():this.isResting||(this.state=ce.Panning,this.requestTick())}stop(e=!1){if(this.state===ce.Init||this.state===ce.Destroy)return;let t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(let i of Et)this.velocity[i]=0,e==="current"?this.current[i]=this.target[i]:e==="target"&&(this.target[i]=this.current[i]);this.setTransform(),ae(this.container,"is-scaling"),ae(this.container,"is-animating"),this.isTicking=!1,this.state=ce.Ready,t&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),B(this.container,"is-animating"),this.isScaling&&B(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,t=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==Ze||!e||D(this.targetScale)<=D(this.minScale))return;this.emit("mouseMove",e);let{container:i,containerRect:n,contentRect:r}=this,a=n.width,d=n.height,m=i.getBoundingClientRect(),u=(e.clientX||0)-m.left,f=(e.clientY||0)-m.top,{contentWidth:y,contentHeight:S}=this.calculateContentDim(this.target),C=this.option("mouseMoveFactor");C>1&&(y!==a&&(y*=C),S!==d&&(S*=C));let w=.5*(y-a)-u/a*100/100*(y-a);w+=.5*(r.right-r.left);let T=.5*(S-d)-f/d*100/100*(S-d);T+=.5*(r.bottom-r.top),this.applyChange({panX:w-this.target.e,panY:T-this.target.f,friction:t})}zoomWithWheel(e){if(this.state===ce.Destroy||this.state===ce.Init)return;let t=Date.now();if(t-this.pwt<45)return void e.preventDefault();this.pwt=t;var i=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(u,f){return Math.abs(f)>Math.abs(u)?f:u});let n=Math.max(-1,Math.min(1,i)),{targetScale:r,maxScale:a,minScale:d}=this,m=r*(100+45*n)/100;D(m)<D(d)&&D(r)<=D(d)?(this.cwd+=Math.abs(n),m=d):D(m)>D(a)&&D(r)>=D(a)?(this.cwd+=Math.abs(n),m=a):(this.cwd=0,m=Math.max(Math.min(m,a),d)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),D(m)!==D(r)&&this.zoomTo(m,{event:e}))}canZoomIn(){return this.option("zoom")&&(D(this.contentRect.width,1)<D(this.contentRect.fitWidth,1)||D(this.targetScale)<D(this.maxScale))}canZoomOut(){return this.option("zoom")&&D(this.targetScale)>D(this.minScale)}zoomIn(e=1.25,t){this.zoomTo(this.targetScale*e,t)}zoomOut(e=.8,t){this.zoomTo(this.targetScale*e,t)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:t=Xe,originX:i=Xe,originY:n=Xe,event:r}={}){if(this.isContentLoading||this.state===ce.Destroy)return;let{targetScale:a,fullScale:d,maxScale:m,coverScale:u}=this;if(this.stop(),this.panMode===Ze&&(r=this.pmme||r),r||i===Xe||n===Xe){let y=this.content.getBoundingClientRect(),S=this.container.getBoundingClientRect(),C=r?r.clientX:S.left+.5*S.width,w=r?r.clientY:S.top+.5*S.height;i=C-y.left-.5*y.width,n=w-y.top-.5*y.height}let f=1;typeof e=="number"?f=e:e==="full"?f=d:e==="cover"?f=u:e==="max"?f=m:e==="fit"?f=1:e==="next"&&(f=this.getNextScale("iterateZoom")),f=f/a||1,t=t===Xe?f>1?.15:.25:t,this.applyChange({scale:f,originX:i,originY:n,friction:t}),r&&this.panMode===Ze&&this.panWithMouse(r,t)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");let{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-i.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");let{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-i.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){let{container:e}=this,t=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");e.classList.toggle(t);let n=e.classList.contains(t);n?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(n?"enterFS":"exitFS")}getMatrix(e=this.current){let{a:t,b:i,c:n,d:r,e:a,f:d}=e;return new DOMMatrix([t,i,n,r,a,d])}reset(e){if(this.state!==ce.Init&&this.state!==ce.Destroy){this.stop("current");for(let t of Et)this.target[t]=gn[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=e===void 0?this.option("friction"):e,this.state=ce.Panning,this.requestTick())}}destroy(){this.stop(),this.state=ce.Destroy,this.detachEvents(),this.detachObserver();let{container:e,content:t}=this,i=this.option("classes")||{};for(let n of Object.values(i))e.classList.remove(n+"");t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}};Object.defineProperty(mi,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ts}),Object.defineProperty(mi,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});var Zr=function(o,e){let t=!0;return(...i)=>{t&&(t=!1,o(...i),setTimeout(()=>{t=!0},e))}},Xr=(o,e)=>{let t=[];return o.childNodes.forEach(i=>{i.nodeType!==Node.ELEMENT_NODE||e&&!i.matches(e)||t.push(i)}),t},js={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}},Ce;(function(o){o[o.Init=0]="Init",o[o.Ready=1]="Ready",o[o.Destroy=2]="Destroy"})(Ce||(Ce={}));var So=o=>{if(typeof o=="string"||o instanceof HTMLElement)o={html:o};else{let e=o.thumb;e!==void 0&&(typeof e=="string"&&(o.thumbSrc=e),e instanceof HTMLImageElement&&(o.thumbEl=e,o.thumbElSrc=e.src,o.thumbSrc=e.src),delete o.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},o)},Ms=(o={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},o),We=class extends Ei{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}},Os={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2},En=class extends We{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),B(e,this.cn("list")),e.setAttribute("role","tablist");let t=this.instance.container;t.appendChild(e),B(t,this.cn("hasDots")),this.list=e}return e}refresh(){var e;let t=this.instance.pages.length,i=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),r=this.option("dynamicFrom");if(t<i||t>n)return void this.cleanup();let a=typeof r=="number"&&t>5&&t>=r,d=!this.list||this.isDynamic!==a||this.list.children.length!==t;d&&this.cleanup();let m=this.build();if(vt(m,this.cn("isDynamic"),!!a),d)for(let y=0;y<t;y++)m.append(this.createItem(y));let u,f=0;for(let y of[...m.children]){let S=f===this.instance.page;S&&(u=y),vt(y,this.cn("isCurrent"),S),(e=y.children[0])===null||e===void 0||e.setAttribute("aria-selected",S?"true":"false");for(let C of["isBeforePrev","isPrev","isNext","isAfterNext"])ae(y,this.cn(C));f++}if(u=u||m.firstChild,a&&u){let y=u.previousElementSibling,S=y&&y.previousElementSibling;B(y,this.cn("isPrev")),B(S,this.cn("isBeforePrev"));let C=u.nextElementSibling,w=C&&C.nextElementSibling;B(C,this.cn("isNext")),B(w,this.cn("isAfterNext"))}this.isDynamic=a}createItem(e=0){var t;let i=document.createElement("li");i.setAttribute("role","presentation");let n=gt(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return i.appendChild(n),(t=i.children[0])===null||t===void 0||t.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,ae(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(En,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Os});var _n="disabled",bn="next",Yr="prev",jn=class extends We{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){let e=this.instance,t=e.pages.length,i=e.page;if(t<2)return void this.cleanup();this.build();let n=this.prev,r=this.next;n&&r&&(n.removeAttribute(_n),r.removeAttribute(_n),e.isInfinite||(i<=0&&n.setAttribute(_n,""),i>=t-1&&r.setAttribute(_n,"")))}addBtn(e){var t;let i=this.instance,n=document.createElement("button");n.setAttribute("tabindex","0"),n.setAttribute("title",i.localize(`{{${e.toUpperCase()}}}`)),B(n,this.cn("button")+" "+this.cn(e===bn?"isNext":"isPrev"));let r=i.isRTL?e===bn?Yr:bn:e;var a;return n.innerHTML=i.localize(this.option(`${r}Tpl`)),n.dataset[`carousel${a=e,a?a.match("^[a-z]")?a.charAt(0).toUpperCase()+a.substring(1):a:""}`]="true",(t=this.container)===null||t===void 0||t.appendChild(n),n}build(){let e=this.instance.container,t=this.cn("container"),{container:i,prev:n,next:r}=this;i||(i=e.querySelector("."+t),this.isDom=!!i),i||(i=document.createElement("div"),B(i,t),e.appendChild(i)),this.container=i,r||(r=i.querySelector("[data-carousel-next]")),r||(r=this.addBtn(bn)),this.next=r,n||(n=i.querySelector("[data-carousel-prev]")),n||(n=this.addBtn(Yr)),this.prev=n}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(jn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});var Mn=class extends We{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){let{nav:e,target:t}=this;e&&t&&(e.options.initialSlide=t.options.initialPage,e.state===Ce.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),t.state===Ce.Ready?this.onTargetReady(t):t.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,t,i){this.onNavTouch(e,e.panzoom,i)}onNavTouch(e,t,i){var n,r;if(Math.abs(t.dragOffset.x)>3||Math.abs(t.dragOffset.y)>3)return;let a=i.target,{nav:d,target:m}=this;if(!d||!m||!a)return;let u=a.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!u)return;let f=parseInt(u.dataset.index||"",10)||0,y=m.getPageForSlide(f),S=d.getPageForSlide(f);d.slideTo(S),m.slideTo(y,{friction:((r=(n=this.nav)===null||n===void 0?void 0:n.plugins)===null||r===void 0?void 0:r.Sync.option("friction"))||0}),this.markSelectedSlide(f)}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onTargetChange(){var e,t;let{target:i,nav:n}=this;if(!i||!n||n.state!==Ce.Ready||i.state!==Ce.Ready)return;let r=(t=(e=i.pages[i.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index,a=n.getPageForSlide(r);this.markSelectedSlide(r),n.slideTo(a,n.prevPage===null&&i.prevPage===null?{friction:0}:void 0)}markSelectedSlide(e){let t=this.nav;t&&t.state===Ce.Ready&&(this.selectedIndex=e,[...t.slides].map(i=>{i.el&&i.el.classList[i.index===e?"add":"remove"]("is-nav-selected")}))}attach(){let e=this,t=e.options.target,i=e.options.nav;t?e.addAsNavFor(t):i&&e.addAsTargetFor(i)}detach(){let e=this,t=e.nav,i=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}};Object.defineProperty(Mn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});var Ds={Navigation:jn,Dots:En,Sync:Mn},yn="animationend",Gr="isSelected",Cn="slide",Ti=class o extends $i{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===Ce.Ready}get isInfinite(){let e=!1,{contentDim:t,viewportDim:i,pages:n,slides:r}=this,a=r[0];return n.length>=2&&a&&t+a.dim>=i&&(e=this.option("infinite")),e}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(e,t={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ce.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof e=="string"&&(e=document.querySelector(e)),!e||!Ue(e))throw new Error("No Element found");this.container=e,this.slideNext=Zr(this.slideNext.bind(this),150),this.slidePrev=Zr(this.slidePrev.bind(this),150),this.userOptions=t,this.userPlugins=i,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,t;let i=He({},o.defaults,this.userOptions),n="",r=i.breakpoints;if(r&&Ro(r))for(let[a,d]of Object.entries(r))window.matchMedia(a).matches&&Ro(d)&&(n+=a,He(i,d));n===this.bp&&this.state!==Ce.Init||(this.bp=n,this.state===Ce.Ready&&(i.initialSlide=((t=(e=this.pages[this.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index)||0),this.state!==Ce.Init&&this.destroy(),super.setOptions(i),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=Ce.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},o.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=Ce.Ready,this.emit("ready")}initLayout(){let{container:e}=this,t=this.option("classes");B(e,this.cn("container")),vt(e,t.isLTR,!this.isRTL),vt(e,t.isRTL,this.isRTL),vt(e,t.isVertical,!this.isHorizontal),vt(e,t.isHorizontal,this.isHorizontal);let i=this.option("viewport")||e.querySelector(`.${t.viewport}`);i||(i=document.createElement("div"),B(i,t.viewport),i.append(...Xr(e,`.${t.slide}`)),e.prepend(i)),i.addEventListener("scroll",this.onScroll);let n=this.option("track")||e.querySelector(`.${t.track}`);n||(n=document.createElement("div"),B(n,t.track),n.append(...Array.from(i.childNodes))),n.setAttribute("aria-live","polite"),i.contains(n)||i.prepend(n),this.viewport=i,this.track=n,this.emit("initLayout")}initSlides(){let{track:e}=this;if(!e)return;let t=[...this.slides],i=[];[...Xr(e,`.${this.cn(Cn)}`)].forEach(n=>{if(Ue(n)){let r=So({el:n,isDom:!0,index:this.slides.length});i.push(r)}});for(let n of[...this.option("slides",[])||[],...t])i.push(So(n));this.slides=i;for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;for(let n of i)this.emit("beforeInitSlide",n,n.index),this.emit("initSlide",n,n.index);this.emit("initSlides")}setInitialPage(){let e=this.option("initialSlide");this.page=typeof e=="number"?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){let{track:e,pages:t,isHorizontal:i}=this;if(!e||!t.length)return;let n=this.page;t[n]||(this.page=n=0);let r=(t[n].pos||0)*(this.isRTL&&i?1:-1),a=i?`${r}px`:"0",d=i?"0":`${r}px`;e.style.transform=`translate3d(${a}, ${d}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);let e=this.option("Panzoom")||{};this.panzoom=new mi(this.viewport,He({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(t,i,...n)=>{this.emit(`Panzoom.${i}`,t,...n)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){let e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[],{contentDim:t,viewportDim:i}=this,n=this.option("slidesPerPage");n=(n==="auto"||t<=i)&&this.option("fill")!==!1?1/0:parseFloat(n+"");let r=0,a=0,d=0;for(let m of this.slides)(!e.length||a+m.dim-i>.05||d>=n)&&(e.push(Ms()),r=e.length-1,a=0,d=0),e[r].slides.push(m),a+=m.dim+m.gap,d++;return e}processPages(){let e=this.pages,{contentDim:t,viewportDim:i,isInfinite:n}=this,r=this.option("center"),a=this.option("fill"),d=a&&r&&t>i&&!n;if(e.forEach((f,y)=>{var S;f.index=y,f.pos=((S=f.slides[0])===null||S===void 0?void 0:S.pos)||0,f.dim=0;for(let[C,w]of f.slides.entries())f.dim+=w.dim,C<f.slides.length-1&&(f.dim+=w.gap);d&&f.pos+.5*f.dim<.5*i?f.pos=0:d&&f.pos+.5*f.dim>=t-.5*i?f.pos=t-i:r&&(f.pos+=-.5*(i-f.dim))}),e.forEach(f=>{a&&!n&&t>i&&(f.pos=Math.max(f.pos,0),f.pos=Math.min(f.pos,t-i)),f.pos=D(f.pos,1e3),f.dim=D(f.dim,1e3),Math.abs(f.pos)<=.1&&(f.pos=0)}),n)return e;let m=[],u;return e.forEach(f=>{let y=Object.assign({},f);u&&y.pos===u.pos?(u.dim+=y.dim,u.slides=[...u.slides,...y.slides]):(y.index=m.length,u=y,m.push(y))}),m}getPageFromIndex(e=0){let t=this.pages.length,i;return e=parseInt((e||0).toString())||0,i=this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0),i}getSlideMetrics(e){var t,i;let n=this.isHorizontal?"width":"height",r=0,a=0,d=e.el,m=!(!d||d.parentNode);if(d?r=parseFloat(d.dataset[n]||"")||0:(d=document.createElement("div"),d.style.visibility="hidden",(this.track||document.body).prepend(d)),B(d,this.cn(Cn)+" "+e.class+" "+e.customClass),r)d.style[n]=`${r}px`,d.style[n==="width"?"height":"width"]="";else{m&&(this.track||document.body).prepend(d),r=d.getBoundingClientRect()[n]*Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1);let f=d[this.isHorizontal?"offsetWidth":"offsetHeight"];f-1>r&&(r=f)}let u=getComputedStyle(d);return u.boxSizing==="content-box"&&(this.isHorizontal?(r+=parseFloat(u.paddingLeft)||0,r+=parseFloat(u.paddingRight)||0):(r+=parseFloat(u.paddingTop)||0,r+=parseFloat(u.paddingBottom)||0)),a=parseFloat(u[this.isHorizontal?"marginRight":"marginBottom"])||0,m?(i=d.parentElement)===null||i===void 0||i.removeChild(d):e.el||d.remove(),{dim:D(r,1e3),gap:D(a,1e3)}}getBounds(){let{isInfinite:e,isRTL:t,isHorizontal:i,pages:n}=this,r={min:0,max:0};if(e)r={min:-1/0,max:1/0};else if(n.length){let a=n[0].pos,d=n[n.length-1].pos;r=t&&i?{min:a,max:d}:{min:-1*d,max:-1*a}}return{x:i?r:{min:0,max:0},y:i?{min:0,max:0}:r}}repositionSlides(){let e,{isHorizontal:t,isRTL:i,isInfinite:n,viewport:r,viewportDim:a,contentDim:d,page:m,pages:u,slides:f,panzoom:y}=this,S=0,C=0,w=0,T=0;y?T=-1*y.current[this.axis]:u[m]&&(T=u[m].pos||0),e=t?i?"right":"left":"top",i&&t&&(T*=-1);for(let H of f){let X=H.el;X?(e==="top"?(X.style.right="",X.style.left=""):X.style.top="",H.index!==S?X.style[e]=C===0?"":`${D(C,1e3)}px`:X.style[e]="",w+=H.dim+H.gap,S++):C+=H.dim+H.gap}if(n&&w&&r){let H=getComputedStyle(r),X="padding",et=t?"Right":"Bottom",tt=parseFloat(H[X+(t?"Left":"Top")]);T-=tt,a+=tt,a+=parseFloat(H[X+et]);for(let ve of f)ve.el&&(D(ve.pos)<D(a)&&D(ve.pos+ve.dim+ve.gap)<D(T)&&D(T)>D(d-a)&&(ve.el.style[e]=`${D(C+w,1e3)}px`),D(ve.pos+ve.gap)>=D(d-a)&&D(ve.pos)>D(T+a)&&D(T)<D(a)&&(ve.el.style[e]=`-${D(w,1e3)}px`))}let P,E,A=[...this.inTransition];if(A.length>1&&(P=u[A[0]],E=u[A[1]]),P&&E){let H=0;for(let X of f)X.el?this.inTransition.has(X.index)&&P.slides.indexOf(X)<0&&(X.el.style[e]=`${D(H+(P.pos-E.pos),1e3)}px`):H+=X.dim+X.gap}}createSlideEl(e){let{track:t,slides:i}=this;if(!t||!e||e.el&&e.el.parentNode)return;let n=e.el||document.createElement("div");B(n,this.cn(Cn)),B(n,e.class),B(n,e.customClass);let r=e.html;r&&(r instanceof HTMLElement?n.appendChild(r):n.innerHTML=e.html+"");let a=[];i.forEach((f,y)=>{f.el&&a.push(y)});let d=e.index,m=null;a.length&&(m=i[a.reduce((f,y)=>Math.abs(y-d)<Math.abs(f-d)?y:f)]);let u=m&&m.el&&m.el.parentNode?m.index<e.index?m.el.nextSibling:m.el:null;t.insertBefore(n,t.contains(u)?u:null),e.el=n,this.emit("createSlide",e)}removeSlideEl(e,t=!1){let i=e?.el;if(!i||!i.parentNode)return;let n=this.cn(Gr);if(i.classList.contains(n)&&(ae(i,n),this.emit("unselectSlide",e)),e.isDom&&!t)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",e);let r=new CustomEvent(yn);i.dispatchEvent(r),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,t=this.option("transition")){var i,n,r,a;if(!t)return!1;let d=this.page,{pages:m,panzoom:u}=this;e=parseInt((e||0).toString())||0;let f=this.getPageFromIndex(e);if(!u||!m[f]||m.length<2||Math.abs((((n=(i=m[d])===null||i===void 0?void 0:i.slides[0])===null||n===void 0?void 0:n.dim)||0)-this.viewportDim)>1)return!1;let y=e>d?1:-1;this.isInfinite&&(d===0&&e===m.length-1&&(y=-1),d===m.length-1&&e===0&&(y=1));let S=m[f].pos*(this.isRTL?1:-1);if(d===f&&Math.abs(S-u.target[this.axis])<1)return!1;this.clearTransitions();let C=u.isResting;B(this.container,this.cn("inTransition"));let w=((r=m[d])===null||r===void 0?void 0:r.slides[0])||null,T=((a=m[f])===null||a===void 0?void 0:a.slides[0])||null;this.inTransition.add(T.index),this.createSlideEl(T);let P=w.el,E=T.el;C||t===Cn||(t="fadeFast",P=null);let A=this.isRTL?"next":"prev",H=this.isRTL?"prev":"next";return P&&(this.inTransition.add(w.index),w.transition=t,P.addEventListener(yn,this.onAnimationEnd),P.classList.add(`f-${t}Out`,`to-${y>0?H:A}`)),E&&(T.transition=t,E.addEventListener(yn,this.onAnimationEnd),E.classList.add(`f-${t}In`,`from-${y>0?A:H}`)),u.current[this.axis]=S,u.target[this.axis]=S,u.requestTick(),this.onChange(f),!0}manageSlideVisiblity(){let e=new Set,t=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(let n of this.slides)i.has(n)?e.add(n):t.add(n);for(let n of this.inTransition)e.add(this.slides[n]);for(let n of e)this.createSlideEl(n),this.lazyLoadSlide(n);for(let n of t)e.has(n)||this.removeSlideEl(n);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;let e="aria-hidden",t=this.cn(Gr);if(t)for(let i of this.slides){let n=i.el;n&&(n.dataset.index=`${i.index}`,n.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?n.removeAttribute(e):n.setAttribute(e,"true"):this.pages[this.page].slides.includes(i)?(n.classList.contains(t)||(B(n,t),this.emit("selectSlide",i)),n.removeAttribute(e)):(n.classList.contains(t)&&(ae(n,t),this.emit("unselectSlide",i)),n.setAttribute(e,"true")))}}flipInfiniteTrack(){let{axis:e,isHorizontal:t,isInfinite:i,isRTL:n,viewportDim:r,contentDim:a}=this,d=this.panzoom;if(!d||!i)return;let m=d.current[e],u=d.target[e]-m,f=0,y=.5*r;n&&t?(m<-y&&(f=-1,m+=a),m>a-y&&(f=1,m-=a)):(m>y&&(f=1,m-=a),m<-a+y&&(f=-1,m+=a)),f&&(d.current[e]=m,d.target[e]=m+u)}lazyLoadImg(e,t){let i=this,n="f-fadeIn",r="is-preloading",a=!1,d=null,m=()=>{a||(a=!0,d&&(d.remove(),d=null),ae(t,r),t.complete&&(B(t,n),setTimeout(()=>{ae(t,n)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",e))};B(t,r),t.src=t.dataset.lazySrcset||t.dataset.lazySrc||"",delete t.dataset.lazySrc,delete t.dataset.lazySrcset,t.addEventListener("error",()=>{m()}),t.addEventListener("load",()=>{m()}),setTimeout(()=>{let u=t.parentNode;u&&e.el&&(t.complete?m():a||(d=gt(Lo),u.insertBefore(d,t)))},300)}lazyLoadSlide(e){let t=e&&e.el;if(!t)return;let i=new Set,n=Array.from(t.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));t.dataset.lazySrc&&n.push(t),n.map(r=>{r instanceof HTMLImageElement?i.add(r):r instanceof HTMLElement&&r.dataset.lazySrc&&(r.style.backgroundImage=`url('${r.dataset.lazySrc}')`,delete r.dataset.lazySrc)});for(let r of i)this.lazyLoadImg(e,r)}onAnimationEnd(e){var t;let i=e.target,n=i?parseInt(i.dataset.index||"",10)||0:-1,r=this.slides[n],a=e.animationName;if(!i||!r||!a)return;let d=!!this.inTransition.has(n)&&r.transition;d&&a.substring(0,d.length+2)===`f-${d}`&&this.inTransition.delete(n),this.inTransition.size||this.clearTransitions(),n===this.page&&(!((t=this.panzoom)===null||t===void 0)&&t.isResting)&&this.emit("settle")}onDecel(e,t=0,i=0,n=0,r=0){if(this.option("dragFree"))return void this.setPageFromPosition();let{isRTL:a,isHorizontal:d,axis:m,pages:u}=this,f=u.length,y=Math.abs(Math.atan2(i,t)/(Math.PI/180)),S=0;if(S=y>45&&y<135?d?0:i:d?t:0,!f)return;let C=this.page,w=a&&d?1:-1,T=e.current[m]*w,{pageIndex:P}=this.getPageFromPosition(T);Math.abs(S)>5?(u[C].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(C=P),C=a&&d?S<0?C-1:C+1:S<0?C+1:C-1):C=n===0&&r===0?C:P,this.slideTo(C,{transition:!1,friction:e.option("decelFriction")})}onClick(e){let t=e.target,i=t&&Ue(t)?t.dataset:null,n,r;i&&(i.carouselPage!==void 0?(r="slideTo",n=i.carouselPage):i.carouselNext!==void 0?r="slideNext":i.carouselPrev!==void 0&&(r="slidePrev")),r?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[r](n)):this.emit("click",e)}onSlideTo(e){let t=e.detail||0;this.slideTo(this.getPageForSlide(t),{friction:0})}onChange(e,t=0){let i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,t))}onRefresh(){let e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;(e=this.viewport)===null||e===void 0||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,t=null){this.destroy(),this.state=Ce.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:t=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===Ce.Destroy)return;e=parseInt((e||0).toString())||0;let n=this.getPageFromIndex(e),{axis:r,isHorizontal:a,isRTL:d,pages:m,panzoom:u}=this,f=m.length,y=d&&a?1:-1;if(!u||!f)return;if(this.page!==n){let C=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",C,e),C.defaultPrevented)return}if(this.transitionTo(e,i))return;let S=m[n].pos;if(this.isInfinite){let C=this.contentDim,w=u.target[r]*y;f===2?S+=C*Math.floor(parseFloat(e+"")/2):S=[S,S-C,S+C].reduce(function(T,P){return Math.abs(P-w)<Math.abs(T-w)?P:T})}S*=y,Math.abs(u.target[r]-S)<1||(u.panTo({x:a?S:0,y:a?0:S,friction:t}),this.onChange(n))}slideToClosest(e){if(this.panzoom){let{pageIndex:t}=this.getPageFromPosition();this.slideTo(t,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),ae(this.container,this.cn("inTransition"));let e=["to-prev","to-next","from-prev","from-next"];for(let t of this.slides){let i=t.el;if(i){i.removeEventListener(yn,this.onAnimationEnd),i.classList.remove(...e);let n=t.transition;n&&i.classList.remove(`f-${n}Out`,`f-${n}In`)}}this.manageSlideVisiblity()}addSlide(e,t){var i,n,r,a;let d=this.panzoom,m=((i=this.pages[this.page])===null||i===void 0?void 0:i.pos)||0,u=((n=this.pages[this.page])===null||n===void 0?void 0:n.dim)||0,f=this.contentDim<this.viewportDim,y=Array.isArray(t)?t:[t],S=[];for(let C of y)S.push(So(C));this.slides.splice(e,0,...S);for(let C=0;C<this.slides.length;C++)this.slides[C].index=C;for(let C of S)this.emit("beforeInitSlide",C,C.index);if(this.page>=e&&(this.page+=S.length),this.updateMetrics(),d){let C=((r=this.pages[this.page])===null||r===void 0?void 0:r.pos)||0,w=((a=this.pages[this.page])===null||a===void 0?void 0:a.dim)||0,T=this.pages.length||1,P=this.isRTL?u-w:w-u,E=this.isRTL?m-C:C-m;f&&T===1?(e<=this.page&&(d.current[this.axis]-=P,d.target[this.axis]-=P),d.panTo({[this.isHorizontal?"x":"y"]:-1*C})):E&&e<=this.page&&(d.target[this.axis]-=E,d.current[this.axis]-=E,d.requestTick())}for(let C of S)this.emit("initSlide",C,C.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){let t=this.slides.length;e=(e%t+t)%t;let i=this.slides[e];if(i){this.removeSlideEl(i,!0),this.slides.splice(e,1);for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){let{panzoom:e,viewport:t,track:i,slides:n,isHorizontal:r,isInfinite:a}=this;if(!i)return;let d=r?"width":"height",m=r?"offsetWidth":"offsetHeight";if(t){let y=Math.max(t[m],D(t.getBoundingClientRect()[d],1e3)),S=getComputedStyle(t),C="padding",w=r?"Right":"Bottom";y-=parseFloat(S[C+(r?"Left":"Top")])+parseFloat(S[C+w]),this.viewportDim=y}let u,f=0;for(let[y,S]of n.entries()){let C=0,w=0;!S.el&&u?(C=u.dim,w=u.gap):({dim:C,gap:w}=this.getSlideMetrics(S),u=S),C=D(C,1e3),w=D(w,1e3),S.dim=C,S.gap=w,S.pos=f,f+=C,(a||y<n.length-1)&&(f+=w)}f=D(f,1e3),this.contentDim=f,e&&(e.contentRect[d]=f,e.contentRect[r?"fullWidth":"fullHeight"]=f),this.pages=this.createPages(),this.pages=this.processPages(),this.state===Ce.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,t=!1,i=!1){e===void 0&&(e=this.page);let n=this,r=n.panzoom,a=n.contentDim,d=n.pages[e]||0;if(!d||!r)return e>this.page?-1:1;let m=-1*r.current.e,u=D((m-d.pos)/(1*d.dim),1e3),f=u,y=u;this.isInfinite&&i!==!0&&(f=D((m-d.pos+a)/(1*d.dim),1e3),y=D((m-d.pos-a)/(1*d.dim),1e3));let S=[u,f,y].reduce(function(C,w){return Math.abs(w)<Math.abs(C)?w:C});return t?S:S>1?1:S<-1?-1:S}setViewportHeight(){let{page:e,pages:t,viewport:i,isHorizontal:n}=this;if(!i||!t[e])return;let r=0;n&&this.track&&(this.track.style.height="auto",t[e].slides.forEach(a=>{a.el&&(r=Math.max(r,a.el.offsetHeight))})),i.style.height=r?`${r}px`:""}getPageForSlide(e){for(let t of this.pages)for(let i of t.slides)if(i.index===e)return t.index;return-1}getVisibleSlides(e=0){var t;let i=new Set,{panzoom:n,contentDim:r,viewportDim:a,pages:d,page:m}=this;if(a){r=r+((t=this.slides[this.slides.length-1])===null||t===void 0?void 0:t.gap)||0;let u=0;u=n&&n.state!==ce.Init&&n.state!==ce.Destroy?-1*n.current[this.axis]:d[m]&&d[m].pos||0,this.isInfinite&&(u-=Math.floor(u/r)*r),this.isRTL&&this.isHorizontal&&(u*=-1);let f=u-a*e,y=u+a*(e+1),S=this.isInfinite?[-1,0,1]:[0];for(let C of this.slides)for(let w of S){let T=C.pos+w*r,P=T+C.dim+C.gap;T<y&&P>f&&i.add(C)}}return i}getPageFromPosition(e){let{viewportDim:t,contentDim:i,slides:n,pages:r,panzoom:a}=this,d=r.length,m=n.length,u=n[0],f=n[m-1],y=this.option("center"),S=0,C=0,w=0,T=e===void 0?-1*(a?.target[this.axis]||0):e;y&&(T+=.5*t),this.isInfinite?(T<u.pos-.5*f.gap&&(T-=i,w=-1),T>f.pos+f.dim+.5*f.gap&&(T-=i,w=1)):T=Math.max(u.pos||0,Math.min(T,f.pos));let P=f,E=n.find(A=>{let H=A.pos-.5*P.gap,X=A.pos+A.dim+.5*A.gap;return P=A,T>=H&&T<X});return E||(E=f),C=this.getPageForSlide(E.index),S=C+w*d,{page:S,pageIndex:C}}setPageFromPosition(){let{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([Ce.Destroy].includes(this.state))return;this.state=Ce.Destroy;let{container:e,viewport:t,track:i,slides:n,panzoom:r}=this,a=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),r&&(r.destroy(),this.panzoom=null),n&&n.forEach(m=>{this.removeSlideEl(m)}),this.detachPlugins(),t&&(t.removeEventListener("scroll",this.onScroll),t.offsetParent&&i&&i.offsetParent&&t.replaceWith(...i.childNodes));for(let[m,u]of Object.entries(a))m!=="container"&&u&&e.classList.remove(u);this.track=null,this.viewport=null,this.page=0,this.slides=[];let d=this.events.get("ready");this.events=new Map,d&&this.events.set("ready",d)}};Object.defineProperty(Ti,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:mi}),Object.defineProperty(Ti,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:js}),Object.defineProperty(Ti,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:Ds});var ba=function(o){if(!Ue(o))return 0;let e=window.scrollY,t=window.innerHeight,i=e+t,n=o.getBoundingClientRect(),r=n.y+e,a=n.height,d=r+a;if(e>d||i<r)return 0;if(e<r&&i>d||r<e&&d>i)return 100;let m=a;r<e&&(m-=e-r),d>i&&(m-=d-i);let u=m/t*100;return Math.round(u)},Qi=!(typeof window>"u"||!window.document||!window.document.createElement),xo,wo=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),Kr=o=>{if(o&&Qi){xo===void 0&&document.createElement("div").focus({get preventScroll(){return xo=!0,!1}});try{if(xo)o.focus({preventScroll:!0});else{let e=window.scrollY||document.body.scrollTop,t=window.scrollX||document.body.scrollLeft;o.focus(),document.body.scrollTo({top:e,left:t,behavior:"auto"})}}catch{}}},ya=()=>{let o=document,e,t="",i="",n="";return o.fullscreenEnabled?(t="requestFullscreen",i="exitFullscreen",n="fullscreenElement"):o.webkitFullscreenEnabled&&(t="webkitRequestFullscreen",i="webkitExitFullscreen",n="webkitFullscreenElement"),t&&(e={request:function(r=o.documentElement){return t==="webkitRequestFullscreen"?r[t](Element.ALLOW_KEYBOARD_INPUT):r[t]()},exit:function(){return o[n]&&o[i]()},isFullscreen:function(){return o[n]}}),e},zo={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},_a),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},trapFocus:!0,wheel:"zoom"},Ie,De;(function(o){o[o.Init=0]="Init",o[o.Ready=1]="Ready",o[o.Closing=2]="Closing",o[o.CustomClosing=3]="CustomClosing",o[o.Destroy=4]="Destroy"})(Ie||(Ie={})),function(o){o[o.Loading=0]="Loading",o[o.Opening=1]="Opening",o[o.Ready=2]="Ready",o[o.Closing=3]="Closing"}(De||(De={}));var Jr="",Hi=!1,Sn=!1,di=null,Ca=()=>{let o="",e="",t=ee.getInstance();if(t){let i=t.carousel,n=t.getSlide();if(i&&n){let r=n.slug||void 0,a=n.triggerEl||void 0;e=r||t.option("slug")||"",!e&&a&&a.dataset&&(e=a.dataset.fancybox||""),e&&e!=="true"&&(o="#"+e+(!r&&i.slides.length>1?"-"+(n.index+1):""))}}return{hash:o,slug:e,index:1}},On=()=>{let o=new URL(document.URL).hash,e=o.slice(1).split("-"),t=e[e.length-1],i=t&&/^\+?\d+$/.test(t)&&parseInt(e.pop()||"1",10)||1;return{hash:o,slug:e.join("-"),index:i}},Sa=()=>{let{slug:o,index:e}=On();if(!o)return;let t=document.querySelector(`[data-slug="${o}"]`);if(t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),ee.getInstance())return;let i=document.querySelectorAll(`[data-fancybox="${o}"]`);i.length&&(t=i[e-1],t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},xa=()=>{if(ee.defaults.Hash===!1)return;let o=ee.getInstance();if(o?.options.Hash===!1)return;let{slug:e,index:t}=On(),{slug:i}=Ca();o&&(e===i?o.jumpTo(t-1):(Hi=!0,o.close())),Sa()},wa=()=>{di&&clearTimeout(di),queueMicrotask(()=>{xa()})},ea=()=>{window.addEventListener("hashchange",wa,!1),setTimeout(()=>{xa()},500)};Qi&&(/complete|interactive|loaded/.test(document.readyState)?ea():document.addEventListener("DOMContentLoaded",ea));var xn="is-zooming-in",Dn=class extends We{onCreateSlide(e,t,i){let n=this.instance.optionFor(i,"src")||"";i.el&&i.type==="image"&&typeof n=="string"&&this.setImage(i,n)}onRemoveSlide(e,t,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(e,t,i,n){ae(this.instance.container,xn);for(let r of t.slides){let a=r.panzoom;a&&r.index!==i&&a.reset(.35)}}onClose(){var e;let t=this.instance,i=t.container,n=t.getSlide();if(!i||!i.parentElement||!n)return;let{el:r,contentEl:a,panzoom:d,thumbElSrc:m}=n;if(!r||!m||!a||!d||d.isContentLoading||d.state===ce.Init||d.state===ce.Destroy)return;d.updateMetrics();let u=this.getZoomInfo(n);if(!u)return;this.instance.state=Ie.CustomClosing,i.classList.remove(xn),i.classList.add("is-zooming-out"),a.style.backgroundImage=`url('${m}')`;let f=i.getBoundingClientRect();(((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1)===1&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${f.width}px`,height:`${f.height}px`,overflow:"hidden"});let{x:y,y:S,scale:C,opacity:w}=u;if(w){let T=((P,E,A,H)=>{let X=E-P,et=H-A;return tt=>A+((tt-P)/X*et||0)})(d.scale,C,1,0);d.on("afterTransform",()=>{a.style.opacity=T(d.scale)+""})}d.on("endAnimation",()=>{t.destroy()}),d.target.a=C,d.target.b=0,d.target.c=0,d.target.d=C,d.panTo({x:y,y:S,scale:C,friction:w?.2:.33,ignoreBounds:!0}),d.isResting&&t.destroy()}setImage(e,t){let i=this.instance;e.src=t,this.process(e,t).then(n=>{let{contentEl:r,imageEl:a,thumbElSrc:d,el:m}=e;if(i.isClosing()||!r||!a)return;r.offsetHeight;let u=!!i.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&m){m.addEventListener("contextmenu",S=>{S.preventDefault()});let y=document.createElement("div");B(y,"fancybox-protected"),r.appendChild(y)}if(d&&u){let y=n.contentRect,S=Math.max(y.fullWidth,y.fullHeight),C=null;!u.opacity&&S>1200&&(C=document.createElement("img"),B(C,"fancybox-ghost"),C.src=d,r.appendChild(C));let w=()=>{C&&(B(C,"f-fadeFastOut"),setTimeout(()=>{C&&(C.remove(),C=null)},200))};(f=d,new Promise((T,P)=>{let E=new Image;E.onload=T,E.onerror=P,E.src=f})).then(()=>{i.hideLoading(e),e.state=De.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{w(),this.instance.done(e)},()=>{}),C&&setTimeout(()=>{w()},S>2500?800:200)},()=>{i.hideLoading(e),i.revealContent(e)})}else{let y=this.optionFor(e,"initialSize"),S=this.optionFor(e,"zoom"),C={event:i.prevMouseMoveEvent||i.options.event,friction:S?.12:0},w=i.optionFor(e,"showClass")||void 0,T=!0;i.isOpeningSlide(e)&&(y==="full"?n.zoomToFull(C):y==="cover"?n.zoomToCover(C):y==="max"?n.zoomToMax(C):T=!1,n.stop("current")),T&&w&&(w=n.isDragging?"f-fadeIn":""),i.hideLoading(e),i.revealContent(e,w)}var f},()=>{i.setError(e,"{{IMAGE_ERROR}}")})}process(e,t){return new Promise((i,n)=>{var r;let a=this.instance,d=e.el;a.clearContent(e),a.showLoading(e);let m=this.optionFor(e,"content");if(typeof m=="string"&&(m=gt(m)),!m||!Ue(m)){if(m=document.createElement("img"),m instanceof HTMLImageElement){let u="",f=e.caption;u=typeof f=="string"&&f?f.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${((r=a.carousel)===null||r===void 0?void 0:r.pages.length)||1}`,m.src=t||"",m.alt=u,m.draggable=!1,e.srcset&&m.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(m.fetchPriority="high")}e.sizes&&m.setAttribute("sizes",e.sizes)}B(m,"fancybox-image"),e.imageEl=m,a.setContent(e,m,!1),e.panzoom=new mi(d,He({transformParent:!0},this.option("Panzoom")||{},{content:m,width:(u,f)=>a.optionFor(e,"width","auto",f)||"auto",height:(u,f)=>a.optionFor(e,"height","auto",f)||"auto",wheel:()=>{let u=a.option("wheel");return(u==="zoom"||u=="pan")&&u},click:(u,f)=>{var y,S;if(a.isCompact||a.isClosing()||e.index!==((y=a.getSlide())===null||y===void 0?void 0:y.index))return!1;if(f){let w=f.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(w.nodeName))return!1}let C=!f||f.target&&((S=e.contentEl)===null||S===void 0?void 0:S.contains(f.target));return a.option(C?"contentClick":"backdropClick")||!1},dblClick:()=>a.isCompact?"toggleZoom":a.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:u=>{i(u)},error:()=>{n()},destroy:()=>{n()}}}))})}zoomIn(e){return new Promise((t,i)=>{let n=this.instance,r=n.container,{panzoom:a,contentEl:d,el:m}=e;a&&a.updateMetrics();let u=this.getZoomInfo(e);if(!(u&&m&&d&&a&&r))return void i();let{x:f,y,scale:S,opacity:C}=u,w=()=>{e.state!==De.Closing&&(C&&(d.style.opacity=Math.max(Math.min(1,1-(1-a.scale)/(1-S)),0)+""),a.scale>=1&&a.scale>a.targetScale-.1&&t(a))},T=A=>{(A.scale<.99||A.scale>1.01)&&!A.isDragging||(ae(r,xn),d.style.opacity="",A.off("endAnimation",T),A.off("touchStart",T),A.off("afterTransform",w),t(A))};a.on("endAnimation",T),a.on("touchStart",T),a.on("afterTransform",w),a.on(["error","destroy"],()=>{i()}),a.panTo({x:f,y,scale:S,friction:0,ignoreBounds:!0}),a.stop("current");let P={event:a.panMode==="mousemove"?n.prevMouseMoveEvent||n.options.event:void 0},E=this.optionFor(e,"initialSize");B(r,xn),n.hideLoading(e),E==="full"?a.zoomToFull(P):E==="cover"?a.zoomToCover(P):E==="max"?a.zoomToMax(P):a.reset(.172)})}getZoomInfo(e){let{el:t,imageEl:i,thumbEl:n,panzoom:r}=e,a=this.instance,d=a.container;if(!t||!i||!n||!r||ba(n)<3||!this.optionFor(e,"zoom")||!d||a.state===Ie.Destroy||getComputedStyle(d).getPropertyValue("--f-images-zoom")==="0")return!1;let m=window.visualViewport||null;if((m?m.scale:1)!==1)return!1;let{top:u,left:f,width:y,height:S}=n.getBoundingClientRect(),{top:C,left:w,fitWidth:T,fitHeight:P}=r.contentRect;if(!(y&&S&&T&&P))return!1;let E=r.container.getBoundingClientRect();w+=E.left,C+=E.top;let A=-1*(w+.5*T-(f+.5*y)),H=-1*(C+.5*P-(u+.5*S)),X=y/T,et=this.option("zoomOpacity")||!1;return et==="auto"&&(et=Math.abs(y/S-T/P)>.1),{x:A,y:H,scale:X,opacity:et}}attach(){let e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}detach(){let e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}};Object.defineProperty(Dn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;var Fo="html",ta="image",Io="map",jt="youtube",si="vimeo",Bi="html5video",ia=(o,e={})=>{let t=new URL(o),i=new URLSearchParams(t.search),n=new URLSearchParams;for(let[d,m]of[...i,...Object.entries(e)]){let u=m+"";if(d==="t"){let f=u.match(/((\d*)m)?(\d*)s?/);f&&n.set("start",60*parseInt(f[2]||"0")+parseInt(f[3]||"0")+"")}else n.set(d,u)}let r=n+"",a=o.match(/#t=((.*)?\d+s)/);return a&&(r+=`#t=${a[1]}`),r},ks={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},As=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"],kn=class extends We{onBeforeInitSlide(e,t,i){this.processType(i)}onCreateSlide(e,t,i){this.setContent(i)}onClearContent(e,t){t.xhr&&(t.xhr.abort(),t.xhr=null);let i=t.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",t.iframeEl=null);let n=t.contentEl,r=t.placeholderEl;if(t.type==="inline"&&n&&r)n.classList.remove("fancybox__content"),getComputedStyle(n).getPropertyValue("display")!=="none"&&(n.style.display="none"),setTimeout(()=>{r&&(n&&r.parentNode&&r.parentNode.insertBefore(n,r),r.remove())},0),t.contentEl=void 0,t.placeholderEl=void 0;else for(;t.el&&t.el.firstChild;)t.el.removeChild(t.el.firstChild)}onSelectSlide(e,t,i){i.state===De.Ready&&this.playVideo()}onUnselectSlide(e,t,i){var n,r;if(i.type===Bi){try{(r=(n=i.el)===null||n===void 0?void 0:n.querySelector("video"))===null||r===void 0||r.pause()}catch{}return}let a;i.type===si?a={method:"pause",value:"true"}:i.type===jt&&(a={event:"command",func:"pauseVideo"}),a&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(a),"*"),i.poller&&clearTimeout(i.poller)}onDone(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}onRefresh(e,t){t.slides.forEach(i=>{i.el&&(this.resizeIframe(i),this.setAspectRatio(i))})}onMessage(e){try{let t=JSON.parse(e.data);if(e.origin==="https://player.vimeo.com"){if(t.event==="ready")for(let i of Array.from(document.getElementsByClassName("fancybox__iframe")))i instanceof HTMLIFrameElement&&i.contentWindow===e.source&&(i.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&t.event==="onReady"){let i=document.getElementById(t.id);i&&(i.dataset.ready="true")}}catch{}}loadAjaxContent(e){let t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);let i=this.instance,n=new XMLHttpRequest;i.showLoading(e),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i.state===Ie.Ready&&(i.hideLoading(e),n.status===200?i.setContent(e,n.responseText):i.setError(e,n.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};let r=e.ajax||null;n.open(r?"POST":"GET",t+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(r),e.xhr=n}setInlineContent(e){let t=null;if(Ue(e.src))t=e.src;else if(typeof e.src=="string"){let i=e.src.split("#",2).pop();t=i?document.getElementById(i):null}if(t){if(e.type==="clone"||t.closest(".fancybox__slide")){t=t.cloneNode(!0);let i=t.dataset.animationName;i&&(t.classList.remove(i),delete t.dataset.animationName);let n=t.getAttribute("id");n=n?`${n}--clone`:`clone-${this.instance.id}-${e.index}`,t.setAttribute("id",n)}else if(t.parentNode){let i=document.createElement("div");i.classList.add("fancybox-placeholder"),t.parentNode.insertBefore(i,t),e.placeholderEl=i}this.instance.setContent(e,t)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){let{src:t,el:i}=e;if(!t||typeof t!="string"||!i)return;i.classList.add("is-loading");let n=this.instance,r=document.createElement("iframe");r.className="fancybox__iframe",r.setAttribute("id",`fancybox__iframe_${n.id}_${e.index}`);for(let[d,m]of Object.entries(this.optionFor(e,"iframeAttr")||{}))r.setAttribute(d,m);r.onerror=()=>{n.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=r;let a=this.optionFor(e,"preload");if(e.type!=="iframe"||a===!1)return r.setAttribute("src",e.src+""),n.setContent(e,r,!1),this.resizeIframe(e),void n.revealContent(e);n.showLoading(e),r.onload=()=>{if(!r.src.length)return;let d=r.dataset.ready!=="true";r.dataset.ready="true",this.resizeIframe(e),d?n.revealContent(e):n.hideLoading(e)},r.setAttribute("src",t),n.setContent(e,r,!1)}resizeIframe(e){let{type:t,iframeEl:i}=e;if(t===jt||t===si)return;let n=i?.parentElement;if(!i||!n)return;let r=e.autoSize;r===void 0&&(r=this.optionFor(e,"autoSize"));let a=e.width||0,d=e.height||0;a&&d&&(r=!1);let m=n&&n.style;if(e.preload!==!1&&r!==!1&&m)try{let u=window.getComputedStyle(n),f=parseFloat(u.paddingLeft)+parseFloat(u.paddingRight),y=parseFloat(u.paddingTop)+parseFloat(u.paddingBottom),S=i.contentWindow;if(S){let C=S.document,w=C.getElementsByTagName(Fo)[0],T=C.body;m.width="",T.style.overflow="hidden",a=a||w.scrollWidth+f,m.width=`${a}px`,T.style.overflow="",m.flex="0 0 auto",m.height=`${T.scrollHeight}px`,d=w.scrollHeight+y}}catch{}if(a||d){let u={flex:"0 1 auto",width:"",height:""};a&&a!=="auto"&&(u.width=`${a}px`),d&&d!=="auto"&&(u.height=`${d}px`),Object.assign(m,u)}}playVideo(){let e=this.instance.getSlide();if(!e)return;let{el:t}=e;if(!t||!t.offsetParent||!this.optionFor(e,"videoAutoplay"))return;if(e.type===Bi)try{let n=t.querySelector("video");if(n){let r=n.play();r!==void 0&&r.then(()=>{}).catch(a=>{n.muted=!0,n.play()})}}catch{}if(e.type!==jt&&e.type!==si)return;let i=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let n;if(e.iframeEl.dataset.ready==="true")return n=e.type===jt?{event:"command",func:"playVideo"}:{method:"play",value:"true"},n&&e.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"),void(e.poller=void 0);e.type===jt&&(n={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"))}e.poller=setTimeout(i,250)};i()}processType(e){if(e.html)return e.type=Fo,e.src=e.html,void(e.html="");let t=this.instance.optionFor(e,"src","");if(!t||typeof t!="string")return;let i=e.type,n=null;if(n=t.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){let r=this.optionFor(e,jt),{nocookie:a}=r,d=function(y,S){var C={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&S.indexOf(w)<0&&(C[w]=y[w]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function"){var T=0;for(w=Object.getOwnPropertySymbols(y);T<w.length;T++)S.indexOf(w[T])<0&&Object.prototype.propertyIsEnumerable.call(y,w[T])&&(C[w[T]]=y[w[T]])}return C}(r,["nocookie"]),m=`www.youtube${a?"-nocookie":""}.com`,u=ia(t,d),f=encodeURIComponent(n[2]);e.videoId=f,e.src=`https://${m}/embed/${f}?${u}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${f}/mqdefault.jpg`,i=jt}else if(n=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){let r=ia(t,this.optionFor(e,si)),a=encodeURIComponent(n[1]),d=n[4]||"";e.videoId=a,e.src=`https://player.vimeo.com/video/${a}?${d?`h=${d}${r?"&":""}`:""}${r}`,i=si}if(!i&&e.triggerEl){let r=e.triggerEl.dataset.type;As.includes(r)&&(i=r)}i||typeof t=="string"&&(t.charAt(0)==="#"?i="inline":(n=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=Bi,e.videoFormat=e.videoFormat||"video/"+(n[1]==="ogv"?"ogg":n[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=ta:t.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${n[1]}/?ll=${(n[2]?n[2]+"&z="+Math.floor(parseFloat(n[3]))+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&")}&output=${n[4]&&n[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=Io):(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${n[1]}/maps?q=${n[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=Io),i=i||this.instance.option("defaultType"),e.type=i,i===ta&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){let t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case Fo:this.instance.setContent(e,t);break;case Bi:let i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case Io:case jt:case si:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){let t=e.contentEl;if(!(e.el&&t&&e.type&&[jt,si,Bi].includes(e.type)))return;let i,n=e.width||"auto",r=e.height||"auto";if(n==="auto"||r==="auto"){i=this.optionFor(e,"videoRatio");let u=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=u&&u.length>2?parseFloat(u[1])/parseFloat(u[2]):parseFloat(i+"")}else n&&r&&(i=n/r);if(!i)return;t.style.aspectRatio="",t.style.width="",t.style.height="",t.offsetHeight;let a=t.getBoundingClientRect(),d=a.width||1,m=a.height||1;t.style.aspectRatio=i+"",i<d/m?(r=r==="auto"?m:Math.min(m,r),t.style.width="auto",t.style.height=`${r}px`):(n=n==="auto"?d:Math.min(d,n),t.style.width=`${n}px`,t.style.height="auto")}attach(){let e=this,t=e.instance;t.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),t.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){let e=this,t=e.instance;t.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),t.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}};Object.defineProperty(kn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ks});var wn="play",Fn="pause",Ui="ready",An=class extends We{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ui}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==Ui}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,!((e=this.instance.panzoom)===null||e===void 0)&&e.isResting&&this.resume()}onTimerEnd(){let e=this.instance;this.state==="play"&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();let t=this.instance,i=((e=t.pages[t.page])===null||e===void 0?void 0:e.slides)||[],n=this.option("progressParentEl");if(n||(n=(i.length===1?i[0].el:null)||t.viewport),!n)return null;let r=document.createElement("div");return B(r,"f-progress"),n.prepend(r),this.progressBar=r,r.offsetHeight,r}set(){let e=this,t=e.instance;if(t.pages.length<2||e.timer)return;let i=e.option("timeout");e.state=wn,B(t.container,"has-autoplay");let n=e.createProgressBar();n&&(n.style.transitionDuration=`${i}ms`,n.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},i),e.emit("set")}clear(){let e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){let e=this;if(e.set(),e.state!==Ui){if(e.option("pauseOnHover")){let t=e.instance.container;t.addEventListener("mouseenter",e.onMouseEnter,!1),t.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){let e=this,t=e.state,i=e.instance.container;e.clear(),e.state=Ui,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),ae(i,"has-autoplay"),t!==Ui&&e.emit("stop")}pause(){let e=this;e.state===wn&&(e.state=Fn,e.clear(),e.emit(Fn))}resume(){let e=this,t=e.instance;if(t.isInfinite||t.page!==t.pages.length-1)if(e.state!==wn){if(e.state===Fn&&!e.inHover){let i=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",i),i.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===wn||this.state===Fn?this.stop():this.start()}attach(){let e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}detach(){let e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}};Object.defineProperty(An,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});var Vn=class extends We{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){let t=e.carousel;if(!t)return;let i=e.container;i&&(t.options.Autoplay=He({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:n=>{var r;i.classList.add("has-slideshow"),((r=e.getSlide())===null||r===void 0?void 0:r.state)!==De.Ready&&n.pause()},stop:()=>{i.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(n,r)=>{var a,d,m;!r||!r.cancelable||((a=e.getSlide())===null||a===void 0?void 0:a.state)===De.Ready&&(!((m=(d=e.carousel)===null||d===void 0?void 0:d.panzoom)===null||m===void 0)&&m.isResting)||r.preventDefault()}}}),t.attachPlugins({Autoplay:An}),this.ref=t.plugins.Autoplay)}onReady(e){let t=e.carousel,i=this.ref;i&&t&&this.option("playOnStart")&&(t.isInfinite||t.page<t.pages.length-1)&&i.start()}onDone(e,t){let i=this.ref,n=e.carousel;if(!i||!n)return;let r=t.panzoom;r&&r.on("startAnimation",()=>{e.isCurrentSlide(t)&&i.stop()}),e.isCurrentSlide(t)&&i.resume()}onKeydown(e,t){var i;let n=this.ref;n&&t===this.option("key")&&((i=document.activeElement)===null||i===void 0?void 0:i.nodeName)!=="BUTTON"&&n.toggle()}attach(){let e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}detach(){let e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}};Object.defineProperty(Vn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:o=>{var e;return((e=o.instance.container)===null||e===void 0?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||o.instance.container},timeout:3e3}});var Fa={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"},Mt;(function(o){o[o.Init=0]="Init",o[o.Ready=1]="Ready",o[o.Hidden=2]="Hidden"})(Mt||(Mt={}));var na="isResting",In="thumbWidth",wi="thumbHeight",ht="thumbClipWidth",Ia=class extends We{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Mt.Init})}get isModern(){return this.type==="modern"}onInitSlide(o,e){let t=e.el?e.el.dataset:void 0;t&&(e.thumbSrc=t.thumbSrc||e.thumbSrc||"",e[ht]=parseFloat(t[ht]||"")||e[ht]||0,e[wi]=parseFloat(t.thumbHeight||"")||e[wi]||0),this.addSlide(e)}onInitSlides(){this.build()}onChange(){var o;if(!this.isModern)return;let e=this.container,t=this.instance,i=t.panzoom,n=this.carousel,r=n?n.panzoom:null,a=t.page;if(i&&n&&r){if(i.isDragging){ae(e,this.cn(na));let d=((o=n.pages[a])===null||o===void 0?void 0:o.pos)||0;d+=t.getProgress(a)*(this[ht]+this.thumbGap);let m=r.getBounds();-1*d>m.x.min&&-1*d<m.x.max&&r.panTo({x:-1*d,friction:.12})}else vt(e,this.cn(na),i.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(let o of this.instance.slides||[])this.resizeModernSlide(o);this.shiftModern()}isDisabled(){let o=this.option("minCount")||0;if(o){let t=this.instance,i=0;for(let n of t.slides||[])n.thumbSrc&&i++;if(i<o)return!0}let e=this.option("type");return["modern","classic"].indexOf(e)<0}getThumb(o){let e=this.option("thumbTpl")||"";return{html:this.instance.localize(e,[["%i",o.index],["%d",o.index+1],["%s",o.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(o){let e=this.carousel;e&&e.addSlide(o.index,this.getThumb(o))}getSlides(){let o=[];for(let e of this.instance.slides||[])o.push(this.getThumb(e));return o}resizeModernSlide(o){this.isModern&&(o[In]=o[ht]&&o[wi]?Math.round(this[wi]*(o[ht]/o[wi])):this[In])}updateProps(){let o=this.container;if(!o)return;let e=t=>parseFloat(getComputedStyle(o).getPropertyValue("--f-thumb-"+t))||0;this.thumbGap=e("gap"),this.thumbExtraGap=e("extra-gap"),this[In]=e("width")||40,this[ht]=e("clip-width")||40,this[wi]=e("height")||40}build(){let o=this;if(o.state!==Mt.Init)return;if(o.isDisabled())return void o.emit("disabled");let e=o.instance,t=e.container,i=o.getSlides(),n=o.option("type");o.type=n;let r=o.option("parentEl"),a=o.cn("container"),d=o.cn("track"),m=r?.querySelector("."+a);m||(m=document.createElement("div"),B(m,a),r?r.appendChild(m):t.after(m)),B(m,`is-${n}`),B(t,o.cn("hasThumbs")),o.container=m,o.updateProps();let u=m.querySelector("."+d);u||(u=document.createElement("div"),B(u,o.cn("track")),m.appendChild(u)),o.track=u;let f=He({},{track:u,infinite:!1,center:!0,fill:n==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},o.option("Carousel")||{},{Sync:{target:e},slides:i}),y=new e.constructor(m,f);y.on("createSlide",(S,C)=>{o.setProps(C.index),o.emit("createSlide",C,C.el)}),y.on("ready",()=>{o.shiftModern(),o.emit("ready")}),y.on("refresh",()=>{o.shiftModern()}),y.on("Panzoom.click",(S,C,w)=>{o.onClick(w)}),o.carousel=y,o.state=Mt.Ready}onClick(o){o.preventDefault(),o.stopPropagation();let e=this.instance,{pages:t,page:i}=e,n=T=>{if(T){let P=T.closest("[data-carousel-index]");if(P)return[parseInt(P.dataset.carouselIndex||"",10)||0,P]}return[-1,void 0]},r=(T,P)=>{let E=document.elementFromPoint(T,P);return E?n(E):[-1,void 0]},[a,d]=n(o.target);if(a>-1)return;let m=this[ht],u=o.clientX,f=o.clientY,[y,S]=r(u-m,f),[C,w]=r(u+m,f);S&&w?(a=Math.abs(u-S.getBoundingClientRect().right)<Math.abs(u-w.getBoundingClientRect().left)?y:C,a===i&&(a=a===y?C:y)):S?a=y:w&&(a=C),a>-1&&t[a]&&e.slideTo(a)}getShift(o){var e;let t=this,{instance:i}=t,n=t.carousel;if(!i||!n)return 0;let r=t[In],a=t[ht],d=t.thumbGap,m=t.thumbExtraGap;if(!(!((e=n.slides[o])===null||e===void 0)&&e.el))return 0;let u=.5*(r-a),f=i.pages.length-1,y=i.getProgress(0),S=i.getProgress(f),C=i.getProgress(o,!1,!0),w=0,T=u+m+d,P=y<0&&y>-1,E=S>0&&S<1;return o===0?(w=T*Math.abs(y),E&&y===1&&(w-=T*Math.abs(S))):o===f?(w=T*Math.abs(S)*-1,P&&S===-1&&(w+=T*Math.abs(y))):P||E?(w=-1*T,w+=T*Math.abs(y),w+=T*(1-Math.abs(S))):w=T*C,w}setProps(o){var e;let t=this;if(!t.isModern)return;let{instance:i}=t,n=t.carousel;if(i&&n){let r=(e=n.slides[o])===null||e===void 0?void 0:e.el;if(r&&r.childNodes.length){let a=D(1-Math.abs(i.getProgress(o))),d=D(t.getShift(o));r.style.setProperty("--progress",a?a+"":""),r.style.setProperty("--shift",d+"")}}}shiftModern(){let o=this;if(!o.isModern)return;let{instance:e,track:t}=o,i=e.panzoom,n=o.carousel;if(!(e&&t&&i&&n)||i.state===ce.Init||i.state===ce.Destroy)return;for(let a of e.slides)o.setProps(a.index);let r=(o[ht]+o.thumbGap)*(n.slides.length||0);t.style.setProperty("--width",r+"")}cleanup(){let o=this;o.carousel&&o.carousel.destroy(),o.carousel=null,o.container&&o.container.remove(),o.container=null,o.track&&o.track.remove(),o.track=null,o.state=Mt.Init,ae(o.instance.container,o.cn("hasThumbs"))}attach(){let o=this,e=o.instance;e.on("initSlide",o.onInitSlide),e.state===Ce.Init?e.on("initSlides",o.onInitSlides):o.onInitSlides(),e.on(["change","Panzoom.afterTransform"],o.onChange),e.on("Panzoom.refresh",o.onRefresh)}detach(){let o=this,e=o.instance;e.off("initSlide",o.onInitSlide),e.off("initSlides",o.onInitSlides),e.off(["change","Panzoom.afterTransform"],o.onChange),e.off("Panzoom.refresh",o.onRefresh),o.cleanup()}};Object.defineProperty(Ia,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Fa});var Vs=Object.assign(Object.assign({},Fa),{key:"t",showOnStart:!0,parentEl:null}),oa="is-masked",ra="aria-hidden",Rn=class extends We{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){let e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,t){t.stopPropagation()}onCreateSlide(e,t){var i,n,r;let a=((r=(n=(i=this.instance)===null||i===void 0?void 0:i.carousel)===null||n===void 0?void 0:n.slides[t.index])===null||r===void 0?void 0:r.type)||"",d=t.el;if(d&&a){let m=`for-${a}`;["video","youtube","vimeo","html5video"].includes(a)&&(m+=" for-video"),B(d,m)}}onInit(){var e;let t=this,i=t.instance,n=i.carousel;if(t.ref||!n)return;let r=t.option("parentEl")||i.footer||i.container;if(!r)return;let a=He({},t.options,{parentEl:r,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:d=>{let m=d.container;m&&this.hidden&&(t.refresh(),m.style.transition="none",t.hide(),m.offsetHeight,queueMicrotask(()=>{m.style.transition="",t.show()}))}}});a.Carousel=a.Carousel||{},a.Carousel.on=He(((e=t.options.Carousel)===null||e===void 0?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),n.options.Thumbs=a,n.attachPlugins({Thumbs:Ia}),t.ref=n.plugins.Thumbs,t.option("showOnStart")||(t.ref.state=Mt.Hidden,t.hidden=!0)}onResize(){var e;let t=(e=this.ref)===null||e===void 0?void 0:e.container;t&&(t.style.maxHeight="")}onKeydown(e,t){let i=this.option("key");i&&i===t&&this.toggle()}toggle(){let e=this.ref;if(e&&!e.isDisabled())return e.state===Mt.Hidden?(e.state=Mt.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){let e=this.ref;if(!e||e.isDisabled())return;let t=e.container;t&&(this.refresh(),t.offsetHeight,t.removeAttribute(ra),t.classList.remove(oa),this.hidden=!1)}hide(){let e=this.ref,t=e&&e.container;t&&(this.refresh(),t.offsetHeight,t.classList.add(oa),t.setAttribute(ra,"true")),this.hidden=!0}refresh(){let e=this.ref;if(!e||!e.state)return;let t=e.container,i=t?.firstChild||null;t&&i&&i.childNodes.length&&(t.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){let e=this,t=e.instance;t.state===Ie.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}detach(){var e;let t=this,i=t.instance;i.off("Carousel.init",t.onInit),i.off("resize",t.onResize),i.off("keydown",t.onKeydown),(e=i.carousel)===null||e===void 0||e.detachPlugins(["Thumbs"]),t.ref=null}};Object.defineProperty(Rn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Vs});var Po={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}},pi;(function(o){o[o.Init=0]="Init",o[o.Ready=1]="Ready",o[o.Disabled=2]="Disabled"})(pi||(pi={}));var Rs={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},zs={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},aa="has-toolbar",To="fancybox__toolbar",zn=class extends We{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:pi.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var t;if(!e.carousel)return;let i=this.option("display"),n=this.option("absolute"),r=this.option("enabled");if(r==="auto"){let u=this.instance.carousel,f=0;if(u)for(let y of u.slides)(y.panzoom||y.type==="image")&&f++;f||(r=!1)}r||(i=void 0);let a=0,d={left:[],middle:[],right:[]};if(i)for(let u of["left","middle","right"])for(let f of i[u]){let y=this.createEl(f);y&&((t=d[u])===null||t===void 0||t.push(y),a++)}let m=null;if(a&&(m=this.createContainer()),m){for(let[u,f]of Object.entries(d)){let y=document.createElement("div");B(y,To+"__column is-"+u);for(let S of f)y.appendChild(S);n!=="auto"||u!=="middle"||f.length||(n=!0),m.appendChild(y)}n===!0&&B(m,"is-absolute"),this.state=pi.Ready,this.onRefresh()}else this.state=pi.Disabled}onClick(e){var t,i;let n=this.instance,r=n.getSlide(),a=r?.panzoom,d=e.target,m=d&&Ue(d)?d.dataset:null;if(!m)return;if(m.fancyboxToggleThumbs!==void 0)return e.preventDefault(),e.stopPropagation(),void((t=n.plugins.Thumbs)===null||t===void 0||t.toggle());if(m.fancyboxToggleFullscreen!==void 0)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(m.fancyboxToggleSlideshow!==void 0){e.preventDefault(),e.stopPropagation();let y=(i=n.carousel)===null||i===void 0?void 0:i.plugins.Autoplay,S=y.isActive;return a&&a.panMode==="mousemove"&&!S&&a.reset(),void(S?y.stop():y.start())}let u=m.panzoomAction,f=m.panzoomChange;if((f||u)&&(e.preventDefault(),e.stopPropagation()),f){let y={};try{y=JSON.parse(f)}catch{}a&&a.applyChange(y)}else u&&a&&a[u]&&a[u]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;let e=this.container;if(!e)return;let t=this.instance.getSlide();if(!t||t.state!==De.Ready)return;let i=t&&!t.error&&t.panzoom;for(let a of e.querySelectorAll("[data-panzoom-action]"))i?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));let n=i&&i.canZoomIn(),r=i&&i.canZoomOut();for(let a of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))n?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));for(let a of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))r?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));for(let a of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){r||n?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));let d=a.querySelector("g");d&&(d.style.display=n?"":"none")}}onDone(e,t){var i;(i=t.panzoom)===null||i===void 0||i.on("afterTransform",()=>{this.instance.isCurrentSlide(t)&&this.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}createContainer(){let e=this.instance.container;if(!e)return null;let t=this.option("parentEl")||e,i=t.querySelector("."+To);return i||(i=document.createElement("div"),B(i,To),t.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&B(e,aa),this.container=i,i}createEl(e){let t=this.instance,i=t.carousel;if(!i||e==="toggleFS"||e==="fullscreen"&&!ya())return null;let n=null,r=i.slides.length||0,a=0,d=0;for(let u of i.slides)(u.panzoom||u.type==="image")&&a++,(u.type==="image"||u.downloadSrc)&&d++;if(r<2&&["infobar","prev","next"].includes(e))return n;if(Po[e]!==void 0&&!a||e==="download"&&!d)return null;if(e==="thumbs"){let u=t.plugins.Thumbs;if(!u||!u.isEnabled)return null}if(e==="slideshow"&&(!i.plugins.Autoplay||r<2))return null;if(Po[e]!==void 0){let u=Po[e];n=document.createElement("button"),n.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),B(n,"f-button"),u.action&&(n.dataset.panzoomAction=u.action),u.change&&(n.dataset.panzoomChange=JSON.stringify(u.change)),n.appendChild(gt(this.instance.localize(u.icon)))}else{let u=(this.option("items")||[])[e];u&&(n=gt(this.instance.localize(u.tpl)),typeof u.click=="function"&&n.addEventListener("click",f=>{f.preventDefault(),f.stopPropagation(),typeof u.click=="function"&&u.click.call(this,this,f)}))}let m=n?.querySelector("svg");if(m)for(let[u,f]of Object.entries(zs))m.getAttribute(u)||m.setAttribute(u,String(f));return n}removeContainer(){let e=this.container;e&&e.remove(),this.container=null,this.state=pi.Disabled;let t=this.instance.container;t&&ae(t,aa)}attach(){let e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){let e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}};Object.defineProperty(zn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Rs});var Ns={Hash:class extends We{onReady(){Hi=!1}onChange(o){di&&clearTimeout(di);let{hash:e}=Ca(),{hash:t}=On(),i=o.isOpeningSlide(o.getSlide());i&&(Jr=t===e?"":t),e&&e!==t&&(di=setTimeout(()=>{try{if(o.state===Ie.Ready){let n="replaceState";i&&!Sn&&(n="pushState",Sn=!0),window.history[n]({},document.title,window.location.pathname+window.location.search+e)}}catch{}},300))}onClose(o){if(di&&clearTimeout(di),!Hi&&Sn)return Sn=!1,Hi=!1,void window.history.back();if(!Hi)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(Jr||""))}catch{}}attach(){let o=this.instance;o.on("ready",this.onReady),o.on(["Carousel.ready","Carousel.change"],this.onChange),o.on("close",this.onClose)}detach(){let o=this.instance;o.off("ready",this.onReady),o.off(["Carousel.ready","Carousel.change"],this.onChange),o.off("close",this.onClose)}static parseURL(){return On()}static startFromUrl(){Sa()}static destroy(){window.removeEventListener("hashchange",wa,!1)}},Html:kn,Images:Dn,Slideshow:Vn,Thumbs:Rn,Toolbar:zn},sa="with-fancybox",Eo="hide-scrollbar",la="--fancybox-scrollbar-compensate",ca="--fancybox-body-margin",jo="aria-hidden",Mo="is-using-tab",Oo="is-animated",da="is-compact",pa="is-loading",Do="is-opening",Pn="has-caption",Fi="disabled",li="tabindex",ma="download",ko="href",Ii="src",Kt=o=>typeof o=="string",ua=function(){var o=window.getSelection();return!!o&&o.type==="Range"},Ye,Ge=null,ci=null,fa=0,ha=0,ga=0,va=0,Pi=new Map,Ls=0,ee=class o extends $i{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],t={},i={}){super(t),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ie.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Ye||(Ye=ya()),this.id=t.id||++Ls,Pi.set(this.id,this),this.userSlides=e,this.userPlugins=i,queueMicrotask(()=>{this.init()})}init(){if(this.state===Ie.Destroy)return;this.state=Ie.Init,this.attachPlugins(Object.assign(Object.assign({},o.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!Qi)return;let t=document,i=t.body,n=t.documentElement;if(i.classList.contains(Eo))return;let r=window.innerWidth-n.getBoundingClientRect().width,a=parseFloat(window.getComputedStyle(i).marginRight);r<0&&(r=0),n.style.setProperty(la,`${r}px`),a&&i.style.setProperty(ca,`${a}px`),i.classList.add(Eo)})(),this.initLayout(),this.scale();let e=()=>{this.initCarousel(this.userSlides),this.state=Ie.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(jo,"false")},16)};this.option("Fullscreen.autoStart")&&Ye&&!Ye.isFullscreen()?Ye.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,t;let i=this.option("parentEl")||document.body,n=gt(this.localize(this.option("tpl.main")||""));if(n){if(n.setAttribute("id",`fancybox-${this.id}`),n.setAttribute("aria-label",this.localize("{{MODAL}}")),n.classList.toggle(da,this.isCompact),B(n,this.option("mainClass")||""),B(n,Do),this.container=n,this.footer=n.querySelector(".fancybox__footer"),i.appendChild(n),B(document.documentElement,sa),Ge&&ci||(Ge=document.createElement("span"),B(Ge,"fancybox-focus-guard"),Ge.setAttribute(li,"0"),Ge.setAttribute(jo,"true"),Ge.setAttribute("aria-label","Focus guard"),ci=Ge.cloneNode(),(e=n.parentElement)===null||e===void 0||e.insertBefore(Ge,n),(t=n.parentElement)===null||t===void 0||t.append(ci)),n.addEventListener("mousedown",r=>{fa=r.pageX,ha=r.pageY,ae(n,Mo)}),this.option("closeExisting"))for(let r of Pi.values())r.id!==this.id&&r.close();else this.option("animated")&&(B(n,Oo),setTimeout(()=>{this.isClosing()||ae(n,Oo)},350));this.emit("initLayout")}}initCarousel(e){let t=this.container;if(!t)return;let i=t.querySelector(".fancybox__carousel");if(!i)return;let n=this.carousel=new Ti(i,He({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));n.on("*",(r,a,...d)=>{this.emit(`Carousel.${a}`,r,...d)}),n.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(r,a,d)=>{this.clearContent(d),d.state=void 0}),n.on("Panzoom.touchStart",()=>{var r,a;this.isCompact||this.endIdle(),!((r=document.activeElement)===null||r===void 0)&&r.closest(".f-thumbs")&&((a=this.container)===null||a===void 0||a.focus())}),n.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(n.on("Panzoom.afterTransform",(r,a)=>{let d=this.getSlide();if(d&&Ao(d.el))return;let m=this.container;if(m){let u=Math.abs(a.current.f),f=u<1?"":Math.max(.5,Math.min(1,1-u/a.contentRect.fitHeight*1.5));m.style.setProperty("--fancybox-ts",f?"0s":""),m.style.setProperty("--fancybox-opacity",f+"")}}),n.on("Panzoom.touchEnd",(r,a,d)=>{var m;let u=this.getSlide();if(u&&Ao(u.el)||a.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((m=document.activeElement)===null||m===void 0?void 0:m.nodeName)!==-1)return;let f=Math.abs(a.dragOffset.y);a.lockedAxis==="y"&&(f>=200||f>=50&&a.dragOffset.time<300)&&(d&&d.cancelable&&d.preventDefault(),this.close(d,"f-throwOut"+(a.current.f<0?"Up":"Down")))})),n.on("change",r=>{var a;let d=(a=this.getSlide())===null||a===void 0?void 0:a.triggerEl;if(d){let m=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:r.page});d.dispatchEvent(m)}}),n.on(["refresh","change"],r=>{let a=this.container;if(!a)return;for(let u of a.querySelectorAll("[data-fancybox-current-index]"))u.innerHTML=r.page+1;for(let u of a.querySelectorAll("[data-fancybox-count]"))u.innerHTML=r.pages.length;if(!r.isInfinite){for(let u of a.querySelectorAll("[data-fancybox-next]"))r.page<r.pages.length-1?(u.removeAttribute(Fi),u.removeAttribute(li)):(u.setAttribute(Fi,""),u.setAttribute(li,"-1"));for(let u of a.querySelectorAll("[data-fancybox-prev]"))r.page>0?(u.removeAttribute(Fi),u.removeAttribute(li)):(u.setAttribute(Fi,""),u.setAttribute(li,"-1"))}let d=this.getSlide();if(!d)return;let m=d.downloadSrc||"";m||d.type!=="image"||d.error||!Kt(d[Ii])||(m=d[Ii]);for(let u of a.querySelectorAll("[data-fancybox-download]")){let f=d.downloadFilename;m?(u.removeAttribute(Fi),u.removeAttribute(li),u.setAttribute(ko,m),u.setAttribute(ma,f||m),u.setAttribute("target","_blank")):(u.setAttribute(Fi,""),u.setAttribute(li,"-1"),u.removeAttribute(ko),u.removeAttribute(ma))}}),this.emit("initCarousel")}attachEvents(){let e=this,t=e.container;if(!t)return;t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);let i=window.visualViewport;i&&(i.addEventListener("scroll",e.onResize),i.addEventListener("resize",e.onResize))}detachEvents(){let e=this,t=e.container;if(!t)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);let i=window.visualViewport;i&&(i.removeEventListener("resize",e.onResize),i.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){let e=this.container;if(!e)return;let t=window.visualViewport,i=Math.max(1,t?.scale||1),n="",r="",a="";if(t&&i>1){let d=`${t.offsetLeft}px`,m=`${t.offsetTop}px`;n=t.width*i+"px",r=t.height*i+"px",a=`translate3d(${d}, ${m}, 0) scale(${1/i})`}e.style.transform=a,e.style.width=n,e.style.height=r}onClick(e){var t;let{container:i,isCompact:n}=this;if(!i||this.isClosing())return;!n&&this.option("idle")&&this.resetIdle();let r=e.composedPath()[0];if(r.closest(".fancybox-spinner")||r.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(r.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(r.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(e.type==="click"&&e.detail===0||Math.abs(e.pageX-fa)>30||Math.abs(e.pageY-ha)>30)return;let a=document.activeElement;if(ua()&&a&&i.contains(a))return;if(n&&((t=this.getSlide())===null||t===void 0?void 0:t.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let d=!1;if(r.closest(".fancybox__content")){if(a){if(a.closest("[contenteditable]"))return;r.matches(wo)||a.blur()}if(ua())return;d=this.option("contentClick")}else r.closest(".fancybox__carousel")&&!r.matches(wo)&&(d=this.option("backdropClick"));d==="close"?(e.preventDefault(),this.close(e)):d==="next"?(e.preventDefault(),this.next()):d==="prev"&&(e.preventDefault(),this.prev())}onWheel(e){let t=e.target,i=this.option("wheel",e);t.closest(".fancybox__thumbs")&&(i="slide");let n=i==="slide",r=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(m,u){return Math.abs(u)>Math.abs(m)?u:m}),a=Math.max(-1,Math.min(1,r)),d=Date.now();this.pwt&&d-this.pwt<300?n&&e.preventDefault():(this.pwt=d,this.emit("wheel",e,a),e.defaultPrevented||(i==="close"?(e.preventDefault(),this.close(e)):i==="slide"&&(Tn(t)||(e.preventDefault(),this[a>0?"prev":"next"]()))))}onScroll(){window.scrollTo(ga,va)}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();let t=e.key,i=this.option("keyboard");if(!i)return;let n=e.composedPath()[0],r=document.activeElement&&document.activeElement.classList,a=r&&r.contains("f-button")||n.dataset.carouselPage||n.dataset.carouselIndex;if(t!=="Escape"&&!a&&Ue(n)&&(n.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName)!==-1)||(e.key==="Tab"?B(this.container,Mo):ae(this.container,Mo),e.ctrlKey||e.altKey||e.shiftKey))return;this.emit("keydown",t,e);let d=i[t];d&&typeof this[d]=="function"&&(e.preventDefault(),this[d]())}onResize(){let e=this.container;if(!e)return;let t=this.isCompact;e.classList.toggle(da,t),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(e){let t=this.optionFor(e,"closeButton")||!1;if(t==="auto"){let n=this.plugins.Toolbar;if(n&&n.state===pi.Ready)return}if(!t||!e.contentEl||e.closeBtnEl)return;let i=this.option("tpl.closeButton");if(i){let n=gt(this.localize(i));e.closeBtnEl=e.contentEl.appendChild(n),e.el&&B(e.el,"has-close-btn")}}manageCaption(e=void 0){var t,i;let n="fancybox__caption",r=this.container;if(!r)return;ae(r,Pn);let a=this.isCompact||this.option("commonCaption"),d=!a;if(this.caption&&this.stop(this.caption),d&&this.caption&&(this.caption.remove(),this.caption=null),a&&!this.caption)for(let y of((t=this.carousel)===null||t===void 0?void 0:t.slides)||[])y.captionEl&&(y.captionEl.remove(),y.captionEl=void 0,ae(y.el,Pn),(i=y.el)===null||i===void 0||i.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||a&&!this.isCurrentSlide(e))return;let m=e.el,u=this.optionFor(e,"caption","");if(!u)return void(a&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let f=null;if(d){if(f=e.captionEl||null,m&&!f){let y=n+`_${this.id}_${e.index}`;f=document.createElement("div"),B(f,n),f.setAttribute("id",y),e.captionEl=m.appendChild(f),B(m,Pn),m.setAttribute("aria-labelledby",y)}}else f=this.caption,f||(f=r.querySelector("."+n)),!f&&(f=document.createElement("div"),f.dataset.fancyboxCaption="",B(f,n),(this.footer||r).prepend(f)),B(r,Pn),this.caption=f;f&&(f.innerHTML="",Kt(u)||typeof u=="number"?f.innerHTML=u+"":u instanceof HTMLElement&&f.appendChild(u))}checkFocus(e){this.focus(e)}focus(e){var t;if(this.ignoreFocusChange)return;let i=document.activeElement||null,n=e?.target||null,r=this.container,a=(t=this.carousel)===null||t===void 0?void 0:t.viewport;if(!r||!a||!e&&i&&r.contains(i))return;let d=this.getSlide(),m=d&&d.state===De.Ready?d.el:null;if(!m||m.contains(i)||r===i)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;let u=Array.from(r.querySelectorAll(wo)),f=[],y=null;for(let C of u){let w=!C.offsetParent||!!C.closest('[aria-hidden="true"]'),T=m&&m.contains(C),P=!a.contains(C);if(C===r||(T||P)&&!w){f.push(C);let E=C.dataset.origTabindex;E!==void 0&&E&&(C.tabIndex=parseFloat(E)),C.removeAttribute("data-orig-tabindex"),!C.hasAttribute("autoFocus")&&y||(y=C)}else{let E=C.dataset.origTabindex===void 0?C.getAttribute("tabindex")||"":C.dataset.origTabindex;E&&(C.dataset.origTabindex=E),C.tabIndex=-1}}let S=null;e?(!n||f.indexOf(n)<0)&&(S=y||r,f.length&&(i===ci?S=f[0]:this.lastFocus!==r&&i!==Ge||(S=f[f.length-1]))):S=d&&d.type==="image"?r:y||r,S&&Kr(S),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){let e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){let e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return((e=o.getInstance())===null||e===void 0?void 0:e.id)==this.id}animate(e=null,t="",i){if(!e||!t)return void(i&&i());this.stop(e);let n=r=>{r.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",n),delete e.dataset.animationName,i&&i(),ae(e,t))};e.dataset.animationName=t,e.addEventListener("animationend",n),B(e,t)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,t="",i=!0){if(this.isClosing())return;let n=e.el;if(!n)return;let r=null;if(Ue(t)?r=t:(r=gt(t+""),Ue(r)||(r=document.createElement("div"),r.innerHTML=t+"")),["img","picture","iframe","video","audio"].includes(r.nodeName.toLowerCase())){let a=document.createElement("div");a.appendChild(r),r=a}Ue(r)&&e.filter&&!e.error&&(r=r.querySelector(e.filter)),r&&Ue(r)?(B(r,"fancybox__content"),e.id&&r.setAttribute("id",e.id),n.classList.add(`has-${e.error?"error":e.type||"unknown"}`),n.prepend(r),r.style.display==="none"&&(r.style.display=""),getComputedStyle(r).getPropertyValue("display")==="none"&&(r.style.display=e.display||this.option("defaultDisplay")||"flex"),e.contentEl=r,i&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,t){let i=e.el,n=e.contentEl;i&&n&&(this.emit("reveal",e),this.hideLoading(e),e.state=De.Opening,(t=this.isOpeningSlide(e)?t===void 0?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(n,t,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=De.Ready,this.emit("done",e),B(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var t;(t=e.panzoom)===null||t===void 0||t.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(ae(this.container,Do),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){let t=this.getSlide();return!(!e||!t)&&t.index===e.index}isOpeningSlide(e){var t,i;return((t=this.carousel)===null||t===void 0?void 0:t.prevPage)===null&&e&&e.index===((i=this.getSlide())===null||i===void 0?void 0:i.index)}showLoading(e){e.state=De.Loading;let t=e.el;t&&(B(t,pa),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===De.Loading){let i=gt(Lo);B(i,"fancybox-spinner"),e.spinnerEl=i,t.prepend(i),this.animate(i,"f-fadeIn")}},250))}hideLoading(e){let t=e.el;if(!t)return;let i=e.spinnerEl;this.isClosing()?i?.remove():(ae(t,pa),i&&this.animate(i,"f-fadeOut",()=>{i.remove()}),e.state===De.Loading&&(this.emit("loaded",e),e.state=De.Ready))}setError(e,t){if(this.isClosing())return;let i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,e),i.defaultPrevented)return;e.error=t,this.hideLoading(e),this.clearContent(e);let n=document.createElement("div");n.classList.add("fancybox-error"),n.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,n)}clearContent(e){if(e.state===void 0)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);let t=e.el;t&&(ae(t,"has-error"),ae(t,"has-unknown"),ae(t,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;let t=this.carousel;return((e=t?.pages[t?.page])===null||e===void 0?void 0:e.slides[0])||void 0}close(e,t){if(this.isClosing())return;let i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,e),i.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());let n=()=>{this.proceedClose(e,t)};this.startedFs&&Ye&&Ye.isFullscreen()?Promise.resolve(Ye.exit()).then(()=>n()):n()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){let t=()=>{this.clearIdle(),this.idle=!0,B(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)t();else{let i=this.option("idle");i&&(this.idleTimer=setTimeout(t,i))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,ae(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){Ye&&(Ye.isFullscreen()?Ye.exit():Ye.request().then(()=>{this.startedFs=!0}))}isClosing(){return[Ie.Closing,Ie.CustomClosing,Ie.Destroy].includes(this.state)}proceedClose(e,t){var i,n;this.state=Ie.Closing,this.clearIdle(),this.detachEvents();let r=this.container,a=this.carousel,d=this.getSlide(),m=d&&this.option("placeFocusBack")?d.triggerEl||this.option("triggerEl"):null;if(m&&(ba(m)?Kr(m):m.focus()),r&&(ae(r,Do),B(r,"is-closing"),r.setAttribute(jo,"true"),this.option("animated")&&B(r,Oo),r.style.pointerEvents="none"),a){a.clearTransitions(),(i=a.panzoom)===null||i===void 0||i.destroy(),(n=a.plugins.Navigation)===null||n===void 0||n.detach();for(let u of a.slides){u.state=De.Closing,this.hideLoading(u);let f=u.contentEl;f&&this.stop(f);let y=u?.panzoom;y&&(y.stop(),y.detachEvents(),y.detachObserver()),this.isCurrentSlide(u)||a.emit("removeSlide",u)}}ga=window.scrollX,va=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",e),this.state!==Ie.CustomClosing?(t===void 0&&d&&(t=this.optionFor(d,"hideClass")),t&&d?(this.animate(d.contentEl,t,()=>{a&&a.emit("removeSlide",d)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===Ie.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=Ie.Destroy,(e=this.carousel)===null||e===void 0||e.destroy();let t=this.container;t&&t.remove(),Pi.delete(this.id);let i=o.getInstance();i?i.focus():(Ge&&(Ge.remove(),Ge=null),ci&&(ci.remove(),ci=null),ae(document.documentElement,sa),(()=>{if(!Qi)return;let n=document,r=n.body;r.classList.remove(Eo),r.style.setProperty(ca,""),n.documentElement.style.setProperty(la,"")})(),this.emit("destroy"))}static bind(e,t,i){if(!Qi)return;let n,r="",a={};if(e===void 0?n=document.body:Kt(e)?(n=document.body,r=e,typeof t=="object"&&(a=t||{})):(n=e,Kt(t)&&(r=t),typeof i=="object"&&(a=i||{})),!n||!Ue(n))return;r=r||"[data-fancybox]";let d=o.openers.get(n)||new Map;d.set(r,a),o.openers.set(n,d),d.size===1&&n.addEventListener("click",o.fromEvent)}static unbind(e,t){let i,n="";if(Kt(e)?(i=document.body,n=e):(i=e,Kt(t)&&(n=t)),!i)return;let r=o.openers.get(i);r&&n&&r.delete(n),n&&r||(o.openers.delete(i),i.removeEventListener("click",o.fromEvent))}static destroy(){let e;for(;e=o.getInstance();)e.destroy();for(let t of o.openers.keys())t.removeEventListener("click",o.fromEvent);o.openers=new Map}static fromEvent(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e.composedPath()[0],i=t.closest("[data-fancybox-trigger]");if(i){let w=i.dataset.fancyboxTrigger||"",T=document.querySelectorAll(`[data-fancybox="${w}"]`),P=parseInt(i.dataset.fancyboxIndex||"",10)||0;t=T[P]||t}if(!(t&&t instanceof Element))return;let n,r,a,d;if([...o.openers].reverse().find(([w,T])=>!(!w.contains(t)||![...T].reverse().find(([P,E])=>{let A=t.closest(P);return!!A&&(n=w,r=P,a=A,d=E,!0)}))),!n||!r||!a)return;d=d||{},e.preventDefault(),t=a;let m=[],u=He({},zo,d);u.event=e,u.triggerEl=t,u.delegate=i;let f=u.groupAll,y=u.groupAttr,S=y&&t?t.getAttribute(`${y}`):"";if((!t||S||f)&&(m=[].slice.call(n.querySelectorAll(r))),t&&!f&&(m=S?m.filter(w=>w.getAttribute(`${y}`)===S):[t]),!m.length)return;let C=o.getInstance();return C&&C.options.triggerEl&&m.indexOf(C.options.triggerEl)>-1?void 0:(t&&(u.startIndex=m.indexOf(t)),o.fromNodes(m,u))}static fromSelector(e,t,i){let n=null,r="",a={};if(Kt(e)?(n=document.body,r=e,typeof t=="object"&&(a=t||{})):e instanceof HTMLElement&&Kt(t)&&(n=e,r=t,typeof i=="object"&&(a=i||{})),!n||!r)return!1;let d=o.openers.get(n);return!!d&&(a=He({},d.get(r)||{},a),!!a&&o.fromNodes(Array.from(n.querySelectorAll(r)),a))}static fromNodes(e,t){t=He({},zo,t||{});let i=[];for(let n of e){let r=n.dataset||{},a=r[Ii]||n.getAttribute(ko)||n.getAttribute("currentSrc")||n.getAttribute(Ii)||void 0,d,m=t.delegate,u;m&&i.length===t.startIndex&&(d=m instanceof HTMLImageElement?m:m.querySelector("img:not([aria-hidden])")),d||(d=n instanceof HTMLImageElement?n:n.querySelector("img:not([aria-hidden])")),d&&(u=d.currentSrc||d[Ii]||void 0,!u&&d.dataset&&(u=d.dataset.lazySrc||d.dataset[Ii]||void 0));let f={src:a,triggerEl:n,thumbEl:d,thumbElSrc:u,thumbSrc:u};for(let y in r){let S=r[y]+"";S=S!=="false"&&(S==="true"||S),f[y]=S}i.push(f)}return new o(i,t)}static getInstance(e){return e?Pi.get(e):Array.from(Pi.values()).reverse().find(t=>!t.isClosing()&&t)||null}static getSlide(){var e;return((e=o.getInstance())===null||e===void 0?void 0:e.getSlide())||null}static show(e=[],t={}){return new o(e,t)}static next(){let e=o.getInstance();e&&e.next()}static prev(){let e=o.getInstance();e&&e.prev()}static close(e=!0,...t){if(e)for(let i of Pi.values())i.close(...t);else{let i=o.getInstance();i&&i.close(...t)}}};Object.defineProperty(ee,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(ee,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:zo}),Object.defineProperty(ee,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:Ns}),Object.defineProperty(ee,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});var Ke=class o{projectId=null;parentId=null;pageNumber=1;pageSize=1e3;sortOrder=null;FavUserId=null;type=null;showCurrentUserFav=!1;isActive=null;colorId=null;TagIDs=null;keyword="";static \u0275fac=function(t){return new(t||o)};static \u0275prov=fe({token:o,factory:o.\u0275fac,providedIn:"root"})},Pe=class{projectId=null;isArchived=null;folderId=null;pageNumber=1;pageSize=1e3;sortField=null;FavUserId=null;ShowCurrentUserFav=!1;isActive=null;keyword=""};var Te=class o{constructor(e){this.http=e}upload(e){return this.http.post("https://httpbin.org/post",e,{reportProgress:!0,observe:"events"})}static \u0275fac=function(t){return new(t||o)(At(Qt))};static \u0275prov=fe({token:o,factory:o.\u0275fac,providedIn:"root"})};var ui=(m=>(m[m.Image=0]="Image",m[m.Video=1]="Video",m[m.Pdf=2]="Pdf",m[m.Word=3]="Word",m[m.Excel=4]="Excel",m[m.Powerpoint=5]="Powerpoint",m[m.FileText=6]="FileText",m[m.Zip=7]="Zip",m))(ui||{});var Ln=function(){return Ln=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ln.apply(this,arguments)},Bs={scale:1,zoom:!0,actualSize:!0,showZoomInOutIcons:!1,actualSizeIcons:{zoomIn:"lg-zoom-in",zoomOut:"lg-zoom-out"},enableZoomAfter:300},Nn={afterAppendSlide:"lgAfterAppendSlide",init:"lgInit",hasVideo:"lgHasVideo",containerResize:"lgContainerResize",updateSlides:"lgUpdateSlides",afterAppendSubHtml:"lgAfterAppendSubHtml",beforeOpen:"lgBeforeOpen",afterOpen:"lgAfterOpen",slideItemLoad:"lgSlideItemLoad",beforeSlide:"lgBeforeSlide",afterSlide:"lgAfterSlide",posterClick:"lgPosterClick",dragStart:"lgDragStart",dragMove:"lgDragMove",dragEnd:"lgDragEnd",beforeNextSlide:"lgBeforeNextSlide",beforePrevSlide:"lgBeforePrevSlide",beforeClose:"lgBeforeClose",afterClose:"lgAfterClose"},Us=function(){function o(e,t){return this.core=e,this.$LG=t,this.settings=Ln(Ln({},Bs),this.core.settings),this.settings.zoom&&(this.init(),this.zoomableTimeout=!1,this.positionChanged=!1,this.pageX=this.core.outer.width()/2,this.pageY=this.core.outer.height()/2+this.$LG(window).scrollTop(),this.scale=1),this}return o.prototype.buildTemplates=function(){var e=this.settings.showZoomInOutIcons?'<button id="'+this.core.getIdName("lg-zoom-in")+'" type="button" aria-label="Zoom in" class="lg-zoom-in lg-icon"></button><button id="'+this.core.getIdName("lg-zoom-out")+'" type="button" aria-label="Zoom out" class="lg-zoom-out lg-icon"></button>':"";this.settings.actualSize&&(e+='<button id="'+this.core.getIdName("lg-actual-size")+'" type="button" aria-label="View actual size" class="'+this.settings.actualSizeIcons.zoomIn+' lg-icon"></button>'),this.core.outer.addClass("lg-use-transition-for-zoom"),this.core.$toolbar.first().append(e)},o.prototype.enableZoom=function(e){var t=this,i=this.settings.enableZoomAfter+e.detail.delay;this.$LG("body").first().hasClass("lg-from-hash")&&e.detail.delay?i=0:this.$LG("body").first().removeClass("lg-from-hash"),this.zoomableTimeout=setTimeout(function(){t.core.getSlideItem(e.detail.index).addClass("lg-zoomable")},i+30)},o.prototype.enableZoomOnSlideItemLoad=function(){this.core.LGel.on(Nn.slideItemLoad+".zoom",this.enableZoom.bind(this))},o.prototype.getModifier=function(e,t,i){var n=e;e=Math.abs(e);var r=this.getCurrentTransform(i);if(!r)return 1;var a=1;if(t==="X"){var d=Math.sign(parseFloat(r[0]));e===0||e===180?a=1:e===90&&(n===-90&&d===1||n===90&&d===-1?a=-1:a=1),a=a*d}else{var m=Math.sign(parseFloat(r[3]));if(e===0||e===180)a=1;else if(e===90){var u=parseFloat(r[1]),f=parseFloat(r[2]);a=Math.sign(u*f*n*m)}a=a*m}return a},o.prototype.getImageSize=function(e,t,i){var n={y:"offsetHeight",x:"offsetWidth"};return t===90&&(i==="x"?i="y":i="x"),e[n[i]]},o.prototype.getDragCords=function(e,t){return t===90?{x:e.pageY,y:e.pageX}:{x:e.pageX,y:e.pageY}},o.prototype.getSwipeCords=function(e,t){var i=e.targetTouches[0].pageX,n=e.targetTouches[0].pageY;return t===90?{x:n,y:i}:{x:i,y:n}},o.prototype.getDragAllowedAxises=function(e,t){var i=this.core.$lgContent.get(),n=parseFloat(e.attr("data-scale"))||1,r=e.get(),a=this.getImageSize(r,t,"y")*n>i.clientHeight,d=this.getImageSize(r,t,"x")*n>i.clientWidth;return t===90?{allowX:a,allowY:d}:{allowX:d,allowY:a}},o.prototype.getCurrentTransform=function(e){if(e){var t=window.getComputedStyle(e,null),i=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform")||"none";if(i!=="none")return i.split("(")[1].split(")")[0].split(",")}},o.prototype.getCurrentRotation=function(e){if(!e)return 0;var t=this.getCurrentTransform(e);return t?Math.round(Math.atan2(parseFloat(t[1]),parseFloat(t[0]))*(180/Math.PI)):0},o.prototype.zoomImage=function(e){var t=this.core.getSlideItem(this.core.index).find(".lg-image").first(),i=t.get();if(i){var n=this.core.outer.get().getBoundingClientRect(),r=(n.width-i.offsetWidth)/2+n.left,a=(n.height-i.offsetHeight)/2+this.$LG(window).scrollTop()+n.top,d,m;e===1&&(this.positionChanged=!1),this.positionChanged&&(d=parseFloat(t.parent().attr("data-x"))/(parseFloat(t.attr("data-scale"))-1),m=parseFloat(t.parent().attr("data-y"))/(parseFloat(t.attr("data-scale"))-1),this.pageX=d+r,this.pageY=m+a,this.positionChanged=!1);var u=this.pageX-r,f=this.pageY-a,y=(e-1)*u,S=(e-1)*f;this.setZoomStyles({x:y,y:S,scale:e})}},o.prototype.setZoomStyles=function(e){var t=this.core.getSlideItem(this.core.index).find(".lg-image").first(),i=this.core.outer.find(".lg-current .lg-dummy-img").first(),n=t.parent();t.attr("data-scale",e.scale+"").css("transform","scale3d("+e.scale+", "+e.scale+", 1)"),i.css("transform","scale3d("+e.scale+", "+e.scale+", 1)");var r="translate3d(-"+e.x+"px, -"+e.y+"px, 0)";n.css("transform",r),n.attr("data-x",e.x).attr("data-y",e.y)},o.prototype.setActualSize=function(e,t){var i=this,n=this.core.galleryItems[this.core.index];if(!(!n.src||this.core.outer.hasClass("lg-first-slide-loading"))){var r=this.getCurrentImageActualSizeScale();this.core.outer.hasClass("lg-zoomed")?this.scale=1:this.scale=this.getScale(r),this.setPageCords(t),this.beginZoom(this.scale),this.zoomImage(this.scale),setTimeout(function(){i.core.outer.removeClass("lg-grabbing").addClass("lg-grab")},10)}},o.prototype.getNaturalWidth=function(e){var t=this.core.getSlideItem(e).find(".lg-image").first(),i=this.core.galleryItems[e].width;return i?parseFloat(i):t.get().naturalWidth},o.prototype.getActualSizeScale=function(e,t){var i,n;return e>t?(i=e/t,n=i||2):n=1,n},o.prototype.getCurrentImageActualSizeScale=function(){var e=this.core.getSlideItem(this.core.index).find(".lg-image").first(),t=e.get().offsetWidth,i=this.getNaturalWidth(this.core.index)||t;return this.getActualSizeScale(i,t)},o.prototype.getPageCords=function(e){var t={};if(e)t.x=e.pageX||e.targetTouches[0].pageX,t.y=e.pageY||e.targetTouches[0].pageY;else{var i=this.core.outer.get().getBoundingClientRect();t.x=i.width/2+i.left,t.y=i.height/2+this.$LG(window).scrollTop()+i.top}return t},o.prototype.setPageCords=function(e){var t=this.getPageCords(e);this.pageX=t.x,this.pageY=t.y},o.prototype.beginZoom=function(e){if(this.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),e>1){this.core.outer.addClass("lg-zoomed");var t=this.core.getElementById("lg-actual-size");t.removeClass(this.settings.actualSizeIcons.zoomIn).addClass(this.settings.actualSizeIcons.zoomOut)}else this.resetZoom();return e>1},o.prototype.getScale=function(e){var t=this.getCurrentImageActualSizeScale();return e<1?e=1:e>t&&(e=t),e},o.prototype.init=function(){var e=this;this.buildTemplates(),this.enableZoomOnSlideItemLoad();var t=null;this.core.outer.on("dblclick.lg",function(i){e.$LG(i.target).hasClass("lg-image")&&e.setActualSize(e.core.index,i)}),this.core.outer.on("touchstart.lg",function(i){var n=e.$LG(i.target);i.targetTouches.length===1&&n.hasClass("lg-image")&&(t?(clearTimeout(t),t=null,e.setActualSize(e.core.index,i)):t=setTimeout(function(){t=null},300),i.preventDefault())}),this.core.LGel.on(Nn.containerResize+".zoom",function(){e.core.lgOpened&&(e.setPageCords(),e.zoomImage(e.scale))}),this.core.getElementById("lg-zoom-out").on("click.lg",function(){e.core.outer.find(".lg-current .lg-image").get()&&(e.scale-=e.settings.scale,e.scale=e.getScale(e.scale),e.beginZoom(e.scale),e.zoomImage(e.scale))}),this.core.getElementById("lg-zoom-in").on("click.lg",function(){e.zoomIn()}),this.core.getElementById("lg-actual-size").on("click.lg",function(){e.setActualSize(e.core.index)}),this.core.LGel.on(Nn.beforeOpen+".zoom",function(){e.core.outer.find(".lg-item").removeClass("lg-zoomable")}),this.core.LGel.on(Nn.afterSlide+".zoom",function(i){var n=i.detail.prevIndex;e.scale=1,e.resetZoom(n)}),this.zoomDrag(),this.pinchZoom(),this.zoomSwipe()},o.prototype.zoomIn=function(e){var t=this.core.galleryItems[this.core.index];t.src&&(e?this.scale=e:this.scale+=this.settings.scale,this.scale=this.getScale(this.scale),this.beginZoom(this.scale),this.zoomImage(this.scale))},o.prototype.resetZoom=function(e){this.core.outer.removeClass("lg-zoomed lg-zoom-drag-transition");var t=this.core.getElementById("lg-actual-size"),i=this.core.getSlideItem(e!==void 0?e:this.core.index);t.removeClass(this.settings.actualSizeIcons.zoomOut).addClass(this.settings.actualSizeIcons.zoomIn),i.find(".lg-img-wrap").first().removeAttr("style data-x data-y"),i.find(".lg-image").first().removeAttr("style data-scale"),this.setPageCords()},o.prototype.getTouchDistance=function(e){return Math.sqrt((e.targetTouches[0].pageX-e.targetTouches[1].pageX)*(e.targetTouches[0].pageX-e.targetTouches[1].pageX)+(e.targetTouches[0].pageY-e.targetTouches[1].pageY)*(e.targetTouches[0].pageY-e.targetTouches[1].pageY))},o.prototype.pinchZoom=function(){var e=this,t=0,i=!1,n=1,r=this.core.getSlideItem(this.core.index);this.core.$inner.on("touchstart.lg",function(a){r=e.core.getSlideItem(e.core.index),a.preventDefault(),a.targetTouches.length===2&&(e.$LG(a.target).hasClass("lg-item")||r.get().contains(a.target))&&(n=e.scale||1,e.core.outer.removeClass("lg-zoom-drag-transition lg-zoom-dragging"),e.core.touchAction="pinch",t=e.getTouchDistance(a))}),this.core.$inner.on("touchmove.lg",function(a){if(a.preventDefault(),a.targetTouches.length===2&&e.core.touchAction==="pinch"&&(e.$LG(a.target).hasClass("lg-item")||r.get().contains(a.target))){var d=e.getTouchDistance(a),m=t-d;!i&&Math.abs(m)>5&&(i=!0),i&&(e.scale=Math.max(1,n+-m*.008),e.zoomImage(e.scale))}}),this.core.$inner.on("touchend.lg",function(a){e.core.touchAction==="pinch"&&(e.$LG(a.target).hasClass("lg-item")||r.get().contains(a.target))&&(i=!1,t=0,e.scale<=1?e.resetZoom():(e.scale=e.getScale(e.scale),e.zoomImage(e.scale),e.core.outer.addClass("lg-zoomed")),e.core.touchAction=void 0)})},o.prototype.touchendZoom=function(e,t,i,n,r,a){var d=this.core.getSlideItem(this.core.index).find(".lg-img-rotate").first().get(),m=t.x-e.x,u=t.y-e.y,f=Math.abs(m)/r+1,y=Math.abs(u)/r+1;f>2&&(f+=1),y>2&&(y+=1),m=m*f,u=u*y;var S=this.core.getSlideItem(this.core.index).find(".lg-img-wrap").first(),C=this.core.getSlideItem(this.core.index).find(".lg-object").first(),w=parseFloat(S.attr("data-x"))||0,T=parseFloat(S.attr("data-y"))||0,P={};P.x=-Math.abs(w)+m*this.getModifier(a,"X",d),P.y=-Math.abs(T)+u*this.getModifier(a,"Y",d);var E=this.getPossibleSwipeDragCords(C,a);if(Math.abs(m)>15||Math.abs(u)>15){if(n&&(P.y<=-E.maxY?P.y=-E.maxY:P.y>=-E.minY&&(P.y=-E.minY)),i&&(P.x<=-E.maxX?P.x=-E.maxX:P.x>=-E.minX&&(P.x=-E.minX)),n)S.attr("data-y",Math.abs(P.y));else{var A=parseFloat(S.attr("data-y"))||0;P.y=-Math.abs(A)}if(i)S.attr("data-x",Math.abs(P.x));else{var H=parseFloat(S.attr("data-x"))||0;P.x=-Math.abs(H)}this.setZoomSwipeStyles(S,P),this.positionChanged=!0}},o.prototype.getZoomSwipeCords=function(e,t,i,n,r,a,d,m,u){var f={};if(n){if(f.y=-Math.abs(a)+(t.y-e.y)*this.getModifier(m,"Y",u),f.y<=-r.maxY){var y=-r.maxY-f.y;f.y=-r.maxY-y/6}else if(f.y>=-r.minY){var S=f.y- -r.minY;f.y=-r.minY+S/6}}else f.y=-Math.abs(a);if(i){if(f.x=-Math.abs(d)+(t.x-e.x)*this.getModifier(m,"X",u),f.x<=-r.maxX){var C=-r.maxX-f.x;f.x=-r.maxX-C/6}else if(f.x>=-r.minX){var w=f.x- -r.minX;f.x=-r.minX+w/6}}else f.x=-Math.abs(d);return f},o.prototype.getPossibleSwipeDragCords=function(e,t){var i=this.core.$lgContent,n=i.height(),r=i.width(),a=this.getImageSize(e.get(),t,"y"),d=this.getImageSize(e.get(),t,"x"),m=parseFloat(e.attr("data-scale"))||1,u=Math.abs(m),f=(n-a)/2,y=Math.abs(a*u-n+f),S=(r-d)/2,C=Math.abs(d*u-r+S);return t===90?{minY:S,maxY:C,minX:f,maxX:y}:{minY:f,maxY:y,minX:S,maxX:C}},o.prototype.setZoomSwipeStyles=function(e,t){e.css("transform","translate3d("+t.x+"px, "+t.y+"px, 0)")},o.prototype.zoomSwipe=function(){var e=this,t={},i={},n=!1,r=!1,a=!1,d=new Date,m=new Date,u=0,f=0,y,S,C=null,w=0,T=this.core.getSlideItem(this.core.index);this.core.$inner.on("touchstart.lg",function(P){P.preventDefault();var E=e.core.galleryItems[e.core.index];if(E.src&&(T=e.core.getSlideItem(e.core.index),(e.$LG(P.target).hasClass("lg-item")||T.get().contains(P.target))&&P.targetTouches.length===1&&e.core.outer.hasClass("lg-zoomed"))){d=new Date,e.core.touchAction="zoomSwipe";var A=e.core.getSlideItem(e.core.index).find(".lg-object").first();S=e.core.getSlideItem(e.core.index).find(".lg-img-wrap").first(),C=e.core.getSlideItem(e.core.index).find(".lg-img-rotate").first().get(),w=e.getCurrentRotation(C);var H=e.getDragAllowedAxises(A,Math.abs(w));a=H.allowY,r=H.allowX,(r||a)&&(t=e.getSwipeCords(P,Math.abs(w))),f=parseFloat(S.attr("data-y")),u=parseFloat(S.attr("data-x")),y=e.getPossibleSwipeDragCords(A,w),e.core.outer.addClass("lg-zoom-dragging lg-zoom-drag-transition")}}),this.core.$inner.on("touchmove.lg",function(P){if(P.preventDefault(),P.targetTouches.length===1&&e.core.touchAction==="zoomSwipe"&&(e.$LG(P.target).hasClass("lg-item")||T.get().contains(P.target))){e.core.touchAction="zoomSwipe",i=e.getSwipeCords(P,Math.abs(w));var E=e.getZoomSwipeCords(t,i,r,a,y,f,u,w,C);(Math.abs(i.x-t.x)>15||Math.abs(i.y-t.y)>15)&&(n=!0,e.setZoomSwipeStyles(S,E))}}),this.core.$inner.on("touchend.lg",function(P){if(e.core.touchAction==="zoomSwipe"&&(e.$LG(P.target).hasClass("lg-item")||T.get().contains(P.target))){if(e.core.touchAction=void 0,e.core.outer.removeClass("lg-zoom-dragging"),!n)return;n=!1,m=new Date;var E=m.valueOf()-d.valueOf();e.touchendZoom(t,i,r,a,E,w)}})},o.prototype.zoomDrag=function(){var e=this,t={},i={},n=!1,r=!1,a=null,d=0,m=!1,u=!1,f,y,S,C,w,T;this.core.outer.on("mousedown.lg.zoom",function(P){var E=e.core.galleryItems[e.core.index];if(E.src){var A=e.core.getSlideItem(e.core.index);if(e.$LG(P.target).hasClass("lg-item")||A.get().contains(P.target)){f=new Date;var H=e.core.getSlideItem(e.core.index).find(".lg-object").first();T=e.core.getSlideItem(e.core.index).find(".lg-img-wrap").first(),a=e.core.getSlideItem(e.core.index).find(".lg-img-rotate").get(),d=e.getCurrentRotation(a);var X=e.getDragAllowedAxises(H,Math.abs(d));u=X.allowY,m=X.allowX,e.core.outer.hasClass("lg-zoomed")&&e.$LG(P.target).hasClass("lg-object")&&(m||u)&&(P.preventDefault(),t=e.getDragCords(P,Math.abs(d)),S=e.getPossibleSwipeDragCords(H,d),n=!0,C=parseFloat(T.attr("data-y")),w=parseFloat(T.attr("data-x")),e.core.outer.get().scrollLeft+=1,e.core.outer.get().scrollLeft-=1,e.core.outer.removeClass("lg-grab").addClass("lg-grabbing lg-zoom-drag-transition lg-zoom-dragging"))}}}),this.$LG(window).on("mousemove.lg.zoom.global"+this.core.lgId,function(P){if(n){r=!0,i=e.getDragCords(P,Math.abs(d));var E=e.getZoomSwipeCords(t,i,m,u,S,C,w,d,a);e.setZoomSwipeStyles(T,E)}}),this.$LG(window).on("mouseup.lg.zoom.global"+this.core.lgId,function(P){if(n){if(y=new Date,n=!1,e.core.outer.removeClass("lg-zoom-dragging"),r&&(t.x!==i.x||t.y!==i.y)){i=e.getDragCords(P,Math.abs(d));var E=y.valueOf()-f.valueOf();e.touchendZoom(t,i,m,u,E,d)}r=!1}e.core.outer.removeClass("lg-grabbing").addClass("lg-grab")})},o.prototype.closeGallery=function(){this.resetZoom()},o.prototype.destroy=function(){this.$LG(window).off(".lg.zoom.global"+this.core.lgId),this.core.LGel.off(".lg.zoom"),this.core.LGel.off(".zoom"),clearTimeout(this.zoomableTimeout),this.zoomableTimeout=!1},o}(),Pa=Us;var Bn=class o{fileId;emails;message;static \u0275fac=function(t){return new(t||o)};static \u0275prov=fe({token:o,factory:o.\u0275fac,providedIn:"root"})};var ji=class o{closeAllMenusSource=new co;closeAllMenus$=this.closeAllMenusSource.asObservable();closeAllMenus(){this.closeAllMenusSource.next()}closeAllSource=new co;closeAll$=this.closeAllSource.asObservable();closeAll(){this.closeAllSource.next()}static \u0275fac=function(t){return new(t||o)};static \u0275prov=fe({token:o,factory:o.\u0275fac,providedIn:"root"})};var Hs=o=>({$implicit:o,level:0}),Qs=(o,e)=>({$implicit:o,level:e});function $s(o,e){o&1&&rt(0)}function Ws(o,e){if(o&1&&(je(0),F(1,$s,1,0,"ng-container",7),Me()),o&2){let t=e.$implicit;g();let i=V(7);c(),h("ngTemplateOutlet",i)("ngTemplateOutletContext",se(2,Hs,t))}}function qs(o,e){if(o&1&&(s(0,"div")(1,"strong"),p(2,"Selected Item:"),l(),s(3,"div"),p(4),l()()),o&2){let t=g();c(4),z(t.selectedNode.label)}}function Zs(o,e){o&1&&(s(0,"span",16),p(1,"-"),l())}function Xs(o,e){o&1&&(s(0,"span",16),p(1,"+"),l())}function Ys(o,e){o&1&&(s(0,"span",16),v(1,"i",17),l())}function Gs(o,e){if(o&1){let t=O();s(0,"button",13),x("click",function(n){_(t);let r=g().$implicit;return g().loadChildren(r),b(n.stopPropagation())}),F(1,Zs,2,0,"span",14)(2,Xs,2,0,"span",15)(3,Ys,2,0,"span",15),l()}if(o&2){let t=g().$implicit;c(),h("ngIf",t.expanded),c(),h("ngIf",!t.expanded),c(),h("ngIf",t.loading)}}function Ks(o,e){o&1&&rt(0)}function Js(o,e){if(o&1&&(je(0),F(1,Ks,1,0,"ng-container",7),Me()),o&2){let t=e.$implicit,i=g(2).level;g();let n=V(7);c(),h("ngTemplateOutlet",n)("ngTemplateOutletContext",$e(2,Qs,t,i+1))}}function el(o,e){if(o&1&&(s(0,"div"),F(1,Js,2,5,"ng-container",5),l()),o&2){let t=g().$implicit;c(),h("ngForOf",t.children)}}function tl(o,e){if(o&1){let t=O();s(0,"div",8),v(1,"div",9)(2,"i",10),s(3,"span",11),x("click",function(){let n=_(t).$implicit,r=g();return b(r.toggleSelection(n))}),s(4,"strong"),p(5),l()(),F(6,Gs,4,3,"button",12)(7,el,2,1,"div",6),l()}if(o&2){let t=e.$implicit,i=g();c(),pt("height",t.hasChildren?"100%":"0"),c(),sr(t.icon),c(2),k("selected-item",t.projectId==(i.selectedNode==null?null:i.selectedNode.projectId)&&t.folderId==(i.selectedNode==null?null:i.selectedNode.folderId)),c(),z(t.label),c(),h("ngIf",t.hasChildren),c(),h("ngIf",t.hasChildren&&t.expanded)}}var Un=class o{constructor(e,t,i,n,r){this.el=e;this.modalService=t;this.projectService=i;this.toaster=n;this.translate=r}projects=[];select=new $;subscriptions=[];treeData=[];selectedNode=null;ngOnInit(){this.treeData=this.projects.map(e=>({projectId:e.projectId??0,folderId:null,label:e.title,icon:"fas fa-box",hasChildren:!0,children:[],loading:!1,expanded:!1}))}toggleSelection(e){this.selectedNode=e,this.select.emit({projectId:e?.projectId??null,folderId:e?.folderId??null})}loadChildren(e){if(e.loading||!e.hasChildren)return;if(e.loading=!0,e.children&&e.children.length>0){e.loading=!1,e.expanded=!e.expanded;return}let t=this.projectService.fetchProjectFolders({projectId:e.projectId,parentId:e.folderId}).subscribe(i=>{i&&(e.children=i.map(n=>({projectId:n.projectId??0,folderId:n.folderId,label:n.title,icon:"fas fa-folder",hasChildren:(n.childsNum??0)>0,children:[],loading:!1,expanded:!1}))),e.loading=!1,e.expanded=!0});this.subscriptions.push(t)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||o)(I(me),I(Fe),I(re),I(oe),I(le))};static \u0275cmp=N({type:o,selectors:[["app-folders-tree-view"]],inputs:{projects:"projects"},outputs:{select:"select"},standalone:!1,decls:8,vars:2,consts:[["treeNodeTemplate",""],[1,"form-group"],["ngbDropdown",""],["ngbDropdownMenu","",1,"scrollable-menu"],[1,"tree-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dropdown-item",2,"margin-left","20px"],[1,"tree-line"],[2,"margin-right","2px","margin-left","2px"],[2,"cursor","pointer",3,"click"],["type","button","style","border: none; background: none; cursor: pointer;",3,"click",4,"ngIf"],["type","button",2,"border","none","background","none","cursor","pointer",3,"click"],["style"," font-size: 20px; font-weight: bold; margin-right:2px; margin-left:2px;",4,"ngIf"],["style"," font-size: 20px; font-weight: bold; margin-right: 2px; margin-left: 2px;",4,"ngIf"],[2,"font-size","20px","font-weight","bold","margin-right","2px","margin-left","2px"],[1,"fas","fa-circle-notch","fa-spin"]],template:function(t,i){t&1&&(s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),F(4,Ws,2,4,"ng-container",5),l()()(),F(5,qs,5,1,"div",6)(6,tl,8,9,"ng-template",null,0,ne),l()),t&2&&(c(4),h("ngForOf",i.treeData),c(),h("ngIf",i.selectedNode))},dependencies:[J,Z,Ri],styles:['.scrollable-menu[_ngcontent-%COMP%]{max-height:300px;height:300px;overflow-y:auto}.tree-container[_ngcontent-%COMP%]{padding:10px}.selected-item[_ngcontent-%COMP%]{background-color:#594fef45}.tree-line[_ngcontent-%COMP%]{width:2px;background-color:#ccc;margin-right:10px;position:relative;top:0}.dropdown-item[_ngcontent-%COMP%]{position:relative}.dropdown-item[_ngcontent-%COMP%]:before{content:"";position:absolute;left:-10px;top:0;bottom:0;width:2px;background-color:#ccc;z-index:1000}']})};var ol=o=>({fav:o}),rl=o=>({focused:o}),al=o=>({selected:o});function sl(o,e){o&1&&(je(0),v(1,"img",35),p(2,"Archive "),Me())}function ll(o,e){o&1&&(v(0,"img",36),p(1,"Unarchive "))}function cl(o,e){o&1&&rt(0)}function dl(o,e){if(o&1&&(s(0,"div")(1,"a",37),v(2,"video",38),l()()),o&2){let t,i=g();Ai("file-img-holder ",i.FileTypes[(t=i.card.fileType)!==null&&t!==void 0?t:-1],""),c(),q("href",i.card.fileUrl,U),c(),h("src",i.card.fileUrl,U)}}function pl(o,e){if(o&1&&(s(0,"a",37),v(1,"img",39),l()),o&2){let t=g(3);q("href",t.card.externalFileUrl,U),c(),q("alt",t.card.title),h("src",t.card.externalFileUrl,U)}}function ml(o,e){if(o&1){let t=O();s(0,"a",37)(1,"img",40),x("error",function(){_(t);let n=g(3);return b(n.imageError=!0)})("load",function(){_(t);let n=g(3);return b(n.imageError=!1)}),l()()}if(o&2){let t=g(3);q("href",t.card.fileUrl,U),c(),q("alt",t.card.title),h("src",t.card.fileUrl,U)}}function ul(o,e){if(o&1&&F(0,pl,2,3,"a",37)(1,ml,2,3,"a",37),o&2){let t=g(2);K(t.card.externalFileUrl!=null?0:1)}}function fl(o,e){if(o&1&&(s(0,"a",41),v(1,"img",42),l()),o&2){let t,i=g(3);q("href",i.card.externalFileUrl,U),c(),q("alt",i.card.title),h("src","./assets/icons/file-"+i.FileTypes[(t=i.card.fileType)!==null&&t!==void 0?t:-1]+".svg",U)}}function hl(o,e){if(o&1&&(s(0,"a",41),v(1,"img",42),l()),o&2){let t,i=g(3);q("href",i.card.fileUrl,U),c(),q("alt",i.card.title),h("src","./assets/icons/file-"+i.FileTypes[(t=i.card.fileType)!==null&&t!==void 0?t:-1]+".svg",U)}}function gl(o,e){if(o&1&&F(0,fl,2,3,"a",41)(1,hl,2,3,"a",41),o&2){let t=g(2);K(t.card.externalFileUrl!=null?0:1)}}function vl(o,e){if(o&1&&(s(0,"div"),F(1,ul,2,1)(2,gl,2,1),l()),o&2){let t,i,n,r=g();Ai("file-img-holder ",r.FileTypes[(t=r.card.fileType)!==null&&t!==void 0?t:-1],""),k("file",r.FileTypes[(i=r.card.fileType)!==null&&i!==void 0?i:-1]!="Image"),c(),K((n=r.FileTypes[(n=r.card.fileType)!==null&&n!==void 0?n:-1])==="Image"?1:2)}}function _l(o,e){o&1&&rt(0)}function bl(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(3);c(),M("",L(2,1,((t=i.card.fileSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function yl(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(3);c(),M("",L(2,1,((t=i.card.fileSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function Cl(o,e){if(o&1&&(p(0),F(1,bl,3,4,"span")(2,yl,3,4,"span")),o&2){let t,i,n=g(2);M(" ",(t=n.card.videoDuration)!==null&&t!==void 0?t:"00:00"," Min | "),c(),K(((i=n.card.fileSize)!==null&&i!==void 0?i:0)>1?1:2)}}function Sl(o,e){o&1&&p(0,"External file")}function xl(o,e){if(o&1&&(v(0,"img",43),s(1,"span"),F(2,Cl,3,2)(3,Sl,1,0),l()),o&2){let t=g();c(2),K(t.card.externalFileUrl==null?2:3)}}function wl(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(3);c(),M("",L(2,1,((t=i.card.fileSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function Fl(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(3);c(),M("",L(2,1,((t=i.card.fileSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function Il(o,e){if(o&1&&F(0,wl,3,4,"span")(1,Fl,3,4,"span"),o&2){let t,i=g(2);K(((t=i.card.fileSize)!==null&&t!==void 0?t:0)>1?0:1)}}function Pl(o,e){o&1&&(s(0,"span"),p(1,"External file"),l())}function Tl(o,e){if(o&1&&F(0,Il,2,1)(1,Pl,2,0,"span"),o&2){let t=g();K(t.card.externalFileUrl==null?0:1)}}function El(o,e){if(o&1){let t=O();s(0,"li",69)(1,"span",70),x("click",function(){let n=_(t).$implicit,r=g(2);return b(r.removeUser(n))}),p(2,"\xD7"),l(),s(3,"div",71)(4,"div",72)(5,"div",73),v(6,"img",42),l(),p(7),l()()()}if(o&2){let t=e.$implicit;q("title",t.name),c(6),q("alt",t==null?null:t.name),h("src",t.imageUrl?t.imageUrl:t.isMale==!0?"assets/images/profile/default-profile-img.png":t.isMale==!1?"assets/images/profile/default-profile-female-img.jpg":"assets/images/profile/unknown-person.svg",U),c(),Vi("",t.name," (",t==null?null:t.email,") ")}}function jl(o,e){if(o&1){let t=O();s(0,"li",78),x("click",function(){let n=_(t).$implicit,r=g(3);return b(r.selectUser(n))}),s(1,"div",71)(2,"div",72)(3,"div",73),v(4,"img",42),l(),p(5),l()()()}if(o&2){let t=e.$implicit;h("ngClass",se(5,al,t.isSelected)),c(4),q("alt",t==null?null:t.name),h("src",t.imageUrl?t.imageUrl:t.isMale==!0?"assets/images/profile/default-profile-img.png":t.isMale==!1?"assets/images/profile/default-profile-female-img.jpg":"assets/images/profile/unknown-person.svg",U),c(),Vi(" ",t==null?null:t.name," (",t==null?null:t.email,") ")}}function Ml(o,e){if(o&1&&(s(0,"div",74)(1,"div",75)(2,"ul",76),F(3,jl,6,7,"li",77),l()()()),o&2){let t=g(2);c(3),h("ngForOf",t.usersData)}}function Ol(o,e){o&1&&(s(0,"div",79),p(1),j(2,"translate"),l()),o&2&&(c(),M(" ",Q(2,1,"RequieredField")," "))}function Dl(o,e){o&1&&(s(0,"div",79),p(1),j(2,"translate"),l()),o&2&&(c(),M(" ",Q(2,1,"RequieredField")," "))}function kl(o,e){if(o&1&&(s(0,"div",51)(1,"label",80),p(2,"Message"),l(),s(3,"textarea",81),p(4,"Your message"),l(),F(5,Dl,3,3,"div",60),l()),o&2){let t,i=g(2);c(5),h("ngIf",((t=i.shareForm.get("message"))==null?null:t.invalid)&&(i.isSubmittedItem||((t=i.shareForm.get("message"))==null?null:t.touched)||((t=i.shareForm.get("message"))==null?null:t.dirty)))}}function Al(o,e){if(o&1){let t=O();s(0,"div",44)(1,"h4",45),p(2),l(),s(3,"button",46),x("click",function(){let n=_(t).$implicit;return b(n.dismiss("Cross click"))}),l()(),s(4,"div",47)(5,"form",48)(6,"div",49)(7,"div",50)(8,"div",51)(9,"label",52),p(10,"Share with"),l(),s(11,"div",53)(12,"div",54)(13,"div",55)(14,"ul",56),F(15,El,8,5,"li",57),s(16,"li")(17,"input",58),j(18,"translate"),x("keyup.enter",function(){let n;_(t);let r=g();return b(r.onEnterSearchQuery((n=r.shareForm.get("searchQuery"))==null?null:n.value))}),l()()()()()(),F(19,Ml,4,1,"div",59)(20,Ol,3,3,"div",60),l()(),s(21,"div",61)(22,"div",62),v(23,"input",63),s(24,"label",64),p(25," Notify user "),l()()()(),F(26,kl,6,1,"div",65),s(27,"div",66)(28,"button",67),x("click",function(){let n=_(t).$implicit;return b(n.close("Close click"))}),p(29," Cancel "),l(),s(30,"button",68),x("click",function(){_(t);let n=g();return b(n.submitShare())}),p(31,"Confirm"),l()()()()}if(o&2){let t,i,n=g();c(2),M("Share file (",n.filename,")"),c(3),h("formGroup",n.shareForm),c(10),h("ngForOf",n.selectedUsers),c(2),It("placeholder","",Q(18,10,"Projects.EnterNameOrEmail"),"..."),h("ngClass",se(12,rl,((t=n.shareForm.get("searchQuery"))==null?null:t.value.length)>0)),c(2),h("ngIf",n.usersData.length>0),c(),h("ngIf",!n.selectedUsers.length&&n.isSubmittedItem),c(6),h("ngIf",((i=n.shareForm.get("notify"))==null?null:i.value)==!0),c(2),h("disabled",n.value===!1)}}function Vl(o,e){o&1&&(s(0,"div",79),p(1),j(2,"translate"),l()),o&2&&(c(),M(" ",Q(2,1,"RequieredField")," "))}function Rl(o,e){if(o&1){let t=O();s(0,"div",44)(1,"h4",45),p(2,"Rename file"),l(),s(3,"button",46),x("click",function(){let n=_(t).$implicit;return b(n.dismiss("Cross click"))}),l()(),s(4,"div",47)(5,"form",82,10),x("ngSubmit",function(){_(t);let n=V(6),r=g();return b(n.form.valid&&r.submitRename(r.card))}),s(7,"div",51)(8,"label",83),p(9,"File name"),l(),s(10,"input",84,11),Bt("ngModelChange",function(n){_(t);let r=g();return Lt(r.filename,n)||(r.filename=n),b(n)}),x("keyup",function(){_(t);let n=g();return b(n.checkMatch(n.card.title))}),l(),F(12,Vl,3,3,"div",60),l(),s(13,"div",66)(14,"button",67),x("click",function(){let n=_(t).$implicit;return b(n.close("Close click"))}),p(15," Cancel "),l(),s(16,"button",85),p(17,"Confirm"),l()()()()}if(o&2){let t=V(6),i=V(11),n=g();c(10),Nt("ngModel",n.filename),c(2),h("ngIf",i.invalid&&(i.dirty||i.touched||t.submitted)),c(2),h("disabled",n.value===!1),c(2),h("disabled",n.match===!1)}}function zl(o,e){if(o&1){let t=O();s(0,"div",44)(1,"h4",45),p(2,"Move file"),l(),s(3,"button",46),x("click",function(){let n=_(t).$implicit;return b(n.dismiss("Cross click"))}),l()(),s(4,"div",47)(5,"form",82,12),x("ngSubmit",function(){_(t);let n=V(6),r=g();return b(n.form.valid&&r.submitMove(r.card))}),s(7,"app-folders-tree-view",86),x("select",function(n){_(t);let r=g();return b(r.handleMoveToSelect(n))}),l(),s(8,"div",66)(9,"button",67),x("click",function(){let n=_(t).$implicit;return b(n.close("Close click"))}),p(10," Cancel "),l(),s(11,"button",85),p(12,"Confirm"),l()()()()}if(o&2){let t=g();c(7),h("projects",t.projects),c(2),h("disabled",t.value===!1),c(2),h("disabled",!t.moveToProjectId&&!t.moveToFolderId)}}function Nl(o,e){if(o&1){let t=O();s(0,"div",44)(1,"h4",45),p(2,"Copy to"),l(),s(3,"button",46),x("click",function(){let n=_(t).$implicit;return b(n.dismiss("Cross click"))}),l()(),s(4,"div",47)(5,"form",82,13),x("ngSubmit",function(){_(t);let n=V(6),r=g();return b(n.form.valid&&r.submitCopy(r.card))}),s(7,"app-folders-tree-view",86),x("select",function(n){_(t);let r=g();return b(r.handleCopyToSelect(n))}),l(),s(8,"div",66)(9,"button",67),x("click",function(){let n=_(t).$implicit;return b(n.close("Close click"))}),p(10," Cancel "),l(),s(11,"button",85),p(12,"Confirm"),l()()()()}if(o&2){let t=g();c(7),h("projects",t.projects),c(2),h("disabled",t.value===!1),c(2),h("disabled",!t.copyToProjectId&&!t.copyToFolderId)}}function Ll(o,e){o&1&&(je(0),s(1,"h3",88),v(2,"i",89),p(3,"Are you sure you want to archive this file?"),l(),Me())}function Bl(o,e){o&1&&(s(0,"h3",88),v(1,"i",89),p(2,"Are you sure you want to unarchive this file?"),l())}function Ul(o,e){if(o&1){let t=O();s(0,"div",44)(1,"h4",45),p(2,"Archive file"),l(),s(3,"button",46),x("click",function(){let n=_(t).$implicit;return b(n.dismiss("Cross click"))}),l()(),s(4,"div",47),F(5,Ll,4,0,"ng-container",27)(6,Bl,3,0,"ng-template",null,0,ne),s(8,"div",66)(9,"button",67),x("click",function(){let n=_(t).$implicit;return b(n.close("Close click"))}),p(10," Cancel "),l(),s(11,"button",87),x("click",function(){_(t);let n=g();return b(n.submitArchive(n.card.fileId))}),p(12,"Confirm"),l()()()}if(o&2){let t=V(7),i=g();c(5),h("ngIf",i.card.isActive==!0)("ngIfElse",t),c(4),h("disabled",i.value===!1)}}var _e=class o{constructor(e,t,i,n,r,a,d){this.fileCardService=e;this.el=t;this.modalService=i;this.projectService=n;this.toaster=r;this.translate=a;this.userService=d}projectFolderQuery;projectFolders=[];isFetchingProjects=!1;subscriptions=[];projects;isFetching=!1;pageSize=1e3;currentPage=1;totalItems=0;numberOfPages=0;selectedProjectType=null;selectedSortField=null;card;index;showInfo=new $;favorite=new $;archive=new $;rename=new $;imageError;activeCardIndex=null;FileTypes=ui;isFetchingUsers=!1;usersData=[];selectedUsers=[];shareForm;closeSub;static hasInitialized=!1;static cachedProjects=[];settings={counter:!1,plugins:[Pa]};onBeforeSlide=e=>{let{index:t,prevIndex:i}=e;console.log(t,i)};ngOnInit(){if(this.projectFolderQuery=new Ke,this.projectFolderQuery.projectId=null,this.projectFolderQuery.parentId=null,this.projectFolderQuery.sortOrder=null,this.projectFolderQuery.pageNumber=1,this.projectFolderQuery.pageSize=1e3,this.projectFolderQuery.FavUserId=null,this.projectFolderQuery.isActive=!0,this.projectFolderQuery.showCurrentUserFav=!0,this.projectFolderQuery.type=null,this.closeSub=this.fileCardService.closeAllMenus$.subscribe(()=>{this.activeCardIndex=null}),!o.hasInitialized)o.hasInitialized=!0,this.fetchProjects();else{let e=setInterval(()=>{o.cachedProjects.length>0&&(this.projects=o.cachedProjects,clearInterval(e))},100)}this.initializeShareForm()}shareFile(e,t){this.usersData=[],this.selectedUsers=[],this.shareForm.reset({searchQuery:"",notify:!1,message:""}),this.filename=t.title,this.modalService.open(e,{centered:!0,size:"lg"})}initializeShareForm(){this.shareForm=new $t({searchQuery:new pe(""),notify:new pe(!1),message:new pe("")}),this.shareForm.get("searchQuery")?.valueChanges.subscribe(e=>{this.onSearch(e)}),this.shareForm.get("notify")?.valueChanges.subscribe(e=>{let t=this.shareForm.get("message");e?t?.setValidators([ai.required]):t?.clearValidators(),t?.updateValueAndValidity()})}isSubmittedItem=!1;submitShare(){if(this.isSubmittedItem=!0,this.shareForm.invalid||!this.selectedUsers||!this.selectedUsers.length){this.shareForm.markAllAsTouched(),this.toaster.error(this.translate.instant("Projects.EnterValidData"));return}let e=new Bn;e.fileId=this.card.fileId??0,e.emails=this.selectedUsers.map(i=>i.email??""),e.message=this.shareForm.get("notify")?.value?this.shareForm.get("message")?.value:null;let t=this.projectService.shareFile(e).subscribe(i=>{i?(this.modalService.dismissAll(),this.toaster.success("",this.translate.instant("File shared successfully"))):this.toaster.error(this.translate.instant("Error happened while sharing, Try again please."))},i=>{console.error("Error creating project:",i),this.toaster.error(this.translate.instant("Error happened while sharing, Try again please."))});this.subscriptions.push(t)}onSearch(e){if(!this.isFetchingUsers)if(e){this.isFetchingUsers=!0;let t=this.userService.fetchUsers(e,1,10).subscribe(i=>{i&&(console.log("Users:",i),this.usersData=i.data.map(n=>this.mapUserToProjectUser(n))),this.isFetchingUsers=!1});this.subscriptions.push(t)}else this.usersData=[]}mapUserToProjectUser(e){return{name:e.name,email:e.email,imageUrl:e.imageUrl,isMale:e.isMale,isSelected:this.selectedUsers.some(t=>t.email===e.email)}}selectUser(e){this.selectedUsers.some(i=>i.email===e.email)||(e.isSelected=!0,this.selectedUsers.push(e))}onEnterSearchQuery(e){e&&this.usersData.length?this.selectUser(this.usersData[0]):this.isValidEmail(e)&&this.selectUser({name:"Unknown",email:e,imageUrl:null,isMale:null,isSelected:this.selectedUsers.some(t=>t.email==e)})}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}removeUser(e){this.selectedUsers=this.selectedUsers.filter(t=>t.email!==e.email),e.isSelected=!1}toggleMenu(e,t){t.preventDefault(),t.stopPropagation(),this.fileCardService.closeAllMenus(),this.activeCardIndex=this.activeCardIndex===e?null:e}onDocumentClick(e){let t=e.target;!t.closest(".file-action-menu")&&!t.closest(".dots-menu")&&this.fileCardService.closeAllMenus()}supportedFileTypes=["Pdf","Word","Excel","Image","Video"];getFileIcon(e){let t=this.FileTypes[e??-1];return this.supportedFileTypes.includes(t)?`./assets/icons/file-${t}.svg`:"./assets/icons/file-default.svg"}downloadFile(e){if(e&&e.fileUrl){let t=document.createElement("a");t.href=e.fileUrl,t.target="_blank",t.setAttribute("download",e.title||"download"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}fetchProjects(){if(this.isFetching)return;this.isFetching=!0;let e=this.projectService.fetchProjects(this.currentPage,this.pageSize,this.selectedProjectType,this.selectedSortField).subscribe(t=>{t&&(this.projects=t.data,o.cachedProjects=t.data,console.log("projects",this.projects),this.currentPage=t.currentPage,this.pageSize=t.pageSize,this.totalItems=t.totalItems,this.numberOfPages=t.numberOfPages),this.isFetching=!1});this.subscriptions.push(e)}fetchProjectFolders(e){if(this.projectFolderQuery.projectId=e,!this.projectFolderQuery.projectId||this.isFetchingProjects)return;this.isFetchingProjects=!0,this.projectFolderQuery.type=0;let t=this.projectService.fetchProjectFolders(this.projectFolderQuery).subscribe(i=>{i&&(console.log("Project folders1:",i),this.currentPage=i.currentPage,this.projectFolders=i),this.isFetchingProjects=!1});this.subscriptions.push(t)}filename;moveProject;copyProject;match=!1;renameFile(e,t){this.filename=t.title,this.modalService.open(e,{centered:!0,size:"lg"})}checkMatch(e){this.filename!=e?this.match=!0:this.match=!1}submitRename(e){let t=new FormData;t.append("Title",this.filename),t.append("IsActive",e.isActive),this.projectService.patchFile(e.fileId,t).subscribe(i=>{i&&(console.log(i),this.modalService.dismissAll(),this.rename.emit({fileId:e.fileId,filename:this.filename}),this.toaster.success("",this.translate.instant("File renamed successfully")))})}moveFile(e,t){this.modalService.open(e,{centered:!0,size:"lg"})}moveToProjectId=null;moveToFolderId=null;handleMoveToSelect(e){this.moveToProjectId=e.projectId,this.moveToFolderId=e.folderId}submitMove(e){let t=new FormData;t.append("ProjectId",(this.moveToProjectId??"").toString()),t.append("FolderId",(this.moveToFolderId??"").toString()),t.append("IsActive",e.isActive),this.projectService.patchFile(e.fileId,t).subscribe(i=>{i&&(console.log(i),this.modalService.dismissAll(),this.toaster.success("",this.translate.instant("File moved successfully")))})}copyFile(e,t){this.modalService.open(e,{centered:!0,size:"lg"})}copyToProjectId=null;copyToFolderId=null;handleCopyToSelect(e){this.copyToProjectId=e.projectId,this.copyToFolderId=e.folderId}submitCopy(e){let t=[],i=new FormData,n=e.externalFileUrl||e.fileUrl;if(n){let r=n,a="http://wotnfileshareapi.wotn.com.sa/Uploads/ProjectFiles/";n&&n.startsWith(a)&&(r=n.replace(a,"")),i.append("fileUrl",r??"")}i.append("fileType",e.fileType?.toString()??""),i.append("Title",e.title?.toString()??""),i.append("isActive",e.isActive?.toString()??""),i.append("TypeId",e.typeId?.toString()??""),i.append("projectId",this.copyToProjectId?.toString()??""),i.append("folderId",this.copyToFolderId?.toString()??""),i.append("fileSize",e.fileSize?.toString()??""),console.log(i),this.projectService.createFile1(i).subscribe(r=>{r&&(this.modalService.dismissAll(),this.toaster.success("",this.translate.instant("File copied successfully")))})}chooseProjectV(e){console.log(this.copyProject),this.moveProject=e.options[0].id}archiveFile(e,t){this.modalService.open(e,{centered:!0,size:"lg"})}submitArchive(e){this.projectService.archiveFile(e).subscribe(t=>{t&&(this.modalService.dismissAll(),this.archive.emit(e),this.toaster.success("",this.translate.instant("File archived successfully")))})}ngOnDestroy(){this.closeSub.unsubscribe(),this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||o)(I(ji),I(me),I(Fe),I(re),I(oe),I(le),I(Gt))};static \u0275cmp=N({type:o,selectors:[["app-file-card"]],hostBindings:function(t,i){t&1&&x("click",function(r){return i.onDocumentClick(r)},!1,Yi)},inputs:{card:"card",index:"index"},outputs:{showInfo:"showInfo",favorite:"favorite",archive:"archive",rename:"rename"},standalone:!1,decls:69,vars:32,consts:[["unarchiveBlock",""],["thenBlock",""],["elseBlock",""],["thenBlock1",""],["elseBlock1",""],["shareModal",""],["renameModal",""],["moveModal",""],["copyModal",""],["archiveModal",""],["renameForm","ngForm"],["filename1","ngModel"],["moveForm","ngForm"],["copyForm","ngForm"],[1,"recent-file-card"],[1,"file-card-header","d-flex","flex-row","justify-content-between","align-items-center"],["src","assets/icons/recent-file-settings.svg","alt","",1,"dots-menu",3,"click"],["id","menu-1",1,"file-action-menu"],[3,"click"],["src","assets/icons/share.svg","alt","Share"],["target","_blank",3,"href","download"],["src","assets/icons/download.svg","alt","Download"],["src","assets/icons/rename.svg","alt","Rename"],["src","assets/icons/move.svg","alt","Move"],["src","assets/icons/duplicate.svg","alt","Copy"],["src","assets/icons/info.svg","alt","File info"],[1,"delete"],[4,"ngIf","ngIfElse"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"recent-file-type","pt-2","d-flex","justify-content-between","flex-row","align-items-center"],["alt","",1,"me-1",3,"src"],[3,"title"],[1,"star",3,"click","ngClass"],[1,"fa","fa-star"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],["src","assets/icons/delete.svg","alt","Delete"],["src","assets/icons/menu/archive.svg","alt","Delete"],["data-fancybox","gallery",3,"href"],["controls","",3,"src"],["onError","this.src='./assets/icons/file-default.svg';",3,"src","alt"],["onError","this.src='./assets/icons/file-default.svg';",3,"error","load","src","alt"],["target","_blank",3,"href"],[3,"src","alt"],["src","assets/icons/file-clock.svg","alt","",1,"me-1"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","customa"],[1,"form",3,"formGroup"],[1,"row","align-items-center"],[1,"col-lg-9"],[1,"form-group"],["for","peopleWithAccess"],[1,"select2","select2-container","select2-container--default","select2-container--open"],["role","combobox","id","select2-4-combo","tabindex","-1","aria-expanded","true",1,"selection","select2-focused"],[1,"select2-selection","select2-selection--multiple"],[1,"select2-selection__rendered",2,"padding","0.5rem!important"],["tabindex","0","class","select2-selection__choice",3,"title",4,"ngFor","ngForOf"],["type","text","id","searchQuery","formControlName","searchQuery","aria-describedby","searchHelp",1,"form-control",3,"keyup.enter","placeholder","ngClass"],["class","select2-container select2-container--default select2-container-dropdown select2-container--open",4,"ngIf"],["class","formError",4,"ngIf"],[1,"col-lg-3"],[1,"form-check","mt-3"],["type","checkbox","id","notify","formControlName","notify",1,"form-check-input"],["for","notify",1,"form-check-label"],["class","form-group",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click"],["tabindex","0",1,"select2-selection__choice",3,"title"],[1,"select2-selection__choice__remove","ng-star-inserted",2,"color","var(--select2-selection-choice-close-color, #999)","font-weight","700",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center"],[1,"image","me-2"],[1,"select2-container","select2-container--default","select2-container-dropdown","select2-container--open"],[1,"select2-dropdown","select2-dropdown--below"],["role","group",1,"select2-results__options","select2-results__options--nested",2,"height","auto","max-height","200px"],["role","option","class","select2-results__option","style","height: 40px; margin: 1px;",3,"ngClass","click",4,"ngFor","ngForOf"],["role","option",1,"select2-results__option",2,"height","40px","margin","1px",3,"click","ngClass"],[1,"formError"],["for","message"],["id","message","formControlName","message",1,"form-control"],[1,"form",3,"ngSubmit"],["for","filename"],["type","text","id","filename","name","filename","required","",1,"form-control",3,"ngModelChange","keyup","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"select","projects"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"archive"],[1,"fa","fa-archive","me-2"]],template:function(t,i){if(t&1){let n=O();s(0,"div",14)(1,"div",15)(2,"span"),p(3),j(4,"date"),j(5,"date"),l(),s(6,"img",16),x("click",function(a){return _(n),b(i.toggleMenu(i.card.fileId,a))}),l()(),s(7,"div",17)(8,"ul")(9,"li")(10,"a",18),x("click",function(){_(n);let a=V(60);return b(i.shareFile(a,i.card))}),v(11,"img",19),p(12," Share"),l()(),s(13,"li")(14,"a",20),v(15,"img",21),p(16,"Download "),l()(),s(17,"li")(18,"a",18),x("click",function(){_(n);let a=V(62);return b(i.renameFile(a,i.card))}),v(19,"img",22),p(20,"Rename"),l()(),s(21,"li")(22,"a",18),x("click",function(){_(n);let a=V(64);return b(i.moveFile(a,i.card))}),v(23,"img",23),p(24,"Move to"),l()(),s(25,"li")(26,"a",18),x("click",function(){_(n);let a=V(66);return b(i.copyFile(a,i.card))}),v(27,"img",24),p(28,"Copy to"),l()(),s(29,"li")(30,"a",18),x("click",function(){return _(n),b(i.showInfo.emit(i.card))}),v(31,"img",25),p(32,"File information"),l()(),s(33,"li",26)(34,"a",18),x("click",function(){_(n);let a=V(68);return b(i.archiveFile(a,i.card))}),F(35,sl,3,0,"ng-container",27)(36,ll,2,0,"ng-template",null,0,ne),l()()()(),F(38,cl,1,0,"ng-container",28)(39,dl,3,5,"ng-template",null,1,ne)(41,vl,3,6,"ng-template",null,2,ne),s(43,"div",29)(44,"div"),v(45,"img",30),s(46,"span",31),p(47),j(48,"slice"),j(49,"slice"),l()(),s(50,"div")(51,"div",32),x("click",function(){return _(n),b(i.favorite.emit(i.card==null?null:i.card.fileId))}),v(52,"i",33),l()()(),s(53,"div",34),F(54,_l,1,0,"ng-container",28)(55,xl,4,1,"ng-template",null,3,ne)(57,Tl,2,1,"ng-template",null,4,ne),l()(),F(59,Al,32,14,"ng-template",null,5,ne)(61,Rl,18,4,"ng-template",null,6,ne)(63,zl,13,3,"ng-template",null,7,ne)(65,Nl,13,3,"ng-template",null,8,ne)(67,Ul,13,3,"ng-template",null,9,ne)}if(t&2){let n,r,a=V(37),d=V(40),m=V(42),u=V(56),f=V(58);k("active",i.activeCardIndex===i.card.fileId),c(3),M(" ",i.card.openedDate?"You opened \u2022 "+L(4,17,i.card.openedDate,"HH:mm"):i.card.postDate?"You uploaded \u2022 "+L(5,20,i.card.postDate,"HH:mm"):""," "),c(11),h("href",i.card.fileUrl,U)("download",i.card.title),c(21),h("ngIf",i.card.isActive==!0)("ngIfElse",a),c(3),h("ngIf",i.card.fileType==i.FileTypes.Video)("ngIfThen",d)("ngIfElse",m),c(7),h("src","assets/icons/file-"+i.FileTypes[(n=i.card.fileType)!==null&&n!==void 0?n:-1]+"1.svg",U),c(),h("title",i.card.title),c(),M(" ",((r=i.card.title)!==null&&r!==void 0?r:"").length>20?ze(48,23,i.card.title,0,10)+"..."+L(49,27,i.card.title,-4):i.card.title," "),c(4),h("ngClass",se(30,ol,i.card.isFavByUser)),c(3),h("ngIf",i.card.fileType==i.FileTypes.Video)("ngIfThen",u)("ngIfElse",f)}},dependencies:[at,J,Z,we,Le,rn,Be,xe,_i,Wt,qe,qt,Zt,Un,Ut,ye,nn,ut],styles:[".focused[_ngcontent-%COMP%]{background:#f9f9f9;border:1px solid #e0e1e2;color:#333;outline:0;box-shadow:0 0 15.5px #0000000d}.selected[_ngcontent-%COMP%]{background:var(--select2-option-selected-background, #ddd);color:var(--select2-option-selected-text-color, #000)}.select2-results__option[_ngcontent-%COMP%]:not(.selected):hover{background:var(--select2-option-hover-background, #f0f0f0);color:var(--select2-option-hover-text-color, #000);cursor:pointer}"]})};var Hl=["dropdownRef"];function Ql(o,e){if(o&1&&v(0,"img",7),o&2){let t=g();h("src",t.icon,U)}}function $l(o,e){if(o&1){let t=O();s(0,"li")(1,"a",10),x("click",function(){let n=_(t).$implicit,r=g(2);return b(r.selectOption(n))}),p(2),l()()}if(o&2){let t=e.$implicit;c(2),z(t)}}function Wl(o,e){if(o&1&&(s(0,"ul",8),F(1,$l,3,1,"li",9),l()),o&2){let t=g();c(),h("ngForOf",t.options)}}var Ee=class o{constructor(e,t){this.fileCardService=e;this.renderer=t}label="";icon="";options=[];optionSelected=new $;dropdownRef;isOpen=!1;sub;ngOnInit(){this.sub=this.fileCardService.closeAll$.subscribe(()=>{this.isOpen=!1})}toggleDropdown(e){e.preventDefault(),e.stopPropagation(),this.isOpen?this.isOpen=!1:(this.fileCardService.closeAll(),this.isOpen=!0)}selectOption(e){this.optionSelected.emit(e),this.isOpen=!1}handleOutsideClick(e){this.dropdownRef?.nativeElement.contains(e.target)||(this.isOpen=!1)}ngOnDestroy(){this.sub.unsubscribe()}static \u0275fac=function(t){return new(t||o)(I(ji),I(de))};static \u0275cmp=N({type:o,selectors:[["app-sort-files"]],viewQuery:function(t,i){if(t&1&&ie(Hl,5),t&2){let n;Y(n=G())&&(i.dropdownRef=n.first)}},hostBindings:function(t,i){t&1&&x("click",function(r){return i.handleOutsideClick(r)},!1,Yi)},inputs:{label:"label",icon:"icon",options:"options"},outputs:{optionSelected:"optionSelected"},standalone:!1,decls:8,vars:3,consts:[["dropdownRef",""],[1,"dropdown1","dropdown"],["href","#",1,"dropdown-toggle1","dropdown-toggle",3,"click"],["alt","",3,"src",4,"ngIf"],[1,"px-1"],["src","assets/icons/middle-arrow-down.svg","alt","",1,"arrow-icon"],["class","dropdown-menu1",4,"ngIf"],["alt","",3,"src"],[1,"dropdown-menu1"],[4,"ngFor","ngForOf"],["href","#",3,"click"]],template:function(t,i){if(t&1){let n=O();s(0,"div",1,0)(2,"a",2),x("click",function(a){return _(n),b(i.toggleDropdown(a))}),F(3,Ql,1,1,"img",3),s(4,"span",4),p(5),l(),v(6,"img",5),l(),F(7,Wl,2,1,"ul",6),l()}t&2&&(c(3),h("ngIf",i.icon),c(2),z(i.label),c(2),h("ngIf",i.isOpen))},dependencies:[J,Z],encapsulation:2})};var ql=["fileInfo"],Zl=o=>({template1:o});function Xl(o,e){o&1&&rt(0)}function Yl(o,e){if(o&1&&(s(0,"a",38)(1,"video",39),v(2,"source",40),l()()),o&2){let t=g();q("href",t.fileMidea==null?null:t.fileMidea.fileUrl,U),c(2),h("src",t.fileMidea==null?null:t.fileMidea.fileUrl,U)}}function Gl(o,e){if(o&1&&(s(0,"a",38),v(1,"img",41),l()),o&2){let t=g(3);q("href",t.fileMidea==null?null:t.fileMidea.externalFileUrl,U),c(),q("alt",t.fileMidea==null?null:t.fileMidea.title),h("src",t.fileMidea==null?null:t.fileMidea.externalFileUrl,U)}}function Kl(o,e){if(o&1&&(s(0,"a",38),v(1,"img",41),l()),o&2){let t=g(3);q("href",t.fileMidea==null?null:t.fileMidea.fileUrl,U),c(),q("alt",t.fileMidea==null?null:t.fileMidea.title),h("src",t.fileMidea==null?null:t.fileMidea.fileUrl,U)}}function Jl(o,e){if(o&1&&F(0,Gl,2,3,"a",38)(1,Kl,2,3,"a",38),o&2){let t=g(2);K((t.fileMidea==null?null:t.fileMidea.externalFileUrl)!=null?0:1)}}function ec(o,e){if(o&1&&(s(0,"a",42),v(1,"img",43),l()),o&2){let t,i=g(3);q("href",i.fileMidea==null?null:i.fileMidea.externalFileUrl,U),c(),q("alt",i.fileMidea==null?null:i.fileMidea.title),h("src","./assets/icons/file-"+i.FileTypes[(t=i.fileMidea==null?null:i.fileMidea.fileType)!==null&&t!==void 0?t:-1]+".svg",U)}}function tc(o,e){if(o&1&&(s(0,"a",42),v(1,"img",43),l()),o&2){let t,i=g(3);q("href",i.fileMidea==null?null:i.fileMidea.fileUrl,U),c(),q("alt",i.fileMidea==null?null:i.fileMidea.title),h("src","./assets/icons/file-"+i.FileTypes[(t=i.fileMidea==null?null:i.fileMidea.fileType)!==null&&t!==void 0?t:-1]+".svg",U)}}function ic(o,e){if(o&1&&F(0,ec,2,3,"a",42)(1,tc,2,3,"a",42),o&2){let t=g(2);K((t.fileMidea==null?null:t.fileMidea.externalFileUrl)!=null?0:1)}}function nc(o,e){if(o&1&&F(0,Jl,2,1)(1,ic,2,1),o&2){let t,i=g();K((t=i.FileTypes[(t=i.fileMidea==null?null:i.fileMidea.fileType)!==null&&t!==void 0?t:-1])==="Image"?0:1)}}function oc(o,e){if(o&1&&p(0),o&2){let t=g(2);z(t.description)}}function rc(o,e){o&1&&p(0,"...")}function ac(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(2);c(),M("",L(2,1,((t=i.projectDetails==null?null:i.projectDetails.filesSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function sc(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(2);c(),M("",L(2,1,((t=i.projectDetails==null?null:i.projectDetails.filesSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function lc(o,e){if(o&1&&(je(0),s(1,"div",44)(2,"div",45)(3,"h4"),p(4,"Project title"),l(),s(5,"p"),p(6),l(),s(7,"h4"),p(8,"Description"),l(),s(9,"p"),F(10,oc,1,1)(11,rc,1,0),l(),s(12,"h4"),p(13,"Project Type"),l(),s(14,"p"),p(15),l()(),s(16,"div",45)(17,"h4"),p(18,"Size"),l(),s(19,"p"),F(20,ac,3,4,"span")(21,sc,3,4,"span"),l(),s(22,"h4"),p(23,"Created by"),l(),s(24,"p"),p(25),l(),s(26,"h4"),p(27,"Created at"),l(),s(28,"p"),p(29),j(30,"date"),l()()(),Me()),o&2){let t,i=g();c(6),z(i.projectDetails.title),c(4),K(i.description?10:11),c(5),z(i.getProjectTypeName(i.projectDetails.type)),c(5),K(((t=i.projectDetails==null?null:i.projectDetails.filesSize)!==null&&t!==void 0?t:0)>1?20:21),c(5),z(i.ownerName),c(4),z(L(30,6,i.projectDetails.postDate,"dd-MM-YYYY"))}}function cc(o,e){if(o&1&&(s(0,"div")(1,"div",33),p(2,"Commented"),l(),s(3,"div",52),p(4),l()()),o&2){let t=g().$implicit;c(4),M(" ",t.comment," ")}}function dc(o,e){if(o&1&&(je(0),s(1,"a",38),v(2,"img",53),p(3),j(4,"slice"),j(5,"slice"),l(),Me()),o&2){let t,i=g(3);c(),q("href",i.fileDetails==null?null:i.fileDetails.externalFileUrl,U),c(2),M(" Attachment ",((t=i.fileDetails==null?null:i.fileDetails.title)!==null&&t!==void 0?t:"").length>20?ze(4,2,i.fileDetails==null?null:i.fileDetails.title,0,10)+"..."+L(5,6,i.fileDetails==null?null:i.fileDetails.title,-4):i.fileDetails==null?null:i.fileDetails.title," ")}}function pc(o,e){if(o&1&&(je(0),s(1,"a",38),v(2,"img",53),p(3),j(4,"slice"),j(5,"slice"),l(),Me()),o&2){let t,i=g(4);c(),q("href",i.fileDetails==null?null:i.fileDetails.fileUrl,U),c(2),M(" Attachment ",((t=i.fileDetails==null?null:i.fileDetails.title)!==null&&t!==void 0?t:"").length>20?ze(4,2,i.fileDetails==null?null:i.fileDetails.title,0,10)+"..."+L(5,6,i.fileDetails==null?null:i.fileDetails.title,-4):i.fileDetails==null?null:i.fileDetails.title," ")}}function mc(o,e){if(o&1&&(v(0,"img",53),p(1),j(2,"slice"),j(3,"slice")),o&2){let t,i=g(4);c(),M(" Attachment ",((t=i.fileDetails==null?null:i.fileDetails.title)!==null&&t!==void 0?t:"").length>20?ze(2,1,i.fileDetails==null?null:i.fileDetails.title,0,10)+"..."+L(3,5,i.fileDetails==null?null:i.fileDetails.title,-4):i.fileDetails==null?null:i.fileDetails.title," ")}}function uc(o,e){if(o&1&&F(0,pc,6,9,"ng-container",35)(1,mc,4,8,"ng-template",null,5,ne),o&2){let t=V(2),i=g(3);h("ngIf",(i.fileDetails==null?null:i.fileDetails.fileType)==0||(i.fileDetails==null?null:i.fileDetails.fileType)==i.FileTypes.Video)("ngIfElse",t)}}function fc(o,e){if(o&1&&(s(0,"li",47)(1,"div",29),v(2,"img",48),s(3,"div",31),p(4),l()(),s(5,"div",32),F(6,cc,5,1,"div",24),s(7,"div",34),F(8,dc,6,9,"ng-container",35)(9,uc,3,2,"ng-template",null,3,ne),l(),s(11,"a",49),v(12,"img",50),p(13," Ahmed Mohamed"),l(),s(14,"div",36),p(15),j(16,"date"),l(),s(17,"a",51),p(18,"Reply to Mohamed Khaled"),l()()()),o&2){let t=e.$implicit,i=V(10),n=g(2);c(4),z(t.createdByUserName),c(2),h("ngIf",t.comment),c(2),h("ngIf",(n.fileDetails==null?null:n.fileDetails.externalFileUrl)!=null)("ngIfElse",i),c(7),z(L(16,5,t.postDate,"h:mm a"))}}function hc(o,e){if(o&1&&(je(0),s(1,"ul",28),F(2,fc,19,8,"li",46),l(),Me()),o&2){let t=g();c(2),h("ngForOf",t.fileDetails==null?null:t.fileDetails.projectFileHistories)}}function gc(o,e){if(o&1&&(je(0),s(1,"a",38),v(2,"img",53),p(3),j(4,"slice"),j(5,"slice"),l(),Me()),o&2){let t,i=g();c(),q("href",i.fileDetails==null?null:i.fileDetails.externalFileUrl,U),c(2),M(" Attachment ",((t=i.fileDetails==null?null:i.fileDetails.title)!==null&&t!==void 0?t:"").length>20?ze(4,2,i.fileDetails==null?null:i.fileDetails.title,0,10)+"..."+L(5,6,i.fileDetails==null?null:i.fileDetails.title,-4):i.fileDetails==null?null:i.fileDetails.title," ")}}function vc(o,e){if(o&1&&(je(0),s(1,"a",38),v(2,"img",53),p(3),j(4,"slice"),j(5,"slice"),l(),Me()),o&2){let t,i=g(2);c(),q("href",i.fileDetails==null?null:i.fileDetails.fileUrl,U),c(2),M(" Attachment ",((t=i.fileDetails==null?null:i.fileDetails.title)!==null&&t!==void 0?t:"").length>20?ze(4,2,i.fileDetails==null?null:i.fileDetails.title,0,10)+"..."+L(5,6,i.fileDetails==null?null:i.fileDetails.title,-4):i.fileDetails==null?null:i.fileDetails.title," ")}}function _c(o,e){if(o&1&&(v(0,"img",53),p(1),j(2,"slice"),j(3,"slice")),o&2){let t,i=g(2);c(),M(" Attachment ",((t=i.fileDetails==null?null:i.fileDetails.title)!==null&&t!==void 0?t:"").length>20?ze(2,1,i.fileDetails==null?null:i.fileDetails.title,0,10)+"..."+L(3,5,i.fileDetails==null?null:i.fileDetails.title,-4):i.fileDetails==null?null:i.fileDetails.title," ")}}function bc(o,e){if(o&1&&F(0,vc,6,9,"ng-container",35)(1,_c,4,8,"ng-template",null,5,ne),o&2){let t=V(2),i=g();h("ngIf",(i.fileDetails==null?null:i.fileDetails.fileType)==0||(i.fileDetails==null?null:i.fileDetails.fileType)==i.FileTypes.Video)("ngIfElse",t)}}function yc(o,e){if(o&1&&(s(0,"div",74),v(1,"img",75),l()),o&2){let t=g().data;c(),q("src",t==null?null:t.image,U)}}function Cc(o,e){if(o&1&&(F(0,yc,2,1,"div",74),p(1)),o&2){let t=e.data;K(t!=null&&t.image?0:-1),c(),M(" ",t==null?null:t.name," ")}}function Sc(o,e){o&1&&rt(0)}function xc(o,e){if(o&1&&(s(0,"video",76),v(1,"source",40),l()),o&2){let t=g(3);c(),h("src",t.imagePreview,U)}}function wc(o,e){if(o&1&&v(0,"img",77),o&2){let t=g(4);h("src",t.imagePreview,U)}}function Fc(o,e){if(o&1&&v(0,"img",78),o&2){let t,i=g(4);h("src","./assets/icons/file-"+i.FileTypes[(t=i.fileType)!==null&&t!==void 0?t:-1]+".svg",U)}}function Ic(o,e){if(o&1&&F(0,wc,1,1,"img",77)(1,Fc,1,1,"img",78),o&2){let t,i=g(3);K((t=i.FileTypes[(t=i.fileType)!==null&&t!==void 0?t:-1])==="Image"?0:1)}}function Pc(o,e){if(o&1&&(s(0,"div",63),F(1,Sc,1,0,"ng-container",22)(2,xc,2,1,"ng-template",null,1,ne)(4,Ic,2,1,"ng-template",null,2,ne),l()),o&2){let t=V(3),i=V(5),n=g(2);c(),h("ngIf",n.fileType==n.FileTypes.Video)("ngIfThen",t)("ngIfElse",i)}}function Tc(o,e){if(o&1){let t=O();s(0,"div",54)(1,"h4",55),p(2,"Change Request"),l(),s(3,"button",56),x("click",function(){let n=_(t).$implicit;return b(n.dismiss("Cross click"))}),l()(),s(4,"div",57)(5,"form",58,6),x("ngSubmit",function(){_(t);let n=V(6),r=g();return b(n.form.valid&&r.submitComment(r.fileDetails))}),s(7,"div",59)(8,"label",60),p(9,"Mention"),l(),s(10,"select2",61),x("update",function(n){_(t);let r=g();return b(r.chooseMention(n.value))}),F(11,Cc,2,2,"ng-template",null,7,ne),l()(),s(13,"div",62)(14,"div",63)(15,"div",59)(16,"label",64),p(17,"Add File"),l(),s(18,"div",65),x("click",function(){_(t);let n=V(28);return b(n.click())})("dragover",function(n){_(t);let r=g();return b(r.onDragOver(n))})("drop",function(n){_(t);let r=g();return b(r.onDrop(n))}),v(19,"img",66),j(20,"translate"),s(21,"h4"),p(22),j(23,"translate"),l(),s(24,"p"),p(25),j(26,"translate"),l(),s(27,"input",67,8),x("change",function(n){_(t);let r=g();return b(r.onFileChange(n))}),l()()()(),F(29,Pc,6,3,"div",68),l(),s(30,"div",59)(31,"label",69),p(32,"add comment"),l(),s(33,"textarea",70),Bt("ngModelChange",function(n){_(t);let r=g();return Lt(r.commentText,n)||(r.commentText=n),b(n)}),p(34,"Write comment Here ..."),l()(),s(35,"div",71)(36,"button",72),x("click",function(){let n=_(t).$implicit;return b(n.close("Close click"))}),p(37," Cancel "),l(),s(38,"button",73),p(39,"Confirm"),l()()()()}if(o&2){let t=V(12),i=g();c(10),h("data",i.mentionData)("templates",se(16,Zl,t)),c(3),k("img-p",i.imagePreview),c(6),q("alt",Q(20,10,"Upload")),c(3),z(Q(23,12,"Folders.DropImageHereOrBrowse")),c(3),z(Q(26,14,"Folders.PhotoInfo")),c(4),h("ngIf",i.imagePreview),c(4),Nt("ngModel",i.commentText),c(3),h("disabled",i.value===!1)}}var ke=class o{constructor(e,t,i,n,r,a,d){this.authService=e;this.userService=t;this.router=i;this.modalService=n;this.toaster=r;this.translate=a;this.projectService=d}FileTypes=ui;isFetchingUsers=!1;usersData=[];selectedUsers=[];subscriptions=[];mentionsIds;fileType;fileName="";fileMidea;owner="";tags=[];description="";projectDetails;fileDetails;accessUsers=[];timeline=[];shownInfo=!1;data;closeInfoEvent=new $;addTag=new $;share=new $;ownerName="";user;ngOnChanges(e){e.projectDetails&&this.projectDetails?.createdByUserId&&this.fetchOwnerName(),e.fileDetails&&this.fileDetails?.createdByUserId&&this.fetchUserName(),this.fetchUsers("")}fetchOwnerName(){this.authService.getUserById(this.projectDetails.createdByUserId).subscribe(e=>{this.ownerName=e.name},e=>{console.error("Error fetching user details:",e),this.ownerName="Admin"})}fetchUserName(){this.authService.getUserById(this.fileDetails.createdByUserId).subscribe(e=>{console.log(e),this.user=e},e=>{console.error("Error fetching user details:",e),this.user={name:"Admin"}})}closeInfo(){this.closeInfoEvent.emit()}getProjectTypeName(e){switch(e){case 0:return"Event";case 1:return"Conference";default:return""}}fileInfoRef;scrollTop=0;onWindowScroll(){let e=window.scrollY;if(this.fileInfoRef){let t=this.fileInfoRef.nativeElement;e>150?this.router.url.includes("project-details")?t.style.transform=`translateY(${e-260}px)`:t.style.transform=`translateY(${e-0}px)`:t.style.transform="translateY(0)"}}mentionData=[];imagePreview=null;selectedFile=null;commentText;mention;cc;fetchUsers(e){if(this.isFetchingUsers)return;this.isFetchingUsers=!0;let t=this.userService.fetchUsers(e,1,1e4).subscribe(i=>{i&&(console.log(i),i.data&&(this.mentionData=[{options:i.data.map((n,r)=>({value:n.id,label:n.name,data:{name:n.name,email:n.email,image:n.imageUrl||"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:(n.id||r+1).toString()}))}])),this.isFetchingUsers=!1});this.subscriptions.push(t)}chooseMention(e){this.mentionsIds=e,console.log(e)}chooseCc(e){console.log(e)}onFileChange(e){let t=e.target.files[0];if(t){this.selectedFile=t,console.log(this.selectedFile),this.fileType=this.getFileType(t);let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(t)}}onDrop(e){e.preventDefault();let t=e.dataTransfer?.files;if(t&&t.length){this.selectedFile=t[0],this.fileType=this.getFileType(this.selectedFile);let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(this.selectedFile)}}submitComment(e){let t=new FormData;this.selectedFile&&(t.append("fileFile",this.selectedFile,this.selectedFile.name),this.fileType!==null&&t.append("fileType",this.fileType.toString())),this.mentionsIds.forEach(i=>{t.append("UserMentionIDs",i)}),t.append("HistoryComment",this.commentText),this.projectService.patchFile(e.fileId,t).subscribe(i=>{i&&(console.log(i),this.modalService.dismissAll(),this.toaster.success("",this.translate.instant("Request sent successfully")))})}getFileType(e){switch(e.name.split(".").pop()?.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":return 0;case"mp4":case"avi":return 1;case"pdf":return 2;case"doc":case"docx":return 3;case"xls":case"xlsx":return 4;case"ppt":case"pptx":return 5;case"txt":return 6;case"zip":return 7;default:return null}}comment(e,t){this.modalService.open(e,{centered:!0,size:"lg"})}onDragOver(e){e.preventDefault()}static \u0275fac=function(t){return new(t||o)(I(on),I(Gt),I(Ne),I(Fe),I(oe),I(le),I(re))};static \u0275cmp=N({type:o,selectors:[["app-file-info"]],viewQuery:function(t,i){if(t&1&&ie(ql,7),t&2){let n;Y(n=G())&&(i.fileInfoRef=n.first)}},hostBindings:function(t,i){t&1&&x("scroll",function(){return i.onWindowScroll()},!1,wt)},inputs:{fileName:"fileName",fileMidea:"fileMidea",owner:"owner",tags:"tags",description:"description",projectDetails:"projectDetails",fileDetails:"fileDetails",accessUsers:"accessUsers",timeline:"timeline",shownInfo:"shownInfo",data:"data"},outputs:{closeInfoEvent:"closeInfoEvent",addTag:"addTag",share:"share"},standalone:!1,features:[Xi],decls:56,vars:25,consts:[["fileInfo",""],["thenBlock",""],["elseBlock",""],["checkFileType",""],["commentModal",""],["defaultAttachment",""],["commentForm","ngForm"],["template1",""],["imageFile",""],[1,"file-info"],[1,"close-info",3,"click"],["src","./assets/icons/close.svg","alt",""],["id","myTab","role","tablist",1,"nav","nav-tabs","mb-3"],["role","presentation",1,"nav-item"],["id","Details-tab","data-bs-toggle","tab","data-bs-target","#Details-tab-pane","type","button","role","tab","aria-controls","Details-tab-pane","aria-selected","true",1,"nav-link","active"],["src","./assets/icons/timeline.svg","alt","",1,"me-1"],["id","Timeline-tab","data-bs-toggle","tab","data-bs-target","#Timeline-tab-pane","type","button","role","tab","aria-controls","Timeline-tab-pane","aria-selected","false",1,"nav-link"],["src","./assets/icons/clock.svg","alt","",1,"me-1"],["id","myTabContent",1,"tab-content"],["id","Details-tab-pane","role","tabpanel","aria-labelledby","Details-tab","tabindex","0",1,"tab-pane","fade","show","active"],["src","assets/icons/file-photo.svg","alt","",1,"me-2"],[1,"file-image"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"v-mar"],[4,"ngIf"],["id","Timeline-tab-pane","role","tabpanel","aria-labelledby","Timeline-tab","tabindex","0",1,"tab-pane","fade"],[1,"activities"],[1,"file-timeline","mt-3"],[1,"ms-4"],[1,"comment-header"],["alt","User",3,"src"],[1,"comment-name"],[1,"deta"],[1,"commented"],[1,"attachment"],[4,"ngIf","ngIfElse"],[1,"time","d-flex","justify-content-end"],[1,"comment-button",3,"click"],["data-fancybox","",3,"href"],["controls",""],[3,"src"],["onError","this.src='./assets/icons/file-default.svg';",3,"src","alt"],["target","_blank",3,"href"],[3,"src","alt"],[1,"row"],[1,"col-lg-6"],["class","active",4,"ngFor","ngForOf"],[1,"active"],["src","./assets/images/pp.jpg","alt","User"],["href","",1,"replied"],["src","./assets/icons/reply1.svg","alt","",1,"me-1"],["href","#",1,"reply-button"],[1,"comment-text"],["src","./assets/icons/attachment.svg","alt","",1,"me-1"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","customa"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","mention"],["multiple","",3,"update","data","templates"],[1,"row","align-items-end"],[1,"col"],["for","imageFile"],[1,"fileset",3,"click","dragover","drop"],["src","assets/images/Upload.svg",3,"alt"],["id","imageFile","name","imageFile","type","file",2,"display","none",3,"change"],["class","col",4,"ngIf"],["for","comment"],["id","commentText","name","commentText",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary"],[1,"image","me-2"],["alt","",3,"src"],["controls","",1,"img-preview"],["alt","",1,"img-preview",3,"src"],[1,"img-preview",3,"src"]],template:function(t,i){if(t&1){let n=O();s(0,"div",9,0)(2,"div",10),x("click",function(){return _(n),b(i.closeInfo())}),v(3,"img",11),l(),s(4,"ul",12)(5,"li",13)(6,"button",14),v(7,"img",15),p(8," Details "),l()(),s(9,"li",13)(10,"button",16),v(11,"img",17),p(12," Timeline "),l()()(),s(13,"div",18)(14,"div",19)(15,"h3"),v(16,"img",20),p(17),j(18,"slice"),j(19,"slice"),l(),s(20,"div",21),F(21,Xl,1,0,"ng-container",22)(22,Yl,3,2,"ng-template",null,1,ne)(24,nc,2,1,"ng-template",null,2,ne),l(),s(26,"div",23)(27,"h3"),p(28,"Project Details"),l(),F(29,lc,31,9,"ng-container",24),l()(),s(30,"div",25)(31,"div",26)(32,"div",27),F(33,hc,3,1,"ng-container",24),s(34,"h3"),p(35),j(36,"date"),l(),s(37,"ul",28)(38,"li")(39,"div",29),v(40,"img",30),s(41,"div",31),p(42),l()(),s(43,"div",32)(44,"div",33),p(45,"File Created"),l(),s(46,"div",34),F(47,gc,6,9,"ng-container",35)(48,bc,3,2,"ng-template",null,3,ne),l(),s(50,"div",36),p(51),j(52,"date"),l()()()()(),s(53,"a",37),x("click",function(){_(n);let a=V(55);return b(i.comment(a,i.fileDetails))}),l()()()(),F(54,Tc,40,18,"ng-template",null,4,ne),l()}if(t&2){let n,r=V(23),a=V(25),d=V(49);c(17),M("",((n=i.fileName)!==null&&n!==void 0?n:"").length>20?ze(18,12,i.fileName,0,16)+"..."+L(19,16,i.fileName,-4):i.fileName," "),c(4),h("ngIf",(i.fileMidea==null?null:i.fileMidea.fileType)==i.FileTypes.Video)("ngIfThen",r)("ngIfElse",a),c(8),h("ngIf",i.projectDetails),c(4),h("ngIf",i.fileDetails==null?null:i.fileDetails.projectFileHistories),c(2),z(L(36,19,i.fileDetails==null?null:i.fileDetails.postDate,"dd MMM yyyy")),c(5),h("src",i.user!=null&&i.user.imageUrl?i.user==null?null:i.user.imageUrl:(i.user==null?null:i.user.isMale)!=!1?"assets/images/profile/default-profile-img.png":"assets/images/profile/default-profile-female-img.jpg",U),c(2),z(i.user==null?null:i.user.name),c(5),h("ngIf",(i.fileDetails==null?null:i.fileDetails.externalFileUrl)!=null)("ngIfElse",d),c(4),z(L(52,22,i.fileDetails==null?null:i.fileDetails.postDate,"h:mm a"))}},dependencies:[J,Z,we,Le,Be,xe,Wt,qe,Xt,Ut,ye,nn,ut],encapsulation:2})};var Ec=["cardElement"],jc=()=>["PDF","Word","Excel"],Mc=()=>["Name 1","Name 2","Name 3"],Oc=()=>["Newest","Oldest","Recently Edited"],Dc=()=>["/projects/project-details"],kc=o=>({id:o});function Ac(o,e){if(o&1){let t=O();s(0,"div")(1,"button",21),v(2,"img",22),p(3,"Share"),l(),s(4,"button",23),x("click",function(){_(t);let n=g();return b(n.closeInfo())}),v(5,"img",24),p(6,"Information"),l()()}}function Vc(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g().$implicit;c(),M("",L(2,1,((t=i.filesSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function Rc(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g().$implicit;c(),M("",L(2,1,((t=i.filesSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function zc(o,e){if(o&1&&(s(0,"div",25)(1,"a",26)(2,"div",27),v(3,"img",28),l(),s(4,"div",29)(5,"p",30),p(6),l(),s(7,"p",31),F(8,Vc,3,4,"span")(9,Rc,3,4,"span"),p(10),l()()()()),o&2){let t,i,n=e.$implicit;c(),h("routerLink",R(5,Dc))("queryParams",se(6,kc,n.projectId)),c(5),z(n.title),c(2),K(((t=n.filesSize)!==null&&t!==void 0?t:0)>1?8:9),c(2),M(" | ",(i=n.filesNum)!==null&&i!==void 0?i:0," items")}}function Nc(o,e){if(o&1){let t=O();s(0,"div",25)(1,"app-file-card",32),x("toggleMenu",function(n){_(t);let r=g();return b(r.toggleMenu(n.index,n.event))})("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))})("favorite",function(n){_(t);let r=g();return b(r.favorite(n))})("rename",function(n){_(t);let r=g();return b(r.rename(n))})("archive",function(n){_(t);let r=g();return b(r.archive(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index,n=g();c(),h("card",t)("index",i)("activeCardIndex",n.activeCardIndex)}}function Lc(o,e){if(o&1){let t=O();s(0,"div",33)(1,"button",34),x("click",function(){_(t);let n=g();return b(n.loadMore())}),v(2,"i",35),p(3," Load more"),l()()}}var Hn=class o{constructor(e,t,i,n,r,a,d,m){this.renderer=e;this.fileUploadService=t;this.modalService=i;this.projectService=n;this.toaster=r;this.translate=a;this.el=d;this.uploadService=m}subscriptions=[];projects=[];projectFiles=[];isFetching=!1;isFetchingFiles=!1;pageSize=20;currentPage=1;totalItems=0;numberOfPages=0;ProjectTypes=lt;selectedProjectType=null;selectedSortField=null;cardElements;uploads=[];files;isUpload=!1;count=0;projectFileQuery;ngOnInit(){this.projectFileQuery=new Pe,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.fetchProjects(),this.fetchProjectFiles()}fetchProjects(){if(this.isFetching)return;this.isFetching=!0;let e=this.projectService.fetchProjects(this.currentPage,this.pageSize,this.selectedProjectType,this.selectedSortField).subscribe(t=>{t&&(console.log("Recent projects:",t),this.projects=t.data.slice(0,8),this.currentPage=t.currentPage,this.pageSize=t.pageSize,this.totalItems=t.totalItems,this.numberOfPages=t.numberOfPages),this.isFetching=!1});this.subscriptions.push(e)}fetchProjectFiles(){let e=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(t=>{t&&(this.projectFiles=t,console.log(this.projectFiles)),this.isFetchingFiles=!1});this.subscriptions.push(e)}loadMore(){this.projectFileQuery.pageSize=this.projectFileQuery.pageSize+10,this.fetchProjectFiles()}favorite(e){console.log(e),this.projectService.setFavourite(e).subscribe(t=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchProjectFiles()})}rename(e){let t=this.projectFiles.find(i=>i.fileId===e.fileId);t&&(t.title=e.filename)}archive(e){this.projectFiles=this.projectFiles.filter(t=>t.fileId!==e)}onTypeSelect(e){console.log("Selected type:",e)}onPeopleSelect(e){console.log("Selected person:",e)}onModifiedSelect(e){console.log("Selected modified:",e)}selectedFile;selectedProject;shownInfo=!1;showInfo(e){this.selectedFile=e,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let t=new FormData;t.append("isOpen","true"),t.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,t).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles())}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}openAddProjectModal(){let t=this.modalService.open(Si,{size:"xl",backdrop:"static",keyboard:!1}).componentInstance.isSuccess.subscribe(i=>{});this.subscriptions.push(t)}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close(),this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||o)(I(de),I(Te),I(Fe),I(re),I(oe),I(le),I(me),I(yi))};static \u0275cmp=N({type:o,selectors:[["app-home"]],viewQuery:function(t,i){if(t&1&&ie(Ec,5),t&2){let n;Y(n=G())&&(i.cardElements=n)}},standalone:!1,decls:35,vars:30,consts:[["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[4,"ngIf"],[1,"upper","d-flex","flex-row"],[1,"upload-btn","upper-folder",3,"click"],["src","assets/icons/folder-upper.svg","alt",""],[1,"pt-3"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-folder","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-folder-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[1,"recent-file","pt-5"],[1,"row","pt-3","recent-file-row"],["class","d-flex justify-content-center mt-2 mb-5",4,"ngIf"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-folder-card",3,"routerLink","queryParams"],[1,"folder-img"],["src","assets/icons/project.svg","alt",""],[1,"folder-text"],[1,"recent-folder-title"],[1,"recent-folder-details"],[3,"toggleMenu","showInfo","favorite","rename","archive","card","index","activeCardIndex"],[1,"d-flex","justify-content-center","mt-2","mb-5"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"fa","fa-refresh","me-1"]],template:function(t,i){if(t&1){let n=O();s(0,"div",1)(1,"div",2)(2,"div",3),v(3,"div"),F(4,Ac,7,0,"div",4),l(),s(5,"div",5)(6,"button",6),x("click",function(){return _(n),b(i.openAddProjectModal())}),v(7,"img",7),s(8,"span",8),p(9,"Create project"),l()()(),s(10,"div",9)(11,"strong"),p(12,"Sorting"),l(),s(13,"div",10)(14,"app-sort-files",11),x("optionSelected",function(a){return _(n),b(i.onTypeSelect(a))}),l(),s(15,"app-sort-files",11),x("optionSelected",function(a){return _(n),b(i.onPeopleSelect(a))}),l(),s(16,"app-sort-files",11),x("optionSelected",function(a){return _(n),b(i.onModifiedSelect(a))}),l()()(),s(17,"div",12)(18,"div",13),v(19,"img",14),s(20,"strong"),p(21,"Recent projects"),l()(),s(22,"div",15),F(23,zc,11,8,"div",16),l()(),s(24,"div",17)(25,"div",13),v(26,"img",14),s(27,"strong"),p(28,"recent file"),l()(),s(29,"div",18),F(30,Nc,2,3,"div",16),l()(),F(31,Lc,4,0,"div",19),l(),s(32,"div",2,0)(34,"app-file-info",20),x("closeInfoEvent",function(){return _(n),b(i.closeInfo())})("addTag",function(){return _(n),b(i.onAddTag())})("share",function(){return _(n),b(i.onShare())}),l()()()}t&2&&(k("expand",i.shownInfo),c(4),h("ngIf",i.shownInfo),c(10),h("label","Type")("icon","assets/icons/file-text.svg")("options",R(27,jc)),c(),h("label","People")("icon","assets/icons/profile-middle.svg")("options",R(28,Mc)),c(),h("label","Modified")("icon","assets/icons/modified-middle.svg")("options",R(29,Oc)),c(7),h("ngForOf",i.projects),c(7),h("ngForOf",i.projectFiles),c(),h("ngIf",(i.projectFiles==null?null:i.projectFiles.length)>1),c(),k("active",i.shownInfo),c(2),h("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile))},dependencies:[J,Z,_e,Ee,Se,ke,ye],encapsulation:2})};var Bc=["cardElement"],Uc=()=>["PDF","Word","Excel"],Hc=()=>["Name 1","Name 2","Name 3"],Qc=()=>["Newest","Oldest","Recently Edited"];function $c(o,e){if(o&1){let t=O();s(0,"div",12)(1,"app-file-card",13),x("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))})("rename",function(n){_(t);let r=g();return b(r.rename(n))})("archive",function(n){_(t);let r=g();return b(r.archive(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index;c(),h("card",t)("index",i)}}function Wc(o,e){if(o&1){let t=O();s(0,"div",12)(1,"app-file-card",13),x("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))})("rename",function(n){_(t);let r=g();return b(r.rename(n))})("archive",function(n){_(t);let r=g();return b(r.archive(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index;c(),h("card",t)("index",i)}}function qc(o,e){if(o&1){let t=O();s(0,"div",12)(1,"app-file-card",14),x("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))})("favorite",function(n){_(t);let r=g();return b(r.favorite(n))})("rename",function(n){_(t);let r=g();return b(r.rename(n))})("archive",function(n){_(t);let r=g();return b(r.archive(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index;c(),h("card",t)("index",i)}}var Qn=class o{constructor(e,t,i,n,r,a){this.renderer=e;this.fileUploadService=t;this.projectService=i;this.toaster=n;this.translate=r;this.el=a}cardElements;uploads=[];files;isUpload=!1;count=0;subscriptions=[];projects=[];projectFiles=[];isFetching=!1;isFetchingFiles=!1;pageSize=20;currentPage=1;totalItems=0;numberOfPages=0;todayFiles;lastWeekFiles;lastMonthFiles;projectFileQuery;ngOnInit(){this.projectFileQuery=new Pe,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=25,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.fetchProjectFiles()}fetchProjectFiles(){let e=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(t=>{if(t){let i=new Date,n=new Date(i.getTime()-7*24*60*60*1e3),r=new Date(i.getTime()-30*24*60*60*1e3);this.todayFiles=t.filter(a=>(a.postDate?new Date(a.postDate):null)?.toDateString()===i.toDateString()),this.lastWeekFiles=t.filter(a=>{let d=a.postDate?new Date(a.postDate):null;return d&&d>n&&d<i&&d.toDateString()!==i.toDateString()}),this.lastMonthFiles=t.filter(a=>{let d=a.postDate?new Date(a.postDate):null;return d&&d>r&&d<=n})}this.isFetchingFiles=!1});this.subscriptions.push(e)}data=[{options:[{value:"Omar Ezz",label:"Omar Ezz",data:{name:"Omar Ezz",email:"Omar_Ezz@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"1"},{value:"Emad hamdi",label:"Emad Hamdi",data:{name:"Emad hamdi",email:"emad_hamdi@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"2"},{value:"Ehab Zakaria",label:"Ehab Zakaria",data:{name:"Ehab Zakaria",email:"ehab_zakaria@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"3"},{value:"mohamed Ezz",label:"mohamed Ezz",data:{name:"mohamed Ezz",email:"mohamed@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"4"},{value:"Ali hamdi",label:"Ali Hamdi",data:{name:"Ali hamdi",email:"Ali@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"5"},{value:"hassan Zakaria",label:"hassan Zakaria",data:{name:"hassan Zakaria",email:"hassan@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"6"}]}];favorite(e){console.log(e),this.projectService.setFavourite(e).subscribe(t=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchProjectFiles()})}rename(e){let t=this.todayFiles.find(i=>i.fileId===e.fileId);t&&(t.title=e.filename),t=this.lastWeekFiles.find(i=>i.fileId===e.fileId),t&&(t.title=e.filename),t=this.lastMonthFiles.find(i=>i.fileId===e.fileId),t&&(t.title=e.filename)}archive(e){this.todayFiles=this.todayFiles.filter(t=>t.fileId!==e),this.lastWeekFiles=this.lastWeekFiles.filter(t=>t.fileId!==e),this.lastMonthFiles=this.lastMonthFiles.filter(t=>t.fileId!==e)}onTypeSelect(e){console.log("Selected type:",e)}onPeopleSelect(e){console.log("Selected person:",e)}onModifiedSelect(e){console.log("Selected modified:",e)}selectedFile;selectedProject;shownInfo=!1;showInfo(e){this.selectedFile=e,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let t=new FormData;t.append("isOpen","true"),t.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,t).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles())}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close()}static \u0275fac=function(t){return new(t||o)(I(de),I(Te),I(re),I(oe),I(le),I(me))};static \u0275cmp=N({type:o,selectors:[["app-recents"]],viewQuery:function(t,i){if(t&1&&ie(Bc,5),t&2){let n;Y(n=G())&&(i.cardElements=n)}},standalone:!1,decls:35,vars:29,consts:[["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[3,"showInfo","rename","archive","card","index"],[3,"showInfo","favorite","rename","archive","card","index"]],template:function(t,i){if(t&1){let n=O();s(0,"div",1)(1,"div",2)(2,"h3"),p(3,"Recent"),l(),s(4,"div",3)(5,"strong"),p(6,"Sorting"),l(),s(7,"div",4)(8,"app-sort-files",5),x("optionSelected",function(a){return _(n),b(i.onTypeSelect(a))}),l(),s(9,"app-sort-files",5),x("optionSelected",function(a){return _(n),b(i.onPeopleSelect(a))}),l(),s(10,"app-sort-files",5),x("optionSelected",function(a){return _(n),b(i.onModifiedSelect(a))}),l()()(),s(11,"div",6)(12,"div",7),v(13,"img",8),s(14,"strong"),p(15,"Today"),l()(),s(16,"div",9),F(17,$c,2,2,"div",10),l()(),s(18,"div",6)(19,"div",7),v(20,"img",8),s(21,"strong"),p(22,"Last week"),l()(),s(23,"div",9),F(24,Wc,2,2,"div",10),l()(),s(25,"div",6)(26,"div",7),v(27,"img",8),s(28,"strong"),p(29,"Last month"),l()(),s(30,"div",9),F(31,qc,2,2,"div",10),l()()(),s(32,"div",2,0)(34,"app-file-info",11),x("closeInfoEvent",function(){return _(n),b(i.closeInfo())})("addTag",function(){return _(n),b(i.onAddTag())})("share",function(){return _(n),b(i.onShare())}),l()()()}t&2&&(k("expand",i.shownInfo),c(8),h("label","Type")("icon","assets/icons/file-text.svg")("options",R(26,Uc)),c(),h("label","People")("icon","assets/icons/profile-middle.svg")("options",R(27,Hc)),c(),h("label","Modified")("icon","assets/icons/modified-middle.svg")("options",R(28,Qc)),c(7),h("ngForOf",i.todayFiles),c(7),h("ngForOf",i.lastWeekFiles),c(7),h("ngForOf",i.lastMonthFiles),c(),k("active",i.shownInfo),c(2),h("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile))},dependencies:[J,_e,Ee,ke],encapsulation:2})};var Zc=()=>["/projects/project-details"],Xc=o=>({id:o});function Yc(o,e){o&1&&(s(0,"span",17),p(1,"Type: All Types"),l())}function Gc(o,e){o&1&&(s(0,"span",17),p(1,"Type: Event"),l())}function Kc(o,e){o&1&&(s(0,"span",17),p(1,"Type: Conference"),l())}function Jc(o,e){o&1&&(s(0,"span",17),p(1,"Sort"),l())}function ed(o,e){o&1&&(s(0,"span",17),p(1,"Sort: Newest"),l())}function td(o,e){o&1&&(s(0,"span",17),p(1,"Sort: Oldest"),l())}function id(o,e){o&1&&(s(0,"span",17),p(1,"Sort: Name Asc"),l())}function nd(o,e){o&1&&(s(0,"span",17),p(1,"Sort: Name Desc"),l())}function od(o,e){if(o&1&&v(0,"img",24),o&2){let t=g().$implicit;h("src",t.imageUrl,U)}}function rd(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g().$implicit;c(),M("",L(2,1,((t=i.filesSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function ad(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g().$implicit;c(),M("",L(2,1,((t=i.filesSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function sd(o,e){if(o&1&&(s(0,"div",18)(1,"a",19)(2,"div",20),F(3,od,1,1,"img",21),l(),s(4,"div",22)(5,"span"),p(6),l()(),s(7,"div",23)(8,"span")(9,"span"),F(10,rd,3,4,"span")(11,ad,3,4,"span"),p(12),l()()()()()),o&2){let t,i=e.$implicit;c(),h("routerLink",R(6,Zc))("queryParams",se(7,Xc,i.projectId)),c(2),h("ngIf",i.imageUrl),c(3),z(i.title),c(4),K(((t=i.filesSize)!==null&&t!==void 0?t:0)>1?10:11),c(2),M(" | ",i.filesNum," items")}}var $n=class o{constructor(e,t,i){this.renderer=e;this.modalService=t;this.projectService=i}subscriptions=[];projects=[];isFetching=!1;pageSize=50;currentPage=1;totalItems=0;numberOfPages=0;ProjectTypes=lt;selectedProjectType=null;selectedSortField=null;ngOnInit(){this.fetchProjects()}fetchProjects(){if(this.isFetching)return;this.isFetching=!0;let e=this.projectService.fetchProjects(this.currentPage,this.pageSize,this.selectedProjectType,this.selectedSortField).subscribe(t=>{t&&(this.projects=t.data,this.currentPage=t.currentPage,this.pageSize=t.pageSize,this.totalItems=t.totalItems,this.numberOfPages=t.numberOfPages),this.isFetching=!1});this.subscriptions.push(e)}filterProjectsByType(e){this.currentPage=1,this.selectedProjectType=e,this.fetchProjects()}orderProjectsBy(e){this.currentPage=1,this.selectedSortField=e,this.fetchProjects()}openAddProjectModal(){let t=this.modalService.open(Si,{size:"xl",backdrop:"static",keyboard:!1}).componentInstance.isSuccess.subscribe(i=>{i&&this.fetchProjects()});this.subscriptions.push(t)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||o)(I(de),I(Fe),I(re))};static \u0275cmp=N({type:o,selectors:[["app-projects"]],standalone:!1,decls:52,vars:26,consts:[[1,"row"],[1,"upper","d-flex","flex-row"],[1,"upload-btn",3,"click"],["src","assets/icons/plus.svg","alt",""],[1,"pt-3"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[1,"dropdown1","dropdown"],["href","javascript:;","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle1","dropdown-toggle"],["src","assets/icons/file-text.svg","alt",""],["class","px-1",4,"ngIf"],["src","assets/icons/middle-arrow-down.svg","alt","",1,"arrow-icon"],[1,"dropdown-menu1","dropdown-menu"],["href","javascript:;",3,"click"],["src","assets/icons/modified-middle.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[1,"px-1"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-file-card","projects-block",3,"routerLink","queryParams"],[1,"proj-img-holder","project-holder"],["alt","",3,"src",4,"ngIf"],[1,"recent-file-type","pt-2","d-flex","flex-row","align-items-center"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],["alt","",3,"src"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),x("click",function(){return i.openAddProjectModal()}),v(3,"img",3),s(4,"span",4),p(5),j(6,"translate"),l()()(),s(7,"div",5)(8,"strong"),p(9,"Sorting"),l(),s(10,"div",6)(11,"div",7)(12,"a",8),v(13,"img",9),F(14,Yc,2,0,"span",10)(15,Gc,2,0,"span",10)(16,Kc,2,0,"span",10),v(17,"img",11),l(),s(18,"ul",12)(19,"li")(20,"a",13),x("click",function(){return i.selectedProjectType!=null&&i.filterProjectsByType(null)}),p(21,"All Types"),l()(),s(22,"li")(23,"a",13),x("click",function(){return i.selectedProjectType!=i.ProjectTypes.Event&&i.filterProjectsByType(i.ProjectTypes.Event)}),p(24,"Event"),l()(),s(25,"li")(26,"a",13),x("click",function(){return i.selectedProjectType!=i.ProjectTypes.Conference&&i.filterProjectsByType(i.ProjectTypes.Conference)}),p(27,"Conference"),l()()()(),s(28,"div",7)(29,"a",8),v(30,"img",14),F(31,Jc,2,0,"span",10)(32,ed,2,0,"span",10)(33,td,2,0,"span",10)(34,id,2,0,"span",10)(35,nd,2,0,"span",10),v(36,"img",11),l(),s(37,"ul",12)(38,"li")(39,"a",13),x("click",function(){return i.selectedSortField!="DateDesc"&&i.orderProjectsBy("DateDesc")}),p(40,"Newest"),l()(),s(41,"li")(42,"a",13),x("click",function(){return i.selectedSortField!="DateAsc"&&i.orderProjectsBy("DateAsc")}),p(43,"Oldest"),l()(),s(44,"li")(45,"a",13),x("click",function(){return i.selectedSortField!="TitleAsc"&&i.orderProjectsBy("TitleAsc")}),p(46,"Name Asc"),l()(),s(47,"li")(48,"a",13),x("click",function(){return i.selectedSortField!="TitleDesc"&&i.orderProjectsBy("TitleDesc")}),p(49,"Name Desc"),l()()()()()(),s(50,"div",15),F(51,sd,13,9,"div",16),l()()),t&2&&(c(5),z(Q(6,24,"Projects.CreateProject")),c(9),h("ngIf",i.selectedProjectType==null),c(),h("ngIf",i.selectedProjectType==i.ProjectTypes.Event),c(),h("ngIf",i.selectedProjectType==i.ProjectTypes.Conference),c(4),k("selected",i.selectedProjectType==null),c(3),k("selected",i.selectedProjectType==i.ProjectTypes.Event),c(3),k("selected",i.selectedProjectType==i.ProjectTypes.Conference),c(5),h("ngIf",!i.selectedSortField),c(),h("ngIf",i.selectedSortField=="DateDesc"),c(),h("ngIf",i.selectedSortField=="DateAsc"),c(),h("ngIf",i.selectedSortField=="TitleAsc"),c(),h("ngIf",i.selectedSortField=="TitleDesc"),c(4),k("selected",i.selectedSortField=="DateDesc"),c(3),k("selected",i.selectedSortField=="DateAsc"),c(3),k("selected",i.selectedSortField=="TitleAsc"),c(3),k("selected",i.selectedSortField=="TitleDesc"),c(3),h("ngForOf",i.projects))},dependencies:[J,Z,Se,ye,ut],styles:["a.selected[_ngcontent-%COMP%]{color:#000!important;cursor:default}"]})};var ld=["cardElement"];function cd(o,e){if(o&1){let t=O();s(0,"button",8),x("click",function(){_(t);let n=g();return b(n.emptyTrash())}),v(1,"img",9),p(2,"Empty trash"),l()}}function dd(o,e){if(o&1){let t=O();s(0,"div",10)(1,"app-file-card",11),x("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index;c(),h("card",t)("index",i)}}function pd(o,e){o&1&&(s(0,"div",12)(1,"div",13),v(2,"img",14),s(3,"h4"),p(4,"The Trash is empty"),l(),s(5,"p"),p(6,"Items moved to the trash will be permanently deleted after 30 days."),l()()())}var Wn=class o{constructor(e,t,i){this.renderer=e;this.fileUploadService=t;this.toaster=i}cardElements;uploads=[];files;isUpload=!1;count=0;cards=[{id:1,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/proj-d1.jpg",fileName:"WOTN drive.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1},{id:2,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"photo",fileImage:"assets/images/file-card.png",fileName:"WOTN drive.png",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"",Status:1},{id:3,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"text",fileImage:"assets/images/files/proj-d2.jpg",fileName:"WOTN drive.pdf",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"",Status:1},{id:4,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/project-1.jpg",fileName:"WOTN drive1.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1}];totalFileSizeMB=0;ngOnInit(){this.totalFileSizeMB=this.cards.reduce((e,t)=>e+this.parseFileSize(t.fileSize),0),console.log(`Total file size: ${this.totalFileSizeMB.toFixed(2)} MB`)}parseFileSize(e){let[t,i]=e.split(" "),n=parseFloat(t);switch(i?.toUpperCase()){case"GB":return n*1024;case"MB":return n;case"KB":return n/1024;default:return 0}}emptyTrash(){this.cards=[],this.toaster.success("","Trash is empty"),this.totalFileSizeMB=0}static \u0275fac=function(t){return new(t||o)(I(de),I(Te),I(oe))};static \u0275cmp=N({type:o,selectors:[["app-bin"]],viewQuery:function(t,i){if(t&1&&ie(ld,5),t&2){let n;Y(n=G())&&(i.cardElements=n)}},standalone:!1,decls:14,vars:5,consts:[[1,"row"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],["class","btn btn-del",3,"click",4,"ngIf"],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],["class","row align-items-center justify-content-center mt-5 text-center",4,"ngIf"],[1,"btn","btn-del",3,"click"],["src","./assets/icons/trash1.svg","alt","",1,"me-2"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[3,"showInfo","card","index"],[1,"row","align-items-center","justify-content-center","mt-5","text-center"],[1,"col-lg-6"],["src","./assets/icons/trash.svg","alt",""]],template:function(t,i){t&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h3"),p(5,"Trash"),l(),s(6,"div",3)(7,"span"),p(8),l()()(),s(9,"div"),F(10,cd,3,0,"button",4),l()(),s(11,"div",5),F(12,dd,2,2,"div",6),l(),F(13,pd,7,0,"div",7),l()()),t&2&&(c(8),Vi("",i.totalFileSizeMB.toFixed(2)," MB | ",i.cards.length," items"),c(2),h("ngIf",i.cards.length>0),c(2),h("ngForOf",i.cards),c(),h("ngIf",i.cards.length==0))},dependencies:[J,Z,_e],encapsulation:2})};var md=["cardElement"],ud=()=>["PDF","Word","Excel"],fd=()=>["Name 1","Name 2","Name 3"],hd=()=>["Newest","Oldest","Recently Edited"];function gd(o,e){if(o&1){let t=O();s(0,"div")(1,"button",13),v(2,"img",14),p(3,"Share"),l(),s(4,"button",15),x("click",function(){_(t);let n=g();return b(n.closeInfo())}),v(5,"img",16),p(6,"Information"),l()()}}function vd(o,e){if(o&1){let t=O();s(0,"div",17)(1,"app-file-card",18),x("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))})("rename",function(n){_(t);let r=g();return b(r.rename(n))})("archive",function(n){_(t);let r=g();return b(r.archive(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index;c(),h("card",t)("index",i)}}var qn=class o{constructor(e,t){this.renderer=e;this.fileUploadService=t}cardElements;uploads=[];files;isUpload=!1;count=0;data=[{options:[{value:"Omar Ezz",label:"Omar Ezz",data:{name:"Omar Ezz",email:"Omar_Ezz@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"1"},{value:"Emad hamdi",label:"Emad Hamdi",data:{name:"Emad hamdi",email:"emad_hamdi@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"2"},{value:"Ehab Zakaria",label:"Ehab Zakaria",data:{name:"Ehab Zakaria",email:"ehab_zakaria@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"3"},{value:"mohamed Ezz",label:"mohamed Ezz",data:{name:"mohamed Ezz",email:"mohamed@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"4"},{value:"Ali hamdi",label:"Ali Hamdi",data:{name:"Ali hamdi",email:"Ali@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"5"},{value:"hassan Zakaria",label:"hassan Zakaria",data:{name:"hassan Zakaria",email:"hassan@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"6"}]}];cards=[{id:1,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/proj-d1.jpg",fileName:"WOTN drive.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1},{id:2,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"photo",fileImage:"assets/images/file-card.png",fileName:"WOTN drive.png",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"",Status:1},{id:3,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"text",fileImage:"assets/images/files/proj-d2.jpg",fileName:"WOTN drive.pdf",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!1,videoDuration:"",Status:1},{id:4,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/project-1.jpg",fileName:"WOTN drive1.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1}];onTypeSelect(e){console.log("Selected type:",e)}onPeopleSelect(e){console.log("Selected person:",e)}onModifiedSelect(e){console.log("Selected modified:",e)}shownInfo=!1;showInfo(e){console.log(e),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.shownInfo=!this.shownInfo}static \u0275fac=function(t){return new(t||o)(I(de),I(Te))};static \u0275cmp=N({type:o,selectors:[["app-shared"]],viewQuery:function(t,i){if(t&1&&ie(md,5),t&2){let n;Y(n=G())&&(i.cardElements=n)}},standalone:!1,decls:24,vars:16,consts:[[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[3,"showInfo","rename","archive","card","index"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h3"),p(5,"Shared with me"),l(),s(6,"div",3)(7,"span"),p(8,"105.3 MB | 235 items"),l()()(),F(9,gd,7,0,"div",4),l(),s(10,"div",5)(11,"strong"),p(12,"Sorting"),l(),s(13,"div",6)(14,"app-sort-files",7),x("optionSelected",function(r){return i.onTypeSelect(r)}),l(),s(15,"app-sort-files",7),x("optionSelected",function(r){return i.onPeopleSelect(r)}),l(),s(16,"app-sort-files",7),x("optionSelected",function(r){return i.onModifiedSelect(r)}),l()()(),s(17,"div",8)(18,"div",9),v(19,"img",10),s(20,"strong"),p(21,"Today"),l()(),s(22,"div",11),F(23,vd,2,2,"div",12),l()()()()),t&2&&(k("expand",i.shownInfo),c(9),h("ngIf",i.shownInfo),c(5),h("label","Type")("icon","assets/icons/file-text.svg")("options",R(13,ud)),c(),h("label","People")("icon","assets/icons/profile-middle.svg")("options",R(14,fd)),c(),h("label","Modified")("icon","assets/icons/modified-middle.svg")("options",R(15,hd)),c(7),h("ngForOf",i.cards))},dependencies:[J,Z,_e,Ee],encapsulation:2})};var _d=["cardElement"],bd=()=>["PDF","Word","Excel"],yd=()=>["Name 1","Name 2","Name 3"],Cd=()=>["Newest","Oldest","Recently Edited"];function Sd(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g();c(),M("",L(2,1,((t=i.totalFileSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function xd(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g();c(),M("",L(2,1,((t=i.totalFileSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function wd(o,e){if(o&1){let t=O();s(0,"div")(1,"button",15),v(2,"img",16),p(3,"Share"),l(),s(4,"button",17),x("click",function(){_(t);let n=g();return b(n.closeInfo())}),v(5,"img",18),p(6,"Information"),l()()}}function Fd(o,e){if(o&1){let t=O();s(0,"div",19)(1,"app-file-card",20),x("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))})("favorite",function(n){_(t);let r=g();return b(r.favorite(n))})("rename",function(n){_(t);let r=g();return b(r.rename(n))})("archive",function(n){_(t);let r=g();return b(r.archive(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index;c(),h("card",t)("index",i)}}var Zn=class o{constructor(e,t,i,n,r,a){this.renderer=e;this.fileUploadService=t;this.projectService=i;this.toaster=n;this.translate=r;this.el=a}subscriptions=[];projects=[];projectFiles=[];isFetching=!1;isFetchingFiles=!1;pageSize=20;currentPage=1;totalItems=0;numberOfPages=0;ProjectTypes=lt;selectedProjectType=null;selectedSortField=null;cardElements;uploads=[];files;isUpload=!1;count=0;totalFileSize;fileCount;projectFileQuery;ngOnInit(){this.projectFileQuery=new Pe,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=100,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.fetchProjectFiles()}fetchProjectFiles(){let e=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(t=>{if(t){let i=Number(localStorage.getItem("userId"));this.projectFiles=t.filter(n=>n.createdByUserId===i),this.totalFileSize=this.projectFiles.reduce((n,r)=>n+(r.fileSize??0),0),this.fileCount=this.projectFiles.length,console.log("Project files:",this.projectFiles)}this.isFetchingFiles=!1});this.subscriptions.push(e)}data=[{options:[{value:"Omar Ezz",label:"Omar Ezz",data:{name:"Omar Ezz",email:"Omar_Ezz@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"1"},{value:"Emad hamdi",label:"Emad Hamdi",data:{name:"Emad hamdi",email:"emad_hamdi@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"2"},{value:"Ehab Zakaria",label:"Ehab Zakaria",data:{name:"Ehab Zakaria",email:"ehab_zakaria@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"3"},{value:"mohamed Ezz",label:"mohamed Ezz",data:{name:"mohamed Ezz",email:"mohamed@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"4"},{value:"Ali hamdi",label:"Ali Hamdi",data:{name:"Ali hamdi",email:"Ali@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"5"},{value:"hassan Zakaria",label:"hassan Zakaria",data:{name:"hassan Zakaria",email:"hassan@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"6"}]}];favorite(e){console.log(e),this.projectService.setFavourite(e).subscribe(t=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchProjectFiles()})}rename(e){let t=this.projectFiles.find(i=>i.fileId===e.fileId);t&&(t.title=e.filename)}archive(e){this.projectFiles=this.projectFiles.filter(t=>t.fileId!==e)}onTypeSelect(e){console.log("Selected type:",e)}onPeopleSelect(e){console.log("Selected person:",e)}onModifiedSelect(e){console.log("Selected modified:",e)}selectedFile;selectedProject;shownInfo=!1;showInfo(e){this.selectedFile=e,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let t=new FormData;t.append("isOpen","true"),t.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,t).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles())}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close()}static \u0275fac=function(t){return new(t||o)(I(de),I(Te),I(re),I(oe),I(le),I(me))};static \u0275cmp=N({type:o,selectors:[["app-mine"]],viewQuery:function(t,i){if(t&1&&ie(_d,5),t&2){let n;Y(n=G())&&(i.cardElements=n)}},standalone:!1,decls:29,vars:30,consts:[["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[3,"showInfo","favorite","rename","archive","card","index"]],template:function(t,i){if(t&1){let n=O();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h3"),p(5,"My files"),l(),s(6,"div",4)(7,"span"),F(8,Sd,3,4,"span")(9,xd,3,4,"span"),p(10),l()()(),F(11,wd,7,0,"div",5),l(),s(12,"div",6)(13,"strong"),p(14,"Sorting"),l(),s(15,"div",7)(16,"app-sort-files",8),x("optionSelected",function(a){return _(n),b(i.onTypeSelect(a))}),l(),s(17,"app-sort-files",8),x("optionSelected",function(a){return _(n),b(i.onPeopleSelect(a))}),l(),s(18,"app-sort-files",8),x("optionSelected",function(a){return _(n),b(i.onModifiedSelect(a))}),l()()(),s(19,"div",9)(20,"div",10),v(21,"img",11),s(22,"strong"),p(23,"Today"),l()(),s(24,"div",12),F(25,Fd,2,2,"div",13),l()()(),s(26,"div",2,0)(28,"app-file-info",14),x("closeInfoEvent",function(){return _(n),b(i.closeInfo())})("addTag",function(){return _(n),b(i.onAddTag())})("share",function(){return _(n),b(i.onShare())}),l()()()}if(t&2){let n,r;k("expand",i.shownInfo),c(8),K(((n=i.totalFileSize)!==null&&n!==void 0?n:0)>1?8:9),c(2),M(" | ",(r=i.fileCount)!==null&&r!==void 0?r:0," items"),c(),h("ngIf",i.shownInfo),c(5),h("label","Type")("icon","assets/icons/file-text.svg")("options",R(27,bd)),c(),h("label","People")("icon","assets/icons/profile-middle.svg")("options",R(28,yd)),c(),h("label","Modified")("icon","assets/icons/modified-middle.svg")("options",R(29,Cd)),c(7),h("ngForOf",i.projectFiles),c(),k("active",i.shownInfo),c(2),h("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile)}},dependencies:[J,Z,_e,Ee,ke,ye],encapsulation:2})};var Je=class o{constructor(e){this.http=e}isLoadingSubject=new bt(!1);setLoading(e){this.isLoadingSubject.next(e)}fetchColors(){return this.setLoading(!0),this.http.get(Fr,{observe:"response"}).pipe(nt(e=>{let t=e.body;var i;e.headers.get("pagination")&&(i=JSON.parse(e.headers.get("pagination")??""));let n={currentPage:i?Number(i.currentPage):0,pageSize:i?Number(i.pageSize):0,numberOfPages:i?Number(i.numberOfPages):0,totalItems:i?Number(i.totalItems):0};return Qe(he({},n),{data:t})}),Ct(e=>this.handleError("fetching colors",e)),St(()=>this.setLoading(!1)))}handleError(e,t){return console.error(`Error ${e}:`,t),this.setLoading(!1),yt(void 0)}static \u0275fac=function(t){return new(t||o)(At(Qt))};static \u0275prov=fe({token:o,factory:o.\u0275fac,providedIn:"root"})};var Id=()=>["PDF","Word","Excel"],Pd=()=>["Name 1","Name 2","Name 3"],Td=()=>["Newest","Oldest","Recently Edited"],Ed=()=>["/projects/folder-details"],jd=(o,e)=>({id:o,projectId:e}),Md=o=>({fav:o});function Od(o,e){if(o&1){let t=O();s(0,"div")(1,"button",14),v(2,"img",15),p(3,"Share"),l(),s(4,"button",16),x("click",function(){_(t);let n=g();return b(n.closeInfo())}),v(5,"img",17),p(6,"Information"),l()()}}function Dd(o,e){if(o&1&&v(0,"img",29),o&2){let t=g().$implicit;h("src",t.imageUrl,U)}}function kd(o,e){o&1&&v(0,"i",30)}function Ad(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g().$implicit;c(),M("",L(2,1,((t=i.filesSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function Vd(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g().$implicit;c(),M("",L(2,1,((t=i.filesSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function Rd(o,e){if(o&1){let t=O();s(0,"div",18)(1,"div",19)(2,"a",20)(3,"div",21),F(4,Dd,1,1,"img",22)(5,kd,1,0,"i",23),l()(),s(6,"div",24)(7,"div")(8,"span",25),p(9),j(10,"slice"),j(11,"slice"),l()(),s(12,"div")(13,"div",26),x("click",function(){let n=_(t).$implicit,r=g();return b(r.favoriteFolder(n==null?null:n.folderId))}),v(14,"i",27),l()()(),s(15,"div",28)(16,"span"),F(17,Ad,3,4,"span")(18,Vd,3,4,"span"),p(19),l()()()()}if(o&2){let t,i,n,r=e.$implicit,a=g();c(2),h("routerLink",R(22,Ed))("queryParams",$e(23,jd,r.folderId,r.projectId)),c(),pt("background",a.getColor(r.colorId)?"linear-gradient(0deg, rgba(58,81,100,1) 21%, "+a.getColor(r.colorId)+" 100%)":"#3A5164")("border-bottom",r.imageUrl?"7px solid "+a.getColor(r.colorId):"none"),k("map-related",r.areaReference),c(),h("ngIf",r.imageUrl),c(),h("ngIf",r.areaReference),c(3),h("title",r.title),c(),M(" ",((t=r.title)!==null&&t!==void 0?t:"").length>20?ze(10,15,r.title,0,16)+"..."+L(11,19,r.title,-4):r.title," "),c(4),h("ngClass",se(26,Md,r.isFavByUser)),c(4),K(((i=r.filesSize)!==null&&i!==void 0?i:0)>1?17:18),c(2),M(" | ",(n=r.filesNum)!==null&&n!==void 0?n:0," items ")}}function zd(o,e){if(o&1){let t=O();s(0,"div",18)(1,"app-file-card",31),x("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))})("favorite",function(n){_(t);let r=g();return b(r.favorite(n))})("rename",function(n){_(t);let r=g();return b(r.rename(n))})("archive",function(n){_(t);let r=g();return b(r.archive(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index;c(),h("card",t)("index",i)}}var Xn=class o{constructor(e,t,i,n,r){this.projectService=e;this.el=t;this.toaster=i;this.translate=n;this.categoriesService=r}projectFiles=[];projectFolderQuery;bootstrap;subscriptions=[];projectId;isFetching=!1;isFetchingProjects=!1;isFetchingFiles=!1;userId;projectFolders=[];colors=[];tagsInput="";tags=[];isFetchingColors=!1;projectFileQuery;ngOnInit(){console.log(this.data),ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.userId=localStorage.getItem("userId"),this.projectFolderQuery=new Ke,this.projectFolderQuery.projectId=null,this.projectFolderQuery.parentId=null,this.projectFolderQuery.sortOrder=null,this.projectFolderQuery.pageNumber=1,this.projectFolderQuery.pageSize=1e3,this.projectFolderQuery.FavUserId=this.userId,this.projectFolderQuery.isActive=!0,this.projectFolderQuery.showCurrentUserFav=!0,this.projectFolderQuery.type=null,this.projectFolderQuery.colorId=null,this.projectFileQuery=new Pe,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=this.userId,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,this.fetchProjectFiles(),this.fetchProjectFolders(),this.fetchColors()}fetchProjectFiles(){let e=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(t=>{t&&(console.log(t),this.projectFiles=t,console.log(this.projectFiles)),this.isFetchingFiles=!1});this.subscriptions.push(e)}fetchProjectFolders(){this.isFetchingProjects=!0;let e=this.projectService.fetchProjectFolders(this.projectFolderQuery).subscribe(t=>{t&&(console.log("Project folders:",t),this.projectFolders=t),this.isFetchingProjects=!1});this.subscriptions.push(e)}fetchColors(){if(this.isFetchingColors)return;this.isFetchingColors=!0;let e=this.categoriesService.fetchColors().subscribe(t=>{t&&(this.colors=t.data),this.isFetchingColors=!1});this.subscriptions.push(e)}getColor(e){let t=this.colors.find(i=>i.catId===e);return t?t.colorDegree:null}data=[{options:[{value:"Omar Ezz",label:"Omar Ezz",data:{name:"Omar Ezz",email:"Omar_Ezz@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"1"},{value:"Emad hamdi",label:"Emad Hamdi",data:{name:"Emad hamdi",email:"emad_hamdi@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"2"},{value:"Ehab Zakaria",label:"Ehab Zakaria",data:{name:"Ehab Zakaria",email:"ehab_zakaria@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"3"},{value:"mohamed Ezz",label:"mohamed Ezz",data:{name:"mohamed Ezz",email:"mohamed@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"4"},{value:"Ali hamdi",label:"Ali Hamdi",data:{name:"Ali hamdi",email:"Ali@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"5"},{value:"hassan Zakaria",label:"hassan Zakaria",data:{name:"hassan Zakaria",email:"hassan@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"6"}]}];favorite(e){console.log(e),this.projectService.setFavourite(e).subscribe(t=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchProjectFiles()})}rename(e){let t=this.projectFiles.find(i=>i.fileId===e.fileId);t&&(t.title=e.filename)}archive(e){this.projectFiles=this.projectFiles.filter(t=>t.fileId!==e)}favoriteFolder(e){console.log(e),this.projectService.setFavouriteFolder(e).subscribe(t=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully"));let i=this.projectFolders.find(n=>n.folderId==e);i&&(i.isFavByUser=!i?.isFavByUser),this.fetchProjectFolders()})}onTypeSelect(e){}onPeopleSelect(e){}onModifiedSelect(e){}selectedFile;selectedProject;shownInfo=!1;showInfo(e){this.selectedFile=e,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let t=new FormData;t.append("isOpen","true"),t.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,t).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles())}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close()}static \u0275fac=function(t){return new(t||o)(I(re),I(me),I(oe),I(le),I(Je))};static \u0275cmp=N({type:o,selectors:[["app-favorite"]],standalone:!1,decls:31,vars:29,consts:[["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[4,"ngIf"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-file-card","projects-block"],[3,"routerLink","queryParams"],[1,"proj-img-holder","folder-holder"],[3,"src",4,"ngIf"],["class","fa fa-map","style","color: #bbd5d559;",4,"ngIf"],[1,"recent-file-type","pt-2","d-flex","justify-content-between","flex-row","align-items-center"],[3,"title"],[1,"star",3,"click","ngClass"],[1,"fa","fa-star"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[3,"src"],[1,"fa","fa-map",2,"color","#bbd5d559"],[3,"showInfo","favorite","rename","archive","card","index"]],template:function(t,i){if(t&1){let n=O();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h3"),p(5,"Favorite"),l()(),F(6,Od,7,0,"div",4),l(),s(7,"div",5)(8,"strong"),p(9,"Sorting"),l(),s(10,"div",6)(11,"app-sort-files",7),x("optionSelected",function(a){return _(n),b(i.onTypeSelect(a))}),l(),s(12,"app-sort-files",7),x("optionSelected",function(a){return _(n),b(i.onPeopleSelect(a))}),l(),s(13,"app-sort-files",7),x("optionSelected",function(a){return _(n),b(i.onModifiedSelect(a))}),l()()(),s(14,"div",8)(15,"div",9),v(16,"img",10),s(17,"strong"),p(18,"Folders"),l()(),s(19,"div",11),F(20,Rd,20,28,"div",12),l()(),s(21,"div",8)(22,"div",9),v(23,"img",10),s(24,"strong"),p(25,"Files"),l()(),s(26,"div",11),F(27,zd,2,2,"div",12),l()()(),s(28,"div",2,0)(30,"app-file-info",13),x("closeInfoEvent",function(){return _(n),b(i.closeInfo())})("addTag",function(){return _(n),b(i.onAddTag())})("share",function(){return _(n),b(i.onShare())}),l()()()}t&2&&(k("expand",i.shownInfo),c(6),h("ngIf",i.shownInfo),c(5),h("label","Type")("icon","assets/icons/file-text.svg")("options",R(26,Id)),c(),h("label","People")("icon","assets/icons/profile-middle.svg")("options",R(27,Pd)),c(),h("label","Modified")("icon","assets/icons/modified-middle.svg")("options",R(28,Td)),c(7),h("ngForOf",i.projectFolders),c(7),h("ngForOf",i.projectFiles),c(),k("active",i.shownInfo),c(2),h("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile))},dependencies:[at,J,Z,_e,Ee,Se,ke,Ut,ye],encapsulation:2})};var Yn=class o{projectId;title;type=null;brief;projectHtml;imageUrl;startDate;endDate;location;typeId=10;isActive=!0;filesNum=0;filesSize=0;static \u0275fac=function(t){return new(t||o)};static \u0275prov=fe({token:o,factory:o.\u0275fac,providedIn:"root"})},Gn=class{folderId;parentId;projectId;type=null;title;brief;folderHtml;imageUrl;createdByUserId;typeId;catId;postDate;numOrder;isActive;filesNum=0;filesSize=0};var Uo=["*"];function Nd(o,e){o&1&&(s(0,"span",3),xt(),s(1,"svg",4),v(2,"path",5)(3,"g")(4,"g")(5,"g")(6,"g")(7,"g")(8,"g"),l()())}function Ld(o,e){if(o&1){let t=O();s(0,"div",2),x("click",function(){_(t);let n=g();return b(n.hide())}),l()}}var Bd=[[["ng2-dropdown-button"]],[["ng2-dropdown-menu"]]],Ud=["ng2-dropdown-button","ng2-dropdown-menu"],Hd=(()=>{class o{constructor(t){this.element=t,this.onMenuToggled=new $,this.showCaret=!0}toggleMenu(){this.onMenuToggled.emit(!0)}getPosition(){return this.element.nativeElement.getBoundingClientRect()}}return o.\u0275fac=function(t){return new(t||o)(I(me))},o.\u0275cmp=N({type:o,selectors:[["ng2-dropdown-button"]],inputs:{showCaret:"showCaret"},outputs:{onMenuToggled:"onMenuToggled"},standalone:!1,ngContentSelectors:Uo,decls:4,vars:1,consts:[["type","button","tabindex","0s",1,"ng2-dropdown-button",3,"click"],[1,"ng2-dropdown-button__label"],["class","ng2-dropdown-button__caret",4,"ngIf"],[1,"ng2-dropdown-button__caret"],["enable-background","new 0 0 32 32","height","16px","id","\u0421\u043B\u043E\u0439_1","version","1.1","viewBox","0 0 32 32","width","16px",0,"xml","space","preserve","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["d","M24.285,11.284L16,19.571l-8.285-8.288c-0.395-0.395-1.034-0.395-1.429,0  c-0.394,0.395-0.394,1.035,0,1.43l8.999,9.002l0,0l0,0c0.394,0.395,1.034,0.395,1.428,0l8.999-9.002  c0.394-0.395,0.394-1.036,0-1.431C25.319,10.889,24.679,10.889,24.285,11.284z","fill","#121313","id","Expand_More"]],template:function(t,i){t&1&&(ii(),s(0,"button",0),x("click",function(){return i.toggleMenu()}),s(1,"span",1),Rt(2),l(),F(3,Nd,9,0,"span",2),l()),t&2&&(c(3),h("ngIf",i.showCaret))},dependencies:[Z],styles:[".ng2-dropdown-button[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,Helvetica,Arial;background:#fff;padding:.45rem .25rem;font-size:14px;letter-spacing:.08rem;color:#444;outline:0;cursor:pointer;font-weight:400;border:none;border-bottom:1px solid #efefef;text-align:left;min-width:100px;width:100%;display:flex;flex-direction:row;max-width:150px}.ng2-dropdown-button[_ngcontent-%COMP%]:hover{color:#222}.ng2-dropdown-button[_ngcontent-%COMP%]:active, .ng2-dropdown-button[_ngcontent-%COMP%]:focus{color:#222;border-bottom:2px solid #2196F3}.ng2-dropdown-button__label[_ngcontent-%COMP%]{flex:1 1 95%}.ng2-dropdown-button__caret[_ngcontent-%COMP%]{width:12px;height:12px;display:flex;flex:1 1 6%}.ng2-dropdown-button--icon[_nghost-%COMP%]   .ng2-dropdown-button[_ngcontent-%COMP%], .ng2-dropdown-button--icon   [_nghost-%COMP%]   .ng2-dropdown-button[_ngcontent-%COMP%]{border:none;min-width:40px;width:40px;border-radius:100%;transition:all .2s;text-align:center;height:40px;padding:.5em}.ng2-dropdown-button--icon[_nghost-%COMP%]   .ng2-dropdown-button[_ngcontent-%COMP%]:active, .ng2-dropdown-button--icon   [_nghost-%COMP%]   .ng2-dropdown-button[_ngcontent-%COMP%]:active{background:rgba(0,0,0,.2)}"]}),o})(),qi={BACKSPACE:9,PREV:38,NEXT:40,ENTER:13,ESCAPE:27},Qd=(o,e,t)=>{o<e.length-1&&t.select(e[o+1],!0)},$d=(o,e,t)=>{o>0&&t.select(e[o-1],!0)},Wd=(o,e,t)=>{o<e.length-1?t.select(e[o+1],!0):t.select(e[0],!0)};function qd(){this.hide()}var Zd=(o,e,t)=>t.selectedItem?t.selectedItem.click():void 0,ja={[qi.BACKSPACE]:Wd,[qi.PREV]:$d,[qi.NEXT]:Qd,[qi.ENTER]:Zd,[qi.ESCAPE]:qd};function Xd(o){[38,40].indexOf(o.keyCode)>-1&&o.preventDefault()}var Bo=class{constructor(){this.onItemSelected=new $,this.onItemClicked=new $,this.onItemDestroyed=new $}get selectedItem(){return this._selectedItem}select(e,t=!0){this._selectedItem=e,!(!t||!e)&&(e.focus(),this.onItemSelected.emit(e))}unselect(){this._selectedItem=void 0}},Kn=(()=>{class o{constructor(){this.menuState={isVisible:!1,toString(){return this.isVisible===!0?"visible":"hidden"}},this.dropdownState=new Bo}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=fe({token:o,factory:o.\u0275fac}),o})(),Ho=(()=>{class o{constructor(t,i){this.state=t,this.element=i,this.preventClose=!1}ngOnDestroy(){this.state.dropdownState.onItemDestroyed.emit(this)}get isSelected(){return this===this.state.dropdownState.selectedItem}select(t){this.state.dropdownState.select(this,!0),t&&(t.stopPropagation(),t.preventDefault())}click(){this.state.dropdownState.onItemClicked.emit(this)}focus(){this.element.nativeElement.children[0].focus()}}return o.\u0275fac=function(t){return new(t||o)(I(Kn),I(me))},o.\u0275cmp=N({type:o,selectors:[["ng2-menu-item"]],inputs:{preventClose:"preventClose",value:"value"},standalone:!1,ngContentSelectors:Uo,decls:2,vars:2,consts:[["role","button","tabindex","0",1,"ng2-menu-item",3,"keydown.enter","click","mouseover"]],template:function(t,i){t&1&&(ii(),s(0,"div",0),x("keydown.enter",function(){return i.click()})("click",function(){return i.click()})("mouseover",function(){return i.select()}),Rt(1),l()),t&2&&k("ng2-menu-item--selected",i.isSelected)},styles:[".ng2-menu-item[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,Helvetica,Arial;background:#fff;color:#000000de;cursor:pointer;font-size:.9em;text-transform:none;font-weight:400;letter-spacing:.03em;height:48px;line-height:48px;padding:.3em 1.25rem;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;transition:background .25s}.ng2-menu-item--selected[_ngcontent-%COMP%]{background:rgba(158,158,158,.2);outline:0}.ng2-menu-item[_ngcontent-%COMP%]:focus{outline:0}.ng2-menu-item[_ngcontent-%COMP%]:active{background:rgba(158,158,158,.4)}ng2-menu-item[_nghost-%COMP%]     [ng2-menu-item-icon]{vertical-align:middle;font-size:28px;width:1.5em;height:30px;color:#00000070}"]}),o})(),Qo=(()=>{class o{constructor(t,i,n){this.dropdownState=t,this.element=i,this.renderer=n,this.width=4,this.focusFirstElement=!0,this.appendToBody=!0,this.zIndex=1e3,this.listeners={arrowHandler:void 0,handleKeypress:void 0}}show(t,i=!0){let n=typeof document<"u"?document:void 0,r=typeof window<"u"?window:void 0;this.dropdownState.menuState.isVisible||(this.listeners.handleKeypress=this.renderer.listen(n.body,"keydown",this.handleKeypress.bind(this)),this.listeners.arrowHandler=this.renderer.listen(r,"keydown",Xd)),this.dropdownState.menuState.isVisible=!0,t&&this.updatePosition(t,i)}hide(){this.dropdownState.menuState.isVisible=!1,this.dropdownState.dropdownState.unselect(),this.listeners.arrowHandler&&this.listeners.arrowHandler(),this.listeners.handleKeypress&&this.listeners.handleKeypress()}updatePosition(t,i){this.position=t,this.updateOnChange(i)}handleKeypress(t){let i=t.keyCode,n=this.items.toArray(),r=n.indexOf(this.dropdownState.dropdownState.selectedItem);ja.hasOwnProperty(i)&&ja[i].call(this,r,n,this.dropdownState.dropdownState)}getMenuElement(){return this.element.nativeElement.children[0]}calcPositionOffset(t){let i=typeof window<"u"?window:void 0,n=typeof document<"u"?document:void 0;if(!i||!n||!t)return;let r=this.getMenuElement(),a=i.pageXOffset!==void 0,d=(n.compatMode||"")==="CSS1Compat",m=a?i.pageXOffset:d?n.documentElement.scrollLeft:n.body.scrollLeft,u=a?i.pageYOffset:d?n.documentElement.scrollTop:n.body.scrollTop,{top:f,left:y}=this.applyOffset(`${t.top+(this.appendToBody?u-15:0)}px`,`${t.left+m-5}px`),S=r.clientWidth,C=r.clientHeight,w=parseInt(f)+C+(this.appendToBody?0:u-15),T=parseInt(y)+S,P=i.innerHeight+i.scrollY,E=i.innerWidth+i.scrollX;if(w>=P&&(f=`${parseInt(f.replace("px",""))-C}px`),T>=E){let A=T-E+30;y=`${parseInt(y.replace("px",""))-A}px`}return{top:f,left:y}}applyOffset(t,i){if(!this.offset)return{top:t,left:i};let n=this.offset.split(" ");return n[1]||(n[1]="0"),t=`${parseInt(t.replace("px",""))+parseInt(n[0])}px`,i=`${parseInt(i.replace("px",""))+parseInt(n[1])}px`,{top:t,left:i}}ngOnInit(){let t=typeof document<"u"?document:void 0;this.appendToBody&&t.body.appendChild(this.element.nativeElement)}updateOnChange(t=!0){let i=this.getMenuElement(),n=this.calcPositionOffset(this.position);n&&(this.renderer.setStyle(i,"top",n.top.toString()),this.renderer.setStyle(i,"left",n.left.toString())),this.focusFirstElement&&this.items.first&&!this.dropdownState.dropdownState.selectedItem&&this.dropdownState.dropdownState.select(this.items.first,!1)}ngOnDestroy(){let t=this.element.nativeElement;t.parentNode.removeChild(t),this.listeners.handleKeypress&&this.listeners.handleKeypress()}}return o.\u0275fac=function(t){return new(t||o)(I(Kn),I(me),I(de))},o.\u0275cmp=N({type:o,selectors:[["ng2-dropdown-menu"]],contentQueries:function(t,i,n){if(t&1&&zt(n,Ho,5),t&2){let r;Y(r=G())&&(i.items=r)}},inputs:{width:"width",focusFirstElement:"focusFirstElement",offset:"offset",appendToBody:"appendToBody",zIndex:"zIndex"},standalone:!1,ngContentSelectors:Uo,decls:4,vars:12,consts:[[1,"ng2-dropdown-menu__options-container"],["class","ng2-dropdown-backdrop",3,"click",4,"ngIf"],[1,"ng2-dropdown-backdrop",3,"click"]],template:function(t,i){t&1&&(ii(),s(0,"div")(1,"div",0),Rt(2),l()(),F(3,Ld,1,0,"div",1)),t&2&&(Ai("ng2-dropdown-menu ng2-dropdown-menu---width--",i.width,""),pt("z-index",i.zIndex),k("ng2-dropdown-menu--inside-element",!i.appendToBody)("ng2-dropdown-menu--open",i.dropdownState.menuState.isVisible),h("@fade",i.dropdownState.menuState.toString()),c(),h("@opacity",i.dropdownState.menuState.toString()),c(2),h("ngIf",i.dropdownState.menuState.isVisible))},dependencies:[Z],styles:["[_nghost-%COMP%]{display:block}.ng2-dropdown-menu[_ngcontent-%COMP%]{overflow-y:auto;box-shadow:0 1px 2px #0000004d;position:absolute;padding:.5em 0;background:#fff;border-radius:1px;max-height:400px;width:260px;min-height:0;display:block}.ng2-dropdown-menu.ng2-dropdown-menu--inside-element[_ngcontent-%COMP%]{position:fixed}.ng2-dropdown-menu.ng2-dropdown-menu--width--2[_ngcontent-%COMP%]{width:200px}.ng2-dropdown-menu.ng2-dropdown-menu--width--4[_ngcontent-%COMP%]{width:260px}.ng2-dropdown-menu.ng2-dropdown-menu--width--6[_ngcontent-%COMP%]{width:320px}.ng2-dropdown-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;overflow:hidden}[_nghost-%COMP%]     .ng2-menu-divider{height:1px;min-height:1px;max-height:1px;width:100%;display:block;background:#f9f9f9}"],data:{animation:[vi("fade",[oi("visible",ue({opacity:1,height:"*",width:"*"})),oi("hidden",ue({opacity:0,overflow:"hidden",height:0,width:0})),Tt("hidden => visible",[Pt("250ms ease-in",ue({opacity:1,height:"*",width:"*"}))]),Tt("visible => hidden",[Pt("350ms ease-out",ue({opacity:0,width:0,height:0}))])]),vi("opacity",[Tt("hidden => visible",[Pt("450ms ease-in",ri([ue({opacity:0,offset:0}),ue({opacity:1,offset:1})]))]),Tt("visible => hidden",[Pt("250ms ease-out",ri([ue({opacity:1,offset:0}),ue({opacity:.5,offset:.3}),ue({opacity:0,offset:1})]))])])]}}),o})(),Jn=(()=>{class o{constructor(t){this.state=t,this.dynamicUpdate=!0,this.onItemClicked=new $,this.onItemSelected=new $,this.onShow=new $,this.onHide=new $}ngOnInit(){this.state.dropdownState.onItemClicked.subscribe(t=>{this.onItemClicked.emit(t),!t.preventClose&&this.hide.call(this)}),this.button&&this.button.onMenuToggled.subscribe(()=>{this.toggleMenu()}),this.state.dropdownState.onItemSelected.subscribe(t=>{this.onItemSelected.emit(t)}),this.state.dropdownState.onItemDestroyed.subscribe(t=>{let i,n=this.menu.items.toArray();t===this.state.dropdownState.selectedItem&&(this.menu.focusFirstElement&&(i=t===n[0]&&n.length>1?n[1]:n[0]),this.state.dropdownState.select(i))})}toggleMenu(t=this.button.getPosition()){this.state.menuState.isVisible?this.hide():this.show(t)}hide(){this.menu.hide(),this.onHide.emit(this)}show(t=this.button.getPosition()){this.menu.show(t,this.dynamicUpdate),this.onShow.emit(this)}scrollListener(){this.button&&this.dynamicUpdate&&this.menu.updatePosition(this.button.getPosition(),!0)}}return o.\u0275fac=function(t){return new(t||o)(I(Kn))},o.\u0275cmp=N({type:o,selectors:[["ng2-dropdown"]],contentQueries:function(t,i,n){if(t&1&&(zt(n,Hd,7),zt(n,Qo,7)),t&2){let r;Y(r=G())&&(i.button=r.first),Y(r=G())&&(i.menu=r.first)}},hostBindings:function(t,i){t&1&&x("scroll",function(){return i.scrollListener()},!1,wt)},inputs:{dynamicUpdate:"dynamicUpdate"},outputs:{onItemClicked:"onItemClicked",onItemSelected:"onItemSelected",onShow:"onShow",onHide:"onHide"},standalone:!1,features:[Ji([Kn])],ngContentSelectors:Ud,decls:3,vars:0,consts:[[1,"ng2-dropdown-container"]],template:function(t,i){t&1&&(ii(Bd),s(0,"div",0),Rt(1),Rt(2,1),l())},encapsulation:2}),o})(),Ma=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=Vt({type:o}),o.\u0275inj=kt({imports:[[ni]]}),o})();var Gd=["input"],Kd=(o,e)=>({item:o,index:e});function Jd(o,e){}function ep(o,e){if(o&1&&(s(0,"div"),F(1,Jd,0,0,"ng-template",4),l()),o&2){let t=g();Ft("contenteditable",t.editing),c(),h("ngTemplateOutletContext",$e(3,Kd,t.model,t.index))("ngTemplateOutlet",t.template)}}function tp(o,e){if(o&1){let t=O();s(0,"delete-icon",8),x("click",function(n){_(t);let r=g(2);return b(r.remove(n))}),l()}}function ip(o,e){if(o&1){let t=O();s(0,"div",5)(1,"div",6),x("keydown.enter",function(n){_(t);let r=g();return b(r.disableEditMode(n))})("keydown.escape",function(n){_(t);let r=g();return b(r.disableEditMode(n))})("click",function(n){_(t);let r=g();return b(r.editing?n.stopPropagation():void 0)})("blur",function(n){_(t);let r=g();return b(r.onBlurred(n))}),p(2),l(),F(3,tp,1,0,"delete-icon",7),l()}if(o&2){let t=g();c(),Ft("contenteditable",t.editing)("title",t.getDisplayValue(t.model)),c(),M(" ",t.getDisplayValue(t.model)," "),c(),h("ngIf",t.isDeleteIconVisible())}}function np(o,e){if(o&1&&v(0,"tag-ripple",9),o&2){let t=g();h("state",t.rippleState),Ft("tabindex",-1)}}var op=(o,e,t)=>({item:o,index:e,last:t});function rp(o,e){if(o&1&&(v(0,"span",6),j(1,"highlight")),o&2){let t=g().$implicit,i=g();h("innerHTML",L(1,1,t[i.displayBy],i.tagInput.inputForm.value.value),nr)}}function ap(o,e){}function sp(o,e){if(o&1&&F(0,ap,0,0,"ng-template",7),o&2){let t=g(),i=t.$implicit,n=t.index,r=t.last,a=g();h("ngTemplateOutlet",a.templates.first)("ngTemplateOutletContext",lr(2,op,i,n,r))}}function lp(o,e){if(o&1&&(s(0,"ng2-menu-item",3),F(1,rp,2,4,"span",4)(2,sp,1,6,null,5),l()),o&2){let t=e.$implicit,i=g();h("value",t)("ngSwitch",!!i.templates.length),c(),h("ngSwitchCase",!1)}}var cp=["*"];function dp(o,e){if(o&1){let t=O();s(0,"tag",6),x("onSelect",function(){let n=_(t).$implicit,r=g();return b(r.selectItem(n))})("onRemove",function(){let n=_(t),r=n.$implicit,a=n.index,d=g();return b(d.onRemoveRequested(r,a))})("onKeyDown",function(n){_(t);let r=g();return b(r.handleKeydown(n))})("onTagEdited",function(n){_(t);let r=g();return b(r.updateEditedTag(n))})("onBlur",function(n){let r=_(t).index,a=g();return b(a.onTagBlurred(n,r))})("dragstart",function(n){let r=_(t),a=r.$implicit,d=r.index,m=g();return b(m.dragZone?m.onDragStarted(n,a,d):void 0)})("drop",function(n){let r=_(t).index,a=g();return b(a.dragZone?a.onTagDropped(n,r):void 0)})("dragenter",function(n){_(t);let r=g();return b(r.dragZone?r.onDragOver(n):void 0)})("dragover",function(n){let r=_(t).index,a=g();return b(a.dragZone?a.onDragOver(n,r):void 0)})("dragleave",function(){_(t);let n=g();return b(n.dragZone?n.dragProvider.onDragEnd():void 0)}),l()}if(o&2){let t=e.$implicit,i=e.index,n=g();q("draggable",n.editable),h("canAddTag",n.isTagValid)("disabled",n.disable)("@animation",n.animationMetadata)("hasRipple",n.ripple)("index",i)("removable",n.removable)("editable",n.editable)("displayBy",n.displayBy)("identifyBy",n.identifyBy)("template",n.hasCustomTemplate()?n.templates.first:void 0)("draggable",n.dragZone)("model",t),Ft("tabindex",0)}}function pp(o,e){o&1&&v(0,"div",7)}function mp(o,e){if(o&1&&(s(0,"p",10)(1,"span"),p(2),l()()),o&2){let t=e.$implicit;c(2),z(t)}}function up(o,e){if(o&1&&(s(0,"div",8),F(1,mp,3,1,"p",9),l()),o&2){let t=g();h("ngClass",t.theme),c(),h("ngForOf",t.errors)}}var fp=o=>o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),hp=(()=>{class o{transform(t,i){if(!i.trim())return t;try{let n=new RegExp(`(${fp(i)})`,"i");return t.replace(n,"<b>$1</b>")}catch{return t}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=rr({name:"highlight",type:o,pure:!0,standalone:!1}),o})(),gp="+ Tag",vp="Enter a new tag",$o="keydown",_p="keyup";var bp="The number of items specified was greater than the property max-items.",Ot={DELETE:"DELETE",SWITCH_PREV:"SWITCH_PREV",SWITCH_NEXT:"SWITCH_NEXT",TAB:"TAB"},yp={8:Ot.DELETE,46:Ot.DELETE,37:Ot.SWITCH_PREV,39:Ot.SWITCH_NEXT,9:Ot.TAB},Oa="Text",eo="NEXT",Wo="PREV",Na=(()=>{class o{constructor(){this.state={dragging:!1,dropping:!1,index:void 0}}setDraggedItem(t,i){t&&t.dataTransfer&&t.dataTransfer.setData(Oa,JSON.stringify(i))}getDraggedItem(t){if(t&&t.dataTransfer){let i=t.dataTransfer.getData(Oa);try{return JSON.parse(i)}catch{return}}}setSender(t){this.sender=t}setReceiver(t){this.receiver=t}onTagDropped(t,i,n){this.onDragEnd(),this.sender.onRemoveRequested(t,i),this.receiver.onAddingRequested(!1,t,n)}setState(t){this.state=he(he({},this.state),t)}getState(t){return t?this.state[t]:this.state}onDragEnd(){this.setState({dragging:!1,dropping:!1,index:void 0})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=fe({token:o,factory:o.\u0275fac}),o})(),W={tagInput:{separatorKeys:[],separatorKeyCodes:[],maxItems:1/0,placeholder:gp,secondaryPlaceholder:vp,validators:[],asyncValidators:[],onlyFromAutocomplete:!1,errorMessages:{},theme:"",onTextChangeDebounce:250,inputId:null,inputClass:"",clearOnBlur:!1,hideForm:!1,addOnBlur:!1,addOnPaste:!1,pasteSplitPattern:",",blinkIfDupe:!0,removable:!0,editable:!1,allowDupes:!1,modelAsStrings:!1,trimTags:!0,ripple:!0,tabIndex:"",disable:!1,dragZone:"",onRemoving:void 0,onAdding:void 0,displayBy:"display",identifyBy:"value",animationDuration:{enter:"250ms",leave:"150ms"}},dropdown:{displayBy:"display",identifyBy:"value",appendToBody:!0,offset:"50 0",focusFirstElement:!1,showDropdownIfEmpty:!1,minimumTextLength:1,limitItemsTo:1/0,keepOpen:!0,dynamicUpdate:!0,zIndex:1e3,matchingFn:Cp}};function Cp(o,e){let t=e[this.displayBy].toString();return t&&t.toLowerCase().indexOf(o.toLowerCase())>=0}var qo=(()=>{class o{setOptions(t){o.defaults.tagInput=he(he({},W.tagInput),t.tagInput),o.defaults.dropdown=he(he({},W.dropdown),t.dropdown)}}return o.defaults=W,o})();function Da(o){return o===Object(o)}var Sp=(()=>{class o{constructor(){this._items=[],this.displayBy=qo.defaults.tagInput.displayBy,this.identifyBy=qo.defaults.tagInput.identifyBy}get items(){return this._items}set items(t){this._items=t,this._onChangeCallback(this._items)}onTouched(){this._onTouchedCallback()}writeValue(t){this._items=t||[]}registerOnChange(t){this._onChangeCallback=t}registerOnTouched(t){this._onTouchedCallback=t}getItemValue(t,i=!1){let n=i&&this.dropdown?this.dropdown.identifyBy:this.identifyBy;return Da(t)?t[n]:t}getItemDisplay(t,i=!1){let n=i&&this.dropdown?this.dropdown.displayBy:this.displayBy;return Da(t)?t[n]:t}getItemsWithout(t){return this.items.filter((i,n)=>n!==t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=or({type:o,inputs:{displayBy:"displayBy",identifyBy:"identifyBy"},standalone:!1}),o})();function ka(o,e,t=!0){if(!this.listeners.hasOwnProperty(o))throw new Error("The event entered may be wrong");t&&this.listeners[o].push(e)}var Aa=(()=>{class o{constructor(){this.onSubmit=new $,this.onBlur=new $,this.onFocus=new $,this.onKeyup=new $,this.onKeydown=new $,this.inputTextChange=new $,this.validators=[],this.asyncValidators=[],this.tabindex="",this.disabled=!1,this.item=new pe({value:"",disabled:this.disabled})}get inputText(){return this.item.value}set inputText(t){this.item.setValue(t),this.inputTextChange.emit(t)}ngOnInit(){this.item.setValidators(this.validators),this.item.setAsyncValidators(this.asyncValidators),this.form=new $t({item:this.item})}ngOnChanges(t){t.disabled&&!t.disabled.firstChange&&(t.disabled.currentValue?this.form.controls.item.disable():this.form.controls.item.enable())}get value(){return this.form.get("item")}isInputFocused(){let t=typeof document<"u"?document:void 0;return t?t.activeElement===this.input.nativeElement:!1}getErrorMessages(t){return Object.keys(t).filter(i=>this.value.hasError(i)).map(i=>t[i])}hasErrors(){let{dirty:t,value:i,valid:n}=this.form;return t&&i.item&&!n}focus(){this.input.nativeElement.focus()}blur(){this.input.nativeElement.blur()}getElementPosition(){return this.input.nativeElement.getBoundingClientRect()}destroy(){let t=this.input.nativeElement;t.parentElement.removeChild(t)}onKeyDown(t){if(this.inputText=this.value.value,t.key==="Enter")this.submit(t);else return this.onKeydown.emit(t)}onKeyUp(t){return this.inputText=this.value.value,this.onKeyup.emit(t)}submit(t){t.preventDefault(),this.onSubmit.emit(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=N({type:o,selectors:[["tag-input-form"]],viewQuery:function(t,i){if(t&1&&ie(Gd,5),t&2){let n;Y(n=G())&&(i.input=n.first)}},inputs:{placeholder:"placeholder",validators:"validators",asyncValidators:"asyncValidators",inputId:"inputId",inputClass:"inputClass",tabindex:"tabindex",disabled:"disabled",inputText:"inputText"},outputs:{onSubmit:"onSubmit",onBlur:"onBlur",onFocus:"onFocus",onKeyup:"onKeyup",onKeydown:"onKeydown",inputTextChange:"inputTextChange"},standalone:!1,features:[Xi],decls:3,vars:8,consts:[["input",""],[3,"ngSubmit","formGroup"],["type","text","autocomplete","off","minlength","1","formControlName","item",1,"ng2-tag-input__text-input",3,"focus","blur","keydown","keyup","tabindex","ngClass"]],template:function(t,i){if(t&1){let n=O();s(0,"form",1),x("ngSubmit",function(a){return _(n),b(i.submit(a))}),s(1,"input",2,0),x("focus",function(a){return _(n),b(i.onFocus.emit(a))})("blur",function(a){return _(n),b(i.onBlur.emit(a))})("keydown",function(a){return _(n),b(i.onKeyDown(a))})("keyup",function(a){return _(n),b(i.onKeyUp(a))}),l()()}t&2&&(h("formGroup",i.form),c(),q("tabindex",i.disabled?-1:i.tabindex?i.tabindex:0),h("ngClass",i.inputClass),Ft("id",i.inputId)("placeholder",i.placeholder)("aria-label",i.placeholder)("tabindex",i.tabindex)("disabled",i.disabled?i.disabled:null))},dependencies:[we,xe,qt,Le,Vr,Be,Zt,at],styles:[".dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 1px #323232}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]{background-color:#fff;display:inline-block;color:#555;vertical-align:middle;max-width:100%;height:42px;line-height:44px}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;box-shadow:none;outline:none;background-color:transparent;padding:0 6px;margin:0;width:auto;max-width:inherit}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#777;opacity:1}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none;box-shadow:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #0006;border:1px solid #ccc}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #d9534f}.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;transition:all .25s;padding:.25rem 0;min-height:32px;cursor:text;border-bottom:2px solid #efefef}.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #2196F3}.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #f44336}.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.minimal.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:1px solid transparent}.minimal.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.minimal.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.minimal.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.minimal.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.minimal.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.dark.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #444}.dark.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.dark.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.dark.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.dark.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.dark.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #efefef}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #0275d8}.bootstrap.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #d9534f}.bootstrap.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;padding:4px;cursor:text;box-shadow:inset 0 1px 1px #00000013;border-radius:4px}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap3-info.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:1px solid #d9534f}.bootstrap3-info.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.error-message[_ngcontent-%COMP%]{font-size:.8em;color:#f44336;margin:.5em 0 0}.bootstrap[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d9534f}.ng2-tag-input__text-input[_ngcontent-%COMP%]{display:inline;vertical-align:middle;border:none;padding:0 .5rem;height:38px;font-size:1em;font-family:Roboto,Helvetica Neue,sans-serif}.ng2-tag-input__text-input[_ngcontent-%COMP%]:focus{outline:0}.ng2-tag-input__text-input[disabled=true][_ngcontent-%COMP%]{opacity:.5;background:#fff}"]}),o})(),Va=(()=>{class o{constructor(){this.state="none"}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=N({type:o,selectors:[["tag-ripple"]],inputs:{state:"state"},standalone:!1,decls:1,vars:1,consts:[[1,"tag-ripple"]],template:function(t,i){t&1&&v(0,"div",0),t&2&&h("@ink",i.state)},styles:["[_nghost-%COMP%]{width:100%;height:100%;left:0;overflow:hidden;position:absolute}.tag-ripple[_ngcontent-%COMP%]{background:rgba(0,0,0,.1);top:50%;left:50%;height:100%;transform:translate(-50%,-50%);position:absolute}"],data:{animation:[vi("ink",[oi("none",ue({width:0,opacity:0})),Tt("none => clicked",[Pt(300,ri([ue({opacity:1,offset:0,width:"30%",borderRadius:"100%"}),ue({opacity:1,offset:.5,width:"50%"}),ue({opacity:.5,offset:1,width:"100%",borderRadius:"16px"})]))])])]}}),o})(),xp=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=N({type:o,selectors:[["delete-icon"]],standalone:!1,decls:3,vars:0,consts:[["height","16px","viewBox","0 0 32 32","width","16px"],["d","M17.459,16.014l8.239-8.194c0.395-0.391,0.395-1.024,0-1.414c-0.394-0.391-1.034-0.391-1.428,0  l-8.232,8.187L7.73,6.284c-0.394-0.395-1.034-0.395-1.428,0c-0.394,0.396-0.394,1.037,0,1.432l8.302,8.303l-8.332,8.286  c-0.394,0.391-0.394,1.024,0,1.414c0.394,0.391,1.034,0.391,1.428,0l8.325-8.279l8.275,8.276c0.394,0.395,1.034,0.395,1.428,0  c0.394-0.396,0.394-1.037,0-1.432L17.459,16.014z","fill","#121313"]],template:function(t,i){t&1&&(s(0,"span"),xt(),s(1,"svg",0),v(2,"path",1),l()())},styles:[".dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 1px #323232}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]{background-color:#fff;display:inline-block;color:#555;vertical-align:middle;max-width:100%;height:42px;line-height:44px}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;box-shadow:none;outline:none;background-color:transparent;padding:0 6px;margin:0;width:auto;max-width:inherit}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#777;opacity:1}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none;box-shadow:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #0006;border:1px solid #ccc}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #d9534f}.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;transition:all .25s;padding:.25rem 0;min-height:32px;cursor:text;border-bottom:2px solid #efefef}.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #2196F3}.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #f44336}.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.minimal.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:1px solid transparent}.minimal.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.minimal.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.minimal.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.minimal.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.minimal.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.dark.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #444}.dark.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.dark.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.dark.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.dark.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.dark.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #efefef}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #0275d8}.bootstrap.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #d9534f}.bootstrap.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;padding:4px;cursor:text;box-shadow:inset 0 1px 1px #00000013;border-radius:4px}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap3-info.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:1px solid #d9534f}.bootstrap3-info.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.error-message[_ngcontent-%COMP%]{font-size:.8em;color:#f44336;margin:.5em 0 0}.bootstrap[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d9534f}delete-icon[_nghost-%COMP%]{width:20px;height:16px;transition:all .15s;display:inline-block;text-align:right}delete-icon[_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#444}delete-icon[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{vertical-align:bottom;height:34px}delete-icon[_nghost-%COMP%]:hover{transform:scale(1.5) translateY(-3px)}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%]{text-align:right}.dark[_nghost-%COMP%]   path[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.dark[_nghost-%COMP%]   svg[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   svg[_ngcontent-%COMP%]{vertical-align:bottom;height:34px}.minimal[_nghost-%COMP%], .minimal   [_nghost-%COMP%]{text-align:right}.minimal[_nghost-%COMP%]   path[_ngcontent-%COMP%], .minimal   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#444}.minimal[_nghost-%COMP%]   svg[_ngcontent-%COMP%], .minimal   [_nghost-%COMP%]   svg[_ngcontent-%COMP%]{vertical-align:bottom;height:34px}.bootstrap[_nghost-%COMP%], .bootstrap   [_nghost-%COMP%]{text-align:right}.bootstrap[_nghost-%COMP%]   path[_ngcontent-%COMP%], .bootstrap   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.bootstrap[_nghost-%COMP%]   svg[_ngcontent-%COMP%], .bootstrap   [_nghost-%COMP%]   svg[_ngcontent-%COMP%]{vertical-align:bottom;height:34px}tag:focus[_nghost-%COMP%]   path[_ngcontent-%COMP%], tag:focus   [_nghost-%COMP%]   path[_ngcontent-%COMP%], tag:active[_nghost-%COMP%]   path[_ngcontent-%COMP%], tag:active   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.dark   tag:focus[_nghost-%COMP%]   path[_ngcontent-%COMP%], .dark   tag:focus   [_nghost-%COMP%]   path[_ngcontent-%COMP%], .dark   tag:active[_nghost-%COMP%]   path[_ngcontent-%COMP%], .dark   tag:active   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#000}.minimal   tag:focus[_nghost-%COMP%]   path[_ngcontent-%COMP%], .minimal   tag:focus   [_nghost-%COMP%]   path[_ngcontent-%COMP%], .minimal   tag:active[_nghost-%COMP%]   path[_ngcontent-%COMP%], .minimal   tag:active   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#000}.bootstrap   tag:focus[_nghost-%COMP%]   path[_ngcontent-%COMP%], .bootstrap   tag:focus   [_nghost-%COMP%]   path[_ngcontent-%COMP%], .bootstrap   tag:active[_nghost-%COMP%]   path[_ngcontent-%COMP%], .bootstrap   tag:active   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.bootstrap3-info[_nghost-%COMP%], .bootstrap3-info   [_nghost-%COMP%]{height:inherit}.bootstrap3-info[_nghost-%COMP%]   path[_ngcontent-%COMP%], .bootstrap3-info   [_nghost-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}"]}),o})(),Ra=typeof window<"u"?window.navigator:{userAgent:"Chrome",vendor:"Google Inc"},wp=/Chrome/.test(Ra.userAgent)&&/Google Inc/.test(Ra.vendor),za=(()=>{class o{constructor(t,i,n){this.element=t,this.renderer=i,this.cdRef=n,this.disabled=!1,this.onSelect=new $,this.onRemove=new $,this.onBlur=new $,this.onKeyDown=new $,this.onTagEdited=new $,this.editing=!1,this.rippleState="none"}get readonly(){return typeof this.model!="string"&&this.model.readonly===!0}select(t){this.readonly||this.disabled||(t&&t.stopPropagation(),this.focus(),this.onSelect.emit(this.model))}remove(t){t.stopPropagation(),this.onRemove.emit(this)}focus(){this.element.nativeElement.focus()}move(){this.moving=!0}keydown(t){if(this.editing){if(t.keyCode===13)return this.disableEditMode(t)}else this.onKeyDown.emit({event:t,model:this.model})}blink(){let t=this.element.nativeElement.classList;t.add("blink"),setTimeout(()=>t.remove("blink"),50)}toggleEditMode(){if(this.editable)return this.editing?void 0:this.activateEditMode()}onBlurred(t){if(!this.editable)return;this.disableEditMode();let i=t.target.innerText,n=typeof this.model=="string"?i:Qe(he({},this.model),{[this.displayBy]:i});this.onBlur.emit(n)}getDisplayValue(t){return typeof t=="string"?t:t[this.displayBy]}get isRippleVisible(){return!this.readonly&&!this.editing&&wp&&this.hasRipple}disableEditMode(t){let i=this.element.nativeElement.classList,n=this.getContentEditableText();if(this.editing=!1,i.remove("tag--editing"),!n){this.setContentEditableText(this.model);return}this.storeNewValue(n),this.cdRef.detectChanges(),t&&t.preventDefault()}isDeleteIconVisible(){return!this.readonly&&!this.disabled&&this.removable&&!this.editing}getContentEditableText(){let t=this.getContentEditable();return t?t.innerText.trim():""}setContentEditableText(t){let i=this.getContentEditable(),n=this.getDisplayValue(t);i.innerText=n}activateEditMode(){this.element.nativeElement.classList.add("tag--editing"),this.editing=!0}storeNewValue(t){let i=a=>typeof a=="string"?a===t:a[this.displayBy]===t,n=()=>this.model[this.identifyBy]!==this.model[this.displayBy];if(i(this.model))return;let r=typeof this.model=="string"?t:{index:this.index,[this.identifyBy]:n()?this.model[this.identifyBy]:t,[this.displayBy]:t};this.canAddTag(r)?this.onTagEdited.emit({tag:r,index:this.index}):this.setContentEditableText(this.model)}getContentEditable(){return this.element.nativeElement.querySelector("[contenteditable]")}}return o.\u0275fac=function(t){return new(t||o)(I(me),I(de),I(en))},o.\u0275cmp=N({type:o,selectors:[["tag"]],viewQuery:function(t,i){if(t&1&&ie(Va,5),t&2){let n;Y(n=G())&&(i.ripple=n.first)}},hostVars:2,hostBindings:function(t,i){t&1&&x("keydown",function(r){return i.keydown(r)}),t&2&&k("moving",i.moving)},inputs:{model:"model",removable:"removable",editable:"editable",template:"template",displayBy:"displayBy",identifyBy:"identifyBy",index:"index",hasRipple:"hasRipple",disabled:"disabled",canAddTag:"canAddTag"},outputs:{onSelect:"onSelect",onRemove:"onRemove",onBlur:"onBlur",onKeyDown:"onKeyDown",onTagEdited:"onTagEdited"},standalone:!1,decls:4,vars:8,consts:[[3,"click","dblclick","mousedown","mouseup","ngSwitch"],[4,"ngSwitchCase"],["class","tag-wrapper",4,"ngSwitchCase"],[3,"state",4,"ngIf"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],[1,"tag-wrapper"],["spellcheck","false",1,"tag__text","inline",3,"keydown.enter","keydown.escape","click","blur"],["aria-label","Remove tag","role","button",3,"click",4,"ngIf"],["aria-label","Remove tag","role","button",3,"click"],[3,"state"]],template:function(t,i){t&1&&(s(0,"div",0),x("click",function(r){return i.select(r)})("dblclick",function(){return i.toggleEditMode()})("mousedown",function(){return i.rippleState="clicked"})("mouseup",function(){return i.rippleState="none"}),F(1,ep,2,6,"div",1)(2,ip,4,4,"div",2),l(),F(3,np,1,2,"tag-ripple",3)),t&2&&(k("disabled",i.disabled),h("ngSwitch",!!i.template),Ft("tabindex",-1)("aria-label",i.getDisplayValue(i.model)),c(),h("ngSwitchCase",!0),c(),h("ngSwitchCase",!1),c(),h("ngIf",i.isRippleVisible))},dependencies:[xp,Va,mo,uo,Ri,Z],styles:["[_nghost-%COMP%], [_nghost-%COMP%] > div[_ngcontent-%COMP%], [_nghost-%COMP%] > div[_ngcontent-%COMP%]:focus{outline:0;overflow:hidden;transition:opacity 1s;z-index:1}[_nghost-%COMP%]{max-width:400px}.blink[_nghost-%COMP%]{-webkit-animation:_ngcontent-%COMP%_blink .3s normal forwards ease-in-out;animation:_ngcontent-%COMP%_blink .3s normal forwards ease-in-out}@-webkit-keyframes _ngcontent-%COMP%_blink{0%{opacity:.3}}@keyframes _ngcontent-%COMP%_blink{0%{opacity:.3}}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   [contenteditable=true][_ngcontent-%COMP%]{outline:0}.tag-wrapper[_ngcontent-%COMP%]{flex-direction:row;display:flex}.tag__text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),o})(),Fp=[vi("animation",[oi("in",ue({opacity:1})),oi("out",ue({opacity:0})),Tt(":enter",[Pt("{{ enter }}",ri([ue({opacity:0,offset:0,transform:"translate(0px, 20px)"}),ue({opacity:.3,offset:.3,transform:"translate(0px, -10px)"}),ue({opacity:.5,offset:.5,transform:"translate(0px, 0px)"}),ue({opacity:.75,offset:.75,transform:"translate(0px, 5px)"}),ue({opacity:1,offset:1,transform:"translate(0px, 0px)"})]))]),Tt(":leave",[Pt("{{ leave }}",ri([ue({opacity:1,transform:"translateX(0)",offset:0}),ue({opacity:1,transform:"translateX(-15px)",offset:.7}),ue({opacity:0,transform:"translateX(100%)",offset:1})]))])])],Zo=(()=>{class o{constructor(t){this.injector=t,this.offset=W.dropdown.offset,this.focusFirstElement=W.dropdown.focusFirstElement,this.showDropdownIfEmpty=W.dropdown.showDropdownIfEmpty,this.minimumTextLength=W.dropdown.minimumTextLength,this.limitItemsTo=W.dropdown.limitItemsTo,this.displayBy=W.dropdown.displayBy,this.identifyBy=W.dropdown.identifyBy,this.matchingFn=W.dropdown.matchingFn,this.appendToBody=W.dropdown.appendToBody,this.keepOpen=W.dropdown.keepOpen,this.dynamicUpdate=W.dropdown.dynamicUpdate,this.zIndex=W.dropdown.zIndex,this.items=[],this.tagInput=this.injector.get(to),this._autocompleteItems=[],this.show=()=>{let i=this.tagInput.items.length===this.tagInput.maxItems,n=this.getFormValue(),r=n.trim().length>=this.minimumTextLength,a=this.calculatePosition(),d=this.getMatchingItems(n),m=d.length>0,u=this.isVisible===!1,f=this.showDropdownIfEmpty&&m&&!n,y=this.tagInput.disable,S=u&&(m&&r||f),C=this.isVisible&&!m;if(this.autocompleteObservable&&r)return this.getItemsFromObservable(n);if(!this.showDropdownIfEmpty&&!n||i||y)return this.dropdown.hide();this.setItems(d),S?this.dropdown.show(a):C&&this.hide()},this.requestAdding=i=>Zi(this,null,function*(){let n=this.createTagModel(i);yield this.tagInput.onAddingRequested(!0,n).catch(()=>{})}),this.resetItems=()=>{this.items=[]},this.getItemsFromObservable=i=>{this.setLoadingState(!0);let n=r=>{this.setLoadingState(!1).populateItems(r),this.setItems(this.getMatchingItems(i)),this.items.length?this.dropdown.show(this.calculatePosition()):this.dropdown.hide()};this.autocompleteObservable(i).pipe(hi()).subscribe(n,()=>this.setLoadingState(!1))}}set autocompleteItems(t){this._autocompleteItems=t}get autocompleteItems(){let t=this._autocompleteItems;return t?t.map(i=>typeof i=="string"?{[this.displayBy]:i,[this.identifyBy]:i}:i):[]}ngAfterViewInit(){this.onItemClicked().subscribe(n=>{this.requestAdding(n)}),this.onHide().subscribe(this.resetItems);let t=200,i=this.keepOpen;this.tagInput.onTextChange.asObservable().pipe(er(),Di(t),ot(n=>i===!1?n.length>0:!0)).subscribe(this.show)}updatePosition(){let t=this.tagInput.inputForm.getElementPosition();this.dropdown.menu.updatePosition(t,this.dynamicUpdate)}get isVisible(){return this.dropdown.menu.dropdownState.menuState.isVisible}onHide(){return this.dropdown.onHide}onItemClicked(){return this.dropdown.onItemClicked}get selectedItem(){return this.dropdown.menu.dropdownState.dropdownState.selectedItem}get state(){return this.dropdown.menu.dropdownState}hide(){this.resetItems(),this.dropdown.hide()}scrollListener(){!this.isVisible||!this.dynamicUpdate||this.updatePosition()}onWindowBlur(){this.dropdown.hide()}getFormValue(){let t=this.tagInput.formValue;return t?t.toString().trim():""}calculatePosition(){return this.tagInput.inputForm.getElementPosition()}createTagModel(t){let i=typeof t.value=="string"?t.value:t.value[this.displayBy],n=typeof t.value=="string"?t.value:t.value[this.identifyBy];return Qe(he({},t.value),{[this.tagInput.displayBy]:i,[this.tagInput.identifyBy]:n})}getMatchingItems(t){if(!t&&!this.showDropdownIfEmpty)return[];let i=this.tagInput.allowDupes;return this.autocompleteItems.filter(n=>{let r=i?!1:this.tagInput.tags.some(a=>{let d=this.tagInput.identifyBy;return(typeof a.model=="string"?a.model:a.model[d])===n[this.identifyBy]});return this.matchingFn(t,n)&&r===!1})}setItems(t){this.items=t.slice(0,this.limitItemsTo||t.length)}populateItems(t){return this.autocompleteItems=t.map(i=>typeof i=="string"?{[this.displayBy]:i,[this.identifyBy]:i}:i),this}setLoadingState(t){return this.tagInput.isLoading=t,this}}return o.\u0275fac=function(t){return new(t||o)(I(ir))},o.\u0275cmp=N({type:o,selectors:[["tag-input-dropdown"]],contentQueries:function(t,i,n){if(t&1&&zt(n,po,4),t&2){let r;Y(r=G())&&(i.templates=r)}},viewQuery:function(t,i){if(t&1&&ie(Jn,5),t&2){let n;Y(n=G())&&(i.dropdown=n.first)}},hostBindings:function(t,i){t&1&&x("scroll",function(){return i.scrollListener()},!1,wt)("blur",function(){return i.onWindowBlur()},!1,wt)},inputs:{offset:"offset",focusFirstElement:"focusFirstElement",showDropdownIfEmpty:"showDropdownIfEmpty",autocompleteObservable:"autocompleteObservable",minimumTextLength:"minimumTextLength",limitItemsTo:"limitItemsTo",displayBy:"displayBy",identifyBy:"identifyBy",matchingFn:"matchingFn",appendToBody:"appendToBody",keepOpen:"keepOpen",dynamicUpdate:"dynamicUpdate",zIndex:"zIndex",autocompleteItems:"autocompleteItems"},standalone:!1,decls:3,vars:6,consts:[[3,"dynamicUpdate"],[3,"focusFirstElement","zIndex","appendToBody","offset"],[3,"value","ngSwitch",4,"ngFor","ngForOf"],[3,"value","ngSwitch"],[3,"innerHTML",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"innerHTML"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){t&1&&(s(0,"ng2-dropdown",0)(1,"ng2-dropdown-menu",1),F(2,lp,3,3,"ng2-menu-item",2),l()()),t&2&&(h("dynamicUpdate",i.dynamicUpdate),c(),h("focusFirstElement",i.focusFirstElement)("zIndex",i.zIndex)("appendToBody",i.appendToBody)("offset",i.offset),c(),h("ngForOf",i.items))},dependencies:[Jn,Qo,Ho,J,mo,uo,cr,Ri,hp],encapsulation:2}),o})(),Ip={provide:Dr,useExisting:tr(()=>to),multi:!0},to=(()=>{class o extends Sp{constructor(t,i){super(),this.renderer=t,this.dragProvider=i,this.separatorKeys=W.tagInput.separatorKeys,this.separatorKeyCodes=W.tagInput.separatorKeyCodes,this.placeholder=W.tagInput.placeholder,this.secondaryPlaceholder=W.tagInput.secondaryPlaceholder,this.maxItems=W.tagInput.maxItems,this.validators=W.tagInput.validators,this.asyncValidators=W.tagInput.asyncValidators,this.onlyFromAutocomplete=W.tagInput.onlyFromAutocomplete,this.errorMessages=W.tagInput.errorMessages,this.theme=W.tagInput.theme,this.onTextChangeDebounce=W.tagInput.onTextChangeDebounce,this.inputId=W.tagInput.inputId,this.inputClass=W.tagInput.inputClass,this.clearOnBlur=W.tagInput.clearOnBlur,this.hideForm=W.tagInput.hideForm,this.addOnBlur=W.tagInput.addOnBlur,this.addOnPaste=W.tagInput.addOnPaste,this.pasteSplitPattern=W.tagInput.pasteSplitPattern,this.blinkIfDupe=W.tagInput.blinkIfDupe,this.removable=W.tagInput.removable,this.editable=W.tagInput.editable,this.allowDupes=W.tagInput.allowDupes,this.modelAsStrings=W.tagInput.modelAsStrings,this.trimTags=W.tagInput.trimTags,this.ripple=W.tagInput.ripple,this.tabindex=W.tagInput.tabIndex,this.disable=W.tagInput.disable,this.dragZone=W.tagInput.dragZone,this.onRemoving=W.tagInput.onRemoving,this.onAdding=W.tagInput.onAdding,this.animationDuration=W.tagInput.animationDuration,this.onAdd=new $,this.onRemove=new $,this.onSelect=new $,this.onFocus=new $,this.onBlur=new $,this.onTextChange=new $,this.onPaste=new $,this.onValidationError=new $,this.onTagEdited=new $,this.isLoading=!1,this.listeners={[$o]:[],[_p]:[]},this.inputTextChange=new $,this.inputTextValue="",this.errors=[],this.appendTag=(n,r=this.items.length)=>{let a=this.items,d=this.modelAsStrings?n[this.identifyBy]:n;this.items=[...a.slice(0,r),d,...a.slice(r,a.length)]},this.createTag=n=>{let r=(a,d)=>typeof a=="string"?a.trim():a[d];return Qe(he({},typeof n!="string"?n:{}),{[this.displayBy]:this.trimTags?r(n,this.displayBy):n,[this.identifyBy]:this.trimTags?r(n,this.identifyBy):n})},this.isTagValid=(n,r=!1)=>{let a=this.dropdown?this.dropdown.selectedItem:void 0,d=this.getItemDisplay(n).trim();if(a&&!r||!d)return!1;let m=this.findDupe(n,r);if(!this.allowDupes&&m&&this.blinkIfDupe){let y=this.tags.find(S=>this.getItemValue(S.model)===this.getItemValue(m));y&&y.blink()}let u=r&&this.onlyFromAutocomplete,f=[!m||this.allowDupes,!this.maxItemsReached,u||!this.onlyFromAutocomplete];return f.filter(Boolean).length===f.length},this.onPasteCallback=n=>Zi(this,null,function*(){let a=(()=>{let u=!!window.clipboardData,f=u?window.clipboardData:n.clipboardData,y=u?"Text":"text/plain";return f===null?"":f.getData(y)||""})(),d=a.split(this.pasteSplitPattern).map(u=>{let f=this.createTag(u);return this.setInputValue(f[this.displayBy]),this.onAddingRequested(!1,f)}),m=()=>setTimeout(()=>this.setInputValue(""),50);Promise.all(d).then(()=>{this.onPaste.emit(a),m()}).catch(m)})}get inputText(){return this.inputTextValue}set inputText(t){this.inputTextValue=t,this.inputTextChange.emit(t)}get tabindexAttr(){return this.tabindex!==""?"-1":""}ngAfterViewInit(){this.setUpKeypressListeners(),this.setupSeparatorKeysListener(),this.setUpInputKeydownListeners(),this.onTextChange.observers.length&&this.setUpTextChangeSubscriber(),(this.clearOnBlur||this.addOnBlur)&&this.setUpOnBlurSubscriber(),this.addOnPaste&&this.setUpOnPasteListener();let t=this.inputForm.form.statusChanges;t.pipe(ot(i=>i!=="PENDING")).subscribe(()=>{this.errors=this.inputForm.getErrorMessages(this.errorMessages)}),this.isProgressBarVisible$=t.pipe(nt(i=>i==="PENDING"||this.isLoading)),this.hideForm&&this.inputForm.destroy()}ngOnInit(){this.maxItems!==void 0&&this.items&&this.items.length>this.maxItems&&(this.maxItems=this.items.length,console.warn(bp)),this.editable=this.onlyFromAutocomplete?!1:this.editable,this.setAnimationMetadata()}onRemoveRequested(t,i){return new Promise(n=>{let r=a=>{this.removeItem(a,i),n(t)};this.onRemoving?this.onRemoving(t).pipe(hi()).subscribe(r):r(t)})}onAddingRequested(t,i,n,r){return new Promise((a,d)=>{let m=u=>this.addItem(t,u,n,r).then(a).catch(d);return this.onAdding?this.onAdding(i).pipe(hi()).subscribe(m,d):m(i)})}selectItem(t,i=!0){t&&typeof t!="string"&&t.readonly||this.selectedTag===t||(this.selectedTag=t,i&&this.onSelect.emit(t))}fireEvents(t,i){this.listeners[t].forEach(n=>n.call(this,i))}handleKeydown(t){let i=t.event,n=i.keyCode||i.which,r=i.shiftKey||!1;switch(yp[n]){case Ot.DELETE:if(this.selectedTag&&this.removable){let a=this.items.indexOf(this.selectedTag);this.onRemoveRequested(this.selectedTag,a)}break;case Ot.SWITCH_PREV:this.moveToTag(t.model,Wo);break;case Ot.SWITCH_NEXT:this.moveToTag(t.model,eo);break;case Ot.TAB:if(r){if(this.isFirstTag(t.model))return;this.moveToTag(t.model,Wo)}else{if(this.isLastTag(t.model)&&(this.disable||this.maxItemsReached))return;this.moveToTag(t.model,eo)}break;default:return}i.preventDefault()}onFormSubmit(){return Zi(this,null,function*(){try{yield this.onAddingRequested(!1,this.formValue)}catch{return}})}setInputValue(t,i=!0){this.getControl().setValue(t,{emitEvent:i})}getControl(){return this.inputForm.value}focus(t=!1,i=!1){this.dragProvider.getState("dragging")||(this.selectItem(void 0,!1),t&&(this.inputForm.focus(),this.onFocus.emit(this.formValue)))}blur(){this.onTouched(),this.onBlur.emit(this.formValue)}hasErrors(){return!!this.inputForm&&this.inputForm.hasErrors()}isInputFocused(){return!!this.inputForm&&this.inputForm.isInputFocused()}hasCustomTemplate(){let t=this.templates?this.templates.first:void 0,i=this.dropdown&&this.dropdown.templates?this.dropdown.templates.first:void 0;return!!(t&&t!==i)}get maxItemsReached(){return this.maxItems!==void 0&&this.items.length>=this.maxItems}get formValue(){let t=this.inputForm.value;return t?t.value:""}onDragStarted(t,i,n){t.stopPropagation();let r={zone:this.dragZone,tag:i,index:n};this.dragProvider.setSender(this),this.dragProvider.setDraggedItem(t,r),this.dragProvider.setState({dragging:!0,index:n})}onDragOver(t,i){this.dragProvider.setState({dropping:!0}),this.dragProvider.setReceiver(this),t.preventDefault()}onTagDropped(t,i){let n=this.dragProvider.getDraggedItem(t);!n||n.zone!==this.dragZone||(this.dragProvider.onTagDropped(n.tag,n.index,i),t.preventDefault(),t.stopPropagation())}isDropping(){let t=this.dragProvider.receiver===this,i=this.dragProvider.getState("dropping");return!!(t&&i)}onTagBlurred(t,i){this.items[i]=t,this.blur()}trackBy(t,i){return i[this.identifyBy]}updateEditedTag(t){this.onTagEdited.emit(t)}moveToTag(t,i){let n=this.isLastTag(t),r=this.isFirstTag(t);if(i===eo&&n||i===Wo&&r){this.focus(!0);return}let d=i===eo?1:-1,m=this.getTagIndex(t)+d,u=this.getTagAtIndex(m);return u.select.call(u)}isFirstTag(t){return this.tags.first.model===t}isLastTag(t){return this.tags.last.model===t}getTagIndex(t){return this.tags.toArray().findIndex(n=>n.model===t)}getTagAtIndex(t){return this.tags.toArray()[t]}removeItem(t,i){this.items=this.getItemsWithout(i),this.selectedTag===t&&this.selectItem(void 0,!1),this.focus(!0,!1),this.onRemove.emit(t)}addItem(t=!1,i,n,r){let a=this.getItemDisplay(i),d=this.createTag(i);return t&&this.setInputValue(this.getItemValue(i,!0)),new Promise((m,u)=>{let f=()=>{this.setInputValue(""),r?this.focus(!1,!1):this.focus(!0,!1),m(a)},y=()=>{this.appendTag(d,n),this.onAdd.emit(d),this.dropdown&&(this.dropdown.hide(),this.dropdown.showDropdownIfEmpty&&this.dropdown.show())},S=this.inputForm.form.status,C=this.isTagValid(d,t),w=()=>(this.onValidationError.emit(d),u());if(S==="VALID"&&C)return y(),f();if(S==="INVALID"||!C)return f(),w();if(S==="PENDING")return this.inputForm.form.statusChanges.pipe(ot(P=>P!=="PENDING"),hi()).subscribe(P=>P==="VALID"&&C?(y(),f()):(f(),w()))})}setupSeparatorKeysListener(){let t=this.separatorKeyCodes.length>0||this.separatorKeys.length>0,i=n=>{let r=this.separatorKeyCodes.indexOf(n.keyCode)>=0,a=this.separatorKeys.indexOf(n.key)>=0,d=n.keyCode===229;(r||a&&!d)&&(n.preventDefault(),this.onAddingRequested(!1,this.formValue).catch(()=>{}))};ka.call(this,$o,i,t)}setUpKeypressListeners(){let t=i=>{(i.keyCode===37||i.keyCode===8)&&!this.formValue&&this.items.length&&this.tags.last.select.call(this.tags.last)};ka.call(this,$o,t)}setUpInputKeydownListeners(){this.inputForm.onKeydown.subscribe(t=>{t.key==="Backspace"&&this.formValue.trim()===""&&t.preventDefault()})}setUpOnPasteListener(){let t=this.inputForm.input.nativeElement;this.renderer.listen(t,"paste",i=>(this.onPasteCallback(i),i.preventDefault(),!0))}setUpTextChangeSubscriber(){this.inputForm.form.valueChanges.pipe(Di(this.onTextChangeDebounce)).subscribe(t=>{this.onTextChange.emit(t.item)})}setUpOnBlurSubscriber(){let t=()=>!(this.dropdown&&this.dropdown.isVisible)&&!!this.formValue;this.inputForm.onBlur.pipe(Di(100),ot(t)).subscribe(()=>{let i=()=>this.setInputValue("");if(this.addOnBlur)return this.onAddingRequested(!1,this.formValue,void 0,!0).then(i).catch(i);i()})}findDupe(t,i){let n=i?this.dropdown.identifyBy:this.identifyBy,r=t[n];return this.items.find(a=>this.getItemValue(a)===r)}setAnimationMetadata(){this.animationMetadata={value:"in",params:he({},this.animationDuration)}}}return o.\u0275fac=function(t){return new(t||o)(I(de),I(Na))},o.\u0275cmp=N({type:o,selectors:[["tag-input"]],contentQueries:function(t,i,n){if(t&1&&(zt(n,Zo,5),zt(n,po,4)),t&2){let r;Y(r=G())&&(i.dropdown=r.first),Y(r=G())&&(i.templates=r)}},viewQuery:function(t,i){if(t&1&&(ie(Aa,5),ie(za,5)),t&2){let n;Y(n=G())&&(i.inputForm=n.first),Y(n=G())&&(i.tags=n)}},hostVars:1,hostBindings:function(t,i){t&2&&Ft("tabindex",i.tabindexAttr)},inputs:{separatorKeys:"separatorKeys",separatorKeyCodes:"separatorKeyCodes",placeholder:"placeholder",secondaryPlaceholder:"secondaryPlaceholder",maxItems:"maxItems",validators:"validators",asyncValidators:"asyncValidators",onlyFromAutocomplete:"onlyFromAutocomplete",errorMessages:"errorMessages",theme:"theme",onTextChangeDebounce:"onTextChangeDebounce",inputId:"inputId",inputClass:"inputClass",clearOnBlur:"clearOnBlur",hideForm:"hideForm",addOnBlur:"addOnBlur",addOnPaste:"addOnPaste",pasteSplitPattern:"pasteSplitPattern",blinkIfDupe:"blinkIfDupe",removable:"removable",editable:"editable",allowDupes:"allowDupes",modelAsStrings:"modelAsStrings",trimTags:"trimTags",inputText:"inputText",ripple:"ripple",tabindex:"tabindex",disable:"disable",dragZone:"dragZone",onRemoving:"onRemoving",onAdding:"onAdding",animationDuration:"animationDuration"},outputs:{onAdd:"onAdd",onRemove:"onRemove",onSelect:"onSelect",onFocus:"onFocus",onBlur:"onBlur",onTextChange:"onTextChange",onPaste:"onPaste",onValidationError:"onValidationError",onTagEdited:"onTagEdited",inputTextChange:"inputTextChange"},standalone:!1,features:[Ji([Ip]),ar],ngContentSelectors:cp,decls:8,vars:27,consts:[[1,"ng2-tag-input",3,"click","drop","dragenter","dragover","dragend","ngClass"],[1,"ng2-tags-container"],[3,"draggable","canAddTag","disabled","hasRipple","index","removable","editable","displayBy","identifyBy","template","model","onSelect","onRemove","onKeyDown","onTagEdited","onBlur","dragstart","drop","dragenter","dragover","dragleave",4,"ngFor","ngForOf","ngForTrackBy"],[3,"onSubmit","onBlur","click","onKeydown","onKeyup","inputText","disabled","validators","asyncValidators","hidden","placeholder","inputClass","inputId","tabindex"],["class","progress-bar",4,"ngIf"],["class","error-messages",3,"ngClass",4,"ngIf"],[3,"onSelect","onRemove","onKeyDown","onTagEdited","onBlur","dragstart","drop","dragenter","dragover","dragleave","draggable","canAddTag","disabled","hasRipple","index","removable","editable","displayBy","identifyBy","template","model"],[1,"progress-bar"],[1,"error-messages",3,"ngClass"],["class","error-message",4,"ngFor","ngForOf"],[1,"error-message"]],template:function(t,i){t&1&&(ii(),s(0,"div",0),x("click",function(){return i.focus(!0,!1)})("drop",function(r){return i.dragZone?i.onTagDropped(r,void 0):void 0})("dragenter",function(r){return i.dragZone?i.onDragOver(r):void 0})("dragover",function(r){return i.dragZone?i.onDragOver(r):void 0})("dragend",function(){return i.dragZone?i.dragProvider.onDragEnd():void 0}),s(1,"div",1),F(2,dp,1,14,"tag",2),s(3,"tag-input-form",3),x("onSubmit",function(){return i.onFormSubmit()})("onBlur",function(){return i.blur()})("click",function(){return i.dropdown?i.dropdown.show():void 0})("onKeydown",function(r){return i.fireEvents("keydown",r)})("onKeyup",function(r){return i.fireEvents("keyup",r)}),l()(),F(4,pp,1,0,"div",4),j(5,"async"),l(),F(6,up,2,2,"div",5),Rt(7)),t&2&&(k("ng2-tag-input--dropping",i.isDropping())("ng2-tag-input--disabled",i.disable)("ng2-tag-input--loading",i.isLoading)("ng2-tag-input--invalid",i.hasErrors())("ng2-tag-input--focused",i.isInputFocused()),h("ngClass",i.theme),Ft("tabindex",-1),c(2),h("ngForOf",i.items)("ngForTrackBy",i.trackBy),c(),h("inputText",i.inputText)("disabled",i.disable)("validators",i.validators)("asyncValidators",i.asyncValidators)("hidden",i.maxItemsReached)("placeholder",i.items.length?i.placeholder:i.secondaryPlaceholder)("inputClass",i.inputClass)("inputId",i.inputId)("tabindex",i.tabindex),c(),h("ngIf",Q(5,25,i.isProgressBarVisible$)),c(2),h("ngIf",i.hasErrors()))},dependencies:[za,Aa,at,J,Z,dr],styles:['.dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 1px #323232}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]{background-color:#fff;display:inline-block;color:#555;vertical-align:middle;max-width:100%;height:42px;line-height:44px}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;box-shadow:none;outline:none;background-color:transparent;padding:0 6px;margin:0;width:auto;max-width:inherit}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#777;opacity:1}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#777}.ng2-tag-input.bootstrap3-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:none;box-shadow:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #0006;border:1px solid #ccc}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{box-shadow:inset 0 1px 1px #d9534f}.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;transition:all .25s;padding:.25rem 0;min-height:32px;cursor:text;border-bottom:2px solid #efefef}.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #2196F3}.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #f44336}.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.minimal.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:1px solid transparent}.minimal.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.minimal.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.minimal.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.minimal.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.minimal.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.dark.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #444}.dark.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.dark.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.dark.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.dark.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.dark.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;cursor:text;border-bottom:2px solid #efefef}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap.ng2-tag-input.ng2-tag-input--focused[_ngcontent-%COMP%]{border-bottom:2px solid #0275d8}.bootstrap.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:2px solid #d9534f}.bootstrap.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]{display:block;flex-direction:row;flex-wrap:wrap;position:relative;padding:4px;cursor:text;box-shadow:inset 0 1px 1px #00000013;border-radius:4px}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]:focus{outline:0}.bootstrap3-info.ng2-tag-input.ng2-tag-input--dropping[_ngcontent-%COMP%]{opacity:.7}.bootstrap3-info.ng2-tag-input.ng2-tag-input--invalid[_ngcontent-%COMP%]{border-bottom:1px solid #d9534f}.bootstrap3-info.ng2-tag-input.ng2-tag-input--loading[_ngcontent-%COMP%]{border:none}.bootstrap3-info.ng2-tag-input.ng2-tag-input--disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:.1em 0}.bootstrap3-info.ng2-tag-input[_ngcontent-%COMP%]   .ng2-tags-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex}.error-message[_ngcontent-%COMP%]{font-size:.8em;color:#f44336;margin:.5em 0 0}.bootstrap[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d9534f}.progress-bar[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%]:before{height:2px;width:100%;margin:0}.progress-bar[_ngcontent-%COMP%]{background-color:#2196f3;display:flex;position:absolute;bottom:0}.progress-bar[_ngcontent-%COMP%]:before{background-color:#82c4f8;content:"";-webkit-animation:_ngcontent-%COMP%_running-progress 2s cubic-bezier(.4,0,.2,1) infinite;animation:_ngcontent-%COMP%_running-progress 2s cubic-bezier(.4,0,.2,1) infinite}@-webkit-keyframes _ngcontent-%COMP%_running-progress{0%{margin-left:0;margin-right:100%}50%{margin-left:25%;margin-right:0}to{margin-left:100%;margin-right:0}}@keyframes _ngcontent-%COMP%_running-progress{0%{margin-left:0;margin-right:100%}50%{margin-left:25%;margin-right:0}to{margin-left:100%;margin-right:0}}tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;font-family:Roboto,Helvetica Neue,sans-serif;font-weight:400;font-size:1em;letter-spacing:.05rem;color:#444;border-radius:16px;transition:all .3s;margin:.1rem .3rem .1rem 0;padding:.08rem .45rem;height:32px;line-height:34px;background:#efefef;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;outline:0;cursor:pointer;position:relative}tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):focus{background:#2196F3;color:#fff;box-shadow:0 2px 3px 1px #d4d1d1}tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):active{background:#0d8aee;color:#fff;box-shadow:0 2px 3px 1px #d4d1d1}tag[_ngcontent-%COMP%]:not(:focus):not(.tag--editing):not(:active):not(.readonly):hover{background:#e2e2e2;color:#000;color:initial;box-shadow:0 2px 3px 1px #d4d1d1}tag.readonly[_ngcontent-%COMP%]{cursor:default}tag.readonly[_ngcontent-%COMP%]:focus, tag[_ngcontent-%COMP%]:focus{outline:0}tag.tag--editing[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;cursor:text}.minimal[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;border-radius:0;background:#f9f9f9;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;outline:0;cursor:pointer;position:relative}.minimal[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):focus{background:#d0d0d0;color:#000;color:initial}.minimal[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):active{background:#d0d0d0;color:#000;color:initial}.minimal[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(:focus):not(.tag--editing):not(:active):not(.readonly):hover{background:#ececec}.minimal[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]{cursor:default}.minimal[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]:focus, .minimal[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{outline:0}.minimal[_ngcontent-%COMP%]   tag.tag--editing[_ngcontent-%COMP%]{cursor:text}.dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;color:#f9f9f9;border-radius:3px;background:#444;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;outline:0;cursor:pointer;position:relative}.dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):focus{background:#efefef;color:#444}.dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(:focus):not(.tag--editing):not(:active):not(.readonly):hover{background:#2b2b2b;color:#f9f9f9}.dark[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]{cursor:default}.dark[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]:focus, .dark[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{outline:0}.dark[_ngcontent-%COMP%]   tag.tag--editing[_ngcontent-%COMP%]{cursor:text}.bootstrap[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;color:#f9f9f9;border-radius:.25rem;background:#0275d8;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;outline:0;cursor:pointer;position:relative}.bootstrap[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):focus{background:#025aa5}.bootstrap[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):active{background:#025aa5}.bootstrap[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(:focus):not(.tag--editing):not(:active):not(.readonly):hover{background:#0267bf;color:#f9f9f9}.bootstrap[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]{cursor:default}.bootstrap[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]:focus, .bootstrap[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{outline:0}.bootstrap[_ngcontent-%COMP%]   tag.tag--editing[_ngcontent-%COMP%]{cursor:text}.bootstrap3-info[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;font-family:inherit;font-weight:400;font-size:95%;color:#fff;border-radius:.25em;background:#5bc0de;-webkit-user-select:none;-moz-user-select:none;user-select:none;overflow:hidden;outline:0;cursor:pointer;position:relative;padding:.25em .6em;text-align:center;white-space:nowrap}.bootstrap3-info[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):focus{background:#28a1c5}.bootstrap3-info[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(.readonly):not(.tag--editing):active{background:#28a1c5}.bootstrap3-info[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:not(:focus):not(.tag--editing):not(:active):not(.readonly):hover{background:#46b8da;color:#fff}.bootstrap3-info[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]{cursor:default}.bootstrap3-info[_ngcontent-%COMP%]   tag.readonly[_ngcontent-%COMP%]:focus, .bootstrap3-info[_ngcontent-%COMP%]   tag[_ngcontent-%COMP%]:focus{outline:0}.bootstrap3-info[_ngcontent-%COMP%]   tag.tag--editing[_ngcontent-%COMP%]{cursor:text}[_nghost-%COMP%]{display:block}'],data:{animation:Fp}}),o})(),Pp=new qo,La=(()=>{class o{static withDefaults(t){Pp.setOptions(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=Vt({type:o}),o.\u0275inj=kt({providers:[Na,{provide:kr,useValue:!1}],imports:[[ni,cn,ln,Ma]]}),o})();var Ep=o=>({"background-color":o});function jp(o,e){o&1&&(s(0,"div",33),p(1),j(2,"translate"),l()),o&2&&(c(),M(" ",Q(2,1,"RequieredField")," "))}function Mp(o,e){if(o&1){let t=O();s(0,"div",34),x("click",function(){let n=_(t).$implicit,r=g();return b(r.selectColor(n.catId))}),l()}if(o&2){let t=e.$implicit,i=g();k("selected",i.selectedColorId===t.catId),h("ngStyle",se(3,Ep,t.colorDegree))}}function Op(o,e){if(o&1&&(s(0,"div",35)(1,"h5"),p(2),j(3,"translate"),l(),s(4,"div",36),v(5,"img",37),j(6,"translate"),l()()),o&2){let t=g();c(2),M("",Q(3,3,"Folders.ImagePreview"),":"),c(3),q("alt",Q(6,5,"Folders.UploadedImage")),h("src",t.imagePreview,U)}}var Mi=class o{constructor(e,t,i,n,r){this.activeModal=e;this.translate=t;this.toastr=i;this.projectService=n;this.categoriesService=r}isSuccess=new $;projectId;parentId;folderForm;hasError=!1;isLoading=!1;isSubmittedItem=!1;selectedFile=null;imagePreview=null;selectedColorId=null;colors=[];tagsInput="";tags=[];isFetchingColors=!1;isFetchingTags=!1;subscriptions=[];ngOnInit(){this.fetchColors(),this.initializeForm()}initializeForm(){this.folderForm=new $t({title:new pe("",ai.required),brief:new pe(""),imageFile:new pe(null),parentId:new pe(this.parentId),projectId:new pe(this.projectId),typeId:new pe(11),type:new pe(0),isActive:new pe(!0),tags:new pe([])})}fetchColors(){if(this.isFetchingColors)return;this.isFetchingColors=!0;let e=this.categoriesService.fetchColors().subscribe(t=>{t&&(console.log("Project folders:",t),this.colors=t.data,console.log(this.colors)),this.isFetchingColors=!1});this.subscriptions.push(e)}selectColor(e){this.selectedColorId=e}requestAutocompleteItems=e=>!e||e.length<2?yt([]):this.projectService.fetchTags(e,1,5);submitFolder(){if(this.isSubmittedItem=!0,this.folderForm.invalid){this.folderForm.markAllAsTouched(),this.toastr.error(this.translate.instant("Folders.EnterValidData"));return}let e=new FormData;Object.keys(this.folderForm.controls).forEach(i=>{i=="tags"?this.folderForm.get(i)?.value.forEach(n=>{e.append(i,n?.display)}):e.append(i,this.folderForm.get(i)?.value)}),this.selectedFile&&e.append("imageFile",this.selectedFile,this.selectedFile.name),this.selectedColorId&&e.append("colorId",this.selectedColorId.toString());let t=this.projectService.createFolder(e).subscribe(i=>{i?(this.toastr.success(this.translate.instant("Folders.FolderAddedSuccessfully")),this.isSuccess.emit(!0),this.closeModal()):this.showError(this.translate.instant("Folders.FolderCreationFailed"))},i=>{console.error("Error creating folder:",i),this.showError(this.translate.instant("Folders.FolderCreationFailed"))});this.subscriptions.push(t)}showError(e){this.toastr.error(e)}closeModal(){this.activeModal.close()}onDragOver(e){e.preventDefault()}onFileChange(e){let t=e.target.files[0];if(t){this.selectedFile=t;let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(t)}}onDrop(e){e.preventDefault();let t=e.dataTransfer?.files;if(t&&t.length){this.selectedFile=t[0];let i=new FileReader;i.onload=n=>this.imagePreview=n.target?.result,i.readAsDataURL(this.selectedFile)}}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||o)(I(bi),I(le),I(oe),I(re),I(Je))};static \u0275cmp=N({type:o,selectors:[["app-folder-create"]],outputs:{isSuccess:"isSuccess"},standalone:!1,decls:67,vars:47,consts:[["imageFile",""],[1,"modal-header"],[1,"d-flex","mod-head","justify-content-between"],["id","addFolderModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","ms-2",3,"click"],[3,"ngSubmit","formGroup"],["id","parentId","formControlName","parentId","type","hidden"],["id","projectId","formControlName","projectId","type","hidden"],["id","typeId","formControlName","typeId","type","hidden"],["id","type","formControlName","type","type","hidden"],["id","isActive","formControlName","isActive","type","hidden"],[1,"modal-body"],[1,"row"],[1,"col-lg-12"],[1,"form-group"],["for","title"],["id","title","type","text","formControlName","title",1,"form-control",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],["for","brief"],["id","brief","formControlName","brief","rows","3",1,"form-control",3,"placeholder"],[1,"color-options"],[1,"color-swatch","not-determined",3,"click"],["class","color-swatch",3,"ngStyle","selected","click",4,"ngFor","ngForOf"],["for","tags"],["id","tags","formControlName","tags",3,"editable","placeholder","onTextChangeDebounce","secondaryPlaceholder","onlyFromAutocomplete"],[3,"autocompleteObservable","showDropdownIfEmpty","minimumTextLength","zIndex"],["for","imageFile"],[1,"fileset",3,"click","dragover","drop"],["src","assets/images/Upload.svg",3,"alt"],["id","imageFile","accept","image/*","formControlName","imageFile","type","file",2,"display","none",3,"change"],["class","image-preview d-flex align-items-center mt-2",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"],[1,"alert","alert-danger"],[1,"color-swatch",3,"click","ngStyle"],[1,"image-preview","d-flex","align-items-center","mt-2"],[1,"proj-img-holder","ms-3"],[3,"src","alt"]],template:function(t,i){if(t&1){let n=O();s(0,"div",1)(1,"div",2)(2,"h5",3),p(3),j(4,"translate"),l(),s(5,"div")(6,"button",4),x("click",function(){return _(n),b(i.closeModal())}),l()()()(),s(7,"form",5),x("ngSubmit",function(){return _(n),b(i.submitFolder())}),v(8,"input",6)(9,"input",7)(10,"input",8)(11,"input",9)(12,"input",10),s(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"label",15),p(18),j(19,"translate"),s(20,"em"),p(21,"*"),l()(),v(22,"input",16),j(23,"translate"),l(),F(24,jp,3,3,"div",17),l(),s(25,"div",13)(26,"div",14)(27,"label",18),p(28),j(29,"translate"),l(),v(30,"textarea",19),j(31,"translate"),l()(),s(32,"div",13)(33,"div",14)(34,"label"),p(35,"Select Color"),l(),s(36,"div",20)(37,"div",21),x("click",function(){return _(n),b(i.selectColor(null))}),l(),F(38,Mp,1,5,"div",22),l()()(),s(39,"div",13)(40,"div",14)(41,"label",23),p(42,"Tags"),l(),s(43,"tag-input",24),v(44,"tag-input-dropdown",25),l()()(),s(45,"div",13)(46,"div",14)(47,"label",26),p(48),j(49,"translate"),l(),s(50,"div",27),x("click",function(){_(n);let a=V(60);return b(a.click())})("dragover",function(a){return _(n),b(i.onDragOver(a))})("drop",function(a){return _(n),b(i.onDrop(a))}),v(51,"img",28),j(52,"translate"),s(53,"h4"),p(54),j(55,"translate"),l(),s(56,"p"),p(57),j(58,"translate"),l(),s(59,"input",29,0),x("change",function(a){return _(n),b(i.onFileChange(a))}),l()()()(),s(61,"div",13),F(62,Op,7,7,"div",30),l()(),s(63,"div",31)(64,"button",32),p(65),j(66,"translate"),l()()()()}if(t&2){let n;c(3),z(Q(4,27,"Folders.CreateFolder")),c(4),h("formGroup",i.folderForm),c(11),M("",Q(19,29,"Folders.FolderName")," "),c(4),It("placeholder","",Q(23,31,"Folders.WriteFolderNameHere"),"..."),c(2),h("ngIf",((n=i.folderForm.get("title"))==null?null:n.invalid)&&(i.isSubmittedItem||((n=i.folderForm.get("title"))==null?null:n.touched)||((n=i.folderForm.get("title"))==null?null:n.dirty))),c(4),z(Q(29,33,"Folders.Description")),c(2),It("placeholder","",Q(31,35,"Folders.WriteDescriptionHere"),"..."),c(7),k("selected",!i.selectedColorId),c(),h("ngForOf",i.colors),c(5),h("editable",!0)("placeholder","Enter a new tag")("onTextChangeDebounce",500)("secondaryPlaceholder","Search in tags")("onlyFromAutocomplete",!1),c(),h("autocompleteObservable",i.requestAutocompleteItems)("showDropdownIfEmpty",!0)("minimumTextLength",2)("zIndex",1e4),c(4),M(" ",Q(49,37,"Folders.AddPropjectPhoto"),""),c(3),q("alt",Q(52,39,"Upload")),c(3),z(Q(55,41,"Folders.DropImageHereOrBrowse")),c(3),z(Q(58,43,"Folders.PhotoInfo")),c(5),h("ngIf",i.imagePreview),c(3),M(" ",Q(66,45,"Save")," ")}},dependencies:[J,Z,tn,we,Le,Be,xe,qt,Zt,to,Zo,ut],encapsulation:2})};var io=class o{constructor(e){this.activeModal=e}title="";message="";static \u0275fac=function(t){return new(t||o)(I(bi))};static \u0275cmp=N({type:o,selectors:[["app-confirmation-dialog"]],inputs:{title:"title",message:"message"},standalone:!1,decls:11,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"h4",1),p(2),l()(),s(3,"div",2)(4,"p"),p(5),l()(),s(6,"div",3)(7,"button",4),x("click",function(){return i.activeModal.dismiss()}),p(8,"Cancel"),l(),s(9,"button",5),x("click",function(){return i.activeModal.close(!0)}),p(10,"Confirm"),l()()),t&2&&(c(2),z(i.title),c(3),z(i.message))},encapsulation:2})};var Dp=["load"],kp=["saveToLocalStorage"],Ap=["saveDetails"],Vp=["changeMapFile"];function Rp(o,e){if(o&1){let t=O();s(0,"button",103),x("click",function(){_(t);let n=g();return b(n.saveMap())}),p(1,"save"),l()}}function zp(o,e){if(o&1){let t=O();s(0,"button",104),x("click",function(){_(t);let n=g();return b(n.saveMap(!0))}),p(1,"Generate"),l()}if(o&2){let t=g();h("disabled",!t.isThereMapChanges)}}var Oi=class o{constructor(e,t,i,n,r){this.projectService=e;this.modalService=t;this.toaster=i;this.router=n;this.translate=r}projectFolders=[];projectId=null;folderId=null;areaToOpen=null;save=new $;subscriptions=[];loadButton;saveToLocalStorage;saveDetails;changeMapFile;areasToAdd=[];areasToUpdate=[];foldersToDelete=[];isThereMapChanges=!1;isMapMode=!1;intervalId;ngOnInit(){this.loadStyles(),this.loadScripts()}ngAfterViewInit(){this.checkAreaToOpen()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}checkAreaToOpen(){this.intervalId=setInterval(()=>{this.areaToOpen&&(this.loadMap(),clearInterval(this.intervalId))},100)}loadStyles(){let e=document.createElement("link");e.rel="stylesheet",e.href="assets/css/map_main.css?v=1.7",document.head.appendChild(e)}loadScripts(){let e=document.createElement("script");e.src="assets/scripts/summerHTMLImageMapCreator.js?v=1.7",document.body.appendChild(e)}setupMapInteractions(){let e=document.querySelectorAll("#svg rect, #svg circle, #svg polygon"),t=document.getElementById("map-menu"),i=null;e.forEach(r=>{r.addEventListener("click",a=>{a.stopPropagation();let m=document.getElementById("svg").getBoundingClientRect();if(t.style.display="none",i=r,document.getElementById("image")?.classList.contains("edit"))return;var f=i.parentElement?.querySelector("[data-shape-id]")?.getAttribute("data-shape-id")??null;if(!this.projectFolders.find(P=>P.areaReference==f&&P.type==1))return;let S=a.clientX,C=a.clientY,w=t.offsetWidth,T=t.offsetHeight;t.style.top=`${C-m.top-T}px`,t.style.left=`${S-m.left-w}px`,t.style.display="block"})}),document.addEventListener("click",()=>{t.style.display="none",i=null}),document.getElementById("openOption").addEventListener("click",()=>{if(i){var r=i.parentElement?.querySelector("[data-shape-id]")?.getAttribute("data-shape-id")??null;let d=this.projectFolders.find(m=>m.areaReference==r);if(!d)return;this.router.navigate(["/projects/folder-details"],{queryParams:{id:d.folderId,projectId:d.projectId,fromParentMap:!0}})}t.style.display="none"})}loadMap(){this.areaToOpen&&(localStorage.setItem("SummerHTMLImageMapCreator",this.areaToOpen),this.setMapChanges()),this.loadButton.nativeElement.click(),setTimeout(()=>{this.setupMapInteractions()},2e3)}btnSaveToLocalStorage(){this.saveToLocalStorage.nativeElement.click(),this.setMapChanges()}saveMap(e=!1){this.btnSaveToLocalStorage(),setTimeout(()=>{let t=new FormData,i=localStorage.getItem("SummerHTMLImageMapCreator");if(i&&(this.folderId&&t.append("folderHtml",i??""),this.folderId||t.append("projectHtml",i??"")),this.folderId){let n=this.projectService.patchFolder(this.folderId??0,t).subscribe(r=>{r?(this.areaToOpen=i,e?this.generateAreasFolders():(this.save.emit({mapHtml:i,reloadFolders:!1}),this.toaster.success(this.translate.instant("Maps.MapSavedSuccessfully")))):this.showError(this.translate.instant("Maps.MapSaveFaild"))},r=>{console.error("Error saving map:",r),this.showError(this.translate.instant("Maps.MapSaveFaild"))});this.subscriptions.push(n)}else{let n=this.projectService.patchProject(this.projectId??0,t).subscribe(r=>{r?(this.areaToOpen=i,e?this.generateAreasFolders():(this.save.emit({mapHtml:i,reloadFolders:!1}),this.toaster.success(this.translate.instant("Maps.MapSavedSuccessfully")))):this.showError(this.translate.instant("Maps.MapSaveFaild"))},r=>{console.error("Error saving map:",r),this.showError(this.translate.instant("Maps.MapSaveFaild"))});this.subscriptions.push(n)}},500)}setMapChanges(){let e=JSON.parse(localStorage.getItem("SummerHTMLImageMapCreator")??""),t=this.projectFolders.map(n=>({folderId:n.folderId,areaReference:n.areaReference,title:n.title})),i=e?.areas?.map(n=>({id:n.attributes.id,title:n.attributes.title,desc:n.attributes.desc}))??[];this.areasToAdd=i.filter(n=>!t.some(r=>r.areaReference===n.id)&&n.title),this.areasToUpdate=i.filter(n=>t.some(r=>r.areaReference===n.id&&r.title!==n.title)),this.foldersToDelete=t.filter(n=>!i.some(r=>r.id===n.areaReference)),this.isThereMapChanges=this.areasToAdd.length>0||this.areasToUpdate.length>0||this.foldersToDelete.length>0}saveArea(){this.saveDetails.nativeElement.click()}generateAreasFolders(){if(JSON.parse(this.areaToOpen??"")){let t=[];this.setMapChanges(),this.areasToAdd.forEach(i=>{let n=new FormData;n.append("title",i.title),n.append("brief",i.desc),n.append("parentId",this.folderId?this.folderId.toString():""),n.append("projectId",this.projectId?.toString()??""),n.append("typeId","11"),n.append("type",1 .toString()),n.append("isActive","true"),n.append("areaReference",i.id);let r=this.projectService.createFolder(n);t.push(r)}),this.areasToUpdate.forEach(i=>{let n=this.projectFolders.find(d=>d.areaReference==i.id),r=new FormData;r.append("title",i.title),r.append("brief",i.desc),r.append("parentId",n?.parentId?.toString()??""),r.append("projectId",n?.projectId?.toString()??""),r.append("typeId",n?.typeId?.toString()??""),r.append("type",n?.type?.toString()??""),r.append("isActive",n?.isActive?.toString()??""),r.append("areaReference",i.id);let a=this.projectService.updateFolder(n?.folderId??0,r);t.push(a)}),this.foldersToDelete.forEach(i=>{let n=this.projectService.activateFolder(i?.folderId??0);t.push(n)}),t.length>0?dt(t).subscribe(i=>{i.forEach((n,r)=>{}),this.isThereMapChanges=!1,this.save.emit({mapHtml:this.areaToOpen,reloadFolders:!0}),this.toaster.success(this.translate.instant("Maps.MapSavedSuccessfully"))},i=>{console.error("Error creating folders:",i),this.showError(this.translate.instant("Folders.FolderCreationFailed"))}):(this.isThereMapChanges=!1,this.save.emit({mapHtml:this.areaToOpen,reloadFolders:!0}))}else this.showError(this.translate.instant("Maps.NoAreasToGenerate"))}changeImage(){if(this.areaToOpen){let e=this.modalService.open(io);e.componentInstance.title="Change Map Image",e.componentInstance.message=`All Map data will be deleted,
 Are you sure you want to continue?`,e.result.then(t=>{t&&this.changeMapFile.nativeElement.click()},t=>{})}else this.changeMapFile.nativeElement.click()}onChangeMapFileSelected=e=>{if(e.length===0)return;let t=e[0];if(!t.type.startsWith("image/")){alert("Please upload a valid image file.");return}let i=new FileReader;i.onload=n=>{let r=n.target?.result;this.areaToOpen=JSON.stringify({img:r}),this.loadMap()},i.readAsDataURL(t)};showError(e){this.toaster.error(e)}static \u0275fac=function(t){return new(t||o)(I(re),I(Fe),I(oe),I(Ne),I(le))};static \u0275cmp=N({type:o,selectors:[["app-map-details"]],viewQuery:function(t,i){if(t&1&&(ie(Dp,5),ie(kp,5),ie(Ap,5),ie(Vp,5)),t&2){let n;Y(n=G())&&(i.loadButton=n.first),Y(n=G())&&(i.saveToLocalStorage=n.first),Y(n=G())&&(i.saveDetails=n.first),Y(n=G())&&(i.changeMapFile=n.first)}},inputs:{projectFolders:"projectFolders",projectId:"projectId",folderId:"folderId",areaToOpen:"areaToOpen"},outputs:{save:"save"},standalone:!1,decls:238,vars:2,consts:[["saveToLocalStorage",""],["load",""],["changeMapFile",""],["saveDetails",""],[1,"upper","d-flex","flex-row"],["type","button","class","btn btn-primary me-2",3,"click",4,"ngIf"],["type","button","class","btn btn-primary",3,"disabled","click",4,"ngIf"],["id","save",2,"display","none"],["id","wrapper"],["id","image_wrapper"],[1,"relativee"],["id","header"],["id","nav",1,"clearfix"],[2,"display","none",3,"click"],["href","javascript:;"],["id","load",2,"display","none"],["id","from_html",2,"display","none"],["id","rectangle"],["href","javascript:;","title","Rectangle"],["src","./assets/images/rectangle.svg",2,"width","24px"],["id","circle"],["href","javascript:;","title","Circle"],["src","./assets/images/circle.svg",2,"width","24px"],["id","polygon"],["href","javascript:;","title","Polygon"],["src","./assets/images/polygon.svg",2,"width","24px"],["id","edit"],["href","javascript:;","title","Edit"],["src","./assets/images/edit.svg",2,"width","24px"],["id","to_html",2,"display","none"],["id","preview",2,"display","none"],["id","clear",2,"display","none"],["href","javascript:;","title","New image",3,"click"],["src","./assets/images/image-pen.svg",2,"width","24px"],["id","new_image",2,"display","none"],["id","show_help",2,"display","none"],["type","file","accept","image/*",1,"form-control",2,"display","none",3,"change"],["id","coords"],["id","debug"],["id","main-w"],["id","image"],["src","","alt","#","id","img"],["xmlns","http://www.w3.org/2000/svg","version","1.2","baseProfile","tiny","id","svg"],["id","map-menu",1,"map-menu","dropdown-menu",2,"padding","1px","width","100px","min-width","100px"],["href","javascript:;","id","openOption",1,"dropdown-item","ai-icon"],["id","code"],["title","close",1,"close_button"],["id","code_content"],["id","edit_details",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","rectangleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","close_button"],["src","./assets/images/close.svg","alt",""],[1,"modal-body"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],["type","text","id","title_attr","placeholder","title",1,"form-control"],["type","hidden","id","id_attr"],["type","text","id","href_attr","placeholder","Href",1,"form-control"],[1,"col-lg-12"],["id","desc_attr","placeholder","description",1,"form-control"],["type","text","id","alt_attr","placeholder","alt",1,"form-control",2,"display","none"],[1,"modal-footer","d-flex","justify-content-end"],["id","save_details","type","button",2,"display","none"],["type","button",1,"btn","btn-primary","mt-1",3,"click"],["id","from_html_wrapper"],["id","from_html_form"],["for","code_input"],["id","code_input"],["id","load_code_button"],["id","get_image_wrapper"],[1,"container",2,"display","none"],[1,"row","justify-content-center","align-items-center","h-100"],[1,"col-lg-4"],["id","get_image"],["id","logo_get_image"],["href",""],["src","./assets/images/logo.svg","alt","Summer html image map creator"],["id","loading"],["id","file_reader_support"],["id","dropzone"],["title","clear",1,"clear_button"],["src","","alt","preview","id","sm_img"],["for","url"],["id","url_wrapper"],["type","text","id","url",1,"form-control"],["id","button",1,"btn","btn-primary"],["id","overlay"],["id","help"],[1,"txt"],[1,"key"],["id","rectangleModal","tabindex","-1","aria-labelledby","rectangleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["type","text","placeholder","title",1,"form-control"],["placeholder","description",1,"form-control"],["for",""],["type","color","id","exampleColorInput","value","#563d7c","title","Choose your color",1,"form-control","form-control-color"],["type","file","placeholder","color",1,"form-control"],["type","button",1,"btn","btn-primary","me-3"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary","me-2",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(t,i){if(t&1){let n=O();s(0,"div",4),F(1,Rp,2,0,"button",5)(2,zp,2,1,"button",6),s(3,"button",7,0),p(5,"save"),l()(),s(6,"div",8)(7,"div",9)(8,"div",10)(9,"header",11)(10,"nav",12)(11,"ul")(12,"li",13),x("click",function(){return _(n),b(i.btnSaveToLocalStorage())}),s(13,"a",14),p(14,"save"),l()(),s(15,"li",15)(16,"a",14,1),p(18,"load"),l()(),s(19,"li",16)(20,"a",14),p(21,"from html"),l()(),s(22,"li",17)(23,"a",18),v(24,"img",19),l()(),s(25,"li",20)(26,"a",21),v(27,"img",22),l()(),s(28,"li",23)(29,"a",24),v(30,"img",25),l()(),s(31,"li",26)(32,"a",27),v(33,"img",28),l()(),s(34,"li",29)(35,"a",14),p(36,"to html"),l()(),s(37,"li",30)(38,"a",14),p(39,"preview"),l()(),s(40,"li",31)(41,"a",14),p(42,"clear"),l()(),s(43,"li")(44,"a",32),x("click",function(){return _(n),b(i.changeImage())}),v(45,"img",33),l()(),s(46,"li",34)(47,"a",14),p(48,"New image"),l()(),s(49,"li",35)(50,"a",14),p(51,"?"),l()()()(),s(52,"input",36,2),x("change",function(){_(n);let a=V(53);return b(i.onChangeMapFileSelected(a.files))}),l(),v(54,"div",37)(55,"div",38),l(),s(56,"div",39)(57,"div",40),v(58,"img",41),xt(),v(59,"svg",42),l(),ki(),s(60,"div",43)(61,"a",44)(62,"span"),p(63," Open "),l()()()()(),s(64,"div",45),v(65,"span",46)(66,"div",47),l(),s(67,"form",48)(68,"div",49)(69,"div",50)(70,"h5",51),p(71,"Part Info"),l(),s(72,"button",52),v(73,"img",53),l()(),s(74,"div",54)(75,"div",55)(76,"div",56)(77,"div",57)(78,"label"),p(79,"Part title"),l(),v(80,"input",58),l()(),v(81,"input",59),s(82,"div",56)(83,"div",57)(84,"label"),p(85,"Link"),l(),v(86,"input",60),l()(),s(87,"div",61)(88,"div",57)(89,"label"),p(90,"Part description"),l(),v(91,"textarea",62),l()(),v(92,"input",63),l()(),s(93,"div",64),v(94,"button",65,3),s(96,"button",66),x("click",function(){return _(n),b(i.saveArea())}),p(97,"Save"),l()()()(),s(98,"div",67)(99,"form",68)(100,"h5"),p(101,"Loading areas"),l(),v(102,"span",46),s(103,"p")(104,"label",69),p(105,"Enter your html code:"),l(),v(106,"textarea",70),l(),s(107,"button",71),p(108,"Load"),l()()(),s(109,"div",72)(110,"div",73)(111,"div",74)(112,"div",75)(113,"div",76),v(114,"span",46),s(115,"div",77)(116,"a",78),v(117,"img",79),l()(),s(118,"div",80),p(119,"Loading"),l(),s(120,"div",81)(121,"label"),p(122,"Drag an image"),l(),s(123,"div",82)(124,"span",83),p(125,"x"),l(),v(126,"img",84),l(),s(127,"b"),p(128,"or"),l()(),s(129,"label",85),p(130,"type a url"),l(),s(131,"span",86)(132,"span",83),p(133,"x"),l(),v(134,"input",87),l(),s(135,"button",88),p(136,"OK"),l()()()()()(),v(137,"div",89),s(138,"div",90),v(139,"span",46),s(140,"div",91)(141,"section")(142,"h2"),p(143,"Main"),l(),s(144,"p")(145,"span",92),p(146,"F5"),l(),p(147," \u2014 reload the page and display the form for loading image again"),l(),s(148,"p")(149,"span",92),p(150,"S"),l(),p(151," \u2014 save map params in localStorage"),l()(),s(152,"section")(153,"h2"),p(154,"Drawing mode (rectangle / circle / polygon)"),l(),s(155,"p")(156,"span",92),p(157,"ENTER"),l(),p(158," \u2014 stop polygon drawing (or click on first helper)"),l(),s(159,"p")(160,"span",92),p(161,"ESC"),l(),p(162," \u2014 cancel drawing of a new area"),l(),s(163,"p")(164,"span",92),p(165,"SHIFT"),l(),p(166," \u2014 square drawing in case of a rectangle and right angle drawing in case of a polygon "),l()(),s(167,"section")(168,"h2"),p(169,"Editing mode"),l(),s(170,"p")(171,"span",92),p(172,"DELETE"),l(),p(173," \u2014 remove a selected area"),l(),s(174,"p")(175,"span",92),p(176,"ESC"),l(),p(177," \u2014 cancel editing of a selected area"),l(),s(178,"p")(179,"span",92),p(180,"SHIFT"),l(),p(181," \u2014 edit and save proportions for rectangle"),l(),s(182,"p")(183,"span",92),p(184,"I"),l(),p(185," \u2014 edit attributes of a selected area (or dblclick on an area)"),l(),s(186,"p")(187,"span",92),p(188,"CTRL"),l(),p(189," + "),s(190,"span",92),p(191,"C"),l(),p(192," \u2014 a copy of the selected area"),l(),s(193,"p")(194,"span",92),p(195,"\u2191"),l(),p(196," \u2014 move a selected area up"),l(),s(197,"p")(198,"span",92),p(199,"\u2193"),l(),p(200," \u2014 move a selected area down"),l(),s(201,"p")(202,"span",92),p(203,"\u2190"),l(),p(204," \u2014 move a selected area to the left"),l(),s(205,"p")(206,"span",92),p(207,"\u2192"),l(),p(208," \u2014 move a selected area to the right"),l()()()(),s(209,"div",93)(210,"div",94)(211,"div",49)(212,"div",50)(213,"h5",51),p(214,"Part Info"),l(),v(215,"button",95),l(),s(216,"div",54)(217,"div",57)(218,"label"),p(219,"Part title"),l(),v(220,"input",96),l(),s(221,"div",57)(222,"label"),p(223,"Part description"),l(),v(224,"textarea",97),l(),s(225,"div",57)(226,"label",98),p(227,"Label color"),l(),v(228,"input",99),l(),s(229,"div",57)(230,"label",98),p(231,"Part image"),l(),v(232,"input",100),l()(),s(233,"div",64)(234,"button",101),p(235,"Submit"),l(),s(236,"button",102),p(237,"Close"),l()()()()()()()}t&2&&(c(),h("ngIf",i.areaToOpen),c(),h("ngIf",i.areaToOpen))},dependencies:[Z,we,xe,qe],styles:[".file-info.fixed[_ngcontent-%COMP%]{position:relative;top:20px}ul.select2-results__options[_ngcontent-%COMP%]{height:125px}.title-badge[_ngcontent-%COMP%]{fill:#00f!important;font-size:14px;font-weight:700;text-anchor:middle}.title-badge-container[_ngcontent-%COMP%]{stroke-width:3px!important;stroke:#ff0!important;fill:#ff0!important}.nav-tabs[_ngcontent-%COMP%]{justify-content:flex-start;margin-bottom:0!important;padding-bottom:0!important;border-bottom:0!important}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:15px 25px}#header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;width:50px}#header[_ngcontent-%COMP%]{width:69px;height:100%;position:absolute;left:0;top:0}#main-w[_ngcontent-%COMP%]{overflow:auto;height:calc(100vh - 18em);position:relative;display:block;margin:0 auto 0 69px}.map-menu[_ngcontent-%COMP%]{position:absolute;display:none;background:#fff;border:1px solid #ccc;padding:10px;z-index:10}.map-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.map-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 10px;cursor:pointer}.map-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#f0f0f0}"]})};var Np=["sidebar"],Lp=["dynamicContainer"],Bp=o=>({template1:o}),Up=o=>({"background-color":o}),Hp=()=>["/projects/folder-details"],Qp=(o,e)=>({id:o,projectId:e}),$p=o=>({fav:o});function Wp(o,e){o&1&&(s(0,"div"),p(1," File url is required "),l())}function qp(o,e){if(o&1&&(s(0,"div",68),F(1,Wp,2,0,"div",31),l()),o&2){g();let t=V(18);c(),h("ngIf",t==null||t.errors==null?null:t.errors.required)}}function Zp(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g();c(),M("",L(2,1,((t=i.project==null?null:i.project.filesSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function Xp(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g();c(),M("",L(2,1,((t=i.project==null?null:i.project.filesSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function Yp(o,e){if(o&1){let t=O();s(0,"div")(1,"button",69),v(2,"img",70),p(3,"Share "),l(),s(4,"button",71),x("click",function(){_(t);let n=g();return b(n.closeInfo())}),v(5,"img",72),p(6,"Information "),l()()}}function Gp(o,e){if(o&1){let t=O();s(0,"ul",73)(1,"li",74)(2,"button",75),x("click",function(){_(t);let n=g();return b(n.selectedTab="folders")}),v(3,"i",76),p(4," Folders "),l()(),s(5,"li",74)(6,"button",77),x("click",function(){_(t);let n=g();return b(n.selectedTab="map")}),v(7,"i",78),p(8," Map "),l()()()}if(o&2){let t=g();c(2),k("active",t.selectedTab=="folders"),c(4),k("active",t.selectedTab=="map")}}function Kp(o,e){if(o&1){let t=O();s(0,"a",37),x("click",function(){_(t),g();let n=V(59);return b(n.click())}),v(1,"img",38),s(2,"span",39),p(3,"Add Map"),l()()}}function Jp(o,e){if(o&1&&p(0),o&2){let t=e.data;M(" ",t==null?null:t.name," ")}}function em(o,e){if(o&1){let t=O();s(0,"div",79),x("click",function(){let n=_(t).$implicit,r=g();return b(r.selectColor(n.catId))}),l()}if(o&2){let t=e.$implicit,i=g();k("selected",i.selectedColorId===t.catId),h("ngStyle",se(3,Up,t.colorDegree))}}function tm(o,e){o&1&&(s(0,"span",49),p(1,"Sort"),l())}function im(o,e){o&1&&(s(0,"span",49),p(1,"Sort: Newest"),l())}function nm(o,e){o&1&&(s(0,"span",49),p(1,"Sort: Oldest"),l())}function om(o,e){o&1&&(s(0,"span",49),p(1,"Sort: Name Asc"),l())}function rm(o,e){o&1&&(s(0,"span",49),p(1,"Sort: Name Desc"),l())}function am(o,e){if(o&1&&v(0,"img",90),o&2){let t=g().$implicit;h("src",t.imageUrl,U)}}function sm(o,e){o&1&&v(0,"i",91)}function lm(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g().$implicit;c(),M("",L(2,1,((t=i.filesSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function cm(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g().$implicit;c(),M("",L(2,1,((t=i.filesSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function dm(o,e){if(o&1){let t=O();s(0,"div",80)(1,"div",81)(2,"a",82)(3,"div",83),F(4,am,1,1,"img",84)(5,sm,1,0,"i",85),l()(),s(6,"div",86)(7,"div")(8,"span",87),p(9),j(10,"slice"),j(11,"slice"),l()(),s(12,"div")(13,"div",88),x("click",function(){let n=_(t).$implicit,r=g();return b(r.favoriteFolder(n==null?null:n.folderId))}),v(14,"i",89),l()()(),s(15,"div",30)(16,"span"),F(17,lm,3,4,"span")(18,cm,3,4,"span"),p(19),l()()()()}if(o&2){let t,i,n,r=e.$implicit,a=g();c(2),h("routerLink",R(22,Hp))("queryParams",$e(23,Qp,r.folderId,r.projectId)),c(),pt("background",a.getColor(r.colorId)?"linear-gradient(0deg, rgba(58,81,100,1) 21%, "+a.getColor(r.colorId)+" 100%)":"#3A5164")("border-bottom",r.imageUrl?"7px solid "+a.getColor(r.colorId):"none"),k("map-related",r.areaReference),c(),h("ngIf",r.imageUrl),c(),h("ngIf",r.areaReference),c(3),h("title",r.title),c(),M(" ",((t=r.title)!==null&&t!==void 0?t:"").length>20?ze(10,15,r.title,0,16)+"..."+L(11,19,r.title,-4):r.title," "),c(4),h("ngClass",se(26,$p,r.isFavByUser)),c(4),K(((i=r.filesSize)!==null&&i!==void 0?i:0)>1?17:18),c(2),M(" | ",(n=r.filesNum)!==null&&n!==void 0?n:0," items ")}}function pm(o,e){if(o&1){let t=O();s(0,"div",80)(1,"app-file-card",92),x("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))})("favorite",function(n){_(t);let r=g();return b(r.favorite(n))})("rename",function(n){_(t);let r=g();return b(r.rename(n))})("archive",function(n){_(t);let r=g();return b(r.archive(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index;c(),h("card",t)("index",i)}}var no=class o{constructor(e,t,i,n,r,a,d,m,u,f,y,S,C){this.route=e;this.renderer=t;this.projectCoverService=i;this.fileUploadService=n;this.projectService=r;this.modalService=a;this.router=d;this.toaster=m;this.translate=u;this.resolver=f;this.el=y;this.uploadService=S;this.categoriesService=C;this.route.queryParams.subscribe(w=>{this.projectId=w.id})}sidebar;container;mapComponentRef=null;projectFileQuery;projectFolderQuery;active=1;uploads=[];projectFolders=[];projectFiles=[];isUpload=!1;count=0;bootstrap;colors=[];tagsInput="";tags=[];isFetchingColors=!1;isFetchingTags=!1;subscriptions=[];projectId;project;isFetching=!1;isFetchingProjects=!1;isFetchingFiles=!1;extFile="";selectedFile;selectedProject;selectedSortField=null;currentPage;selectedColorId=null;tagsItems;areaToOpen=null;selectedTab="folders";ngOnInit(){ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.projectFolderQuery=new Ke,this.projectFolderQuery.projectId=this.projectId,this.projectFolderQuery.parentId=null,this.projectFolderQuery.sortOrder=null,this.projectFolderQuery.pageNumber=1,this.projectFolderQuery.pageSize=1e3,this.projectFolderQuery.FavUserId=null,this.projectFolderQuery.isActive=!0,this.projectFolderQuery.showCurrentUserFav=!0,this.projectFolderQuery.type=null,this.projectFileQuery=new Pe,this.projectFileQuery.projectId=this.projectId,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,this.fetchProject(this.projectId),this.fetchProjectFolders(),this.fetchProjectFiles(this.projectId),this.fetchColors(),this.getTags()}handleMapSave(e){this.project.projectHtml=e.mapHtml,this.areaToOpen=this.project.projectHtml,this.isAreaLoaded=!0,e.reloadFolders&&(this.fetchProjectFolders(),this.fetchProjectFiles(this.projectId))}isAreaLoaded=!1;fetchProject(e){if(!e||this.isFetching)return;this.isFetching=!0,this.areaToOpen=null,this.selectedTab="folders",this.project=new Yn;let t=this.projectService.fetchProject(e).subscribe(i=>{i&&(this.project=i,this.project?.projectHtml&&(this.areaToOpen=this.project.projectHtml,this.isAreaLoaded=!0,this.loadMap()),this.project?.imageUrl&&setTimeout(()=>{this.projectCoverService.setSource(this.project?.imageUrl??""),this.projectCoverService.setShow(!0)})),this.isFetching=!1});this.subscriptions.push(t)}isFoldersLoaded=!1;fetchProjectFolders(){if(!this.projectFolderQuery.projectId||this.isFetchingProjects)return;this.isFetchingProjects=!0;let e=this.projectService.fetchProjectFolders(this.projectFolderQuery).subscribe(t=>{t&&(console.log("Project folders:",t),this.currentPage=t.currentPage,this.projectFolders=t,this.isFoldersLoaded=!0,this.loadMap()),this.isFetchingProjects=!1});this.subscriptions.push(e)}fetchProjectFiles(e){if(!e||this.isFetchingFiles)return;this.isFetchingFiles=!0;let t=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(i=>{i&&(this.projectFiles=i,console.log(this.projectFiles)),this.isFetchingFiles=!1});this.subscriptions.push(t)}orderFoldersBy(e){this.currentPage=1,this.projectFolderQuery.sortOrder=e,this.fetchProjectFolders()}selectColor(e){this.selectedColorId=e,this.projectFolderQuery.colorId=e,this.fetchProjectFolders()}fetchColors(){if(this.isFetchingColors)return;this.isFetchingColors=!0;let e=this.categoriesService.fetchColors().subscribe(t=>{t&&(this.colors=t.data),this.isFetchingColors=!1});this.subscriptions.push(e)}getColor(e){let t=this.colors.find(i=>i.catId===e);return t?t.colorDegree:null}getTags(){this.projectService.showTags().subscribe(e=>{console.log("tags",e),this.tagsItems=[{options:(e||[]).map(t=>({value:t.title,label:t.title,id:t.tagId.toString(),data:{name:t.title},templateId:"template1",templateSelectionId:"template1Selection"}))}]})}selectedTags;update(e){console.log("update event fired",e,new Error().stack);let t=(e.options||[]).map(i=>i.id);console.log("Selected option IDs:",t),t.forEach(i=>{this.projectFolderQuery.TagIDs=i}),this.fetchProjectFolders()}selectTag(){console.log(this.tags),this.fetchProjectFolders()}onTypeSelect(e){console.log("Selected type:",e)}onPeopleSelect(e){console.log("Selected person:",e)}onModifiedSelect(e){console.log("Selected modified:",e)}shownInfo=!1;showInfo(e){this.selectedFile=e,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let t=new FormData;t.append("isOpen","true"),t.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,t).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles(this.projectId))}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}favorite(e){console.log(e),this.projectService.setFavourite(e).subscribe(t=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully"));let i=this.projectFiles.find(n=>n.fileId==e);i&&(i.isFavByUser=!i?.isFavByUser)})}rename(e){let t=this.projectFiles.find(i=>i.fileId===e.fileId);t&&(t.title=e.filename)}archive(e){this.projectFiles=this.projectFiles.filter(t=>t.fileId!==e)}favoriteFolder(e){console.log(e),this.projectService.setFavouriteFolder(e).subscribe(t=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully"));let i=this.projectFolders.find(n=>n.folderId==e);i&&(i.isFavByUser=!i?.isFavByUser),this.fetchProjectFolders()})}onMapFileSelected=e=>{if(e.length===0)return;let t=e[0];if(!t.type.startsWith("image/")){alert("Please upload a valid image file.");return}let i=new FileReader;i.onload=n=>{let r=n.target?.result,a=new FormData,d=JSON.stringify({img:r});a.append("projectHtml",d);let m=this.projectService.patchProject(this.projectId??0,a).subscribe(u=>{u?(this.project.projectHtml=d,this.areaToOpen=d,this.isAreaLoaded=!0,this.loadMap(),this.selectedTab="map",this.toaster.success(this.translate.instant("Maps.MapSavedSuccessfully"))):console.error(this.translate.instant("Maps.MapSaveFaild"))},u=>{console.error("Error saving map:",u)});this.subscriptions.push(m)},i.readAsDataURL(t)};externalUpload(){let e=new FormData,t=new File([this.extFile],this.extFile,{type:"text/plain"});e.append("Title",t.name);let i=this.getFileType(t);i!==null&&e.append("fileType",i.toString()),e.append("isActive","true"),e.append("TypeId","12"),e.append("projectId",this.projectId?.toString()??""),e.append("folderId",""),e.append("ExternalFileUrl",this.extFile),console.log("formData",e),this.projectService.createFile1(e).subscribe(n=>{n&&(console.log("Upload complete for",n),this.closeProjectUploadModal(),this.fetchProjectFiles(this.projectId))})}onFilesSelected=e=>{if(e.length===0)return;this.uploads=[],this.isUpload=!0,this.count=e.length;let t=[];for(let i=0;i<e.length;i++){let n=e[i],r=this.uploadService.startUpload(n.name),a=new FormData;a.append("fileFile",n,n.name);let d=this.getFileType(n);d!==null&&a.append("fileType",d.toString()),a.append("Title",n.name),a.append("isActive","true"),a.append("TypeId","12"),a.append("projectId",this.projectId?.toString()??""),a.append("folderId","");let m={fileName:n.name,progress:0};this.uploads.push(m);let u=this.projectService.createFile(a).pipe(gi(f=>{f.type===Ht.UploadProgress?f.total&&(m.progress=Math.round(100*f.loaded/f.total),this.uploadService.updateProgress(r,m.progress)):f.type===Ht.Response&&(m.progress=100,this.uploadService.updateProgress(r,m.progress),console.log("Upload complete for",m.fileName,f.body),this.fetchProjectFiles(this.projectId))}));t.push(u)}dt(t).subscribe({next:i=>{console.log("All uploads completed!",i),setTimeout(()=>{this.isUpload=!1,this.closeProjectUploadModal()},3e3)},error:i=>{console.error("Error during file upload:",i),this.isUpload=!1}})};getFileType(e){switch(e.name.split(".").pop()?.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":return 0;case"mp4":case"avi":return 1;case"pdf":return 2;case"doc":case"docx":return 3;case"xls":case"xlsx":return 4;case"ppt":case"pptx":return 5;case"txt":return 6;case"zip":return 7;default:return null}}modalInstance;ngAfterViewInit(){this.displayMapComponent();let e=document.getElementById("projectUploadModal");if(e){let t=window.bootstrap;this.modalInstance=new t.Modal(e)}setTimeout(()=>this.checkScroll(),0)}closeProjectUploadModal(){this.modalInstance?.hide()}openAddFolderModal(){let e=this.modalService.open(Mi,{backdrop:"static",keyboard:!1});e.componentInstance.projectId=this.projectId,e.componentInstance.parentId="";let t=e.componentInstance.isSuccess.subscribe(i=>{i&&this.fetchProjectFolders()});this.subscriptions.push(t)}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close(),setTimeout(()=>{this.projectCoverService.setShow(!1)}),this.subscriptions.forEach(e=>e.unsubscribe())}isFixed=!1;longList=Array.from({length:100},(e,t)=>`Item ${t+1}`);onWindowScroll(){this.checkScroll()}checkScroll(){}displayMapComponent(){if(!this.container)return;let e=this.resolver.resolveComponentFactory(Oi);this.mapComponentRef=this.container.createComponent(e),this.mapComponentRef.instance.projectId=this.projectId,this.mapComponentRef.instance.folderId=null,this.mapComponentRef.instance.projectFolders=this.projectFolders,this.mapComponentRef.instance.areaToOpen=this.areaToOpen,this.mapComponentRef.instance.save.subscribe(t=>{this.handleMapSave(t)})}loadMap(){this.isAreaLoaded&&this.isFoldersLoaded&&this.mapComponentRef&&(this.mapComponentRef.instance.projectFolders=this.projectFolders,this.mapComponentRef.instance.areaToOpen=this.areaToOpen,this.mapComponentRef.instance.loadMap())}static \u0275fac=function(t){return new(t||o)(I(mt),I(de),I(ft),I(Te),I(re),I(Fe),I(Ne),I(oe),I(le),I(Gi),I(me),I(yi),I(Je))};static \u0275cmp=N({type:o,selectors:[["app-project-details"]],viewQuery:function(t,i){if(t&1&&(ie(Np,5),ie(Lp,5,Ki)),t&2){let n;Y(n=G())&&(i.sidebar=n.first),Y(n=G())&&(i.container=n.first)}},hostBindings:function(t,i){t&1&&x("scroll",function(){return i.onWindowScroll()},!1,wt)},standalone:!1,decls:129,vars:53,consts:[["extFileForm","ngForm"],["extFile1","ngModel"],["mapFile",""],["file",""],["template1",""],["dynamicContainer",""],["sidebar",""],[1,"row","home-layout"],[1,"col"],["id","projectUploadModal","tabindex","-1","aria-labelledby","projectUploadModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"d-flex","mod-head","justify-content-between"],["id","projectUploadModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","ms-2"],[1,"modal-body"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for",""],["type","text","placeholder","Files url","id","extFile","name","extFile","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger","ms-3"],[1,"relativee"],["id","sticky-start"],[1,"main-top"],[1,"row"],[1,"col-lg-8","d-flex","justify-content-between","heady"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"col-lg-4","d-flex","justify-content-end"],["class","nav nav-tabs","id","myTab","role","tablist",4,"ngIf"],["id","myTabContent",1,"tab-content"],["id","folder-tab-pane","role","tabpanel","aria-labelledby","folder-tab","tabindex","0",1,"tab-pane","fade"],[1,"upper","d-flex","flex-row"],[1,"upload-btn",3,"click"],["src","assets/icons/plus.svg","alt",""],[1,"pt-3"],["data-bs-toggle","modal","data-bs-target","#projectUploadModal",1,"upload-btn"],["class","upload-btn",3,"click",4,"ngIf"],["type","file","accept","image/*",1,"form-control",2,"display","none",3,"change"],["type","file","placeholder","Choose file","multiple","",1,"form-control",2,"display","none",3,"change"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[1,"dropdown1","dropdown"],["href","javascript:;","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle1","dropdown-toggle"],["src","assets/icons/modified-middle.svg","alt",""],[1,"px-1"],["src","assets/icons/middle-arrow-down.svg","alt","",1,"arrow-icon"],[1,"dropdown-menu1","dropdown-menu",2,"width","300px"],[2,"padding","10px",3,"click"],["placeholder","Select tags","displaySearchStatus","always","multiple","",3,"update","data","value","templates"],[1,"dropdown-menu1","dropdown-menu"],[2,"padding","10px"],[1,"color-options"],[1,"color-swatch","not-determined",3,"click"],["class","color-swatch",3,"ngStyle","selected","click",4,"ngFor","ngForOf"],["class","px-1",4,"ngIf"],["href","javascript:;",3,"click"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],["id","Map-tab-pane","role","tabpanel","aria-labelledby","Map-tab","tabindex","0",1,"tab-pane","fade"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],[1,"alert","alert-danger"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","folder-tab","data-bs-toggle","tab","data-bs-target","#folder-tab-pane","type","button","role","tab","aria-controls","folder-tab-pane",1,"nav-link",3,"click"],[1,"fa-regular","fa-folder","me-1"],["id","Map-tab","data-bs-toggle","tab","data-bs-target","#Map-tab-pane","type","button","role","tab","aria-controls","Map-tab-pane",1,"nav-link",3,"click"],[1,"fa-regular","fa-map","me-1"],[1,"color-swatch",3,"click","ngStyle"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-file-card","projects-block"],[3,"routerLink","queryParams"],[1,"proj-img-holder","folder-holder"],[3,"src",4,"ngIf"],["class","fa fa-map","style","color: #bbd5d559;",4,"ngIf"],[1,"recent-file-type","pt-2","d-flex","justify-content-between","flex-row","align-items-center"],[3,"title"],[1,"star",3,"click","ngClass"],[1,"fa","fa-star"],[3,"src"],[1,"fa","fa-map",2,"color","#bbd5d559"],[3,"showInfo","favorite","rename","archive","card","index"]],template:function(t,i){if(t&1){let n=O();s(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div",13)(7,"h5",14),p(8,"Upload files"),l(),s(9,"div"),v(10,"button",15),l()()(),s(11,"div",16)(12,"form",17,0),x("ngSubmit",function(){_(n);let a=V(13);return b(a.form.valid&&i.externalUpload())}),s(14,"div",18)(15,"label",19),p(16,"Files url"),l(),s(17,"input",20,1),Bt("ngModelChange",function(a){return _(n),Lt(i.extFile,a)||(i.extFile=a),b(a)}),l(),F(19,qp,2,1,"div",21),l(),v(20,"hr"),s(21,"div",22)(22,"button",23),p(23,"Upload"),l(),s(24,"button",24),p(25,"Close"),l()()()()()()(),s(26,"div",25),v(27,"div",26),s(28,"div",27)(29,"div",28)(30,"div",29)(31,"div")(32,"h3"),p(33),l(),s(34,"div",30)(35,"span"),F(36,Zp,3,4,"span")(37,Xp,3,4,"span"),p(38),l()()(),F(39,Yp,7,0,"div",31),l(),s(40,"div",32),F(41,Gp,9,4,"ul",33),l()()(),s(42,"div",34)(43,"div",35)(44,"div",36)(45,"button",37),x("click",function(){return _(n),b(i.openAddFolderModal())}),v(46,"img",38),s(47,"span",39),p(48,"Create Folder"),l()(),s(49,"button",40),v(50,"img",38),s(51,"span",39),p(52,"Import Files via URL"),l()(),s(53,"button",37),x("click",function(){_(n);let a=V(61);return b(a.click())}),v(54,"img",38),s(55,"span",39),p(56,"Upload File"),l()(),F(57,Kp,4,0,"a",41),s(58,"input",42,2),x("change",function(){_(n);let a=V(59);return b(i.onMapFileSelected(a.files))}),l(),s(60,"input",43,3),x("change",function(){_(n);let a=V(61);return b(i.onFilesSelected(a.files))}),l()(),s(62,"div",44)(63,"strong"),p(64,"Sorting"),l(),s(65,"div",45)(66,"div",46)(67,"a",47),v(68,"img",48),s(69,"span",49),p(70,"Tags"),l(),v(71,"img",50),l(),s(72,"ul",51)(73,"li",52),x("click",function(a){return _(n),b(a.stopPropagation())}),s(74,"select2",53),x("update",function(a){return _(n),b(i.update(a))}),F(75,Jp,1,1,"ng-template",null,4,ne),l()()()(),s(77,"div",46)(78,"a",47),v(79,"img",48),s(80,"span",49),p(81,"Color"),l(),v(82,"img",50),l(),s(83,"ul",54)(84,"li",55)(85,"div",56)(86,"div",57),x("click",function(){return _(n),b(i.selectColor(null))}),l(),F(87,em,1,5,"div",58),l()()()(),s(88,"div",46)(89,"a",47),v(90,"img",48),F(91,tm,2,0,"span",59)(92,im,2,0,"span",59)(93,nm,2,0,"span",59)(94,om,2,0,"span",59)(95,rm,2,0,"span",59),v(96,"img",50),l(),s(97,"ul",54)(98,"li")(99,"a",60),x("click",function(){return _(n),b(i.selectedSortField!="DateDesc"&&i.orderFoldersBy("DateDesc"))}),p(100,"Newest"),l()(),s(101,"li")(102,"a",60),x("click",function(){return _(n),b(i.selectedSortField!="DateAsc"&&i.orderFoldersBy("DateAsc"))}),p(103,"Oldest"),l()(),s(104,"li")(105,"a",60),x("click",function(){return _(n),b(i.selectedSortField!="TitleAsc"&&i.orderFoldersBy("TitleAsc"))}),p(106,"Name Asc"),l()(),s(107,"li")(108,"a",60),x("click",function(){return _(n),b(i.selectedSortField!="TitleDesc"&&i.orderFoldersBy("TitleDesc"))}),p(109,"Name Desc"),l()()()()()(),s(110,"div",61)(111,"div",62),v(112,"img",63),s(113,"strong"),p(114,"Folders"),l()(),s(115,"div",64),F(116,dm,20,28,"div",65),l(),s(117,"div",62),v(118,"img",63),s(119,"strong"),p(120,"Files"),l()(),s(121,"div",64),F(122,pm,2,2,"div",65),l()()(),s(123,"div",66),v(124,"div",null,5),l()()()(),s(126,"div",8,6)(128,"app-file-info",67),x("closeInfoEvent",function(){return _(n),b(i.closeInfo())})("addTag",function(){return _(n),b(i.onAddTag())})("share",function(){return _(n),b(i.onShare())}),l()()()}if(t&2){let n,r=V(13),a=V(18),d=V(76);k("expand",i.shownInfo),c(17),Nt("ngModel",i.extFile),c(2),h("ngIf",a.invalid&&(a.dirty||a.touched||r.submitted)),c(14),z(i.project==null?null:i.project.title),c(3),K(((n=i.project==null?null:i.project.filesSize)!==null&&n!==void 0?n:0)>1?36:37),c(2),M(" | ",i.project==null?null:i.project.filesNum," items "),c(),h("ngIf",i.shownInfo),c(2),h("ngIf",i.areaToOpen),c(2),k("active",i.selectedTab=="folders")("show",i.selectedTab=="folders"),c(14),h("ngIf",!i.isFetching&&!i.areaToOpen),c(17),h("data",i.tagsItems)("value",i.selectedTags)("templates",se(51,Bp,d)),c(12),k("selected",!i.selectedColorId),c(),h("ngForOf",i.colors),c(4),h("ngIf",!i.selectedSortField),c(),h("ngIf",i.selectedSortField=="DateDesc"),c(),h("ngIf",i.selectedSortField=="DateAsc"),c(),h("ngIf",i.selectedSortField=="TitleAsc"),c(),h("ngIf",i.selectedSortField=="TitleDesc"),c(4),k("selected",i.selectedSortField=="DateDesc"),c(3),k("selected",i.selectedSortField=="DateAsc"),c(3),k("selected",i.selectedSortField=="TitleAsc"),c(3),k("selected",i.selectedSortField=="TitleDesc"),c(8),h("ngForOf",i.projectFolders),c(6),h("ngForOf",i.projectFiles),c(),k("active",i.selectedTab=="map")("show",i.selectedTab=="map"),c(3),k("active",i.shownInfo),c(2),h("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile)}},dependencies:[at,J,Z,tn,_e,Se,ke,we,Le,Be,xe,_i,Wt,qe,Xt,Ut,ye],styles:[".file-info.fixed[_ngcontent-%COMP%]{position:relative;top:20px}ul.select2-results__options[_ngcontent-%COMP%]{height:125px}.nav-tabs[_ngcontent-%COMP%]{justify-content:flex-start;margin-bottom:0!important;padding-bottom:0!important;border-bottom:0!important}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:15px 25px}#header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;width:50px}#header[_ngcontent-%COMP%]{width:69px;height:100%;position:absolute;left:0;top:0}"]})};var mm=["cardElement"],um=()=>["/projects/project-map"],fm=()=>({id:2}),hm=()=>["PDF","Word","Excel"],gm=()=>["Name 1","Name 2","Name 3"],vm=()=>["Newest","Oldest","Recently Edited"],_m=()=>["/projects/project-screen-details"];function bm(o,e){if(o&1){let t=O();s(0,"div")(1,"button",45),v(2,"img",46),p(3,"Share"),l(),s(4,"button",47),x("click",function(){_(t);let n=g();return b(n.closeInfo())}),v(5,"img",48),p(6,"Information"),l()()}}function ym(o,e){if(o&1&&(s(0,"div"),v(1,"app-upload-toast",49),l()),o&2){let t=e.$implicit;c(),h("fileName",t.fileName)("progress",t.progress)}}function Cm(o,e){if(o&1){let t=O();s(0,"div",39)(1,"app-file-card",50),x("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))})("rename",function(n){_(t);let r=g();return b(r.rename(n))})("archive",function(n){_(t);let r=g();return b(r.archive(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index;c(),h("card",t)("index",i)}}var oo=class o{constructor(e,t,i){this.renderer=e;this.projectCoverService=t;this.fileUploadService=i}cardElements;uploads=[];files;isUpload=!1;count=0;bootstrap;ngOnInit(){setTimeout(()=>{this.projectCoverService.setShow(!0),this.projectCoverService.setSource("assets/images/files/proj4.jpg")})}data=[{options:[{value:"Omar Ezz",label:"Omar Ezz",data:{name:"Omar Ezz",email:"Omar_Ezz@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"1"},{value:"Emad hamdi",label:"Emad Hamdi",data:{name:"Emad hamdi",email:"emad_hamdi@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"2"},{value:"Ehab Zakaria",label:"Ehab Zakaria",data:{name:"Ehab Zakaria",email:"ehab_zakaria@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"3"},{value:"mohamed Ezz",label:"mohamed Ezz",data:{name:"mohamed Ezz",email:"mohamed@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"4"},{value:"Ali hamdi",label:"Ali Hamdi",data:{name:"Ali hamdi",email:"Ali@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"5"},{value:"hassan Zakaria",label:"hassan Zakaria",data:{name:"hassan Zakaria",email:"hassan@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"6"}]}];cards=[{id:1,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/proj-d1.jpg",fileName:"WOTN drive.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1},{id:2,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"photo",fileImage:"assets/images/file-card.png",fileName:"WOTN drive.png",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"",Status:1},{id:3,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"text",fileImage:"assets/images/files/proj-d2.jpg",fileName:"WOTN drive.pdf",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"",Status:1},{id:4,isOpen:!0,isVideo:!0,openedAt:"10:54 AM",fileType:"video",fileImage:"assets/images/files/project-1.jpg",fileName:"WOTN drive1.mp4",filePath:"assets/videos/HeroDesktop.mp4",fileSize:"105.3 MB",favorite:!0,videoDuration:"04:55 Min",Status:1}];onTypeSelect(e){console.log("Selected type:",e)}onPeopleSelect(e){console.log("Selected person:",e)}onModifiedSelect(e){console.log("Selected modified:",e)}shownInfo=!1;showInfo(e){console.log(e),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.shownInfo=!this.shownInfo}onFilesSelected=e=>{if(e.length===0)return;this.uploads=[],this.isUpload=!0,this.count=e.length;let t=[];for(let i=0;i<e.length;i++){let n=e[i],r=new FormData;r.append("file",n,n.name);let a={fileName:n.name,progress:0};this.uploads.push(a);let d=this.fileUploadService.upload(r).pipe(gi(m=>{m.type?m.total&&(a.progress=Math.round(100*m.loaded/m.total)):m.type===Ht.Response&&(a.progress=100,console.log("Upload complete for",a.fileName,m.body))}));t.push(d)}dt(t).subscribe({next:i=>{console.log("All uploads completed!",i),setTimeout(()=>{this.isUpload=!1,this.closeProjectUploadModal()},3e3)},error:i=>{console.error("Error during file upload:",i),this.isUpload=!1}})};modalInstance;ngAfterViewInit(){let e=document.getElementById("projectUploadModal");if(e){let t=window.bootstrap;this.modalInstance=new t.Modal(e)}}openProjectUploadModal(){this.modalInstance?.show()}closeProjectUploadModal(){this.modalInstance?.hide()}static \u0275fac=function(t){return new(t||o)(I(de),I(ft),I(Te))};static \u0275cmp=N({type:o,selectors:[["app-project-screen-details"]],viewQuery:function(t,i){if(t&1&&ie(mm,5),t&2){let n;Y(n=G())&&(i.cardElements=n)}},standalone:!1,decls:82,vars:26,consts:[["file",""],[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"upper","d-flex","flex-row"],["data-bs-toggle","modal","data-bs-target","#projectUploadModal",1,"upload-btn"],["src","assets/icons/plus.svg","alt",""],[1,"pt-3"],[1,"upload-btn",3,"click"],[1,"upload-btn",3,"routerLink","queryParams"],[1,"las","la-map","la-2x"],["type","file","placeholder","Choose file","multiple","",1,"form-control",2,"display","none",3,"change"],[1,"toaste"],[1,"heade","d-flex","justify-content-between"],["src","assets/icons/close.svg","alt","",1,"close"],[1,"t-body"],[4,"ngFor","ngForOf"],["id","projectUploadModal","tabindex","-1","aria-labelledby","projectUploadModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"d-flex","mod-head","justify-content-between"],["id","projectUploadModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","ms-2"],[1,"modal-body"],[1,"form-group"],["for",""],["type","text","placeholder","Files url",1,"form-control"],[1,"d-flex","justify-content-end"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-file-card","projects-block",3,"routerLink"],[1,"proj-img-holder"],["src","./assets/images/files/project-5.jpg","alt",""],[1,"recent-file-type","pt-2","d-flex","flex-row","align-items-center"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[3,"fileName","progress"],[3,"showInfo","rename","archive","card","index"]],template:function(t,i){if(t&1){let n=O();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h3"),p(5,"Project title"),l(),s(6,"div",4)(7,"span"),p(8,"105.3 MB | 235 items"),l()()(),F(9,bm,7,0,"div",5),l(),s(10,"div",6)(11,"button",7),v(12,"img",8),s(13,"span",9),p(14,"Import Files via URL"),l()(),s(15,"button",10),x("click",function(){_(n);let a=V(24);return b(a.click())}),v(16,"img",8),s(17,"span",9),p(18,"Upload File"),l()(),s(19,"a",11),v(20,"i",12),s(21,"span",9),p(22,"Map Files"),l()(),s(23,"input",13,0),x("change",function(){_(n);let a=V(24);return b(i.onFilesSelected(a.files))}),l(),s(25,"div",14)(26,"h3",15)(27,"div"),p(28,"Loading "),s(29,"span"),p(30),l(),p(31," item."),l(),v(32,"img",16),l(),s(33,"div",17),F(34,ym,2,2,"div",18),l()()(),s(35,"div",19)(36,"div",20)(37,"div",21)(38,"div",22)(39,"div",23)(40,"h5",24),p(41,"Upload files"),l(),s(42,"div"),v(43,"button",25),l()()(),s(44,"div",26)(45,"div",27)(46,"label",28),p(47,"Files url"),l(),v(48,"input",29),l(),v(49,"hr"),s(50,"div",30)(51,"button",31),p(52,"Done"),l()()()()()(),s(53,"div",32)(54,"strong"),p(55,"Sorting"),l(),s(56,"div",33)(57,"app-sort-files",34),x("optionSelected",function(a){return _(n),b(i.onTypeSelect(a))}),l(),s(58,"app-sort-files",34),x("optionSelected",function(a){return _(n),b(i.onPeopleSelect(a))}),l(),s(59,"app-sort-files",34),x("optionSelected",function(a){return _(n),b(i.onModifiedSelect(a))}),l()()(),s(60,"div",35)(61,"div",36),v(62,"img",37),s(63,"strong"),p(64,"Folders"),l()(),s(65,"div",38)(66,"div",39)(67,"a",40)(68,"div",41),v(69,"img",42),l(),s(70,"div",43)(71,"span"),p(72,"Sub folder"),l()(),s(73,"div",4)(74,"span"),p(75," 105.3 MB | 223 items"),l()()()()(),s(76,"div",36),v(77,"img",37),s(78,"strong"),p(79,"recent file"),l()(),s(80,"div",38),F(81,Cm,2,2,"div",44),l()()()()}t&2&&(k("expand",i.shownInfo),c(9),h("ngIf",i.shownInfo),c(10),h("routerLink",R(20,um))("queryParams",R(21,fm)),c(6),k("load",i.isUpload),c(5),z(i.count),c(4),h("ngForOf",i.uploads),c(23),h("label","Type")("icon","assets/icons/file-text.svg")("options",R(22,hm)),c(),h("label","People")("icon","assets/icons/profile-middle.svg")("options",R(23,gm)),c(),h("label","Modified")("icon","assets/icons/modified-middle.svg")("options",R(24,vm)),c(8),h("routerLink",R(25,_m)),c(14),h("ngForOf",i.cards))},dependencies:[J,Z,zr,_e,Ee,Se],encapsulation:2})};var Sm=["dynamicContainer"],xm=()=>["PDF","Word","Excel"],wm=()=>["Name 1","Name 2","Name 3"],Fm=()=>["Newest","Oldest","Recently Edited"],Im=()=>["/projects/folder-details"],Pm=(o,e)=>({id:o,projectId:e});function Tm(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g();c(),M("",L(2,1,((t=i.folder==null?null:i.folder.filesSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function Em(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g();c(),M("",L(2,1,((t=i.folder==null?null:i.folder.filesSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function jm(o,e){if(o&1){let t=O();s(0,"div")(1,"button",54),v(2,"img",55),p(3,"Share "),l(),s(4,"button",56),x("click",function(){_(t);let n=g();return b(n.closeInfo())}),v(5,"img",57),p(6,"Information "),l()()}}function Mm(o,e){if(o&1){let t=O();s(0,"ul",58)(1,"li",59)(2,"button",60),x("click",function(){_(t);let n=g();return b(n.selectedTab="folders")}),v(3,"i",61),p(4," Folders "),l()(),s(5,"li",59)(6,"button",62),x("click",function(){_(t);let n=g();return b(n.selectedTab="map")}),v(7,"i",63),p(8," Map "),l()()()}if(o&2){let t=g();c(2),k("active",t.selectedTab=="folders"),c(4),k("active",t.selectedTab=="map")}}function Om(o,e){if(o&1){let t=O();s(0,"a",21),x("click",function(){_(t),g();let n=V(36);return b(n.click())}),v(1,"img",22),s(2,"span",23),p(3,"Add Map"),l()()}}function Dm(o,e){o&1&&(s(0,"div"),p(1," File url is required "),l())}function km(o,e){if(o&1&&(s(0,"div",64),F(1,Dm,2,0,"div",15),l()),o&2){g();let t=V(55);c(),h("ngIf",t==null||t.errors==null?null:t.errors.required)}}function Am(o,e){if(o&1&&v(0,"img",71),o&2){let t=g().$implicit;h("src",t.imageUrl,U)}}function Vm(o,e){o&1&&v(0,"i",72)}function Rm(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g().$implicit;c(),M("",L(2,1,((t=i.filesSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function zm(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g().$implicit;c(),M("",L(2,1,((t=i.filesSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function Nm(o,e){if(o&1&&(s(0,"div",65)(1,"a",66)(2,"div",67),F(3,Am,1,1,"img",68)(4,Vm,1,0,"i",69),l(),s(5,"div",70)(6,"span"),p(7),l()(),s(8,"div",14)(9,"span"),F(10,Rm,3,4,"span")(11,zm,3,4,"span"),p(12),l()()()()),o&2){let t,i,n=e.$implicit,r=g();c(),h("routerLink",R(13,Im))("queryParams",$e(14,Pm,n.folderId,n.projectId)),c(),pt("background",r.getColor(n.colorId)?"linear-gradient(0deg, rgba(58,81,100,1) 21%, "+r.getColor(n.colorId)+" 100%)":"#3A5164")("border-bottom",n.imageUrl?"7px solid "+r.getColor(n.colorId):"none"),k("map-related",n.areaReference),c(),h("ngIf",n.imageUrl),c(),h("ngIf",n.areaReference),c(3),z(n.title),c(3),K(((t=n.filesSize)!==null&&t!==void 0?t:0)>1?10:11),c(2),M(" | ",(i=n.filesNum)!==null&&i!==void 0?i:0," items ")}}function Lm(o,e){if(o&1){let t=O();s(0,"div",65)(1,"app-file-card",73),x("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))})("favorite",function(n){_(t);let r=g();return b(r.favorite(n))})("rename",function(n){_(t);let r=g();return b(r.rename(n))})("archive",function(n){_(t);let r=g();return b(r.archive(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index;c(),h("card",t)("index",i)}}var ro=class o{constructor(e,t,i,n,r,a,d,m,u,f,y,S){this.route=e;this.renderer=t;this.projectCoverService=i;this.resolver=n;this.projectService=r;this.modalService=a;this.toaster=d;this.router=m;this.translate=u;this.el=f;this.uploadService=y;this.categoriesService=S}active=1;uploads=[];projectFolders=[];projectFiles=[];isUpload=!1;count=0;bootstrap;extFile="";subscriptions=[];folderId;folder;isFetching=!1;isFetchingProjects=!1;isFetchingFiles=!1;colors=[];tagsInput="";tags=[];isFetchingColors=!1;fetchProjectFolders;projectId;areaToOpen=null;selectedTab="folders";container;mapComponentRef=null;projectFileQuery;projectFolderQuery;ngOnInit(){this.route.queryParams.subscribe(e=>{this.folderId=e.id,this.projectId=e.projectId,ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.fetchFolder(this.folderId),this.fetchFolderFiles(this.projectId),this.projectFolderQuery=new Ke,this.projectFolderQuery.projectId=this.projectId,this.projectFolderQuery.parentId=this.folderId,this.projectFolderQuery.sortOrder=null,this.projectFolderQuery.pageNumber=1,this.projectFolderQuery.pageSize=1e3,this.projectFolderQuery.FavUserId=null,this.projectFolderQuery.isActive=!0,this.projectFolderQuery.showCurrentUserFav=!0,this.projectFolderQuery.type=null,this.projectFolderQuery.colorId=null,this.projectFileQuery=new Pe,this.projectFileQuery.projectId=this.projectId,this.projectFileQuery.folderId=this.folderId,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="false",this.projectFileQuery.ShowCurrentUserFav=!0,this.fetchFolderFolders(),this.fetchColors()})}isAreaLoaded=!1;fetchFolder(e){if(!e||this.isFetching)return;this.isFetching=!0,this.areaToOpen=null,this.selectedTab="folders",this.folder=new Gn;let t=this.projectService.fetchFolder(e).subscribe(i=>{i&&(console.log("folder",i),this.folder=i,this.folder?.folderHtml&&(this.areaToOpen=this.folder.folderHtml,this.isAreaLoaded=!0,this.loadMap()),this.folder?.imageUrl&&setTimeout(()=>{this.projectCoverService.setShow(!1)})),this.isFetching=!1});this.subscriptions.push(t)}isFoldersLoaded=!1;fetchFolderFolders(){if(!this.projectFolderQuery.projectId||this.isFetchingProjects)return;this.isFetchingProjects=!0;let e=this.projectService.fetchProjectFolders(this.projectFolderQuery).subscribe(t=>{t&&(console.log("projectFolders",t),this.projectFolders=t,this.isFoldersLoaded=!0,this.loadMap()),this.isFetchingProjects=!1});this.subscriptions.push(e)}fetchFolderFiles(e){if(!e||this.isFetchingFiles)return;this.isFetchingFiles=!0;let t=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(i=>{i&&(console.log("projectFiles",i),this.projectFiles=i),this.isFetchingFiles=!1});this.subscriptions.push(t)}fetchColors(){if(this.isFetchingColors)return;this.isFetchingColors=!0;let e=this.categoriesService.fetchColors().subscribe(t=>{t&&(this.colors=t.data),this.isFetchingColors=!1});this.subscriptions.push(e)}getColor(e){let t=this.colors.find(i=>i.catId===e);return t?t.colorDegree:null}onMapFileSelected=e=>{if(e.length===0)return;let t=e[0];if(!t.type.startsWith("image/")){alert("Please upload a valid image file.");return}let i=new FileReader;i.onload=n=>{let r=n.target?.result,a=new FormData,d=JSON.stringify({img:r});a.append("folderHtml",d);let m=this.projectService.patchFolder(this.folderId??0,a).subscribe(u=>{u?(this.folder.folderHtml=d,this.areaToOpen=d,this.isAreaLoaded=!0,this.loadMap(),this.selectedTab="map",this.toaster.success(this.translate.instant("Maps.MapSavedSuccessfully"))):console.error(this.translate.instant("Maps.MapSaveFaild"))},u=>{console.error("Error saving map:",u)});this.subscriptions.push(m)},i.readAsDataURL(t)};favorite(e){console.log(e),this.projectService.setFavourite(e).subscribe(t=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchFolderFiles(this.projectId)})}rename(e){let t=this.projectFiles.find(i=>i.fileId===e.fileId);t&&(t.title=e.filename)}archive(e){this.projectFiles=this.projectFiles.filter(t=>t.fileId!==e)}data=[{options:[{value:"Omar Ezz",label:"Omar Ezz",data:{name:"Omar Ezz",email:"Omar_Ezz@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"1"},{value:"Emad hamdi",label:"Emad Hamdi",data:{name:"Emad hamdi",email:"emad_hamdi@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"2"},{value:"Ehab Zakaria",label:"Ehab Zakaria",data:{name:"Ehab Zakaria",email:"ehab_zakaria@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"3"},{value:"mohamed Ezz",label:"mohamed Ezz",data:{name:"mohamed Ezz",email:"mohamed@exapmle.com.sa",image:"assets/images/profile/pic1.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"4"},{value:"Ali hamdi",label:"Ali Hamdi",data:{name:"Ali hamdi",email:"Ali@exapmle.com.sa",image:"assets/images/profile/user4.jpg"},templateId:"template1",templateSelectionId:"template1Selection",id:"5"},{value:"hassan Zakaria",label:"hassan Zakaria",data:{name:"hassan Zakaria",email:"hassan@exapmle.com.sa",image:"assets/images/profile/default-profile-img.png"},templateId:"template1",templateSelectionId:"template1Selection",id:"6"}]}];onTypeSelect(e){}onPeopleSelect(e){}onModifiedSelect(e){}selectedFile;selectedProject;shownInfo=!1;showInfo(e){this.selectedFile=e,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let t=new FormData;t.append("isOpen","true"),t.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,t).subscribe(i=>{i&&(console.log(i),this.fetchFolderFiles(this.projectId))}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}externalUpload(){let e=new FormData,t=new File([this.extFile],this.extFile,{type:"text/plain"});e.append("Title",t.name);let i=this.getFileType(t);i!==null&&e.append("fileType",i.toString()),e.append("isActive","true"),e.append("TypeId","12"),e.append("projectId",this.projectId?.toString()??""),e.append("folderId",this.folderId?.toString()??""),e.append("ExternalFileUrl",this.extFile),console.log("formData",e),this.projectService.createFile1(e).subscribe(n=>{n&&(console.log("Upload complete for",n),this.closeProjectUploadModal(),this.fetchFolderFiles(this.projectId))})}onFilesSelected=e=>{if(e.length===0)return;this.uploads=[],this.isUpload=!0,this.count=e.length;let t=[];for(let i=0;i<e.length;i++){let n=e[i],r=new FormData;r.append("fileFile",n,n.name);let a=this.uploadService.startUpload(n.name),d=this.getFileType(n);d!==null&&r.append("fileType",d.toString()),r.append("Title",n.name),r.append("isActive","true"),r.append("TypeId","12"),r.append("projectId",this.projectId?.toString()??""),r.append("folderId",this.folderId?.toString()??"");let m={fileName:n.name,progress:0};this.uploads.push(m);let u=this.projectService.createFile(r).pipe(gi(f=>{f.type===Ht.UploadProgress?f.total&&(console.log("event",f),m.progress=Math.round(100*f.loaded/f.total),this.uploadService.updateProgress(a,m.progress)):f.type===Ht.Response&&(m.progress=100,this.uploadService.updateProgress(a,m.progress),console.log("Upload complete for",m.fileName,f.body),this.fetchFolderFiles(this.projectId))}));t.push(u)}dt(t).subscribe({next:i=>{console.log("All uploads completed!",i),setTimeout(()=>{this.isUpload=!1,this.closeProjectUploadModal()},3e3)},error:i=>{console.error("Error during file upload:",i),this.isUpload=!1}})};getFileType(e){switch(e.name.split(".").pop()?.toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":return 0;case"mp4":case"avi":return 1;case"pdf":return 2;case"doc":case"docx":return 3;case"xls":case"xlsx":return 4;case"ppt":case"pptx":return 5;case"txt":return 6;case"zip":return 7;default:return null}}modalInstance;ngAfterViewInit(){this.displayMapComponent();let e=document.getElementById("projectUploadModal");if(e){let t=window.bootstrap;this.modalInstance=new t.Modal(e)}}closeProjectUploadModal(){this.modalInstance?.hide()}openAddFolderModal(){let e=this.modalService.open(Mi,{backdrop:"static",keyboard:!1});e.componentInstance.projectId=this.folder.projectId,e.componentInstance.parentId=this.folderId;let t=e.componentInstance.isSuccess.subscribe(i=>{i&&this.fetchFolderFolders()});this.subscriptions.push(t)}handleMapSave(e){this.folder.folderHtml=e.mapHtml,this.areaToOpen=this.folder.folderHtml,this.isAreaLoaded=!0,e.reloadFolders&&(this.fetchFolderFolders(),this.fetchFolderFiles(this.projectId))}displayMapComponent(){if(!this.container)return;let e=this.resolver.resolveComponentFactory(Oi);this.mapComponentRef=this.container.createComponent(e),this.mapComponentRef.instance.projectId=this.projectId,this.mapComponentRef.instance.folderId=this.folderId,this.mapComponentRef.instance.projectFolders=this.projectFolders,this.mapComponentRef.instance.areaToOpen=this.areaToOpen,this.mapComponentRef.instance.save.subscribe(t=>{this.handleMapSave(t)})}loadMap(){this.isAreaLoaded&&this.isFoldersLoaded&&this.mapComponentRef&&(this.mapComponentRef.instance.projectFolders=this.projectFolders,this.mapComponentRef.instance.areaToOpen=this.areaToOpen,this.mapComponentRef.instance.folderId=this.folderId,this.mapComponentRef.instance.loadMap())}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close(),setTimeout(()=>{this.projectCoverService.setShow(!1)}),this.subscriptions.forEach(e=>e.unsubscribe())}static \u0275fac=function(t){return new(t||o)(I(mt),I(de),I(ft),I(Gi),I(re),I(Fe),I(oe),I(Ne),I(le),I(me),I(yi),I(Je))};static \u0275cmp=N({type:o,selectors:[["app-folder-details"]],viewQuery:function(t,i){if(t&1&&ie(Sm,5,Ki),t&2){let n;Y(n=G())&&(i.container=n.first)}},standalone:!1,decls:89,vars:44,consts:[["mapFile",""],["file",""],["extFileForm","ngForm"],["extFile1","ngModel"],["dynamicContainer",""],["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"relativee"],["id","sticky-start"],[1,"main-top"],[1,"row"],[1,"col-lg-8","d-flex","justify-content-between","heady"],[1,"d-flex","justify-content-between","heady"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"col-lg-4","d-flex","justify-content-end"],["class","nav nav-tabs","id","myTab","role","tablist",4,"ngIf"],["id","myTabContent",1,"tab-content"],["id","folder-tab-pane","role","tabpanel","aria-labelledby","folder-tab","tabindex","0",1,"tab-pane","fade"],[1,"upper","d-flex","flex-row"],[1,"upload-btn",3,"click"],["src","assets/icons/plus.svg","alt",""],[1,"pt-3"],["data-bs-toggle","modal","data-bs-target","#projectUploadModal",1,"upload-btn"],["class","upload-btn",3,"click",4,"ngIf"],["type","file","accept","image/*",1,"form-control",2,"display","none",3,"change"],["type","file","placeholder","Choose file","multiple","",1,"form-control",2,"display","none",3,"change"],["id","projectUploadModal","tabindex","-1","aria-labelledby","projectUploadModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"d-flex","mod-head","justify-content-between"],["id","projectUploadModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","ms-2"],[1,"modal-body"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for",""],["type","text","placeholder","Files url","id","extFile","name","extFile","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger","ms-3"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],["id","Map-tab-pane","role","tabpanel","aria-labelledby","Map-tab","tabindex","0",1,"tab-pane","fade"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","folder-tab","data-bs-toggle","tab","data-bs-target","#folder-tab-pane","type","button","role","tab","aria-controls","folder-tab-pane",1,"nav-link",3,"click"],[1,"fa-regular","fa-folder","me-1"],["id","Map-tab","data-bs-toggle","tab","data-bs-target","#Map-tab-pane","type","button","role","tab","aria-controls","Map-tab-pane",1,"nav-link",3,"click"],[1,"fa-regular","fa-map","me-1"],[1,"alert","alert-danger"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[1,"recent-file-card","projects-block",3,"routerLink","queryParams"],[1,"proj-img-holder","folder-holder"],[3,"src",4,"ngIf"],["class","fa fa-map","style","color: #bbd5d559;",4,"ngIf"],[1,"recent-file-type","pt-2","d-flex","flex-row","align-items-center"],[3,"src"],[1,"fa","fa-map",2,"color","#bbd5d559"],[3,"showInfo","favorite","rename","archive","card","index"]],template:function(t,i){if(t&1){let n=O();s(0,"div",6)(1,"div",7)(2,"div",8),v(3,"div",9),s(4,"div",10)(5,"div",11)(6,"div",12)(7,"div",13)(8,"div")(9,"h3"),p(10),l(),s(11,"div",14)(12,"span"),F(13,Tm,3,4,"span")(14,Em,3,4,"span"),p(15),l()()(),F(16,jm,7,0,"div",15),l()(),s(17,"div",16),F(18,Mm,9,4,"ul",17),l()()(),s(19,"div",18)(20,"div",19)(21,"div",20)(22,"button",21),x("click",function(){return _(n),b(i.openAddFolderModal())}),v(23,"img",22),s(24,"span",23),p(25,"Create Folder"),l()(),s(26,"button",24),v(27,"img",22),s(28,"span",23),p(29,"Import Files via URL"),l()(),s(30,"button",21),x("click",function(){_(n);let a=V(38);return b(a.click())}),v(31,"img",22),s(32,"span",23),p(33,"Upload File"),l()(),F(34,Om,4,0,"a",25),s(35,"input",26,0),x("change",function(){_(n);let a=V(36);return b(i.onMapFileSelected(a.files))}),l(),s(37,"input",27,1),x("change",function(){_(n);let a=V(38);return b(i.onFilesSelected(a.files))}),l()(),s(39,"div",28)(40,"div",29)(41,"div",30)(42,"div",31)(43,"div",32)(44,"h5",33),p(45,"Upload files"),l(),s(46,"div"),v(47,"button",34),l()()(),s(48,"div",35)(49,"form",36,2),x("ngSubmit",function(){_(n);let a=V(50);return b(a.form.valid&&i.externalUpload())}),s(51,"div",37)(52,"label",38),p(53,"Files url"),l(),s(54,"input",39,3),Bt("ngModelChange",function(a){return _(n),Lt(i.extFile,a)||(i.extFile=a),b(a)}),l(),F(56,km,2,1,"div",40),l(),v(57,"hr"),s(58,"div",41)(59,"button",42),p(60,"Upload"),l(),s(61,"button",43),p(62,"Close"),l()()()()()()(),s(63,"div",44)(64,"strong"),p(65,"Sorting"),l(),s(66,"div",45)(67,"app-sort-files",46),x("optionSelected",function(a){return _(n),b(i.onTypeSelect(a))}),l(),s(68,"app-sort-files",46),x("optionSelected",function(a){return _(n),b(i.onPeopleSelect(a))}),l(),s(69,"app-sort-files",46),x("optionSelected",function(a){return _(n),b(i.onModifiedSelect(a))}),l()()(),s(70,"div",47)(71,"div",48),v(72,"img",49),s(73,"strong"),p(74,"Folders"),l()(),s(75,"div",50),F(76,Nm,13,17,"div",51),l(),s(77,"div",48),v(78,"img",49),s(79,"strong"),p(80,"Files"),l()(),s(81,"div",50),F(82,Lm,2,2,"div",51),l()()(),s(83,"div",52),v(84,"div",null,4),l()()()(),s(86,"div",7,5)(88,"app-file-info",53),x("closeInfoEvent",function(){return _(n),b(i.closeInfo())})("addTag",function(){return _(n),b(i.onAddTag())})("share",function(){return _(n),b(i.onShare())}),l()()()}if(t&2){let n,r,a=V(50),d=V(55);k("expand",i.shownInfo),c(10),z(i.folder==null?null:i.folder.title),c(3),K(((n=i.folder==null?null:i.folder.filesSize)!==null&&n!==void 0?n:0)>1?13:14),c(2),M("| ",(r=i.folder==null?null:i.folder.filesNum)!==null&&r!==void 0?r:0," items "),c(),h("ngIf",i.shownInfo),c(2),h("ngIf",i.areaToOpen),c(2),k("active",i.selectedTab=="folders")("show",i.selectedTab=="folders"),c(14),h("ngIf",!i.isFetching&&!i.areaToOpen),c(20),Nt("ngModel",i.extFile),c(2),h("ngIf",d.invalid&&(d.dirty||d.touched||a.submitted)),c(11),h("label","Type")("icon","assets/icons/file-text.svg")("options",R(41,xm)),c(),h("label","People")("icon","assets/icons/profile-middle.svg")("options",R(42,wm)),c(),h("label","Modified")("icon","assets/icons/modified-middle.svg")("options",R(43,Fm)),c(7),h("ngForOf",i.projectFolders),c(6),h("ngForOf",i.projectFiles),c(),k("active",i.selectedTab=="map")("show",i.selectedTab=="map"),c(3),k("active",i.shownInfo),c(2),h("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile)}},dependencies:[J,Z,_e,Ee,Se,ke,we,Le,Be,xe,_i,Wt,qe,ye],encapsulation:2})};var Bm=["cardElement"],Um=()=>["PDF","Word","Excel"],Hm=()=>["Name 1","Name 2","Name 3"],Qm=()=>["Newest","Oldest","Recently Edited"];function $m(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g();c(),M("",L(2,1,((t=i.totalFileSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function Wm(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g();c(),M("",L(2,1,((t=i.totalFileSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function qm(o,e){if(o&1){let t=O();s(0,"div")(1,"button",15),v(2,"img",16),p(3,"Share"),l(),s(4,"button",17),x("click",function(){_(t);let n=g();return b(n.closeInfo())}),v(5,"img",18),p(6,"Information"),l()()}}function Zm(o,e){if(o&1){let t=O();s(0,"div",19)(1,"app-file-card",20),x("showInfo",function(n){_(t);let r=g();return b(r.showInfo(n))})("favorite",function(n){_(t);let r=g();return b(r.favorite(n))})("rename",function(n){_(t);let r=g();return b(r.rename(n))}),l()()}if(o&2){let t=e.$implicit,i=e.index;c(),h("card",t)("index",i)}}var ao=class o{constructor(e,t,i,n,r,a){this.renderer=e;this.fileUploadService=t;this.projectService=i;this.toaster=n;this.translate=r;this.el=a}subscriptions=[];projects=[];projectFiles=[];isFetching=!1;isFetchingFiles=!1;pageSize=20;currentPage=1;totalItems=0;numberOfPages=0;ProjectTypes=lt;selectedProjectType=null;selectedSortField=null;cardElements;uploads=[];files;isUpload=!1;count=0;totalFileSize;fileCount;projectFileQuery;ngOnInit(){this.projectFileQuery=new Pe,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.isArchived="true",this.projectFileQuery.ShowCurrentUserFav=!0,ee.bind(this.el.nativeElement,"[data-fancybox]",{}),this.fetchProjectFiles()}fetchProjectFiles(){let e=this.projectService.fetchProjectFiles(this.projectFileQuery).subscribe(t=>{t&&(this.projectFiles=t,this.totalFileSize=this.projectFiles.reduce((i,n)=>i+(n.fileSize??0),0),this.fileCount=this.projectFiles.length,console.log("Project files:",this.projectFiles)),this.isFetchingFiles=!1});this.subscriptions.push(e)}favorite(e){console.log(e),this.projectService.setFavourite(e).subscribe(t=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully")),this.fetchProjectFiles()})}rename(e){let t=this.projectFiles.find(i=>i.fileId===e.fileId);t&&(t.title=e.filename)}onTypeSelect(e){console.log("Selected type:",e)}onPeopleSelect(e){console.log("Selected person:",e)}onModifiedSelect(e){console.log("Selected modified:",e)}selectedFile;selectedProject;shownInfo=!1;showInfo(e){this.selectedFile=e,this.projectService.fetchProject(this.selectedFile.projectId).subscribe(i=>{i&&(this.selectedProject=i)});let t=new FormData;t.append("isOpen","true"),t.append("IsActive",this.selectedFile.isActive),this.projectService.patchFile(this.selectedFile.fileId,t).subscribe(i=>{i&&(console.log(i),this.fetchProjectFiles())}),this.shownInfo==!1&&(this.shownInfo=!this.shownInfo)}closeInfo(){this.selectedFile=null,this.shownInfo=!this.shownInfo}onAddTag(){this.toaster.info("Add Tag clicked")}onShare(){this.toaster.info("Share clicked")}ngOnDestroy(){ee.unbind(this.el.nativeElement),ee.close()}static \u0275fac=function(t){return new(t||o)(I(de),I(Te),I(re),I(oe),I(le),I(me))};static \u0275cmp=N({type:o,selectors:[["app-archive"]],viewQuery:function(t,i){if(t&1&&ie(Bm,5),t&2){let n;Y(n=G())&&(i.cardElements=n)}},standalone:!1,decls:29,vars:30,consts:[["sidebar",""],[1,"row","home-layout"],[1,"col"],[1,"d-flex","justify-content-between","heady","mb-4"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],[4,"ngIf"],[1,"sorting"],[1,"pt-3","d-flex","flex-row","gap-3","sorting-row"],[3,"optionSelected","label","icon","options"],[1,"recent-file","pt-5"],[1,"d-flex","flex-row","align-items-center"],["src","assets/icons/middle-arrow-down.svg","alt",""],[1,"row","pt-3","recent-file-row"],["class","col-xxl-2 col-xl-3 col-lg-4 col-sm-6",4,"ngFor","ngForOf"],[3,"closeInfoEvent","addTag","share","fileName","fileMidea","owner","tags","description","projectDetails","fileDetails","accessUsers","timeline","data"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-solid","me-3"],["src","./assets/icons/menu/user.svg","alt","",1,"me-2"],[1,"btn","btn-primary",3,"click"],["src","./assets/icons/info.svg","alt","",1,"me-2","filter"],[1,"col-xxl-2","col-xl-3","col-lg-4","col-sm-6"],[3,"showInfo","favorite","rename","card","index"]],template:function(t,i){if(t&1){let n=O();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h3"),p(5,"Archive"),l(),s(6,"div",4)(7,"span"),F(8,$m,3,4,"span")(9,Wm,3,4,"span"),p(10),l()()(),F(11,qm,7,0,"div",5),l(),s(12,"div",6)(13,"strong"),p(14,"Sorting"),l(),s(15,"div",7)(16,"app-sort-files",8),x("optionSelected",function(a){return _(n),b(i.onTypeSelect(a))}),l(),s(17,"app-sort-files",8),x("optionSelected",function(a){return _(n),b(i.onPeopleSelect(a))}),l(),s(18,"app-sort-files",8),x("optionSelected",function(a){return _(n),b(i.onModifiedSelect(a))}),l()()(),s(19,"div",9)(20,"div",10),v(21,"img",11),s(22,"strong"),p(23,"Today"),l()(),s(24,"div",12),F(25,Zm,2,2,"div",13),l()()(),s(26,"div",2,0)(28,"app-file-info",14),x("closeInfoEvent",function(){return _(n),b(i.closeInfo())})("addTag",function(){return _(n),b(i.onAddTag())})("share",function(){return _(n),b(i.onShare())}),l()()()}if(t&2){let n,r;k("expand",i.shownInfo),c(8),K(((n=i.totalFileSize)!==null&&n!==void 0?n:0)>1?8:9),c(2),M(" | ",(r=i.fileCount)!==null&&r!==void 0?r:0," items"),c(),h("ngIf",i.shownInfo),c(5),h("label","Type")("icon","assets/icons/file-text.svg")("options",R(27,Um)),c(),h("label","People")("icon","assets/icons/profile-middle.svg")("options",R(28,Hm)),c(),h("label","Modified")("icon","assets/icons/modified-middle.svg")("options",R(29,Qm)),c(7),h("ngForOf",i.projectFiles),c(),k("active",i.shownInfo),c(2),h("fileName",i.selectedFile==null?null:i.selectedFile.title)("fileMidea",i.selectedFile)("owner",i.selectedFile==null?null:i.selectedFile.createdByUserId)("tags",i.selectedFile==null?null:i.selectedFile.tags)("description",i.selectedProject==null?null:i.selectedProject.brief)("projectDetails",i.selectedProject)("fileDetails",i.selectedFile)("accessUsers",i.selectedFile==null?null:i.selectedFile.accessUsers)("timeline",i.selectedFile==null?null:i.selectedFile.timeline)("data",i.selectedFile)}},dependencies:[J,Z,_e,Ee,ke,ye],encapsulation:2})};var Xo=()=>["/projects/project-details"],Yo=o=>({id:o}),Ba=()=>["/projects/folder-details"],Ua=(o,e)=>({id:o,projectId:e}),Xm=()=>["/search"];function Ym(o,e){o&1&&rt(0)}function Gm(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(3).$implicit;c(),M("",L(2,1,((t=i==null?null:i.filesSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function Km(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(3).$implicit;c(),M("",L(2,1,((t=i==null?null:i.filesSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function Jm(o,e){if(o&1&&(s(0,"div",13)(1,"a",15)(2,"h3",16),v(3,"img",17),p(4),l(),s(5,"div",18)(6,"div",19)(7,"span"),F(8,Gm,3,4,"span")(9,Km,3,4,"span"),p(10),l()()()()()),o&2){let t,i=g(2).$implicit;c(),h("routerLink",R(5,Xo))("queryParams",se(6,Yo,i.projectId)),c(3),M(" ",i.title," "),c(4),K(((t=i==null?null:i.filesSize)!==null&&t!==void 0?t:0)>1?8:9),c(2),M(" | ",i==null?null:i.filesNum," items ")}}function eu(o,e){if(o&1&&F(0,Jm,11,8,"div",14),o&2){let t=g(3);h("ngIf",t.selectedType=="project"||t.selectedType=="all")}}function tu(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(3).$implicit;c(),M("",L(2,1,((t=i==null?null:i.filesSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function iu(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(3).$implicit;c(),M("",L(2,1,((t=i==null?null:i.filesSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function nu(o,e){if(o&1&&(s(0,"div",13)(1,"a",15)(2,"h3",16),v(3,"img",20),p(4),l()(),s(5,"div",18)(6,"div",21)(7,"span",22),F(8,tu,3,4,"span")(9,iu,3,4,"span"),p(10),l(),p(11," | "),l(),s(12,"a",23),p(13),l()()()),o&2){let t,i=g(2).$implicit;c(),h("routerLink",R(8,Ba))("queryParams",$e(9,Ua,i.folderId,i.projectId)),c(3),M(" ",i.title," "),c(4),K(((t=i==null?null:i.filesSize)!==null&&t!==void 0?t:0)>1?8:9),c(2),M(" | ",i==null?null:i.filesNum," items "),c(2),h("routerLink",R(12,Xo))("queryParams",se(13,Yo,i.projectId)),c(),z(i.projectTitle)}}function ou(o,e){if(o&1&&F(0,nu,14,15,"div",14),o&2){let t=g(3);h("ngIf",t.selectedType=="folder"||t.selectedType=="all")}}function ru(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(3).$implicit;c(),M("",L(2,1,((t=i==null?null:i.fileSize)!==null&&t!==void 0?t:0)/1.024,"1.2-2")," MB")}}function au(o,e){if(o&1&&(s(0,"span"),p(1),j(2,"number"),l()),o&2){let t,i=g(3).$implicit;c(),M("",L(2,1,((t=i==null?null:i.filesSize)!==null&&t!==void 0?t:0)*1024,"1.2-2")," KB")}}function su(o,e){o&1&&v(0,"img",28)}function lu(o,e){if(o&1&&(s(0,"a",15),p(1),l()),o&2){let t=g(3).$implicit;h("routerLink",R(3,Ba))("queryParams",$e(4,Ua,t.folderId,t.projectId)),c(),z(t.folderTitle)}}function cu(o,e){if(o&1&&(s(0,"div",13)(1,"a",24)(2,"h3",16),v(3,"img",25),p(4),l()(),s(5,"div",18)(6,"div",21)(7,"span",22),F(8,ru,3,4,"span")(9,au,3,4,"span"),l(),p(10," | "),l(),s(11,"div")(12,"a",15),p(13),l(),F(14,su,1,0,"img",26)(15,lu,2,7,"a",27),l()()()),o&2){let t,i=g(2).$implicit;c(),h("routerLink",R(8,Xm)),c(3),M(" ",i.title," "),c(4),K(((t=i==null?null:i.fileSize)!==null&&t!==void 0?t:0)>1?8:9),c(4),h("routerLink",R(9,Xo))("queryParams",se(10,Yo,i.projectId)),c(),z(i.projectTitle),c(),h("ngIf",i.folderTitle),c(),h("ngIf",i.folderTitle)}}function du(o,e){if(o&1&&F(0,cu,16,12,"div",14),o&2){let t=g(3);h("ngIf",t.selectedType=="file"||t.selectedType=="all")}}function pu(o,e){if(o&1&&(s(0,"div"),F(1,eu,1,1,"div",13)(2,ou,1,1,"div",13)(3,du,1,1,"div",13),l()),o&2){let t,i=e.$implicit;c(),K((t=i._type)==="project"?1:t==="folder"?2:t==="file"?3:-1)}}function mu(o,e){if(o&1){let t=O();s(0,"div",6)(1,"a",7),x("click",function(n){return _(t),g().setFilter("all"),b(n.preventDefault())}),v(2,"img",8),p(3," All "),l(),s(4,"a",7),x("click",function(n){return _(t),g().setFilter("project"),b(n.preventDefault())}),v(5,"img",9),p(6," Project "),l(),s(7,"a",7),x("click",function(n){return _(t),g().setFilter("folder"),b(n.preventDefault())}),v(8,"img",10),p(9," folder "),l(),s(10,"a",7),x("click",function(n){return _(t),g().setFilter("file"),b(n.preventDefault())}),v(11,"img",11),p(12," file "),l()(),F(13,pu,4,1,"div",12)}if(o&2){let t=g();c(),k("active",t.selectedType==="all"),c(3),k("active",t.selectedType==="project"),c(3),k("active",t.selectedType==="folder"),c(3),k("active",t.selectedType==="file"),c(3),h("ngForOf",t.allSearchResults)}}function uu(o,e){o&1&&(s(0,"div",29),v(1,"img",30),s(2,"h2"),p(3,"No results found"),l(),s(4,"h4"),p(5,"We couldn\u2019t find anything matching your search."),l()())}var so=class o{constructor(e,t,i,n,r,a,d,m){this.route=e;this.renderer=t;this.projectService=i;this.modalService=n;this.router=r;this.toaster=a;this.translate=d;this.categoriesService=m}projectFileQuery;projectFolderQuery;active=1;uploads=[];projects=[];projectFolders=[];projectFiles=[];colors=[];isUpload=!1;count=0;bootstrap;subscriptions=[];isFetchingProjects=!1;isFetchingProjectFolders=!1;isFetchingFiles=!1;isFetchingColors=!1;selectedType="all";keyword=null;allSearchResults;ngOnInit(){this.projectFolderQuery=new Ke,this.projectFolderQuery.projectId=null,this.projectFolderQuery.parentId=null,this.projectFolderQuery.sortOrder=null,this.projectFolderQuery.pageNumber=1,this.projectFolderQuery.pageSize=1e3,this.projectFolderQuery.FavUserId=null,this.projectFolderQuery.isActive=!0,this.projectFolderQuery.showCurrentUserFav=!0,this.projectFolderQuery.type=null,this.projectFileQuery=new Pe,this.projectFileQuery.projectId=null,this.projectFileQuery.folderId=null,this.projectFileQuery.sortField=null,this.projectFileQuery.pageNumber=1,this.projectFileQuery.pageSize=10,this.projectFileQuery.FavUserId=null,this.projectFileQuery.isActive=!0,this.projectFileQuery.ShowCurrentUserFav=!0,this.projectFileQuery.isArchived="false",this.route.queryParams.subscribe(e=>{if(this.keyword=e.keyword,this.fetchColors(),this.keyword){let t=document.getElementById("searchInput");t&&(t.value=this.keyword),dt({projects:this.projectService.fetchProjects(1,1e3,null,null,this.keyword),folders:this.projectService.fetchProjectFolders(Qe(he({},this.projectFolderQuery),{keyword:this.keyword})),files:this.projectService.fetchProjectFiles(Qe(he({},this.projectFileQuery),{keyword:this.keyword}))}).subscribe(({projects:i,folders:n,files:r})=>{this.projects=i?.data??[],this.projectFolders=n??[],this.projectFiles=r??[],this.collectResaults()})}})}collectResaults(){this.allSearchResults=[...this.projects.map(e=>he({_type:"project"},e)),...this.projectFolders.map(e=>he({_type:"folder"},e)),...this.projectFiles.map(e=>he({_type:"file"},e))],console.log(this.allSearchResults)}get filteredResults(){return this.selectedType==="all"?this.allSearchResults:this.allSearchResults.filter(e=>e._type===this.selectedType)}setFilter(e){this.selectedType=e}fetchColors(){if(this.isFetchingColors)return;this.isFetchingColors=!0;let e=this.categoriesService.fetchColors().subscribe(t=>{t&&(this.colors=t.data),this.isFetchingColors=!1});this.subscriptions.push(e)}getColor(e){let t=this.colors.find(i=>i.catId===e);return t?t.colorDegree:null}favorite(e){console.log(e),this.projectService.setFavourite(e).subscribe(t=>{this.toaster.success("",this.translate.instant("Favorite list updated successfully"))})}rename(e){let t=this.projectFiles.find(i=>i.fileId===e.fileId);t&&(t.title=e.filename)}archive(e){this.projectFiles=this.projectFiles.filter(t=>t.fileId!==e)}ngOnDestroy(){let e=document.getElementById("searchInput");e&&(e.value=""),this.subscriptions.forEach(t=>t.unsubscribe())}static \u0275fac=function(t){return new(t||o)(I(mt),I(de),I(re),I(Fe),I(Ne),I(oe),I(le),I(Je))};static \u0275cmp=N({type:o,selectors:[["app-search"]],standalone:!1,decls:10,vars:3,consts:[["thenBlock",""],["elseBlock",""],[1,"row"],[1,"col"],[1,"relativee"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"search-filters"],["href","#",3,"click"],["src","./assets/icons/search/all.svg","alt",""],["src","./assets/icons/search/project.svg","alt",""],["src","./assets/icons/search/folder.svg","alt",""],["src","./assets/icons/search/file.svg","alt",""],[4,"ngFor","ngForOf"],[1,"search-resault"],["class","search-resault",4,"ngIf"],[3,"routerLink","queryParams"],[1,"d-flex","align-items-center"],["src","./assets/icons/search/project.svg","alt","",1,"me-2"],[1,"breadcrumb","d-flex"],[1,"recent-file-footer","pt-2","d-flex","flex-row","align-items-center"],["src","./assets/icons/search/folder.svg","alt","",1,"me-2"],[1,"recent-file-footer","pt-0","d-flex","flex-row","align-items-center","me-1"],[1,"me-1"],[1,"ms-1",3,"routerLink","queryParams"],[3,"routerLink"],["src","./assets/icons/search/file.svg","alt","",1,"me-2"],["src","assets/icons/breadcrumb.svg","class","mx-2","alt","",4,"ngIf"],[3,"routerLink","queryParams",4,"ngIf"],["src","assets/icons/breadcrumb.svg","alt","",1,"mx-2"],[1,"no-resaults"],["src","./assets/icons/search/no-resaults.svg","alt",""]],template:function(t,i){if(t&1&&(s(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3"),p(4,"Search Result"),l(),F(5,Ym,1,0,"ng-container",5)(6,mu,14,9,"ng-template",null,0,ne)(8,uu,6,0,"ng-template",null,1,ne),l()()()),t&2){let n=V(7),r=V(9);c(5),h("ngIf",i.allSearchResults.length>1)("ngIfThen",n)("ngIfElse",r)}},dependencies:[J,Z,Se,ye],styles:[".file-info.fixed[_ngcontent-%COMP%]{position:relative;top:20px}ul.select2-results__options[_ngcontent-%COMP%]{height:125px}.nav-tabs[_ngcontent-%COMP%]{justify-content:flex-start;margin-bottom:0!important;padding-bottom:0!important;border-bottom:0!important}.nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:15px 25px}#header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px;width:50px}#header[_ngcontent-%COMP%]{width:69px;height:100%;position:absolute;left:0;top:0}"]})};var fu=[{path:"",component:hn,children:[{path:"",component:Hn,data:{title:"Home"}},{path:"recent-files",component:Qn,data:{title:"Recent files"}},{path:"projects",component:$n,data:{title:"Projects"}},{path:"bin",component:Wn,data:{title:"Trash"}},{path:"shared",component:qn,data:{title:"Shared with me"}},{path:"my-files",component:Zn,data:{title:"My Files"}},{path:"favorite",component:Xn,data:{title:"favorite"}},{path:"archive",component:ao,data:{title:"archive"}},{path:"search",component:so,data:{title:"search"}},{path:"projects/project-details",component:no,data:{title:"Project details",breadcrumb:"projects"}},{path:"projects/project-screen-details",component:oo,data:{title:"Project screen details",breadcrumb:"projects"}},{path:"projects/folder-details",component:ro,data:{title:"Folder details",breadcrumb:"projects"}}]}],lo=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=Vt({type:o});static \u0275inj=kt({imports:[Li.forChild(fu),Li]})};var Ha=class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=Vt({type:o});static \u0275inj=kt({imports:[ni,Lr,Nr,lo,ni,cn,ln,Li,Rr,Xt,Or,La]})};export{Ha as PagesModule};
